<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>GitHubæœç´¢æŠ€å·§ï¼šå¿«é€Ÿæ‰¾åˆ°ä½ æƒ³è¦çš„ä»£ç </title>
    <url>/xiaolangwiki/2024/07/23/50/</url>
    <content><![CDATA[<h2 id="GitHubæœç´¢æŠ€å·§ğŸš€ï¼šå¿«é€Ÿæ‰¾åˆ°ä½ æƒ³è¦çš„ä»£ç "><a href="#GitHubæœç´¢æŠ€å·§ğŸš€ï¼šå¿«é€Ÿæ‰¾åˆ°ä½ æƒ³è¦çš„ä»£ç " class="headerlink" title="GitHubæœç´¢æŠ€å·§ğŸš€ï¼šå¿«é€Ÿæ‰¾åˆ°ä½ æƒ³è¦çš„ä»£ç "></a>GitHubæœç´¢æŠ€å·§ğŸš€ï¼šå¿«é€Ÿæ‰¾åˆ°ä½ æƒ³è¦çš„ä»£ç </h2><p>åŸæ–‡ï¼š<a href="https://juejin.cn/post/7386299931399110706">https://juejin.cn/post/7386299931399110706</a></p>
<p>å˜¿ï¼Œå¼€å‘è€…æœ‹å‹ä»¬ï¼ ğŸ‘‹</p>
<p>ä½ æ˜¯å¦æ›¾è¿·å¤±åœ¨GitHubçš„æµ©ç€šä»£ç æµ·æ´‹ä¸­ï¼Œè‹¦è‹¦å¯»æ‰¾é‚£ä»½çè´µçš„ä»£ç ç‰‡æ®µæˆ–é¡¹ç›®ï¼Ÿ ğŸ˜© åˆ«æ‹…å¿ƒï¼Œä»Šå¤©æˆ‘å°†ä¼ æˆä½ GitHubæœç´¢çš„Jediç§˜è¯€ï¼Œè®©ä½ åƒä¸€ä½æœç´¢å¤§å¸ˆä¸€æ ·ï¼Œè½»æ¾æ‰¾åˆ°ä½ æƒ³è¦çš„ä»»ä½•ä¸œè¥¿ï¼ âœ¨</p>
<p><strong>åŸºç¡€åŠŸï¼šå…³é”®è¯å’Œè¿‡æ»¤å™¨</strong></p>
<p>é¦–å…ˆï¼ŒæŒæ¡åŸºç¡€è¯­æ³•å°±åƒå­¦ä¹ é­”æ³•å’’è¯­ä¸€æ ·é‡è¦ã€‚ ğŸª„</p>
<ul>
<li><strong>å…³é”®è¯:</strong> ç›´æ¥è¾“å…¥ä½ æƒ³æ‰¾çš„å†…å®¹ï¼Œä¾‹å¦‚ â€œpythonâ€ã€â€machine learningâ€ã€‚</li>
<li><strong>æ–‡ä»¶ç±»å‹:</strong> æƒ³æ‰¾Pythonæ–‡ä»¶ï¼ŸåŠ ä¸ª <code>extension:py</code> å°±è¡Œå•¦ï¼</li>
<li><strong>è·¯å¾„:</strong> åªæƒ³çŸ¥é“â€docsâ€æ–‡ä»¶å¤¹é‡Œçš„æ–‡ä»¶ï¼Ÿç”¨ <code>path:docs</code> å°±èƒ½ç²¾å‡†å®šä½ï¼</li>
<li><strong>ç”¨æˆ·/ç»„ç»‡:</strong> æƒ³çœ‹çœ‹æŸä¸ªå¤§ç‰›çš„é¡¹ç›®ï¼Ÿç”¨ <code>user:username</code> æˆ– <code>org:organization</code> å°±èƒ½æ‰¾åˆ°ï¼</li>
</ul>
<p><strong>è¿›é˜¶æŠ€å·§ï¼šè¿ç®—ç¬¦å’Œç‰¹æ®Šå­—ç¬¦</strong></p>
<p>æƒ³è¦æ›´ç²¾å‡†åœ°æœç´¢ï¼Ÿ ğŸ¯ é‚£å°±æ¥ç‚¹é«˜çº§æŠ€å·§å§ï¼</p>
<ul>
<li><strong>AND:</strong> ç”¨ <code>+</code> æˆ–ç©ºæ ¼è¿æ¥å…³é”®è¯ï¼Œä¾‹å¦‚ <code>&quot;machine learning&quot; +python</code>ï¼Œè¡¨ç¤ºå¿…é¡»åŒæ—¶åŒ…å«è¿™ä¸¤ä¸ªå…³é”®è¯ã€‚</li>
<li><strong>OR:</strong> ç”¨ <code>|</code> è¿æ¥å…³é”®è¯ï¼Œä¾‹å¦‚ <code>&quot;machine learning&quot; |&quot;deep learning&quot;</code>ï¼Œè¡¨ç¤ºåªè¦åŒ…å«å…¶ä¸­ä¸€ä¸ªå…³é”®è¯å³å¯ã€‚</li>
<li><strong>NOT:</strong> ç”¨ <code>-</code> æ’é™¤å…³é”®è¯ï¼Œä¾‹å¦‚ <code>&quot;machine learning&quot; -python</code>ï¼Œè¡¨ç¤ºä¸åŒ…å« â€œpythonâ€ çš„ç»“æœã€‚</li>
<li><strong>æ‹¬å·:</strong> ç”¨æ‹¬å·åˆ†ç»„å…³é”®è¯ï¼Œä¾‹å¦‚ <code>(machine learning) +python</code>ï¼Œå¯ä»¥æ›´ç²¾ç¡®åœ°æ§åˆ¶æœç´¢èŒƒå›´ã€‚</li>
<li><strong>é€šé…ç¬¦:</strong> ç”¨ <code>*</code> åŒ¹é…ä»»æ„å­—ç¬¦ï¼Œä¾‹å¦‚ <code>machine*</code> å¯ä»¥åŒ¹é… â€œmachine learningâ€ã€â€machine visionâ€ ç­‰ã€‚</li>
<li><strong>æ­£åˆ™è¡¨è¾¾å¼:</strong> å¦‚æœä½ æ˜¯ä¸€ä½æ­£åˆ™è¡¨è¾¾å¼é«˜æ‰‹ï¼Œå¯ä»¥ä½¿ç”¨ <code>/regex/</code> æ¥è¿›è¡Œæ›´å¤æ‚çš„åŒ¹é…ã€‚</li>
</ul>
<p><strong>ç»ˆæç§˜ç±ï¼šé«˜çº§é€‰é¡¹</strong></p>
<p>æƒ³è¦åƒæœç´¢å¤§å¸ˆä¸€æ ·ï¼ŒæŒæ¡æ›´å¤šç§˜å¯†æ­¦å™¨ï¼Ÿ âš”ï¸</p>
<ul>
<li><strong>stars:</strong><code>stars:&gt;number</code> å¯ä»¥æ‰¾åˆ°æ˜Ÿæ ‡æ•°é‡å¤§äºæŒ‡å®šæ•°å­—çš„ä»“åº“ï¼Œä¾‹å¦‚ <code>stars:&gt;1000</code>ã€‚</li>
<li><strong>forks:</strong><code>forks:&gt;number</code> å¯ä»¥æ‰¾åˆ° Forks æ•°é‡å¤§äºæŒ‡å®šæ•°å­—çš„ä»“åº“ï¼Œä¾‹å¦‚ <code>forks:&gt;100</code>ã€‚</li>
<li><strong>language:</strong><code>language:language</code> å¯ä»¥æ‰¾åˆ°æŒ‡å®šè¯­è¨€ç¼–å†™çš„ä»£ç ï¼Œä¾‹å¦‚ <code>language:python</code>ã€‚</li>
<li><strong>created/pushed/size:</strong> è¿˜å¯ä»¥æ ¹æ®åˆ›å»ºæ—¥æœŸã€æœ€åæ›´æ–°æ—¥æœŸå’Œä»“åº“å¤§å°è¿›è¡Œç­›é€‰ã€‚</li>
</ul>
<p><strong>æ¡ˆä¾‹åˆ†æï¼š</strong></p>
<p>å‡è®¾ä½ æƒ³å¯»æ‰¾ä¸€ä¸ªä½¿ç”¨ Python ç¼–å†™çš„ï¼Œå…³äºæœºå™¨å­¦ä¹ çš„å¼€æºé¡¹ç›®ï¼Œå¹¶ä¸”å¸Œæœ›å®ƒæ‹¥æœ‰è¶…è¿‡ 1000 ä¸ªæ˜Ÿæ ‡ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æœç´¢è¯­å¥ï¼š</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line"><span class="section">language:python machine learning stars:&gt;1000</span></span><br></pre></td></tr></table></figure>
<p>æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿ ğŸ¤©</p>
<p><strong>å°è´´å£«ï¼š</strong></p>
<ul>
<li>GitHub æœç´¢å¸®åŠ©æ–‡æ¡£æ˜¯ä½ çš„å¥½æœ‹å‹ï¼Œé‡Œé¢æœ‰æ›´å¤šé«˜çº§é€‰é¡¹å’Œè¯­æ³•ï¼š <a href="https://link.juejin.cn/?target=https%3A%2F%2Fdocs.github.com%2Fen%2Fsearch-github" title="https://docs.github.com/en/search-github">docs.github.com/en/search-gâ€¦</a></li>
<li>å–„ç”¨ä»£ç æœç´¢åŠŸèƒ½ï¼Œå¯ä»¥æ›´ç²¾å‡†åœ°æŸ¥æ‰¾ä»£ç ç‰‡æ®µã€‚</li>
<li>Issue å’Œ Pull Request æœç´¢åŠŸèƒ½ä¹Ÿèƒ½å¸®åŠ©ä½ æ‰¾åˆ°é—®é¢˜çš„è®¨è®ºå’Œä»£ç ä¿®æ”¹è¯·æ±‚ã€‚</li>
<li>ä¸è¦å®³æ€•å°è¯•ä¸åŒçš„æœç´¢è¯­å¥ï¼Œä¸æ–­ç»ƒä¹ æ‰èƒ½æˆä¸ºæœç´¢å¤§å¸ˆï¼</li>
</ul>
<p>GitHubæœç´¢Jediç§˜è¯€ï¼Œé€Ÿæ¥å­¦ä¹ ï¼ ğŸš€ è¿™ä»½ç¬”è®°è®°å½•äº†æˆ‘çš„ä¸€äº›å¿ƒå¾—ä½“ä¼šï¼Œå¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚</p>
]]></content>
      <categories>
        <category>GitHub</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
        <tag>ä»£ç æœç´¢</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»ä½¿ç”¨åˆ°è‡ªå·±å®ç°ç®€å•Vue Routerçœ‹è¿™ä¸ªå°±è¡Œ</title>
    <url>/xiaolangwiki/2021/07/24/17/</url>
    <content><![CDATA[<h2 id="ä»ä½¿ç”¨åˆ°è‡ªå·±å®ç°ç®€å•Vue-Routerçœ‹è¿™ä¸ªå°±è¡Œäº†"><a href="#ä»ä½¿ç”¨åˆ°è‡ªå·±å®ç°ç®€å•Vue-Routerçœ‹è¿™ä¸ªå°±è¡Œäº†" class="headerlink" title="ä»ä½¿ç”¨åˆ°è‡ªå·±å®ç°ç®€å•Vue Routerçœ‹è¿™ä¸ªå°±è¡Œäº†"></a>ä»ä½¿ç”¨åˆ°è‡ªå·±å®ç°ç®€å•Vue Routerçœ‹è¿™ä¸ªå°±è¡Œäº†</h2><p>åŸæ–‡ï¼š<a href="https://juejin.cn/post/6988316779818778631">https://juejin.cn/post/6988316779818778631</a></p>
<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><blockquote>
<p>è¿™æ˜¯å°æµªåœ¨å­¦ä¹ <strong>Vue Router</strong> æ€»ç»“çš„ç¬”è®°ï¼Œæœ‰çš„åœ°æ–¹å†™çš„ä¸æ˜¯å¾ˆå¥½ï¼Œè¯·å¤§å®¶å¤šå¤šæŒ‡æ•™</p>
<ul>
<li>è¿™é‡Œå¸¦ä½ äº†è§£ <strong>Vue Router</strong> çš„åŸºæœ¬ä½¿ç”¨</li>
<li>æ‰‹å†™ä¸€ä¸ªåŸºç¡€çš„ <strong>Vue Router</strong> æ„Ÿå—ä¸‹åŸºç¡€çš„å®ç°</li>
<li>æœ‰äº†ä¹‹å‰çš„åŸºç¡€ï¼Œé‚£ä¹ˆæŒ‰ç…§å®˜æ–¹çš„æºç  å†å†™ä¸ª <strong>Vue Router</strong> å§</li>
</ul>
<p>åœ¨ä¸¤ä¸ªæ‰‹å†™<strong>Vue Router</strong>åœ°æ–¹æˆ‘éƒ½æœ‰å†™è¯¦ç»†çš„æ³¨é‡Š</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œå»ºè®®è‡ªå·±æ‰‹åŠ¨å»æ•²ä¸‹</p>
<p>æœ€åï¼šå°æµªåœ¨çº¿<strong>æ±‚èµ</strong></p>
</blockquote>
<h1 id="Vue-Router-åŸºç¡€"><a href="#Vue-Router-åŸºç¡€" class="headerlink" title="Vue Router åŸºç¡€"></a>Vue Router åŸºç¡€</h1><p>è®©æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸‹<code>Vue Router</code>çš„ç®€å•ä½¿ç”¨å§ï¼Œå…ˆäº†è§£æ€ä¹ˆä½¿ç”¨ï¼Œä¹‹åå†å»æƒ³åŠæ³•æ€ä¹ˆå»å®ç°</p>
<h2 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1.ç®€ä»‹"></a>1.ç®€ä»‹</h2><p>è·¯ç”±ï¼šæœ¬è´¨ä¸Šæ˜¯ä¸€ç§å¯¹åº”å…³ç³»</p>
<p>åˆ†ç±»åˆ†ä¸º<strong>å‰ç«¯è·¯ç”±</strong>å’Œ<strong>åç«¯è·¯ç”±</strong></p>
<blockquote>
<p>åç«¯è·¯ç”±</p>
</blockquote>
<p>æ¯”å¦‚node.js çš„è·¯ç”±æ˜¯ <strong>URL</strong>çš„è¯·æ±‚åœ°å€å’ŒæœåŠ¡å™¨ä¸Šé¢çš„<strong>èµ„æº</strong>å¯¹åº”ï¼Œæ ¹æ®ä¸åŒçš„è¯·æ±‚åœ°å€è¿”å›ä¸åŒçš„èµ„æº</p>
<blockquote>
<p>å‰ç«¯è·¯ç”±</p>
</blockquote>
<p>åœ¨<strong>SPA</strong>ï¼ˆå•é¡µåº”ç”¨ï¼‰ä¸­æ ¹æ®ç”¨æˆ·æ‰€è§¦å‘çš„äº‹ä»¶æ”¹å˜äº†<strong>URL</strong> åœ¨æ— éœ€åˆ·æ–°çš„å‰æä¸‹ æ˜¾ç¤ºä¸åŒçš„é¡µé¢å†…å®¹ï¼Œæ¯”å¦‚ç­‰ä¸‹å°±è¦è®²çš„<strong>Vue Router</strong></p>
<h2 id="2-Vue-Routeræœ€åŸºç¡€çš„ä½¿ç”¨æ­¥éª¤"><a href="#2-Vue-Routeræœ€åŸºç¡€çš„ä½¿ç”¨æ­¥éª¤" class="headerlink" title="2.Vue-Routeræœ€åŸºç¡€çš„ä½¿ç”¨æ­¥éª¤"></a>2.Vue-Routeræœ€åŸºç¡€çš„ä½¿ç”¨æ­¥éª¤</h2><h3 id="1-å¼•å…¥Vue-Routeræ–‡ä»¶"><a href="#1-å¼•å…¥Vue-Routeræ–‡ä»¶" class="headerlink" title="1.å¼•å…¥Vue-Routeræ–‡ä»¶"></a>1.å¼•å…¥Vue-Routeræ–‡ä»¶</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/vue-router_3.0.2.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-åœ¨é¡µé¢ä¸Šæ·»åŠ -router-link-å’Œ-router-view"><a href="#2-åœ¨é¡µé¢ä¸Šæ·»åŠ -router-link-å’Œ-router-view" class="headerlink" title="2.åœ¨é¡µé¢ä¸Šæ·»åŠ  router-link å’Œ router-view"></a>2.åœ¨é¡µé¢ä¸Šæ·»åŠ  router-link å’Œ router-view</h3> <figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/login&quot;</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-åˆ›å»ºè·¯ç”±ç»„ä»¶"><a href="#3-åˆ›å»ºè·¯ç”±ç»„ä»¶" class="headerlink" title="3.åˆ›å»ºè·¯ç”±ç»„ä»¶"></a>3.åˆ›å»ºè·¯ç”±ç»„ä»¶</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> home = &#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">&lt;div&gt;æ¬¢è¿æ¥åˆ°&#123;&#123;name&#125;&#125;&lt;/div&gt;</span></span><br><span class="line"><span class="string">`</span>,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;é¦–é¡µ&#x27;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> login = &#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">		&lt;div&gt;æ¬¢è¿æ¥åˆ°ç™»å½•é¡µ&lt;/div&gt;</span></span><br><span class="line"><span class="string">	`</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-é…ç½®è·¯ç”±è§„åˆ™"><a href="#4-é…ç½®è·¯ç”±è§„åˆ™" class="headerlink" title="4.é…ç½®è·¯ç”±è§„åˆ™"></a>4.é…ç½®è·¯ç”±è§„åˆ™</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>: \[</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line"></span><br><span class="line">            <span class="attr">redirect</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: home,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: login,</span><br><span class="line">        &#125;,</span><br><span class="line">    \],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="5-æŒ‚è½½è·¯ç”±"><a href="#5-æŒ‚è½½è·¯ç”±" class="headerlink" title="5.æŒ‚è½½è·¯ç”±"></a>5.æŒ‚è½½è·¯ç”±</h3> <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">        <span class="attr">methods</span>: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">        router,</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/76bdf2efd0d14eecb50e7dfc199e36f3~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="2"></p>
<h2 id="3-åµŒå¥—è·¯ç”±"><a href="#3-åµŒå¥—è·¯ç”±" class="headerlink" title="3.åµŒå¥—è·¯ç”±"></a>3.åµŒå¥—è·¯ç”±</h2><blockquote>
<p>è¿™é‡Œçš„åµŒå¥—è·¯ç”±æ˜¯åŸºäºä¸Šé¢çš„ä¾‹å­ç»§ç»­å†™çš„</p>
</blockquote>
<h3 id="1-åœ¨è·¯ç”±é‡Œé¢æ·»åŠ -å­è·¯ç”±é“¾æ¥å’Œ-å ä½ç¬¦"><a href="#1-åœ¨è·¯ç”±é‡Œé¢æ·»åŠ -å­è·¯ç”±é“¾æ¥å’Œ-å ä½ç¬¦" class="headerlink" title="1.åœ¨è·¯ç”±é‡Œé¢æ·»åŠ  å­è·¯ç”±é“¾æ¥å’Œ å ä½ç¬¦"></a>1.åœ¨è·¯ç”±é‡Œé¢æ·»åŠ  å­è·¯ç”±é“¾æ¥å’Œ å ä½ç¬¦</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> home = &#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">    æ¬¢è¿æ¥åˆ°é¦–é¡µ</span></span><br><span class="line"><span class="string">    &lt;br&gt;</span></span><br><span class="line"><span class="string">    &lt;!\-\- å­è·¯ç”±é“¾æ¥ --&gt;</span></span><br><span class="line"><span class="string">    &lt;router-link to=&quot;/tab1&quot;&gt;Tab1&lt;/router-link&gt;</span></span><br><span class="line"><span class="string">    &lt;router-link to=&quot;/tab2&quot;&gt;Tab2&lt;/router-link&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;!\-\- å­è·¯ç”±å±•ç¤º --&gt;</span></span><br><span class="line"><span class="string">    &lt;router-view&gt;&lt;/router-view&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="2-æ·»åŠ è·¯ç”±ç»„ä»¶"><a href="#2-æ·»åŠ è·¯ç”±ç»„ä»¶" class="headerlink" title="2.æ·»åŠ è·¯ç”±ç»„ä»¶"></a>2.æ·»åŠ è·¯ç”±ç»„ä»¶</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> tab1 = &#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">    å­è·¯ç”±1</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> tab2 = &#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">    å­è·¯ç”±2</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-é…ç½®è·¯ç”±è§„åˆ™"><a href="#3-é…ç½®è·¯ç”±è§„åˆ™" class="headerlink" title="3.é…ç½®è·¯ç”±è§„åˆ™"></a>3.é…ç½®è·¯ç”±è§„åˆ™</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>: \[</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: home,</span><br><span class="line"></span><br><span class="line">            <span class="attr">children</span>: \[</span><br><span class="line">                &#123; <span class="attr">path</span>: <span class="string">&#x27;/tab1&#x27;</span>, <span class="attr">component</span>: tab1 &#125;,</span><br><span class="line">                &#123; <span class="attr">path</span>: <span class="string">&#x27;/tab2&#x27;</span>, <span class="attr">component</span>: tab2 &#125;,</span><br><span class="line">            \],</span><br><span class="line">        &#125;,</span><br><span class="line">    \],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3c79adc65ba146ba89240855603e262c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="3"></p>
<h2 id="4-åŠ¨æ€è·¯ç”±"><a href="#4-åŠ¨æ€è·¯ç”±" class="headerlink" title="4.åŠ¨æ€è·¯ç”±"></a>4.åŠ¨æ€è·¯ç”±</h2><blockquote>
<p><code>path</code>å±æ€§åŠ ä¸Š<code>/:id</code> ä½¿ç”¨<code>route</code>å¯¹è±¡çš„<code>params.id</code>è·å–åŠ¨æ€å‚æ•°</p>
</blockquote>
<p>æ¯”å¦‚ç°åœ¨æœ‰è¿™ä¹ˆå¤šä¸ªè·¯ç”±ï¼Œå¦‚æœè‡ªå·±ä¹Ÿé…ç½®å¤šä¸ªè·¯ç”±ï¼Œå²‚ä¸æ˜¯æœ‰ç‚¹ã€‚ã€‚ã€‚å¤šä½™</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/goods/1&quot;</span>&gt;</span>goods1<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/goods/2&quot;</span>&gt;</span>goods2<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/goods/3&quot;</span>&gt;</span>goods3<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/goods/4&quot;</span>&gt;</span>goods4<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç„¶åè¿™é‡Œå°±å¯ä»¥ä½¿ç”¨ åŠ¨æ€è·¯ç”±æ¥è§£å†³</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> goods = &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div&gt;æ¬¢è¿æ¥åˆ°å•†å“ &#123;&#123;$route.params.id&#125;&#125;é¡µ&lt;/div&gt;</span></span><br><span class="line"><span class="string">        `</span>,</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">        <span class="attr">routes</span>: \[</span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                <span class="attr">path</span>: <span class="string">&#x27;/goods/:id&#x27;</span>,</span><br><span class="line">                <span class="attr">component</span>: goods,</span><br><span class="line">            &#125;,</span><br><span class="line">        \],</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">let</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">        <span class="attr">methods</span>: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">        router,</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2ccc5241e7f94107b59e39225390b0e6~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="4"></p>
<blockquote>
<p>æœ€åæä¸€ä¸‹è¿˜å¯ä»¥ç”¨<strong>query</strong>è¿›è¡Œä¼ å‚.</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">// æ¯”å¦‚</span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/goods?id=1&quot;</span>&gt;</span>goods<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç„¶åä½¿ç”¨<code>this.$route.query.id</code>å°±å¯ä»¥åœ¨è·¯ç”±ç»„ä»¶ä¸­è·å–åˆ°<strong>id</strong></p>
<blockquote>
<p>æ·»åŠ åŠ¨æ€è·¯ç”±</p>
</blockquote>
<p>ä½¿ç”¨ <code>this.$router.addRoutes(\[\])</code> å¯ä»¥<strong>æ·»åŠ åŠ¨æ€è·¯ç”±</strong>,é‡Œé¢ä¼ é€’æ˜¯ä¸€ä¸ªæ•°ç»„ å’Œ <strong>routes</strong>é‡Œé¢ä¸€æ ·</p>
<h2 id="5-è·¯ç”±ä¼ å‚"><a href="#5-è·¯ç”±ä¼ å‚" class="headerlink" title="5.è·¯ç”±ä¼ å‚"></a>5.è·¯ç”±ä¼ å‚</h2><blockquote>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ props è¿›è¡Œä¼ å€¼</p>
<p>ä¸ºå•¥è¦ç”¨ props è¿›è¡Œä¼ å€¼ï¼Œrouteä¸é¦™äº†å—ï¼Œç¡®å®route ä¸å¤Ÿçµæ´»</p>
<p>props å€¼æœ‰ä¸‰ç§æƒ…å†µ</p>
</blockquote>
<h3 id="1-å¸ƒå°”å€¼ç±»å‹"><a href="#1-å¸ƒå°”å€¼ç±»å‹" class="headerlink" title="1.å¸ƒå°”å€¼ç±»å‹"></a>1.å¸ƒå°”å€¼ç±»å‹</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> goods = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">props</span>: \[<span class="string">&#x27;id&#x27;</span>\],</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;æ¬¢è¿æ¥åˆ°å•†å“ &#123;&#123;id&#125;&#125;é¡µ&lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>: \[</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/goods/:id&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: goods,</span><br><span class="line"></span><br><span class="line">            <span class="attr">props</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    \],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="2-å¯¹è±¡ç±»å‹"><a href="#2-å¯¹è±¡ç±»å‹" class="headerlink" title="2.å¯¹è±¡ç±»å‹"></a>2.å¯¹è±¡ç±»å‹</h3><p>ä½†æ˜¯è¿™é‡Œå°±è·å–ä¸åˆ° <code>id</code> äº†ï¼Œä¼š<strong>æŠ¥é”™</strong></p>
<p>è¿™é‡Œçš„id éœ€è¦ <code>$route.params.id</code> è·å–</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> goods = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">props</span>: \[<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;info&#x27;</span>, <span class="string">&#x27;id&#x27;</span>\],</span><br><span class="line"></span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;&#123;&#123;info&#125;&#125;æ¥åˆ°&#123;&#123;name&#125;&#125; &#123;&#123;id&#125;&#125;é¡µ&lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>: \[</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/goods/:id&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: goods,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="attr">props</span>: &#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;å•†å“&#x27;</span>,</span><br><span class="line">                <span class="attr">info</span>: <span class="string">&#x27;æ¬¢è¿&#x27;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    \],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="3-å‡½æ•°"><a href="#3-å‡½æ•°" class="headerlink" title="3.å‡½æ•°"></a>3.å‡½æ•°</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> goods = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">props</span>: \[<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;info&#x27;</span>, <span class="string">&#x27;id&#x27;</span>\],</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;&#123;&#123;info&#125;&#125;æ¥åˆ°&#123;&#123;name&#125;&#125; &#123;&#123;id&#125;&#125;é¡µ&lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>: \[</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/goods/:id&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: goods,</span><br><span class="line"></span><br><span class="line">            <span class="attr">props</span>: <span class="function">(<span class="params">route</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> &#123;</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;å•†å“&#x27;</span>,</span><br><span class="line">                    <span class="attr">info</span>: <span class="string">&#x27;æ¬¢è¿&#x27;</span>,</span><br><span class="line">                    <span class="attr">id</span>: route.<span class="property">params</span>.<span class="property">id</span>,</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    \],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="6-route-å’Œ-router"><a href="#6-route-å’Œ-router" class="headerlink" title="6.route å’Œ router"></a>6.route å’Œ router</h2><blockquote>
<p>åœ¨ä¸Šé¢æåˆ°äº†<strong>route</strong> é‚£ä¹ˆå’Œ <strong>router</strong>æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢</p>
</blockquote>
<ul>
<li><strong>route</strong>ä¸º<strong>å½“å‰routerè·³è½¬å¯¹è±¡</strong>é‡Œé¢å¯ä»¥è·å–<strong>path</strong>ï¼Œ<strong>params</strong>ï¼Œ<strong>hash</strong>ï¼Œ<strong>query</strong>ï¼Œ<strong>fullPath</strong>ï¼Œ<strong>matched</strong>ï¼Œ<strong>name</strong></li>
<li><strong>router</strong>ä¸º<strong>VueRouterå®ä¾‹</strong>ç”¨ <strong>new VueRouter</strong>åˆ›å»ºçš„å®ä¾‹ï¼Œæƒ³è¦å¯¼èˆªåˆ°ä¸åŒ<strong>URL</strong>ï¼Œåˆ™ä½¿ç”¨<code>router.push</code>æ–¹æ³•</li>
<li><strong>routes</strong>æ˜¯<strong>router</strong>è·¯ç”±å®ä¾‹ç”¨æ¥é…ç½®è·¯ç”±å¯¹è±¡ï¼ˆé¡ºå¸¦æä¸€ä¸‹ï¼‰</li>
</ul>
<h2 id="7-å‘½åè·¯ç”±"><a href="#7-å‘½åè·¯ç”±" class="headerlink" title="7.å‘½åè·¯ç”±"></a>7.å‘½åè·¯ç”±</h2><p>è·¯ç”±ç»„ä»¶</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> goods = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">props</span>: \[<span class="string">&#x27;id&#x27;</span>\],</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;å•†å“&#123;&#123;id&#125;&#125;é¡µ&lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è·¯ç”±é…ç½®</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>: \[</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/goods/:id&#x27;</span>,</span><br><span class="line"></span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;goods&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: goods,</span><br><span class="line">        &#125;,</span><br><span class="line">    \],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>ç»‘å®š <code>:to</code> é€šè¿‡<code>name</code>æ‰¾åˆ°å®šä¹‰çš„è·¯ç”± è¿˜å¯ä»¥ä½¿ç”¨ <code>params</code> ä¼ é€’å‚æ•°</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;name: &#x27;goods&#x27;, params: &#123; id: 1 &#125; &#125;&quot;</span>&gt;</span>goods1<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="8-ç¼–ç¨‹å¼å¯¼èˆª"><a href="#8-ç¼–ç¨‹å¼å¯¼èˆª" class="headerlink" title="8.ç¼–ç¨‹å¼å¯¼èˆª"></a>8.ç¼–ç¨‹å¼å¯¼èˆª</h2><h3 id="1-å£°æ˜å¼å¯¼èˆª"><a href="#1-å£°æ˜å¼å¯¼èˆª" class="headerlink" title="1.å£°æ˜å¼å¯¼èˆª"></a>1.å£°æ˜å¼å¯¼èˆª</h3><blockquote>
<p>æ—¢ç„¶æåˆ°äº†ç¼–ç¨‹å¼å¯¼èˆªï¼Œé‚£ä¹ˆå…ˆç®€å•è¯´ä¸‹å£°æ˜å¼å¯¼èˆª</p>
</blockquote>
<p>ä¸Šé¢æ‰€å±•ç¤ºçš„éƒ½æ˜¯<strong>å£°æ˜æ˜¯å¯¼èˆª</strong> æ¯”å¦‚<strong>router-link</strong></p>
<p><code>&lt;router-link to=&quot;/goods/1&quot;&gt;goods1&lt;/router-link&gt;</code></p>
<p>è¿˜æœ‰<strong>a</strong>æ ‡ç­¾</p>
<p><code>&lt;a href=&quot;#/goods/1&quot;&gt;goods1&lt;/a&gt;</code></p>
<h3 id="2-ç¼–ç¨‹å¼å¯¼èˆª"><a href="#2-ç¼–ç¨‹å¼å¯¼èˆª" class="headerlink" title="2.ç¼–ç¨‹å¼å¯¼èˆª"></a>2.ç¼–ç¨‹å¼å¯¼èˆª</h3><blockquote>
<p>ä½¿ç”¨<strong>javaScript</strong>æ¥æ§åˆ¶<strong>è·¯ç”±è·³è½¬</strong></p>
</blockquote>
<p>åœ¨æ™®é€šçš„ç½‘é¡µä¸­ä½¿ç”¨ <code>loaction.href``window.open</code> ç­‰ç­‰è¿›è¡Œè·³è½¬</p>
<p>ç°åœ¨æˆ‘è¦ä»‹ç»çš„æ˜¯<strong>Vue Router</strong>ä¸­çš„ç¼–ç¨‹å¼å¯¼èˆª</p>
<p>æˆ‘ä»¬å¹³æ—¶éƒ½æ˜¯ç”¨<strong>router.push()</strong> **router.go(n)**æ–¹æ³•è¿›è¡Œè·³è½¬</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/home&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$ruter</span>.<span class="title function_">push</span>(&#123;<span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;<span class="attr">path</span>:<span class="string">&#x27;/goods&#x27;</span>,<span class="attr">query</span>:&#123;<span class="attr">id</span>:<span class="string">&#x27;1&#x27;</span>&#125;&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;goods&#x27;</span>,<span class="attr">params</span>:&#123;<span class="attr">id</span>:<span class="number">1</span>&#125;&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">go</span>(-<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<h2 id="9-è·¯ç”±å®ˆå«"><a href="#9-è·¯ç”±å®ˆå«" class="headerlink" title="9.è·¯ç”±å®ˆå«"></a>9.è·¯ç”±å®ˆå«</h2><h3 id="1-å…¨å±€å®ˆå«"><a href="#1-å…¨å±€å®ˆå«" class="headerlink" title="1.å…¨å±€å®ˆå«"></a>1.å…¨å±€å®ˆå«</h3><p><strong>router.beforeEach</strong> å…¨å±€å®ˆå« å¯¹æ‰€æœ‰çš„è·¯ç”±éƒ½èµ·ä½œç”¨</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">next</span>();</span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="title function_">next</span>(&#123; <span class="attr">path</span>: <span class="string">&#x27;/error&#x27;</span>, <span class="attr">replace</span>: <span class="literal">true</span>, <span class="attr">query</span>: &#123; <span class="attr">back</span>: <span class="literal">false</span> &#125;&#125;</span><br><span class="line">    )</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å…¨å±€çš„å®ˆå«çš„ä¸‰ä¸ªå‚æ•°</p>
</blockquote>
<p><code>to</code>: å³å°†è¦è¿›å…¥çš„ç›®æ ‡ è·¯ç”±å¯¹è±¡</p>
<p><code>from</code>: å½“å‰å¯¼èˆªæ­£è¦ç¦»å¼€ è·¯ç”±å¯¹è±¡</p>
<p><code>next</code>: å‚æ•°ä¸åŒåšçš„äº‹ä¹Ÿä¸åŒ</p>
<blockquote>
<ul>
<li><strong>next()</strong> ç›´æ¥è¿›å…¥ä¸‹ä¸€ä¸ªé’©å­</li>
<li><strong>next(false)</strong> åœæ­¢å½“å‰å¯¼èˆª</li>
<li><strong>next(â€˜/è·¯å¾„â€™)</strong> è·³è½¬åˆ°<strong>path</strong>è·¯ç”±åœ°å€ å½“ç„¶è¿™é‡Œé¢ä¹Ÿå¯ä»¥å†™æˆå¯¹è±¡å½¢å¼ <strong>next({path : â€˜/è·¯å¾„â€™})</strong></li>
<li><strong>next(error)</strong>: å¦‚æœä¼ å…¥å‚æ•°æ˜¯ä¸€ä¸ª <strong>Error</strong> å®ä¾‹ï¼Œåˆ™å¯¼èˆªä¼šè¢«ç»ˆæ­¢ä¸”è¯¥é”™è¯¯ä¼šè¢«ä¼ é€’ç»™ <code>router.onError()</code></li>
</ul>
</blockquote>
<h3 id="2-è·¯ç”±ç‹¬äº«çš„å®ˆå«"><a href="#2-è·¯ç”±ç‹¬äº«çš„å®ˆå«" class="headerlink" title="2.è·¯ç”±ç‹¬äº«çš„å®ˆå«"></a>2.è·¯ç”±ç‹¬äº«çš„å®ˆå«</h3><p><strong>beforeEnter</strong> è·¯ç”±å¯¹è±¡ç‹¬äº«çš„å®ˆå«å†™åœ¨<strong>routes</strong>é‡Œé¢</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>: \[</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/goods&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: goods,</span><br><span class="line">      <span class="attr">beforeEnter</span>: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  \]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="3-ç»„ä»¶å†…çš„å®ˆå«-äº†è§£"><a href="#3-ç»„ä»¶å†…çš„å®ˆå«-äº†è§£" class="headerlink" title="3.ç»„ä»¶å†…çš„å®ˆå«(äº†è§£)"></a>3.ç»„ä»¶å†…çš„å®ˆå«(äº†è§£)</h3><p>ç»„ä»¶å†…çš„å®ˆå« å†™åœ¨ç»„ä»¶å†…éƒ¨ ä¸‹é¢æ˜¯å®˜æ–¹ä»‹ç»</p>
<ul>
<li><strong>beforeRouteEnter</strong> è¿›å…¥è·¯ç”±å‰,ç»„ä»¶è¿˜æ²¡æœ‰è¢«å®ä¾‹åŒ–æ‰€ä»¥è¿™é‡Œæ— æ³•è·å–åˆ°this</li>
<li><strong>beforeRouteUpdate (2.2)</strong> è¿™ä¸ªé˜¶æ®µå¯ä»¥è·å–this,åœ¨è·¯ç”±å¤ç”¨åŒä¸€ä¸ªç»„ä»¶æ—¶è§¦å‘</li>
<li><strong>beforeRouteLeave</strong> è¿™ä¸ªé˜¶æ®µå¯ä»¥è·å–this,å½“ç¦»å¼€ç»„ä»¶å¯¹åº”çš„è·¯ç”±æ—¶,æ­¤æ—¶å¯ä»¥ç”¨æ¥ä¿å­˜æ•°æ®,æˆ–æ•°æ®åˆå§‹åŒ–,æˆ–å…³é—­å®šæ—¶å™¨ç­‰ç­‰</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> goods = &#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`&lt;div&gt;goods&lt;/div&gt;`</span>,</span><br><span class="line">  <span class="title function_">beforeRouteEnter</span> (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeRouteUpdate</span> (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeRouteLeave</span> (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="10-ç»„ä»¶ç¼“å­˜-keep-alive"><a href="#10-ç»„ä»¶ç¼“å­˜-keep-alive" class="headerlink" title="10.ç»„ä»¶ç¼“å­˜ keep-alive"></a>10.ç»„ä»¶ç¼“å­˜ <strong>keep-alive</strong></h2><p>é¡µé¢é‡æ–°åŠ è½½ä¼šé‡æ–°æ¸²æŸ“é¡µé¢æ¯”å¦‚å›é€€çš„æ—¶å€™ç­‰ç­‰ï¼Œæˆ‘ä»¬æœ‰çš„ç»„ä»¶å®ƒä¸æ˜¯ä¸€ä¸ªæ´»åŠ¨çš„(æ•°æ®ä¸å˜)ä¸å¸Œæœ›å®ƒè¢«é‡æ–°æ¸²æŸ“ï¼Œæ‰€ä»¥è¿™é‡Œå°±å¯ä»¥ä½¿ç”¨ <strong><code>&lt;keep-alive&gt; &lt;/keep-alive&gt;</code></strong> åŒ…è£¹èµ·æ¥ï¼Œè¿™æ ·å°±ä¸ä¼šè§¦å‘<code>created</code>é’©å­</p>
<p>åº”ç”¨åœºæ™¯ï¼šè·å–ä¸€ä¸ªå•†å“çš„è¯¦æƒ…ç„¶åå›é€€åœ¨å‰è¿›çš„æ—¶å€™å°±ä½¿ç”¨ç¼“å­˜ï¼Œæé«˜æ€§èƒ½</p>
<h3 id="1-ä¸ä½¿ç”¨-keep-aliveä¾‹å­"><a href="#1-ä¸ä½¿ç”¨-keep-aliveä¾‹å­" class="headerlink" title="1.ä¸ä½¿ç”¨ keep-aliveä¾‹å­"></a>1.ä¸ä½¿ç”¨ keep-aliveä¾‹å­</h3><blockquote>
<p>è¿™é‡Œhome ç»„ä»¶åœ¨<strong>created</strong>è¿›è¡Œæ‰“å°å½“å‰çš„æ—¶é—´</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/login&quot;</span>&gt;</span>login<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">      <span class="keyword">const</span> login = &#123;</span><br><span class="line">        <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div&gt;Login&lt;/div&gt;</span></span><br><span class="line"><span class="string">        `</span>,</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">const</span> home = &#123;</span><br><span class="line">        <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div&gt;Home&lt;/div&gt;</span></span><br><span class="line"><span class="string">        `</span>,</span><br><span class="line">        <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title class_">Date</span>())</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">        <span class="attr">routes</span>: \[</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">            <span class="attr">redirect</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: home,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: login,</span><br><span class="line">          &#125;,</span><br><span class="line">        \],</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">let</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">        <span class="attr">methods</span>: &#123;&#125;,</span><br><span class="line">        router,</span><br><span class="line">      &#125;)</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/12d49c936f34449798635c804731805c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="5"></p>
<p>å¦‚ä¸Šï¼Œæ¯åˆ‡æ¢<code>home</code> çš„è·¯ç”± ç»„ä»¶å°±ä¼š<strong>é‡æ–°æ¸²æŸ“</strong>ï¼Œæ‰“å°å½“å‰çš„æ—¶é—´</p>
<p>å¦‚æœä½¿ç”¨ <strong>keep-alive</strong> ä¼šæœ‰ä»€ä¹ˆæ•ˆæœå‘¢</p>
<h3 id="2-ä½¿ç”¨keep-alive"><a href="#2-ä½¿ç”¨keep-alive" class="headerlink" title="2.ä½¿ç”¨keep-alive"></a>2.ä½¿ç”¨keep-alive</h3><blockquote>
<p>è¿™é‡Œåªéœ€ç®€å•çš„åŒ…è£¹èµ·æ¥å°±è¡Œäº†</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/login&quot;</span>&gt;</span>login<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4d9d1e2bdad646d88b3d9823980fbef8~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="6"></p>
<p>å¯ä»¥çœ‹åˆ°çš„æ˜¯åªæ‰“å°ä¸€æ¬¡ï¼Œè¯´æ˜åˆ‡æ¢äº†è·¯ç”±å®ƒå¹¶<strong>æ²¡æœ‰é‡æ–°æ¸²æŸ“ç»„ä»¶</strong></p>
<blockquote>
<p>å½“ç„¶å¯ä»¥åœ¨ ç»„ä»¶å†…å–ä¸ª<strong>name</strong>åå­— <code>keep-alive</code> æ ‡ç­¾é‡Œé¢æ·»åŠ  <strong>include</strong> å±æ€§å°±å¯ä»¥å¯¹ç›¸åº”çš„ç»„ä»¶è¿›è¡Œç¼“å­˜</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> login = &#123;</span><br><span class="line">    <span class="attr">name</span>: login,</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;Login&lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> home = &#123;</span><br><span class="line">    <span class="attr">name</span>: home,</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;Home&lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title class_">Date</span>())</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/login&quot;</span>&gt;</span>login<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">keep-alive</span> <span class="attr">include</span>=<span class="string">&quot;login,home&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-activated-å’Œ-deactivated"><a href="#3-activated-å’Œ-deactivated" class="headerlink" title="3.activated å’Œ deactivated"></a>3.activated å’Œ deactivated</h3><blockquote>
<p>keep-alive ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº</p>
</blockquote>
<p>ç¬¬ä¸€æ¬¡è®¿é—®è·¯ç”±æ—¶ï¼š</p>
<ul>
<li><code>created</code>â€”&gt;<code>mounted</code> â€”&gt;<code>activated</code></li>
<li><code>deactivated</code>åœ¨é€€å‡ºåè§¦å‘</li>
</ul>
<p><strong>ä»¥åè¿›å…¥åªä¼šè§¦å‘</strong><code>activated</code></p>
<h2 id="11-hash-å’Œ-history-æ¨¡å¼"><a href="#11-hash-å’Œ-history-æ¨¡å¼" class="headerlink" title="11.hash å’Œ history æ¨¡å¼"></a>11.hash å’Œ history æ¨¡å¼</h2><h3 id="1-hashæ¨¡å¼"><a href="#1-hashæ¨¡å¼" class="headerlink" title="1.hashæ¨¡å¼"></a>1.hashæ¨¡å¼</h3><p>åœ¨vue-routerä¸­<strong>é»˜è®¤ä½¿ç”¨</strong>çš„æ˜¯ <strong>hash</strong> æ¨¡å¼</p>
<p><code>hash</code>æ˜¯urlä¸­çš„é”šç‚¹å°±æ˜¯<strong><code>#</code></strong>,é€šè¿‡é”šç‚¹ä½œä¸ºè·¯ç”±åœ°å€,æˆ‘ä»¬é€šå¸¸æ”¹å˜çš„æ˜¯æ”¹å˜<strong><code>#</code></strong>åé¢éƒ¨åˆ†,å®ç°æµè§ˆå™¨æ¸²æŸ“æŒ‡å®šçš„ç»„ä»¶.,é”šç‚¹å‘ç”Ÿæ”¹å˜ä¼šè§¦å‘ <strong>onhashchange</strong> äº‹ä»¶</p>
<h3 id="2-historyæ¨¡å¼"><a href="#2-historyæ¨¡å¼" class="headerlink" title="2.historyæ¨¡å¼"></a>2.historyæ¨¡å¼</h3><p>history æ¨¡å¼å°±æ˜¯å¹³æ—¶æ­£å¸¸çš„åœ°å€ï¼Œä½¿ç”¨æ–¹é¢éœ€è¦æœåŠ¡å™¨æ”¯æŒ</p>
<p>å¦‚æœè®¿é—®çš„è·¯å¾„èµ„æºæ²¡æœ‰ ç›´æ¥å°±æ˜¯ <code>404</code></p>
<p>åœ¨<strong>HTML5</strong>åæ–°å¢äº†ä¸¤ä¸ªAPI</p>
<p><strong>pushState()</strong>: IE10åæ”¯æŒ</p>
<p><strong>replaceState()</strong></p>
<p>åœ¨<code>vue-router</code>ä¸­å¦‚æœè¦ä½¿ç”¨ <code>history</code> æ¨¡å¼<strong>éœ€è¦æŒ‡å®š</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;history&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h1 id="å®ç°ä¸€ä¸ªåŸºç¡€-Vue-Router"><a href="#å®ç°ä¸€ä¸ªåŸºç¡€-Vue-Router" class="headerlink" title="å®ç°ä¸€ä¸ªåŸºç¡€ Vue Router"></a>å®ç°ä¸€ä¸ªåŸºç¡€ Vue Router</h1><blockquote>
<p>å¤ä¹ ä¸Šé¢çš„è·¯ç”±çš„åŸºç¡€é‚£ä¹ˆæˆ‘ä»¬ä¸å¦‚æ¥å†™ä¸ªVue Routerå§</p>
</blockquote>
<p>å®ç°çš„è¿™ä¸ª Vue Routeræ˜¯åŸºäº historyæ¨¡å¼</p>
<p>æ‰€æœ‰çš„æ­¥éª¤éƒ½æ”¾åˆ°ä»£ç çš„æ³¨é‡Šä¸­ï¼Œæ¯ä¸€è¡Œéƒ½å†™ä¸ªæ³¨é‡Š</p>
<p>è¿™ä¸ªç®€å•çš„æ²¡æœ‰æŒ‰ç…§Vue Routeræºç æ¥å†™ä¸»è¦æ˜¯ä¸€äº›åŸºç¡€åŠŸèƒ½çš„å®ç°</p>
<p>ä¸ºåé¢çš„æŒ‰ç…§æºç å†™æ‰“åŸºç¡€</p>
<h2 id="1-æ³¨å†Œå…¨å±€Vue-Router"><a href="#1-æ³¨å†Œå…¨å±€Vue-Router" class="headerlink" title="1.æ³¨å†Œå…¨å±€Vue Router"></a>1.æ³¨å†Œå…¨å±€Vue Router</h2><blockquote>
<p>é¦–å…ˆå°±æ˜¯å…ˆæ³¨å†Œè‡ªå·±çš„ Vue Router</p>
<p>åˆ¤æ–­æ˜¯å¦æ³¨å†Œäº†ç»„ä»¶</p>
<p>åœ¨Vueå®ä¾‹åˆ›å»ºå®Œæˆè¿›è¡Œæ³¨å†Œ</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> _Vue = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">MyVueRouter</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">install</span>(<span class="params">Vue</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">MyVueRouter</span>.<span class="property">install</span>.<span class="property">installed</span>) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="title class_">MyVueRouter</span>.<span class="property">install</span>.<span class="property">installed</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    _Vue = <span class="title class_">Vue</span></span><br><span class="line"></span><br><span class="line">    _Vue.<span class="title function_">mixin</span>(&#123;</span><br><span class="line"></span><br><span class="line">      <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">$options</span>.<span class="property">router</span>) &#123;</span><br><span class="line"></span><br><span class="line">          _Vue.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$router</span> = <span class="variable language_">this</span>.<span class="property">$options</span>.<span class="property">router</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-å®ç°-æ„é€ æ–¹æ³•"><a href="#2-å®ç°-æ„é€ æ–¹æ³•" class="headerlink" title="2.å®ç° æ„é€ æ–¹æ³•"></a>2.å®ç° æ„é€ æ–¹æ³•</h2><blockquote>
<p><strong>optoins</strong> ä¿å­˜ä¼ å…¥çš„è§„åˆ™</p>
<p><strong>routerMap</strong> ç¡®å®šåœ°å€å’Œç»„ä»¶çš„å…³ç³»</p>
<p><strong>current</strong> è¡¨ç¤ºå½“å‰çš„åœ°å€æ˜¯å“åº”å¼çš„ä¹‹åæ¸²æŸ“ç»„ä»¶å’Œå®ƒç›¸å…³</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">MyVueRouter</span> &#123;</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">optoins</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">optoins</span> = optoins</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">routerMap</span> = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">data</span> = _Vue.<span class="title function_">observable</span>(&#123;</span><br><span class="line"></span><br><span class="line">      <span class="attr">current</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-è§£æè·¯ç”±è§„åˆ™"><a href="#3-è§£æè·¯ç”±è§„åˆ™" class="headerlink" title="3.è§£æè·¯ç”±è§„åˆ™"></a>3.è§£æè·¯ç”±è§„åˆ™</h2><blockquote>
<p>ä¼ å…¥çš„è·¯ç”±è§„åˆ™æ‹¿åˆ°ä¸€ä¸ªå¯¹è±¡é‡Œ åœ°å€ å’Œ ç»„ä»¶ä¸€ä¸€åŒ¹é…</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">MyVueRouter</span> &#123;</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="title function_">createRouterMap</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">optoins</span>.<span class="property">routes</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">routerMap</span>\[item.<span class="property">path</span>\] = item.<span class="property">component</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-å®ç°-router-link-ç»„ä»¶"><a href="#4-å®ç°-router-link-ç»„ä»¶" class="headerlink" title="4.å®ç° router-link ç»„ä»¶"></a>4.å®ç° router-link ç»„ä»¶</h2><blockquote>
<p>router-linkå°±æ˜¯é¡µé¢ä¸Šæ‰€å±•ç¤ºçš„è·¯ç”±é“¾æ¥</p>
<p>å› ä¸ºä¸€èˆ¬ä½¿ç”¨çš„åŸºæœ¬éƒ½æ˜¯è¿è¡Œç‰ˆçš„Vue æ‰€ä»¥è‡ªå·±æŠŠç»„ä»¶è½¬ä¸º è™šæ‹ŸDOM</p>
<p>è¿˜æœ‰å°±æ˜¯é“¾æ¥ä¼šåˆ·æ–°çš„é—®é¢˜</p>
<p>è‡ªå·±å†™ä¸ªå‡½æ•°è¿›è¡Œè·³è½¬é˜»æ­¢é»˜è®¤äº‹ä»¶</p>
<p>è¿˜å¾—æ³¨æ„å¯¹åº”çš„è·¯ç”±æ‰€è¦æ¸²æŸ“çš„ç»„ä»¶</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">MyVueRouter</span> &#123;</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="title function_">initComponents</span>(<span class="params">Vue</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;router-link&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">props</span>: &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">to</span>: <span class="title class_">String</span>,</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="title function_">render</span>(<span class="params">h</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">h</span>(</span><br><span class="line">          <span class="string">&#x27;a&#x27;</span>,</span><br><span class="line"></span><br><span class="line">          &#123;</span><br><span class="line"></span><br><span class="line">            <span class="attr">attrs</span>: &#123;</span><br><span class="line">              <span class="attr">href</span>: <span class="variable language_">this</span>.<span class="property">to</span>,</span><br><span class="line">            &#125;,</span><br><span class="line"></span><br><span class="line">            <span class="attr">on</span>: &#123;</span><br><span class="line"></span><br><span class="line">              <span class="attr">click</span>: <span class="variable language_">this</span>.<span class="property">myClick</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line"></span><br><span class="line">          \[<span class="variable language_">this</span>.<span class="property">$slots</span>.<span class="property">default</span>\]</span><br><span class="line">        )</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">methods</span>: &#123;</span><br><span class="line"></span><br><span class="line">        <span class="title function_">myClick</span>(<span class="params">e</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">          history.<span class="title function_">pushState</span>(&#123;&#125;, <span class="string">&#x27;&#x27;</span>, <span class="variable language_">this</span>.<span class="property">to</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="property">data</span>.<span class="property">current</span> = <span class="variable language_">this</span>.<span class="property">to</span></span><br><span class="line"></span><br><span class="line">          e.<span class="title function_">preventDefault</span>()</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>
<h2 id="5-å®ç°-router-view-ç»„ä»¶"><a href="#5-å®ç°-router-view-ç»„ä»¶" class="headerlink" title="5.å®ç° router-view ç»„ä»¶"></a>5.å®ç° router-view ç»„ä»¶</h2><blockquote>
<p>è¿™é‡Œä»ä¹‹å‰è§£æçš„è§„åˆ™é‡Œé¢æ‹¿åˆ°å½“å‰çš„å¯¹åº”çš„ç»„ä»¶è¿›è¡Œè½¬ä¸ºè™šæ‹ŸDOM</p>
<p>æœ€å<code>router-view</code>å ä½æ¸²æŸ“åˆ°é¡µé¢ä¸Š</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">MyVueRouter</span> &#123;</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="title function_">initComponents</span>(<span class="params">Vue</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;router-view&#x27;</span>, &#123;</span><br><span class="line">      <span class="title function_">render</span>(<span class="params">h</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> component = <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="property">routerMap</span>\[<span class="variable language_">this</span>.<span class="property">$router</span>.<span class="property">data</span>.<span class="property">current</span>\]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">h</span>(component)</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-å‰è¿›å’Œåé€€"><a href="#6-å‰è¿›å’Œåé€€" class="headerlink" title="6.å‰è¿›å’Œåé€€"></a>6.å‰è¿›å’Œåé€€</h2><blockquote>
<p>åœ¨å®Œæˆä¹‹å‰çš„ç¼–å†™è¿˜æ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºåœ¨æµè§ˆå™¨ç‚¹åé€€å’Œå‰è¿›è™½ç„¶æ”¹å˜äº†æµè§ˆå™¨çš„åœ°å€ï¼Œä½†æ˜¯ç»„ä»¶å´æ²¡æœ‰åˆ·æ–°ï¼Œä¸‹é¢å°±æ¥è§£å†³è¿™ä¸ªé—®é¢˜</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">MyVueRouter</span> &#123;</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="title function_">initEvent</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;popstate&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">current</span> = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">pathname</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7-åœ¨routeræŒ‚è½½åè¿›è¡Œåˆå§‹åŒ–"><a href="#7-åœ¨routeræŒ‚è½½åè¿›è¡Œåˆå§‹åŒ–" class="headerlink" title="7.åœ¨routeræŒ‚è½½åè¿›è¡Œåˆå§‹åŒ–"></a>7.åœ¨routeræŒ‚è½½åè¿›è¡Œåˆå§‹åŒ–</h2><blockquote>
<p>æœ€åå†™ä¸ªå‡½æ•°è¿›è¡Œåˆå§‹åŒ–</p>
<p>åœ¨routeræ³¨å†Œåˆ°Vueä¹‹åè¿›è¡Œ åˆå§‹åŒ–</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">MyVueRouter</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">init</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">createRouterMap</span>()</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">initComponents</span>(_Vue)</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">initEvent</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">install</span>(<span class="params">Vue</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">MyVueRouter</span>.<span class="property">install</span>.<span class="property">installed</span>) <span class="keyword">return</span></span><br><span class="line">    <span class="title class_">MyVueRouter</span>.<span class="property">install</span>.<span class="property">installed</span> = <span class="literal">true</span></span><br><span class="line">    _Vue = <span class="title class_">Vue</span></span><br><span class="line">    _Vue.<span class="title function_">mixin</span>(&#123;</span><br><span class="line">      <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">$options</span>.<span class="property">router</span>) &#123;</span><br><span class="line">          _Vue.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$router</span> = <span class="variable language_">this</span>.<span class="property">$options</span>.<span class="property">router</span></span><br><span class="line"></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">$options</span>.<span class="property">router</span>.<span class="title function_">init</span>()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8-æ”¾ä¸Šå®Œæ•´çš„-index-js"><a href="#8-æ”¾ä¸Šå®Œæ•´çš„-index-js" class="headerlink" title="8.æ”¾ä¸Šå®Œæ•´çš„ index.js"></a>8.æ”¾ä¸Šå®Œæ•´çš„ index.js</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> _Vue = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">MyVueRouter</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">install</span>(<span class="params">Vue</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">MyVueRouter</span>.<span class="property">install</span>.<span class="property">installed</span>) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="title class_">MyVueRouter</span>.<span class="property">install</span>.<span class="property">installed</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    _Vue = <span class="title class_">Vue</span></span><br><span class="line"></span><br><span class="line">    _Vue.<span class="title function_">mixin</span>(&#123;</span><br><span class="line"></span><br><span class="line">      <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">$options</span>.<span class="property">router</span>) &#123;</span><br><span class="line"></span><br><span class="line">          _Vue.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$router</span> = <span class="variable language_">this</span>.<span class="property">$options</span>.<span class="property">router</span></span><br><span class="line"></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">$options</span>.<span class="property">router</span>.<span class="title function_">init</span>()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">optoins</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">optoins</span> = optoins</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">routerMap</span> = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">data</span> = _Vue.<span class="title function_">observable</span>(&#123;</span><br><span class="line"></span><br><span class="line">      <span class="attr">current</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">createRouterMap</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">optoins</span>.<span class="property">routes</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">routerMap</span>\[item.<span class="property">path</span>\] = item.<span class="property">component</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">initComponents</span>(<span class="params">Vue</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;router-link&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">props</span>: &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">to</span>: <span class="title class_">String</span>,</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="title function_">render</span>(<span class="params">h</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">h</span>(</span><br><span class="line">          <span class="string">&#x27;a&#x27;</span>,</span><br><span class="line"></span><br><span class="line">          &#123;</span><br><span class="line"></span><br><span class="line">            <span class="attr">attrs</span>: &#123;</span><br><span class="line">              <span class="attr">href</span>: <span class="variable language_">this</span>.<span class="property">to</span>,</span><br><span class="line">            &#125;,</span><br><span class="line"></span><br><span class="line">            <span class="attr">on</span>: &#123;</span><br><span class="line"></span><br><span class="line">              <span class="attr">click</span>: <span class="variable language_">this</span>.<span class="property">myClick</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">          \[<span class="variable language_">this</span>.<span class="property">$slots</span>.<span class="property">default</span>\]</span><br><span class="line">        )</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">methods</span>: &#123;</span><br><span class="line"></span><br><span class="line">        <span class="title function_">myClick</span>(<span class="params">e</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">          history.<span class="title function_">pushState</span>(&#123;&#125;, <span class="string">&#x27;&#x27;</span>, <span class="variable language_">this</span>.<span class="property">to</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="property">data</span>.<span class="property">current</span> = <span class="variable language_">this</span>.<span class="property">to</span></span><br><span class="line"></span><br><span class="line">          e.<span class="title function_">preventDefault</span>()</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;router-view&#x27;</span>, &#123;</span><br><span class="line">      <span class="title function_">render</span>(<span class="params">h</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> component = <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="property">routerMap</span>\[<span class="variable language_">this</span>.<span class="property">$router</span>.<span class="property">data</span>.<span class="property">current</span>\]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">h</span>(component)</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">initEvent</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;popstate&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">current</span> = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">pathname</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="title function_">init</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">createRouterMap</span>()</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">initComponents</span>(_Vue)</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">initEvent</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ°äº†è¿™é‡ŒåŸºç¡€çš„å®ç°åŠŸèƒ½å·®ä¸å¤šäº†ï¼Œä¸Šé¢çš„ä¾‹å­æ˜¯ä¸ºäº†ä¸‹é¢æ‰“åŸºç¡€ï¼Œæ‰€æœ‰çš„åŠŸèƒ½å®ç°åŸºæœ¬éƒ½æ˜¯åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸‹å¾ˆä¸ä¸¥è°¨ï¼Œä¸‹é¢å°±ä¸¥æ ¼æŒ‰ç…§<strong>Vue Router</strong> æºç æ¥å®ç°è‡ªå·± <strong>Vue Router</strong></p>
<h1 id="Vue-Routerå®ç°"><a href="#Vue-Routerå®ç°" class="headerlink" title="Vue Routerå®ç°"></a>Vue Routerå®ç°</h1><blockquote>
<p>ç»è¿‡ä¸Šé¢ç®€å•çš„å®ç°ï¼Œç°åœ¨æˆ‘ä»¬æŒ‰ç…§Vue Routeræºç çš„æ–¹å¼è¿›è¡Œç¼–å†™</p>
</blockquote>
<h2 id="1-é¦–å…ˆæ˜¯Vue-Router-æ„é€ "><a href="#1-é¦–å…ˆæ˜¯Vue-Router-æ„é€ " class="headerlink" title="1.é¦–å…ˆæ˜¯Vue Router æ„é€ "></a>1.é¦–å…ˆæ˜¯Vue Router æ„é€ </h2> <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">VueRouter</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_options</span> = options.<span class="property">routes</span> || \[\]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">init</span>(<span class="params">Vue</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-æ³¨å†Œç»„ä»¶-install"><a href="#2-æ³¨å†Œç»„ä»¶-install" class="headerlink" title="2.æ³¨å†Œç»„ä»¶ install"></a>2.æ³¨å†Œç»„ä»¶ install</h2><blockquote>
<p>åœ¨ <strong>install.js</strong> å¯¹è‡ªå·±å†™çš„<strong>Vue-Router</strong>è¿›è¡Œå…¨å±€çš„æ³¨å†Œ</p>
<p>ä¹‹åè¿˜ä¼šåœ¨è¿™é‡Œåˆ›å»º <strong> $r o u t e r <em> </em> <em> </em>$) route</strong></p>
<p>è¿˜æœ‰æ³¨å†Œ <strong>router-link**</strong>router-view**</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> _Vue = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">install</span>(<span class="params">Vue</span>) &#123;</span><br><span class="line"></span><br><span class="line">  _Vue = <span class="title class_">Vue</span></span><br><span class="line"></span><br><span class="line">  _Vue.<span class="title function_">mixin</span>(&#123;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">$options</span>.<span class="property">router</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_routerRoot</span> = <span class="variable language_">this</span></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_router</span> = <span class="variable language_">this</span>.<span class="property">$options</span>.<span class="property">router</span></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_router</span>.<span class="title function_">init</span>(<span class="variable language_">this</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.\_routerRoot = (<span class="variable language_">this</span>.<span class="property">$parent</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">$parent</span>.\_routerRoot) || <span class="variable language_">this</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨ <code>index.js</code>ä¸­å¯¼å…¥<strong>install</strong> è¿›è¡Œä¸ºæ„é€ æ·»åŠ  <strong>install</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> install <span class="keyword">from</span> <span class="string">&#x27;./install&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">VueRouter</span> &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">VueRouter</span>.<span class="property">install</span> = install</span><br></pre></td></tr></table></figure>
<h2 id="3-ç¼–å†™-create-route-map-js"><a href="#3-ç¼–å†™-create-route-map-js" class="headerlink" title="3.ç¼–å†™ create-route-map.js"></a>3.ç¼–å†™ create-route-map.js</h2><blockquote>
<p>è¿™ä¸ªä¸»è¦çš„ä½œç”¨å°±æ˜¯ç”¨æ¥è§£æä¼ é€’è¿‡æ¥çš„è·¯ç”± éœ€è¦å¯¼å‡ºç„¶ååœ¨ <code>create-matcher.js</code>è¿›è¡Œä½¿ç”¨</p>
<p>å…·ä½“çš„ç»†èŠ‚éƒ½å†™äº†æ³¨é‡Š</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">\*</span><br><span class="line"> \* @param &#123;*&#125; routes è·¯ç”±è§„åˆ™</span><br><span class="line"> \* @param &#123;*&#125; oldPathList è·¯ç”±åˆ—è¡¨</span><br><span class="line"> \* @param &#123;*&#125; oldPathMap è·¯ç”±å’Œç»„ä»¶çš„å¯¹åº”å…³ç³»</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">createRouteMap</span>(<span class="params">routes, oldPathList, oldPathMap</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> pathList = oldPathList || \[\]</span><br><span class="line">  <span class="keyword">const</span> pathMap = oldPathMap || \[\]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  routes.<span class="title function_">forEach</span>(<span class="function">(<span class="params">route</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">addRouteRecord</span>(route, pathList, pathMap)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    pathList,</span><br><span class="line">    pathMap,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> \*</span><br><span class="line"> \* @param &#123;*&#125; route è·¯ç”±è§„åˆ™</span><br><span class="line"> \* @param &#123;*&#125; pathList è·¯ç”±åˆ—è¡¨</span><br><span class="line"> \* @param &#123;*&#125; pathMap è·¯ç”±å’Œç»„ä»¶ä¹‹é—´çš„å¯¹åº”å…³ç³»</span><br><span class="line"> \* @param &#123;*&#125; parentRecord  çˆ¶è·¯ç”±</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">addRouteRecord</span>(<span class="params">route, pathList, pathMap, parentRecord</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> path = parentRecord ? <span class="string">`<span class="subst">$&#123;parentRecord.path&#125;</span>/<span class="subst">$&#123;route.path&#125;</span>`</span> : route.<span class="property">path</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> record = &#123;</span><br><span class="line">    path,</span><br><span class="line">    <span class="attr">component</span>: route.<span class="property">component</span>,</span><br><span class="line">    <span class="attr">parent</span>: parentRecord,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!pathList\[path\]) &#123;</span><br><span class="line"></span><br><span class="line">    pathList.<span class="title function_">push</span>(path)</span><br><span class="line"></span><br><span class="line">    pathMap\[path\] = record</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (route.<span class="property">children</span>) &#123;</span><br><span class="line">    route.<span class="property">children</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">childRoute</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="title function_">addRouteRecord</span>(childRoute, pathList, pathMap, record)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-ç¼–å†™-create-matcher-js"><a href="#4-ç¼–å†™-create-matcher-js" class="headerlink" title="4.ç¼–å†™ create-matcher.js"></a>4.ç¼–å†™ create-matcher.js</h2><blockquote>
<p>è¿™ä¸ªæ¨¡å—çš„æ„ä¹‰ä¹Ÿæ˜¯è§£æè·¯ç”±ä¸è¿‡è¿™ä¸ªæ˜¯ä¸ªæŒ‡æŒ¥å®¶ï¼Œä¸Šé¢å®ç°çš„æ˜¯å…·ä½“è§£ææ“ä½œ</p>
<p>åœ¨è¿™ä¸ªæ¨¡å—é‡Œè¿›è¡Œè°ƒç”¨ä¸Šé¢çš„å…·ä½“è§£æè·¯ç”±çš„æ–¹æ³•å°±è¡Œäº†</p>
<p>æœ‰äº†ä¸Šé¢é¢å…·ä½“çš„è·¯ç”±è§£æï¼Œè¿™ä¸ª<strong>create-matcher.js</strong>å°±å®¹æ˜“å®ç°äº†ï¼Œåªéœ€è¦ç®€å•çš„è°ƒç”¨å®ƒå³å¯</p>
<p>è¿™ä¸ªæ¨¡å—è¿”å›äº†ä¸¤ä¸ªæ–¹æ³•</p>
<ul>
<li><strong>match</strong> : æ ¹æ®è·¯ç”±è·¯å¾„åˆ›å»ºè·¯ç”±è§„åˆ™å¯¹è±¡ï¼Œä¹‹åå°±å¯ä»¥é€šè¿‡ è§„åˆ™å¯¹è±¡è·å–åˆ°æ‰€æœ‰çš„è·¯ç”±ä¿¡æ¯ç„¶åæ‹¿åˆ°æ‰€æœ‰çš„ç»„ä»¶è¿›è¡Œåˆ›å»º</li>
<li><strong>addRoutes</strong> : æ·»åŠ åŠ¨æ€è·¯ç”±</li>
</ul>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> createRouteMap <span class="keyword">from</span> <span class="string">&#x27;./create-route-map&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">createMatcher</span>(<span class="params">router</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; pathList, pathMap &#125; = <span class="title function_">createRouteMap</span>(router)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">match</span>(<span class="params">path</span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">addRoutes</span>(<span class="params">router</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">createRouteMap</span>(router, pathList, pathMap)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    match,</span><br><span class="line">    addRoutes,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç„¶ååœ¨<strong>index.js</strong>ä¹Ÿå°±æ˜¯<strong>Vue Router</strong>çš„æ„é€ ä¸­ä½¿ç”¨ <strong>createMatcher.</strong> ä½¿ç”¨<strong>this.matcher</strong>æ¥æ”¶</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> install <span class="keyword">from</span> <span class="string">&#x27;./install&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> createMatcher <span class="keyword">from</span> <span class="string">&#x27;./create-matcher&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">VueRouter</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_routes</span> = options.<span class="property">routes</span> || \[\]</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">matcher</span> = <span class="title function_">createMatcher</span>(<span class="variable language_">this</span>.<span class="property">_routes</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">init</span>(<span class="params">Vue</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">VueRouter</span>.<span class="property">install</span> = install</span><br></pre></td></tr></table></figure>
<h2 id="5-ç¼–å†™-createMatcher"><a href="#5-ç¼–å†™-createMatcher" class="headerlink" title="5.ç¼–å†™ createMatcher"></a>5.ç¼–å†™ createMatcher</h2><blockquote>
<p>çœ‹è§ä¸Šé¢åœ¨ <strong>createMatcher</strong>ä¸­å®šä¹‰äº† ä¸€ä¸ª<strong>match</strong>äº†å—ï¼Œ</p>
<p><strong>match</strong>æ˜¯ ä»<strong>pathMap</strong> æ ¹æ®<strong>path</strong>è·å– ç›¸åº”çš„è·¯ç”±è®°å½•</p>
<p>ä¸Šé¢è¿˜æ²¡æœ‰å»å®ç°ï¼Œç°åœ¨æ¥å®ç°å®ƒ</p>
<p>éœ€è¦å®ç°å®ƒçš„è¯è¿˜éœ€è¦ç¼–å†™ä¸ª <strong>createRoute</strong> æ–¹æ³•ï¼Œæˆ‘è¿™é‡Œå†™åœ¨ <strong>uitl/route.js</strong>æ¨¡å—é‡Œ</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">\*</span><br><span class="line"> \* @param &#123;*&#125; record ä¼ è¿‡æ¥çš„è®°å½•</span><br><span class="line"> \* @param &#123;*&#125; path è·¯ç”±åœ°å€</span><br><span class="line"> \* @returns</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">createRoute</span>(<span class="params">record, path</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> matched = \[\]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (record) &#123;</span><br><span class="line"></span><br><span class="line">    matched.<span class="title function_">unshift</span>(record)</span><br><span class="line"></span><br><span class="line">    record = record.<span class="property">parent</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    path,</span><br><span class="line">    matched,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸Šé¢ç¼–å†™äº† <strong>createRoute</strong>æ–¹æ³•æˆ‘ä»¬å°±å¯ä»¥åœ¨ <strong>create-mathcer.js</strong> è°ƒç”¨ æ¥è·å–åˆ°è®°å½•äº†</p>
<p>ç„¶åå† <strong>create-mathcer.js</strong>ä¸­ç»§ç»­ å®Œå–„ <strong>match</strong>æ–¹æ³•</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> createRouteMap <span class="keyword">from</span> <span class="string">&#x27;./create-route-map&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> createRoute <span class="keyword">from</span> <span class="string">&#x27;./util/route&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">createMatcher</span>(<span class="params">router</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; pathList, pathMap &#125; = <span class="title function_">createRouteMap</span>(router)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">match</span>(<span class="params">path</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> record = pathMap\[path\]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (record) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">createRoute</span>(record, path)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">createRoute</span>(<span class="literal">null</span>, path)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">addRoutes</span>(<span class="params">router</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">createRouteMap</span>(router, pathList, pathMap)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    match,</span><br><span class="line">    addRoutes,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="6-å†å²è®°å½•çš„å¤„ç†-History"><a href="#6-å†å²è®°å½•çš„å¤„ç†-History" class="headerlink" title="6.å†å²è®°å½•çš„å¤„ç† History"></a>6.å†å²è®°å½•çš„å¤„ç† History</h2><blockquote>
<p>åœ¨ <strong>history</strong>ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª <strong>base</strong>æ¨¡å—ç”¨æ¥ç¼–å†™ çˆ¶ç±»</p>
<p>è¿™ä¸ªçˆ¶ç±»æœ‰ <strong>hash</strong> æ¨¡å¼ å’Œ <strong>history</strong>(html5) æ¨¡å¼å…±åŒçš„æ–¹æ³•</p>
<p>è¿™é‡Œå°±ä¸»è¦æ¼”ç¤ºä¸‹ <strong>hash</strong> æ¨¡å¼çš„ä»£ç </p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> createRoute <span class="keyword">from</span> <span class="string">&#x27;../util/route&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">History</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">router</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">router</span> = router</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">current</span> = <span class="title function_">createRoute</span>(<span class="literal">null</span>, <span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="title function_">transitionTo</span>(<span class="params">path, onComplete</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">current</span> = <span class="variable language_">this</span>.<span class="property">router</span>.<span class="property">matcher</span>.<span class="title function_">match</span>(path)</span><br><span class="line"></span><br><span class="line">    onComplete &amp;&amp; <span class="title function_">onComplete</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç¼–å†™ <strong>HashHistory</strong> æ¨¡å¼ ç»§æ‰¿ <strong>History</strong></p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">History</span> <span class="keyword">from</span> <span class="string">&#x27;./base&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">HashHistory</span> <span class="keyword">extends</span> <span class="title class_ inherited__">History</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">router</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(router)</span><br><span class="line"></span><br><span class="line">    <span class="title function_">ensuerSlash</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">setUpListener</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;hashchange&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">transitionTo</span>(<span class="variable language_">this</span>.<span class="title function_">getCurrentLocation</span>())</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getCurrentLocation</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> href = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span></span><br><span class="line">    <span class="keyword">const</span> index = href.<span class="title function_">indexOf</span>(<span class="string">&#x27;#&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (index &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">    href = href.<span class="title function_">slice</span>(index + <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> href</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ensuerSlash</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">hash</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">hash</span> = <span class="string">&#x27;/&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å…³äº <strong>html5</strong>æ¨¡å¼ è¿™é‡Œ å°±æ²¡å†™äº†</p>
<p>ç„¶åå›åˆ° <strong>index.js</strong> å°±æ˜¯è‡ªå·±å†™çš„ <strong>Vue Router</strong>ä¸­ç»§ç»­ç¼–å†™æ¨¡å¼åˆ¤æ–­</p>
<p>æœ€åå°±æ˜¯ åˆå§‹åŒ– initæ–¹æ³•</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> install <span class="keyword">from</span> <span class="string">&#x27;./install&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> createMatcher <span class="keyword">from</span> <span class="string">&#x27;./create-matcher&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HashHistory</span> <span class="keyword">from</span> <span class="string">&#x27;./history/hash&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HTML5History</span> <span class="keyword">from</span> <span class="string">&#x27;./history/html5&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">VueRouter</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_routes</span> = options.<span class="property">routes</span> || \[\]</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">matcher</span> = <span class="title function_">createMatcher</span>(<span class="variable language_">this</span>.<span class="property">_routes</span>)</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">mode</span> = options.<span class="property">mode</span> || <span class="string">&#x27;hash&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (<span class="variable language_">this</span>.<span class="property">mode</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;history&#x27;</span>:</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">history</span> = <span class="keyword">new</span> <span class="title class_">HTML5History</span>(<span class="variable language_">this</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;hash&#x27;</span>:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">history</span> = <span class="keyword">new</span> <span class="title class_">HashHistory</span>(<span class="variable language_">this</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="attr">default</span>:</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;è¯¥æ¨¡å¼ä¸å­˜åœ¨&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">init</span>(<span class="params">Vue</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> history = <span class="variable language_">this</span>.<span class="property">history</span></span><br><span class="line"></span><br><span class="line">    history.<span class="title function_">transitionTo</span>(history.<span class="property">getCurrentLocation</span>, <span class="function">() =&gt;</span></span><br><span class="line"></span><br><span class="line">      history.<span class="title function_">setUpListener</span>()</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">VueRouter</span>.<span class="property">install</span> = install</span><br></pre></td></tr></table></figure>
<h2 id="7-å®šä¹‰ä¸€ä¸ªå“åº”å€¼-route"><a href="#7-å®šä¹‰ä¸€ä¸ªå“åº”å€¼-route" class="headerlink" title="7.å®šä¹‰ä¸€ä¸ªå“åº”å€¼ _route"></a>7.å®šä¹‰ä¸€ä¸ªå“åº”å€¼ _route</h2><blockquote>
<p>æ¸²æŸ“ä¸åŒè·¯ç”±é¡µé¢æœ‰ä¸ªå‰æçš„å°±æ˜¯éœ€è¦ä¸€ä¸ªè¡¨ç¤º å½“å‰è·¯ç”± å“åº”å¼çš„å±æ€§</p>
<p>æ‰€ä»¥æˆ‘ä»¬æ¥åˆ° <strong>install.js</strong> æ·»åŠ ä¸€ä¸ªå“åº”å¼çš„ å±æ€§<strong>_route</strong></p>
<p>å’Œè¿™ä¸ªæ— å…³çš„ä»£ç  <code>...</code>çœç•¥</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> _Vue = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">install</span>(<span class="params">Vue</span>) &#123;</span><br><span class="line">  _Vue = <span class="title class_">Vue</span></span><br><span class="line">  <span class="title class_">Vue</span>.<span class="title function_">mixin</span>(&#123;</span><br><span class="line">    <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">$options</span>.<span class="property">router</span>) &#123;</span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="title class_">Vue</span>.<span class="property">util</span>.<span class="title function_">defineReactive</span>(<span class="variable language_">this</span>, <span class="string">&#x27;\_route&#x27;</span>, <span class="variable language_">this</span>.\_router.<span class="property">history</span>.<span class="property">current</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç„¶åå¾—å›åˆ° <strong>history</strong>ä¸‹é¢çš„ <strong>base</strong> æ·»åŠ ä¸€ä¸ªä¿®æ”¹å“åº”å¼ <strong>_route</strong>çš„å€¼çš„å›è°ƒ <strong>this.cb</strong></p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> createRoute <span class="keyword">from</span> <span class="string">&#x27;../util/route&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">History</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">router</span>) &#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cb</span> = <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">listen</span>(<span class="params">cb</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cb</span> = cb</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">transitionTo</span>(<span class="params">path, onComplete</span>) &#123;</span><br><span class="line">	...</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cb</span> &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">cb</span>(<span class="variable language_">this</span>.<span class="property">current</span>)</span><br><span class="line">	...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æœ€ååœ¨ <strong>index.js</strong> çš„ <strong>init</strong> è°ƒç”¨ listen æ–¹æ³• ä¼ å…¥å›è°ƒä¿®æ”¹ å“åº”å¼å€¼<strong>_route</strong></p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">VueRouter</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="title function_">init</span>(<span class="params">Vue</span>) &#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    history.<span class="title function_">listen</span>(<span class="function">(<span class="params">route</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="title class_">Vue</span>.<span class="property">_route</span> = route</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h2 id="8-æ·»åŠ -router-å’Œ-route"><a href="#8-æ·»åŠ -router-å’Œ-route" class="headerlink" title="8.æ·»åŠ  $router å’Œ $route"></a>8.æ·»åŠ  <code>$router</code> å’Œ <code>$route</code></h2><blockquote>
<p>æˆ‘ä»¬çŸ¥é“åœ¨ <strong>Vue Router</strong> æä¾›äº† <strong><code>$router</code></strong> (è¿™ä¸ªæ˜¯è·¯ç”±å¯¹è±¡æ˜¯<strong><code>Vue Router</code></strong>çš„å®ä¾‹) è¿˜æœ‰ <strong>$route</strong>(è·¯ç”±è§„åˆ™å¯¹è±¡)</p>
<p>æˆ‘ä»¬è‡ªå·±å¯ä»¥æ¥åˆ° <code>install.js</code> ä¸­è¿›è¡Œ æ·»åŠ è¿™ä¸¤ä¸ªå±æ€§</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">install</span>(<span class="params">Vue</span>) &#123;</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>, <span class="string">&#x27;$router&#x27;</span>, &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.\_routerRoot.\_router</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>, <span class="string">&#x27;$route&#x27;</span>, &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.\_routerRoot.\_route</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="9-router-link"><a href="#9-router-link" class="headerlink" title="9.router-link"></a>9.router-link</h2><blockquote>
<p>åŸºæœ¬çš„ä»‹ç»å°±ä¸å¤šè¯´äº†ï¼Œä¹‹å‰ä¹Ÿæ˜¯æœ‰ä»‹ç»çš„ã€‚ç„¶åç°åœ¨é‡æ–°æ¥å®ç°ä¸‹</p>
<p>åœ¨ <strong>components</strong> æ–‡ä»¶ä¸‹æ–°å»º <strong>link.js</strong></p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">to</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">      <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params">h</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">h</span>(</span><br><span class="line"></span><br><span class="line">      <span class="string">&#x27;a&#x27;</span>,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">domProps</span>: &#123;</span><br><span class="line">          <span class="attr">href</span>: <span class="string">&#x27;#&#x27;</span> + <span class="variable language_">this</span>.<span class="property">to</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      \[<span class="variable language_">this</span>.<span class="property">$slots</span>.<span class="property">default</span>\]</span><br><span class="line">    )</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="10-router-view"><a href="#10-router-view" class="headerlink" title="10.router-view"></a>10.router-view</h2><blockquote>
<p>åœ¨ <strong>components</strong> æ–‡ä»¶ä¸‹æ–°å»º <strong>view.js</strong> å…·ä½“æ­¥éª¤å¹²äº†ä»€ä¹ˆéƒ½å†™åœ¨æ³¨é‡Šé‡Œäº†</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params">h</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> route = <span class="variable language_">this</span>.<span class="property">$route</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> depth = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">routerView</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> parent = <span class="variable language_">this</span>.<span class="property">$parent</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (parent) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (parent.<span class="property">routerView</span>) &#123;</span><br><span class="line">        depth++</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      parent = parent.<span class="property">$parent</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> record = route.<span class="property">matched</span>\[depth\]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!record) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">h</span>()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> component = record.<span class="property">component</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">h</span>(component)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¥½äº†åˆ°äº†è¿™é‡Œ <strong>Vue Router</strong>çš„ç¬¬äºŒæ¬¡ç¼–å†™å°±å®Œæˆäº†ï¼Œè™½ç„¶å’Œå®˜æ–¹çš„å·®è·å¾ˆå¤§ã€‚ã€‚é¢ï¼Œå› ä¸ºè¿™é‡Œæ˜¯ç®€åŒ–å†™çš„</p>
</blockquote>
<h2 id="11-æ–‡ä»¶ç›®å½•"><a href="#11-æ–‡ä»¶ç›®å½•" class="headerlink" title="11.æ–‡ä»¶ç›®å½•"></a>11.æ–‡ä»¶ç›®å½•</h2><blockquote>
<p>å¿˜äº†æœ€åè´´ä¸Šæ–‡ä»¶çš„ç›®å½•</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3271178c386347b49ab772f2c088bf67~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210723215447677"></p>
<blockquote>
<p>è¿™ä¸ªæ¨¡æ‹Ÿ<strong>Vue Router</strong>çš„<strong>demo</strong> æ”¾åœ¨äº† <strong>github</strong>,æœ‰éœ€è¦çš„å¯ä»¥è¿™é‡Œ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FLianTianNo1%2Fmy_vue_router" title="https://github.com/LianTianNo1/my_vue_router">MyVueRouter</a></p>
<p>åˆ°äº†è¿™é‡Œä¹Ÿåªæ˜¯ä»…ä»…å®ç°äº† <strong>VueRouter</strong>çš„ä¸€å°éƒ¨åˆ†åŠŸèƒ½</p>
<p>ä½†æ˜¯å¤§ä½“ä¸Šçš„åŠŸèƒ½éƒ½å·®ä¸å¤šå®ç°äº†ï¼ŒåµŒå¥—è·¯ç”± æ·»åŠ åŠ¨æ€è·¯ç”±ä¹Ÿå®ç°äº†</p>
<p>å…¶å®æˆ‘è§‰å¾—åˆ°è¿™é‡Œäº†ä¹Ÿå¯ä»¥äº†,ä¸è¿‡è¿˜æ˜¯å¾—ç»§ç»­åŠ æ²¹å­¦ä¹ </p>
</blockquote>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>Vue Router</tag>
      </tags>
  </entry>
  <entry>
    <title>React æ— ç¼æ»šåŠ¨è·‘é©¬ç¯ç»„ä»¶</title>
    <url>/xiaolangwiki/2022/02/16/14/</url>
    <content><![CDATA[<h2 id="React-æ— ç¼æ»šåŠ¨è·‘é©¬ç¯ç»„ä»¶"><a href="#React-æ— ç¼æ»šåŠ¨è·‘é©¬ç¯ç»„ä»¶" class="headerlink" title="React æ— ç¼æ»šåŠ¨è·‘é©¬ç¯ç»„ä»¶"></a>React æ— ç¼æ»šåŠ¨è·‘é©¬ç¯ç»„ä»¶</h2><p>æœ€è¿‘åœ¨åšä¸€ä¸ªç”µå•†å¹³å°çš„é¡¹ç›®ï¼Œå…¶ä¸­ä¸€ä¸ªéœ€æ±‚æ˜¯åœ¨é¦–é¡µé¡¶éƒ¨å±•ç¤ºä¸€äº›é‡è¦çš„é€šçŸ¥å…¬å‘Šï¼Œæ¯”å¦‚ç‰©æµèµ”ä»˜ä¿¡æ¯ã€ä¿ƒé”€æ´»åŠ¨é¢„å‘Šç­‰ã€‚ä¸ºäº†å¸å¼•ç”¨æˆ·çš„æ³¨æ„åŠ›ï¼ŒUIå†³å®šé‡‡ç”¨è·‘é©¬ç¯çš„å½¢å¼æ¥å±•ç¤ºè¿™äº›ä¿¡æ¯ï¼Œå¹¶ä¸”è¦å®ç°æ— ç¼æ»šåŠ¨ï¼Œé¿å…å‡ºç°åœé¡¿æˆ–è·³è·ƒçš„è§†è§‰æ•ˆæœã€‚</p>
<p>ç”±äºå…¬å¸è€é¡¹ç›®é™åˆ¶ï¼Œæˆ‘ä»¬æ²¡æœ‰é‡‡ç”¨ç°æˆçš„è½®æ’­å›¾ç»„ä»¶ï¼Œäºæ˜¯å†³å®šè‡ªå·±åŠ¨æ‰‹å¼€å‘ä¸€ä¸ª React æ— ç¼æ»šåŠ¨è·‘é©¬ç¯ç»„ä»¶ã€‚</p>
<h3 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h3><p>æˆ‘ä»¬çš„è·‘é©¬ç¯ç»„ä»¶éœ€è¦æ»¡è¶³ä»¥ä¸‹å‡ ä¸ªéœ€æ±‚ï¼š</p>
<ol>
<li><strong>æ— ç¼æ»šåŠ¨</strong>: æ–‡æ¡ˆæ»šåŠ¨æµç•…ï¼Œé¦–å°¾è¡”æ¥è‡ªç„¶ï¼Œæ²¡æœ‰æ˜æ˜¾çš„åœé¡¿æˆ–è·³è·ƒã€‚</li>
<li><strong>å¯é…ç½®</strong>: å¯ä»¥è‡ªå®šä¹‰æ»šåŠ¨é€Ÿåº¦ã€æ–‡æ¡ˆå†…å®¹ã€å­—ä½“é¢œè‰²ç­‰æ ·å¼ã€‚</li>
<li><strong>æ˜“ç”¨</strong>: ä½¿ç”¨ç®€å•ï¼Œåªéœ€è¦ä¼ å…¥æ–‡æ¡ˆæ•°ç»„å³å¯ã€‚</li>
</ol>
<h3 id="ç»„ä»¶è®¾è®¡ä¸å®ç°"><a href="#ç»„ä»¶è®¾è®¡ä¸å®ç°" class="headerlink" title="ç»„ä»¶è®¾è®¡ä¸å®ç°"></a>ç»„ä»¶è®¾è®¡ä¸å®ç°</h3><h4 id="æ ¸å¿ƒæ€è·¯"><a href="#æ ¸å¿ƒæ€è·¯" class="headerlink" title="æ ¸å¿ƒæ€è·¯"></a>æ ¸å¿ƒæ€è·¯</h4><p>å®ç°æ— ç¼æ»šåŠ¨çš„å…³é”®åœ¨äºå¤åˆ¶ç¬¬ä¸€æ¡æ–‡æ¡ˆåˆ°æœ€åä¸€æ¡ï¼Œå½¢æˆä¸€ä¸ªå¾ªç¯ã€‚å½“æ»šåŠ¨åˆ°æœ€åä¸€æ¡æ–‡æ¡ˆæ—¶ï¼Œç¬é—´å›åˆ°ç¬¬ä¸€æ¡æ–‡æ¡ˆï¼Œç”±äºè§†è§‰ä¸Šç¬¬ä¸€æ¡æ–‡æ¡ˆå·²ç»åœ¨æœ€åä¸€æ¡æ–‡æ¡ˆåé¢ï¼Œæ‰€ä»¥çœ‹èµ·æ¥åƒæ˜¯ç»§ç»­æ»šåŠ¨ï¼Œä»è€Œè¾¾åˆ°æ— ç¼è¡”æ¥çš„æ•ˆæœã€‚</p>
<h4 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h4><p>é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰äº†ç»„ä»¶çš„ Props å’Œ Stateï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">SeamlessMarqueeProps</span> &#123;</span><br><span class="line">    <span class="attr">texts</span>: <span class="built_in">string</span>[]; <span class="comment">// è½®æ’­æ–‡æ¡ˆ</span></span><br><span class="line">    interval?: <span class="built_in">number</span>; <span class="comment">// è½®æ’­é—´éš”ï¼Œå•ä½æ¯«ç§’ï¼Œé»˜è®¤1000æ¯«ç§’ï¼ˆæ¯ç§’æ»šåŠ¨ä¸€ç»„æ–‡æ¡ˆï¼‰</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">SeamlessMarqueeState</span> &#123;</span><br><span class="line">    <span class="attr">translateY</span>: <span class="built_in">number</span>; <span class="comment">// æ»šåŠ¨è·ç¦»</span></span><br><span class="line">    <span class="attr">currentTextIndex</span>: <span class="built_in">number</span>; <span class="comment">// å½“å‰æ˜¾ç¤ºçš„æ–‡æ¡ˆç´¢å¼•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åï¼Œåœ¨ç»„ä»¶çš„ <code>componentDidMount</code> ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­å¯åŠ¨å®šæ—¶å™¨ï¼Œå¼€å§‹æ»šåŠ¨ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">componentDidMount</span> () &#123;</span><br><span class="line">    <span class="comment">// å¼€å§‹æ»šåŠ¨</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">startMarquee</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>startMarquee</code> æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>setInterval</code> å®šæ—¶è°ƒç”¨ <code>rollAnimation</code> æ–¹æ³•ï¼Œå®ç°æ»šåŠ¨åŠ¨ç”»ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">rollAnimation = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ... åŠ¨ç”»é€»è¾‘</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">startMarquee = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; interval = <span class="number">1000</span> &#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">marqueeInterval</span> = <span class="variable language_">window</span>.<span class="built_in">setInterval</span>(<span class="variable language_">this</span>.<span class="property">rollAnimation</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>), interval);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><code>rollAnimation</code> æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¤åˆ¶ç¬¬ä¸€æ¡æ–‡æ¡ˆåˆ°æœ€åä¸€æ¡ï¼Œç„¶åè®¡ç®—ä¸‹ä¸€ä¸ªæ–‡æ¡ˆç´¢å¼•å’Œæ»šåŠ¨è·ç¦»ï¼Œæœ€åæ›´æ–°ç»„ä»¶çš„ Stateï¼Œè§¦å‘é‡æ–°æ¸²æŸ“ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">rollAnimation = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ... å¤åˆ¶æ–‡æ¡ˆã€è®¡ç®—ç´¢å¼•å’Œæ»šåŠ¨è·ç¦»</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">        <span class="attr">translateY</span>: nextTranslateY,</span><br><span class="line">        <span class="attr">currentTextIndex</span>: nextTextIndex,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€åï¼Œåœ¨ <code>render</code> æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>ul</code> å…ƒç´ æ¥åŒ…è£¹æ–‡æ¡ˆåˆ—è¡¨ï¼Œå¹¶é€šè¿‡ <code>transform: translateY</code> æ¥å®ç°æ»šåŠ¨æ•ˆæœï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line">&lt;ul</span><br><span class="line">    className=<span class="string">&quot;marquee-content&quot;</span></span><br><span class="line">    style=&#123;&#123;</span><br><span class="line">        <span class="attr">transform</span>: <span class="string">`translateY(<span class="subst">$&#123;translateY&#125;</span>px)`</span></span><br><span class="line">    &#125;&#125;</span><br><span class="line">&gt;</span><br><span class="line">    &#123;textsWithFirst.<span class="title function_">map</span>(<span class="function">(<span class="params">text, index</span>) =&gt;</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span> <span class="attr">className</span>=<span class="string">&quot;marquee-item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;text&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">    ))&#125;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†è®©æ»šåŠ¨æ•ˆæœæ›´åŠ è‡ªç„¶ï¼Œæˆ‘ä»¬è¿˜æ·»åŠ äº†ä¸€ä¸ªæ¸å˜é®ç½©ï¼Œé®æŒ¡ä½æ–‡æ¡ˆåˆ—è¡¨çš„ä¸Šä¸‹è¾¹ç¼˜ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.marquee-mask &#123;</span><br><span class="line">    background-image: linear-gradient(to bottom, #fff 0%, transparent 50%, transparent 50%, #fff 100%);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»„ä»¶ä½¿ç”¨"><a href="#ç»„ä»¶ä½¿ç”¨" class="headerlink" title="ç»„ä»¶ä½¿ç”¨"></a>ç»„ä»¶ä½¿ç”¨</h3><p>ä½¿ç”¨èµ·æ¥éå¸¸ç®€å•ï¼Œåªéœ€è¦ä¼ å…¥æ–‡æ¡ˆæ•°ç»„å³å¯ï¼š</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line">&lt;<span class="title class_">SeamlessMarquee</span> texts=&#123;warningArr&#125; interval=&#123;<span class="number">3000</span>&#125; /&gt;</span><br></pre></td></tr></table></figure>
<h3 id="æºç å…¨è§ˆ"><a href="#æºç å…¨è§ˆ" class="headerlink" title="æºç å…¨è§ˆ"></a>æºç å…¨è§ˆ</h3><p><strong>SeamlessMarquee.tsx:</strong></p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.scss&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">SeamlessMarqueeProps</span> &#123;</span><br><span class="line">    <span class="attr">texts</span>: <span class="built_in">string</span>[]; <span class="comment">// è½®æ’­æ–‡æ¡ˆ</span></span><br><span class="line">    interval?: <span class="built_in">number</span>; <span class="comment">// è½®æ’­é—´éš”ï¼Œå•ä½æ¯«ç§’ï¼Œé»˜è®¤1000æ¯«ç§’ï¼ˆæ¯ç§’æ»šåŠ¨ä¸€ç»„æ–‡æ¡ˆï¼‰</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">SeamlessMarqueeState</span> &#123;</span><br><span class="line">    <span class="attr">translateY</span>: <span class="built_in">number</span>; <span class="comment">// æ»šåŠ¨è·ç¦»</span></span><br><span class="line">    <span class="attr">currentTextIndex</span>: <span class="built_in">number</span>; <span class="comment">// å½“å‰æ˜¾ç¤ºçš„æ–‡æ¡ˆç´¢å¼•</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SeamlessMarquee</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span>&lt;</span><br><span class="line">    <span class="title class_">SeamlessMarqueeProps</span>,</span><br><span class="line">    <span class="title class_">SeamlessMarqueeState</span></span><br><span class="line">&gt; &#123;</span><br><span class="line">    <span class="comment">// æ»šåŠ¨å®¹å™¨</span></span><br><span class="line">    <span class="keyword">private</span> <span class="attr">setMarqueeContentRef</span>: <span class="built_in">any</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="attr">marqueeInterval</span>: <span class="built_in">any</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span> (<span class="params"><span class="attr">props</span>: <span class="title class_">SeamlessMarqueeProps</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(props);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">            <span class="attr">translateY</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="attr">currentTextIndex</span>: <span class="number">0</span>,</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">componentDidMount</span> () &#123;</span><br><span class="line">        <span class="comment">// å¼€å§‹æ»šåŠ¨</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">startMarquee</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">componentWillUnmount</span> () &#123;</span><br><span class="line">        <span class="comment">// åœæ­¢æ»šåŠ¨</span></span><br><span class="line">        <span class="variable language_">window</span>.<span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">marqueeInterval</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * desc åŠ¨ç”»é€»è¾‘æŠ½ç¦»</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@author</span> <span class="variable">Lang</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@date</span> 2024-06-04 16:24:17</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    rollAnimation = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; texts &#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¤åˆ¶ç¬¬ä¸€ä¸ªæ–‡æ¡ˆåˆ°æœ€åä¸€ä¸ªï¼Œå®ç°æ— ç¼è¡”æ¥</span></span><br><span class="line">        <span class="keyword">const</span> textsWithFirst = [...texts, texts[<span class="number">0</span>]];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> &#123; currentTextIndex &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line">        <span class="comment">// è®¡ç®—ä¸‹ä¸€ä¸ªæ–‡æ¡ˆç´¢å¼•</span></span><br><span class="line">        <span class="keyword">const</span> nextTextIndex = (currentTextIndex + <span class="number">1</span>) % textsWithFirst.<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¡ç®—æ»šåŠ¨è·ç¦»</span></span><br><span class="line">        <span class="keyword">const</span> nextTranslateY = nextTextIndex * -<span class="number">36</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœæ»šåŠ¨åˆ°æœ€åä¸€ä¸ªæ–‡æ¡ˆï¼Œéœ€è¦ç¬é—´å›åˆ°ç¬¬ä¸€ä¸ªæ–‡æ¡ˆ</span></span><br><span class="line">        <span class="keyword">if</span> (currentTextIndex === textsWithFirst.<span class="property">length</span> - <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// ç¬é—´å›åˆ°ç¬¬ä¸€ä¸ªæ–‡æ¡ˆ - å…³é—­è¿‡æ¸¡åŠ¨ç”»</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">setMarqueeContentRef</span>.<span class="property">style</span>.<span class="property">transition</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">setMarqueeContentRef</span>.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">&#x27;translateY(0)&#x27;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ç­‰å¾…å›åˆ°ç¬¬ä¸€ä¸ªæ–‡æ¡ˆåï¼Œå†å¼€å¯è¿‡æ¸¡åŠ¨ç”»</span></span><br><span class="line">            <span class="comment">// window.setTimeout çš„ä½œç”¨æ˜¯ç¡®ä¿åœ¨ translateY è®¾ç½®ä¸º 0 ä¹‹åï¼Œå†å¼€å¯è¿‡æ¸¡åŠ¨ç”»ï¼Œé¿å…è§†è§‰ä¸Šâ€œå›æ‹‰â€çš„æ„Ÿè§‰</span></span><br><span class="line">            <span class="variable language_">window</span>.<span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// ç¬¬ä¸€ä¸ªæ–‡æ¡ˆåœ¨æœ€åä¸€ä¸ªæ–‡æ¡ˆçš„åé¢ï¼Œæ‰€ä»¥åœ¨è§†è§‰ä¸Šå·²ç»æ˜¯ç¬¬äºŒä¸ªæ–‡æ¡ˆäº†</span></span><br><span class="line">                <span class="comment">// è®¾ç½®ç¬¬äºŒä¸ªæ–‡æ¡ˆä¸ºå½“å‰æ–‡æ¡ˆï¼Œç”¨äºè¿‡æ¸¡åŠ¨ç”»</span></span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">                    <span class="attr">translateY</span>: -<span class="number">36</span>,</span><br><span class="line">                    <span class="attr">currentTextIndex</span>: <span class="number">1</span>,</span><br><span class="line">                &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">setMarqueeContentRef</span>.<span class="property">style</span>.<span class="property">transition</span> = <span class="string">&#x27;transform 0.5s&#x27;</span>;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;, <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">            <span class="attr">translateY</span>: nextTranslateY,</span><br><span class="line">            <span class="attr">currentTextIndex</span>: nextTextIndex,</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¼€å§‹æ»šåŠ¨</span></span><br><span class="line">    startMarquee = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; interval = <span class="number">1000</span> &#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">marqueeInterval</span> = <span class="variable language_">window</span>.<span class="built_in">setInterval</span>(<span class="variable language_">this</span>.<span class="property">rollAnimation</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>), interval);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span> () &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; texts &#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line">        <span class="keyword">const</span> &#123; translateY &#125; = <span class="variable language_">this</span>.<span class="property">state</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¤åˆ¶ç¬¬ä¸€ä¸ªæ–‡æ¡ˆåˆ°æœ€åä¸€ä¸ªï¼Œå®ç°æ— ç¼è¡”æ¥</span></span><br><span class="line">        <span class="keyword">const</span> textsWithFirst = [...texts, texts[<span class="number">0</span>]];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;seamless-marquee&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;marquee-mask&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">ul</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&quot;marquee-content&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">ref</span>=<span class="string">&#123;ref</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                        this.setMarqueeContentRef = ref;</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                    style=&#123;&#123;</span></span><br><span class="line"><span class="language-xml">                        transform: `translateY($&#123;translateY&#125;px)`</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    &#123;textsWithFirst.map((text, index) =&gt; (</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span> <span class="attr">className</span>=<span class="string">&quot;marquee-item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            &#123;text&#125;</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    ))&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">SeamlessMarquee</span>;</span><br></pre></td></tr></table></figure>
<p><strong>SeamlessMarquee.scss:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.seamless-marquee &#123;</span><br><span class="line">    width: 380px;</span><br><span class="line">    height: 36px;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">    position: relative;</span><br><span class="line">    font-size: 12px;</span><br><span class="line"></span><br><span class="line">    .marquee-mask &#123;</span><br><span class="line">        position: absolute;</span><br><span class="line">        left: 0;</span><br><span class="line">        top: 0;</span><br><span class="line">        content: &#x27;&#x27;;</span><br><span class="line">        display: block;</span><br><span class="line">        background-image: linear-gradient(to bottom, #fff 0%, transparent 50%, transparent 50%, #fff 100%);</span><br><span class="line">        width: 100%;</span><br><span class="line">        height: 100%;</span><br><span class="line">        z-index: 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .marquee-content &#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        flex-direction: column;</span><br><span class="line">        position: absolute;</span><br><span class="line">        top: 0;</span><br><span class="line">        left: 0;</span><br><span class="line">        width: 100%;</span><br><span class="line">        height: auto;</span><br><span class="line">        transition: transform .5s;</span><br><span class="line"></span><br><span class="line">        .marquee-item &#123;</span><br><span class="line">            display: flex;</span><br><span class="line">            align-items: center;</span><br><span class="line">            height: 36px;</span><br><span class="line">            line-height: 36px;</span><br><span class="line">            color: #FF4D4A;</span><br><span class="line">            font-size: 12px;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæˆ‘ä»¬æˆåŠŸå¼€å‘äº†ä¸€ä¸ª React æ— ç¼æ»šåŠ¨è·‘é©¬ç¯ç»„ä»¶ï¼Œæ»¡è¶³äº†é¡¹ç›®çš„éœ€æ±‚ï¼Œå¹¶ä¸”ä»£ç ç®€æ´æ˜“æ‡‚ï¼Œæ–¹ä¾¿ç»´æŠ¤ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚ï¼Œå¯¹ç»„ä»¶è¿›è¡Œè¿›ä¸€æ­¥çš„æ‰©å±•å’Œä¼˜åŒ–ï¼Œæ¯”å¦‚æ·»åŠ è‡ªå®šä¹‰æ ·å¼ã€æš‚åœ/ç»§ç»­æ»šåŠ¨ç­‰åŠŸèƒ½ã€‚</p>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>React</tag>
        <tag>è·‘é©¬ç¯</tag>
      </tags>
  </entry>
  <entry>
    <title>huskyçš„åŸç†æ˜¯ä»€ä¹ˆ</title>
    <url>/xiaolangwiki/2022/01/09/04/</url>
    <content><![CDATA[<p>ä¸€ä¸ªç®€åŒ–çš„ä»£ç ç¤ºä¾‹,å±•ç¤º husky çš„åŸºæœ¬å®ç°åŸç†ã€‚è¿™ä¸ªä¾‹å­ä¼šå±•ç¤º husky å¦‚ä½•æ‹¦æˆª Git hooks å¹¶æ‰§è¡Œè‡ªå®šä¹‰è„šæœ¬ã€‚è¯·æ³¨æ„,è¿™åªæ˜¯ä¸€ä¸ªæ¦‚å¿µæ€§çš„ç¤ºä¾‹,çœŸå®çš„ husky å®ç°è¦å¤æ‚å¾—å¤šã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€åŒ–çš„ JavaScript ä»£ç ç¤ºä¾‹,å±•ç¤ºäº† husky çš„æ ¸å¿ƒåŸç†:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; execSync &#125; = <span class="built_in">require</span>(<span class="string">&quot;child_process&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SimpleHusky</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">hooksDir</span> = path.<span class="title function_">join</span>(<span class="string">&quot;.git&quot;</span>, <span class="string">&quot;hooks&quot;</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">config</span> = <span class="variable language_">this</span>.<span class="title function_">loadConfig</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åŠ è½½huskyé…ç½®</span></span><br><span class="line">  <span class="title function_">loadConfig</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> packageJson = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(fs.<span class="title function_">readFileSync</span>(<span class="string">&quot;package.json&quot;</span>, <span class="string">&quot;utf8&quot;</span>));</span><br><span class="line">    <span class="keyword">return</span> packageJson.<span class="property">husky</span> || &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å®‰è£…Git hooks</span></span><br><span class="line">  <span class="title function_">install</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!fs.<span class="title function_">existsSync</span>(<span class="variable language_">this</span>.<span class="property">hooksDir</span>)) &#123;</span><br><span class="line">      fs.<span class="title function_">mkdirSync</span>(<span class="variable language_">this</span>.<span class="property">hooksDir</span>, &#123; <span class="attr">recursive</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">keys</span>(<span class="variable language_">this</span>.<span class="property">config</span>.<span class="property">hooks</span>).<span class="title function_">forEach</span>(<span class="function">(<span class="params">hookName</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> hookPath = path.<span class="title function_">join</span>(<span class="variable language_">this</span>.<span class="property">hooksDir</span>, hookName);</span><br><span class="line">      <span class="keyword">const</span> hookContent = <span class="variable language_">this</span>.<span class="title function_">generateHookScript</span>(hookName);</span><br><span class="line">      fs.<span class="title function_">writeFileSync</span>(hookPath, hookContent, &#123; <span class="attr">mode</span>: <span class="number">0o755</span> &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Husky hooks installed successfully!&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç”Ÿæˆhookè„šæœ¬</span></span><br><span class="line">  <span class="title function_">generateHookScript</span>(<span class="params">hookName</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`#!/bin/sh</span></span><br><span class="line"><span class="string"># Husky</span></span><br><span class="line"><span class="string"># è¿è¡Œé…ç½®çš„è„šæœ¬</span></span><br><span class="line"><span class="string"><span class="subst">$&#123;<span class="variable language_">this</span>.config.hooks[hookName]&#125;</span></span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿è¡Œhook</span></span><br><span class="line">  <span class="title function_">runHook</span>(<span class="params">hookName</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> script = <span class="variable language_">this</span>.<span class="property">config</span>.<span class="property">hooks</span>[hookName];</span><br><span class="line">    <span class="keyword">if</span> (script) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Running <span class="subst">$&#123;hookName&#125;</span> hook...`</span>);</span><br><span class="line">        <span class="title function_">execSync</span>(script, &#123; <span class="attr">stdio</span>: <span class="string">&quot;inherit&quot;</span> &#125;);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;hookName&#125;</span> hook completed successfully.`</span>);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`<span class="subst">$&#123;hookName&#125;</span> hook failed. Git operation aborted.`</span>);</span><br><span class="line">        process.<span class="title function_">exit</span>(<span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> husky = <span class="keyword">new</span> <span class="title class_">SimpleHusky</span>();</span><br><span class="line">husky.<span class="title function_">install</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨¡æ‹Ÿè§¦å‘pre-commit hook</span></span><br><span class="line">husky.<span class="title function_">runHook</span>(<span class="string">&quot;pre-commit&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªç®€åŒ–çš„å®ç°å±•ç¤ºäº† husky çš„å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µ:</p>
<ol>
<li>é…ç½®åŠ è½½: ä» package.json æ–‡ä»¶ä¸­è¯»å– husky é…ç½®ã€‚</li>
<li>Hook å®‰è£…: åœ¨.git/hooks ç›®å½•ä¸­åˆ›å»ºå¯¹åº”çš„ hook è„šæœ¬æ–‡ä»¶ã€‚</li>
<li>Hook è„šæœ¬ç”Ÿæˆ: ç”Ÿæˆå¯æ‰§è¡Œçš„ shell è„šæœ¬,å…¶ä¸­åŒ…å«ç”¨æˆ·é…ç½®çš„å‘½ä»¤ã€‚</li>
<li>Hook æ‰§è¡Œ: å½“ Git æ“ä½œè§¦å‘ hook æ—¶,æ‰§è¡Œç›¸åº”çš„è„šæœ¬ã€‚</li>
<li>é”™è¯¯å¤„ç†: å¦‚æœè„šæœ¬æ‰§è¡Œå¤±è´¥,åˆ™é˜»æ­¢ Git æ“ä½œç»§ç»­è¿›è¡Œã€‚</li>
</ol>
<p>ä½¿ç”¨è¿™ä¸ªç®€åŒ–ç‰ˆçš„ husky,ä½ å¯ä»¥åœ¨ package.json ä¸­æ·»åŠ ç±»ä¼¼è¿™æ ·çš„é…ç½®:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;husky&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;hooks&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;pre-commit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm run lint &amp;&amp; npm test&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;pre-push&quot;</span><span class="punctuation">:</span> <span class="string">&quot;npm run build&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>ç„¶å,å½“ä½ å°è¯•æäº¤ä»£ç æ—¶,å®ƒä¼šå…ˆè¿è¡Œ lint å’Œæµ‹è¯•,åªæœ‰åœ¨è¿™äº›æ£€æŸ¥éƒ½é€šè¿‡å,æäº¤æ‰ä¼šæˆåŠŸã€‚</p>
<p>è¯·æ³¨æ„,å®é™…çš„ husky å®ç°è¦å¤æ‚å¾—å¤š,åŒ…æ‹¬æ›´å¤šçš„é”™è¯¯å¤„ç†ã€è·¨å¹³å°å…¼å®¹æ€§ã€ä¸ä¸åŒç‰ˆæœ¬çš„ Git çš„å…¼å®¹æ€§ç­‰ã€‚è¿™ä¸ªç¤ºä¾‹ä»…ç”¨äºè¯´æ˜åŸºæœ¬åŸç†ã€‚å¦‚æœæ‚¨éœ€è¦åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨,æˆ‘å¼ºçƒˆå»ºè®®ä½¿ç”¨å®˜æ–¹çš„ husky åŒ…,å› ä¸ºå®ƒç»è¿‡äº†å……åˆ†çš„æµ‹è¯•å’Œä¼˜åŒ–ã€‚</p>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>husky</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¨‹åºå‘˜æ•ˆç‡å¤§æŒ‘æˆ˜ï¼šåˆ«è®©&quot;å¶ç„¶å¤æ‚åº¦&quot;å‘äº†ä½ ï¼</title>
    <url>/xiaolangwiki/2022/02/18/11/</url>
    <content><![CDATA[<h1 id="ç¨‹åºå‘˜æ•ˆç‡å¤§æŒ‘æˆ˜ï¼šåˆ«è®©â€å¶ç„¶å¤æ‚åº¦â€å‘äº†ä½ ï¼"><a href="#ç¨‹åºå‘˜æ•ˆç‡å¤§æŒ‘æˆ˜ï¼šåˆ«è®©â€å¶ç„¶å¤æ‚åº¦â€å‘äº†ä½ ï¼" class="headerlink" title="ç¨‹åºå‘˜æ•ˆç‡å¤§æŒ‘æˆ˜ï¼šåˆ«è®©â€å¶ç„¶å¤æ‚åº¦â€å‘äº†ä½ ï¼"></a>ç¨‹åºå‘˜æ•ˆç‡å¤§æŒ‘æˆ˜ï¼šåˆ«è®©â€å¶ç„¶å¤æ‚åº¦â€å‘äº†ä½ ï¼</h1><p>å˜¿ï¼Œå¤§å®¶å¥½ï¼æˆ‘æ˜¯ä¸€å22å²çš„å¤§ä¸‰è®¡ç®—æœºç³»å­¦ç”Ÿï¼Œæœ€è¿‘è¯»åˆ°äº†ä¸€ç¯‡è¶…çº§æœ‰æ„æ€çš„æ–‡ç« ï¼Œè®²çš„æ˜¯ç¨‹åºå‘˜å·¥ä½œæ•ˆç‡çš„é—®é¢˜ã€‚è¯´å®è¯ï¼Œè¿™ç¯‡æ–‡ç« çœŸçš„è®©æˆ‘æœ‰ç‚¹éœ‡æƒŠï¼Œä¹Ÿè®©æˆ‘å¯¹æœªæ¥çš„ç¨‹åºå‘˜ç”Ÿæ¶¯æœ‰äº†æ–°çš„è®¤è¯†ã€‚æˆ‘æƒ³è·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹æˆ‘çš„æƒ³æ³•ï¼Œå¸Œæœ›èƒ½ç»™åŒæ ·å³å°†è¸å…¥ITåœˆçš„å°ä¼™ä¼´ä»¬ä¸€äº›å¯å‘ã€‚</p>
<p>é¦–å…ˆï¼Œè¿™ç¯‡æ–‡ç« æåˆ°äº†ä¸€ä¸ªå«â€å¶ç„¶å¤æ‚åº¦â€çš„æ¦‚å¿µã€‚è¯´ç™½äº†ï¼Œå°±æ˜¯æˆ‘ä»¬ç¨‹åºå‘˜ç»å¸¸å¿™å¾—è¦æ­»è¦æ´»ï¼Œç»“æœè§£å†³çš„é—®é¢˜æ ¹æœ¬ä¸æ˜¯ç¨‹åºæœ¬èº«çš„é—®é¢˜ï¼Œè€Œæ˜¯å› ä¸ºé€‰é”™äº†å·¥å…·æˆ–æ–¹æ³•å¯¼è‡´çš„é¢å¤–éº»çƒ¦ã€‚æˆ‘å½“æ—¶å°±æƒ³ï¼Œæˆ‘é ï¼Œè¿™ä¸å°±æ˜¯åœ¨æ¬èµ·çŸ³å¤´ç ¸è‡ªå·±çš„è„šå—ï¼Ÿ</p>
<p>æƒ³æƒ³çœ‹ï¼Œæˆ‘ä»¬æ¯å¤©åŠ ç­åŠ ç‚¹ï¼Œä»¥ä¸ºè‡ªå·±åœ¨æ”»å…‹ä»€ä¹ˆæŠ€æœ¯éš¾å…³ï¼Œç»“æœå¯èƒ½åªæ˜¯åœ¨è§£å†³è‡ªå·±åˆ¶é€ çš„é—®é¢˜ã€‚è¿™å°±å¥½æ¯”ä½ æœ¬æ¥è¦åšä¸€é“ç®€å•çš„ç‚’é¥­ï¼Œç»“æœéè¦ç”¨é«˜å‹é”…ï¼Œæå¾—è‡ªå·±æ‰‹å¿™è„šä¹±ï¼Œæœ€åè¿˜æŠŠå¨æˆ¿ç‚¸äº†ï¼ˆåˆ«ç¬‘ï¼Œæˆ‘å®¤å‹å°±å¹²è¿‡è¿™ç§äº‹ï¼‰ã€‚</p>
<p>æ–‡ç« é‡Œè¿˜è¯´ï¼Œä¸šç•Œå…¶å®æœ‰å¾ˆå¤šæé«˜æ•ˆç‡çš„æœ€ä½³å®è·µï¼Œä½†é—®é¢˜æ˜¯è¿™äº›å®è·µä¹‹é—´æ²¡ä»€ä¹ˆæ˜æ˜¾è”ç³»ï¼Œæå¾—äººå¾ˆéš¾å…¨é¢æŒæ¡ã€‚æˆ‘å¬äº†ç›´å‘¼å¤ªçœŸå®äº†ï¼æƒ³æƒ³æˆ‘ä»¬ä¸Šè¯¾å­¦çš„é‚£äº›ç¼–ç¨‹èŒƒå¼ã€è®¾è®¡æ¨¡å¼ã€æ•æ·å¼€å‘â€¦è€å¸ˆè®²çš„æ—¶å€™å¤´å¤´æ˜¯é“ï¼Œåˆ°äº†å®é™…é¡¹ç›®é‡Œï¼Œæˆ‘å°±å‚»çœ¼äº†ï¼Œæ ¹æœ¬ä¸çŸ¥é“è¯¥æ€ä¹ˆç”¨ã€‚</p>
<p>ä¸è¿‡ï¼Œè¿™ç¯‡æ–‡ç« çš„ä½œè€…ä¹Ÿä¸æ˜¯å…‰åæ§½ï¼Œäººå®¶ç»™å‡ºäº†å››ä¸ªè¶…å®ç”¨çš„åŸåˆ™ï¼šä»¥ç»ˆä¸ºå§‹ã€ä»»åŠ¡åˆ†è§£ã€æ²Ÿé€šåé¦ˆã€è‡ªåŠ¨åŒ–ã€‚ä¹ä¸€çœ‹ï¼Œè¿™å››ä¸ªåŸåˆ™ç®€å•å¾—åƒæ˜¯å°å­¦ç”Ÿéƒ½æ‡‚çš„é“ç†ã€‚ä½†ä»”ç»†æƒ³æƒ³ï¼Œåœ¨å®é™…å·¥ä½œä¸­åšåˆ°è¿™äº›ï¼Œè¿˜çœŸä¸å®¹æ˜“ã€‚</p>
<p>æ‹¿â€ä»¥ç»ˆä¸ºå§‹â€æ¥è¯´å§ã€‚æˆ‘åœ¨åšè¯¾ç¨‹é¡¹ç›®çš„æ—¶å€™ï¼Œç»å¸¸æ˜¯çœ‹åˆ°é¢˜ç›®å°±å¼€å§‹ç‹‚æ•²ä»£ç ï¼Œç»“æœå†™åˆ°ä¸€åŠå‘ç°ç†è§£é”™é¢˜ç›®æ„æ€ï¼Œç™½å¿™æ´»ä¸€åœºã€‚å¦‚æœä¸€å¼€å§‹å°±èŠ±ç‚¹æ—¶é—´æƒ³æ¸…æ¥šæœ€ç»ˆè¦è¾¾åˆ°ä»€ä¹ˆæ•ˆæœï¼Œå†å€’æ¨ç€è®¾è®¡æ¯ä¸€æ­¥ï¼Œè‚¯å®šèƒ½å°‘èµ°ä¸å°‘å¼¯è·¯ã€‚</p>
<p>â€œä»»åŠ¡åˆ†è§£â€è¿™ä¸ªæˆ‘å€’æ˜¯æœ‰ç‚¹ä½“ä¼šã€‚æˆ‘å¤§ä¸€åˆšå…¥å­¦çš„æ—¶å€™ï¼Œå°±è¢«è€å¸ˆæ•™å¯¼è¿‡ï¼Œè¦æŠŠä¸€ä¸ªå¤§é¡¹ç›®åˆ†è§£æˆå¤šä¸ªå°ä»»åŠ¡ï¼Œç„¶åæ¯ä¸ªäººè´Ÿè´£ä¸€ä¸ªä»»åŠ¡ã€‚ç»“æœæˆ‘å½“æ—¶å°±è¢«æ•™å¯¼å¾—å¤´å¤´æ˜¯é“ï¼Œè§‰å¾—è¿™å¯çœŸæ˜¯ä¸€ä»¶å¾ˆæœ‰æ„æ€çš„äº‹æƒ…ã€‚åæ¥æˆ‘å‚åŠ è¿‡ä¸€ä¸ªå­¦æ ¡é¡¹ç›®ï¼Œå…‰æ˜¯çœ‹é¡¹ç›®æè¿°å°±è§‰å¾—å¤´å¤§ã€‚ä½†æ˜¯é¡¹ç›®è´Ÿè´£äººç‰¹åˆ«å‰å®³ï¼ŒæŠŠæ•´ä¸ªé¡¹ç›®åˆ†è§£æˆä¸€ä¸ªä¸ªå°ä»»åŠ¡ï¼Œåˆ†é…ç»™ä¸åŒç­çº§çš„å­¦ç”Ÿã€‚ç»“æœæˆ‘ä»¬è¿™ç¾¤ç´ æœªè°‹é¢çš„äººï¼Œæ„£æ˜¯åˆä½œå¾—æŒºé¡ºç•…ã€‚</p>
<p>è‡³äºâ€æ²Ÿé€šåé¦ˆâ€å’Œâ€è‡ªåŠ¨åŒ–â€ï¼Œè€å®è¯´ï¼Œåœ¨å­¦æ ¡é‡Œæ¥è§¦å¾—ä¸å¤šã€‚ä½†æˆ‘æš‘å‡å®ä¹ çš„æ—¶å€™ï¼Œå¯ç®—æ˜¯è§è¯†åˆ°äº†å®ƒä»¬çš„å¨åŠ›ã€‚ç»å¸¸æ²Ÿé€šçœŸçš„èƒ½é¿å…å¾ˆå¤šä¸å¿…è¦çš„è¿”å·¥ï¼Œè€Œè‡ªåŠ¨åŒ–æµ‹è¯•å’Œéƒ¨ç½²ï¼Œç®€ç›´æ˜¯æ‡’äººç¦éŸ³å•Šï¼è¦æ˜¯æ—©ç‚¹å­¦ä¼šè¿™äº›ï¼ŒæŒ‡ä¸å®šæˆ‘çš„æœŸæœ«é¡¹ç›®èƒ½å°‘æ‰å‡ æ ¹å¤´å‘å‘¢ã€‚</p>
<p>ä¸è¿‡ï¼Œæ–‡ç« é‡Œä¹Ÿè¯´äº†ï¼Œè¿™äº›åŸåˆ™çœ‹ç€ç®€å•ï¼Œåšèµ·æ¥å¯ä¸å®¹æ˜“ã€‚æ¯”å¦‚è¯´ï¼Œåœ¨é¡¹ç›®ä¸€å¼€å§‹å°±èŠ±å¤§åŠ›æ°”åšè§„åˆ’å’Œè‡ªåŠ¨åŒ–ï¼Œæ€»è§‰å¾—æ˜¯åœ¨æµªè´¹æ—¶é—´ã€‚ä½†æ˜¯ç»å†è¿‡å‡ æ¬¡â€è¡¥æ¼æ´â€çš„ç—›è‹¦ä¹‹åï¼Œæˆ‘æ‰æ˜ç™½ï¼Œæ—©åšå‡†å¤‡çœŸçš„èƒ½çœä¸‹åé¢çš„ä¸å°‘äº‹ã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªé©¬ä¸Šå°±è¦è¿›å…¥èŒåœºçš„å‡†ç¨‹åºå‘˜ï¼Œè¿™ç¯‡æ–‡ç« ç»™äº†æˆ‘ä¸€è®°å½“å¤´æ£’å–ã€‚å®ƒè®©æˆ‘æ„è¯†åˆ°ï¼Œæˆä¸ºä¸€ä¸ªç‰›é€¼çš„ç¨‹åºå‘˜ï¼Œä¸åªæ˜¯è¦ä¼šå†™ä»£ç ï¼Œæ›´é‡è¦çš„æ˜¯è¦å­¦ä¼šé«˜æ•ˆå·¥ä½œã€‚æˆ‘ä»¬å¾—å­¦ä¼šé¿å¼€é‚£äº›è‡ªå·±ç»™è‡ªå·±è®¾çš„å‘ï¼ŒæŠŠç²¾åŠ›èŠ±åœ¨çœŸæ­£æœ‰ä»·å€¼çš„é—®é¢˜ä¸Šã€‚</p>
<p>æ‰€ä»¥ï¼Œå’±ä»¬ä»¥åå†™ä»£ç çš„æ—¶å€™ï¼Œå¯å¾—æ“¦äº®çœ¼ç›å•Šï¼åˆ«è®©é‚£ä¸ªä»€ä¹ˆâ€å¶ç„¶å¤æ‚åº¦â€æŠŠå’±ä»¬å‘äº†ã€‚è®©æˆ‘ä»¬ä¸€èµ·åŠªåŠ›ï¼Œç”¨èªæ˜çš„æ–¹å¼å·¥ä½œï¼Œåˆ›é€ å‡ºçœŸæ­£ç‰›é€¼çš„è½¯ä»¶ï¼Œæ”¹å˜è¿™ä¸ªä¸–ç•Œï¼</p>
<p>å¥½äº†ï¼Œæˆ‘çš„ç¢ç¢å¿µå°±åˆ°è¿™é‡Œã€‚</p>
]]></content>
      <categories>
        <category>æ€è€ƒ</category>
      </categories>
      <tags>
        <tag>è¯»ä¹¦</tag>
        <tag>æ•ˆç‡</tag>
      </tags>
  </entry>
  <entry>
    <title>è§£å¯†10xç¨‹åºå‘˜çš„æ€è€ƒæ–¹å¼:ä¸€ä¸ªå¤§ä¸‰å­¦ç”Ÿçš„é¢†æ‚Ÿ</title>
    <url>/xiaolangwiki/2022/07/23/35/</url>
    <content><![CDATA[<h1 id="è§£å¯†10xç¨‹åºå‘˜çš„æ€è€ƒæ–¹å¼-ä¸€ä¸ªå¤§ä¸‰å­¦ç”Ÿçš„é¢†æ‚Ÿ"><a href="#è§£å¯†10xç¨‹åºå‘˜çš„æ€è€ƒæ–¹å¼-ä¸€ä¸ªå¤§ä¸‰å­¦ç”Ÿçš„é¢†æ‚Ÿ" class="headerlink" title="è§£å¯†10xç¨‹åºå‘˜çš„æ€è€ƒæ–¹å¼:ä¸€ä¸ªå¤§ä¸‰å­¦ç”Ÿçš„é¢†æ‚Ÿ"></a>è§£å¯†10xç¨‹åºå‘˜çš„æ€è€ƒæ–¹å¼:ä¸€ä¸ªå¤§ä¸‰å­¦ç”Ÿçš„é¢†æ‚Ÿ</h1><p>å¤§å®¶å¥½,æˆ‘æ˜¯ä¸€åå¤§ä¸‰çš„è®¡ç®—æœºç³»å­¦ç”Ÿã€‚æœ€è¿‘,æˆ‘åœ¨å®ä¹ ä¸­é‡åˆ°äº†ä¸€ä½è¢«åŒäº‹ä»¬ç§°ä¸ºâ€10xç¨‹åºå‘˜â€çš„å¤§ç¥ã€‚è¿™è®©æˆ‘å¼€å§‹æ€è€ƒ:åˆ°åº•ä»€ä¹ˆæ˜¯10xç¨‹åºå‘˜?ä»–ä»¬æ˜¯å¦‚ä½•æ€è€ƒçš„?ç»è¿‡ä¸€æ®µæ—¶é—´çš„è§‚å¯Ÿå’Œå­¦ä¹ ,æˆ‘æœ‰äº†ä¸€äº›æ–°çš„è®¤è¯†,ä»Šå¤©å°±å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹ã€‚</p>
<p>é¦–å…ˆ,æˆ‘ä»¬å¾—ææ¸…æ¥šä»€ä¹ˆæ˜¯10xç¨‹åºå‘˜ã€‚ç®€å•æ¥è¯´,å°±æ˜¯èƒ½å¤Ÿåˆ›é€ 10å€äºæ™®é€šç¨‹åºå‘˜ä»·å€¼çš„è¶…çº§å¼€å‘è€…ã€‚ä½†è¿™å¹¶ä¸æ„å‘³ç€ä»–ä»¬è¦æ¯”åˆ«äººå¤šå†™10å€çš„ä»£ç ,è€Œæ˜¯ä»–ä»¬çš„æ€è€ƒæ–¹å¼å’Œè§£å†³é—®é¢˜çš„èƒ½åŠ›è¿œè¶…å¸¸äººã€‚</p>
<p>é‚£ä¹ˆ,è¿™äº›10xç¨‹åºå‘˜æ˜¯å¦‚ä½•æ€è€ƒçš„å‘¢?</p>
<ol>
<li>ç³»ç»ŸåŒ–æ€è€ƒ:é™ä½å¶ç„¶å¤æ‚åº¦</li>
</ol>
<p>è®°å¾—æœ‰ä¸€æ¬¡,æˆ‘ä»¬å›¢é˜Ÿæ¥åˆ°ä¸€ä¸ªçœ‹ä¼¼ç®€å•çš„éœ€æ±‚:ç»™APPæ·»åŠ ä¸€ä¸ªæ–°çš„åŠŸèƒ½æŒ‰é’®ã€‚å¤§å¤šæ•°äººäºŒè¯ä¸è¯´å°±å¼€å§‹codingäº†,ä½†æ˜¯æˆ‘ä»¬å›¢é˜Ÿçš„10xå¤§ç¥å´å…ˆåœä¸‹æ¥æ€è€ƒã€‚ä»–è¯´:â€ç­‰ç­‰,æˆ‘ä»¬å…ˆæ¥åˆ†æä¸€ä¸‹è¿™ä¸ªéœ€æ±‚èƒŒåçš„çœŸæ­£ç›®çš„ã€‚â€</p>
<p>ä»–æå‡ºäº†ä¸€ä¸ªé€šç”¨çš„æ€è€ƒæ¡†æ¶:</p>
<ul>
<li>ç¬¬ä¸€æ­¥:ç¡®å®šç°çŠ¶</li>
<li>ç¬¬äºŒæ­¥:æ˜ç¡®ç›®æ ‡</li>
<li>ç¬¬ä¸‰æ­¥:åˆ¶å®šå®ç°è·¯å¾„</li>
</ul>
<p>è¿™ä¸ªæ¡†æ¶çœ‹ä¼¼ç®€å•,ä½†å´èƒ½å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿç†æ¸…æ€è·¯,é¿å…é™·å…¥ä¸å¿…è¦çš„å¤æ‚æ€§ä¸­ã€‚</p>
<ol>
<li>æ˜ç¡®çœŸå®ç›®æ ‡</li>
</ol>
<p>å¤§ç¥å¹¶ä¸æ»¡è¶³äºè¡¨é¢çš„éœ€æ±‚æè¿°ã€‚ä»–å¼€å§‹è¿½é—®äº§å“ç»ç†:â€è¿™ä¸ªæ–°åŠŸèƒ½çš„çœŸæ­£ç›®æ ‡æ˜¯ä»€ä¹ˆ?æˆ‘ä»¬è¦è§£å†³ç”¨æˆ·çš„ä»€ä¹ˆç—›ç‚¹?æœ‰æ²¡æœ‰å…¶ä»–æ–¹å¼å¯ä»¥æ›´å¥½åœ°è¾¾æˆè¿™ä¸ªç›®æ ‡?â€</p>
<p>è¿™äº›é—®é¢˜è®©æˆ‘æ„è¯†åˆ°,ä½œä¸ºç¨‹åºå‘˜,æˆ‘ä»¬ä¸åº”è¯¥åªæ˜¯ä¸€ä¸ªä»£ç æ¬è¿å·¥ã€‚æˆ‘ä»¬éœ€è¦æ·±å…¥ç†è§£éœ€æ±‚èƒŒåçš„çœŸå®ç›®æ ‡,è¿™æ ·æ‰èƒ½æä¾›æœ€ä¼˜è§£å†³æ–¹æ¡ˆã€‚</p>
<ol>
<li>ä»»åŠ¡åˆ†è§£</li>
</ol>
<p>ç¡®å®šäº†ç›®æ ‡å,å¤§ç¥å¼€å§‹å°†æ•´ä¸ªä»»åŠ¡åˆ†è§£æˆå°å—ã€‚ä»–è¯´:â€æŠŠå¤§è±¡æ”¾è¿›å†°ç®±éœ€è¦ä¸‰æ­¥,æˆ‘ä»¬ä¹Ÿè¦æŠŠå¤æ‚çš„ä»»åŠ¡æ‹†è§£æˆå¯ç®¡ç†çš„å°ä»»åŠ¡ã€‚â€</p>
<p>è¿™ç§æ–¹æ³•ä¸ä»…è®©æ•´ä¸ªå¼€å‘è¿‡ç¨‹å˜å¾—æ¸…æ™°å¯æ§,ä¹Ÿæ–¹ä¾¿äº†å›¢é˜Ÿåä½œå’Œè¿›åº¦è·Ÿè¸ªã€‚</p>
<ol>
<li>åŠ å¼ºæ²Ÿé€šåé¦ˆ</li>
</ol>
<p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­,å¤§ç¥ç‰¹åˆ«å¼ºè°ƒæ²Ÿé€šçš„é‡è¦æ€§ã€‚ä»–ç»å¸¸ç»„ç»‡ç®€çŸ­çš„ç«™ä¼š,ç¡®ä¿æ¯ä¸ªäººéƒ½æ¸…æ¥šè‡ªå·±çš„ä»»åŠ¡å’Œæ•´ä¸ªé¡¹ç›®çš„è¿›å±•ã€‚</p>
<p>ä»–è¯´:â€ä»£ç æ˜¯å†™ç»™äººçœ‹çš„,é¡ºä¾¿èƒ½åœ¨æœºå™¨ä¸Šè¿è¡Œã€‚â€è¿™å¥è¯è®©æˆ‘æ˜ç™½äº†,è‰¯å¥½çš„æ²Ÿé€šä¸ä»…èƒ½æé«˜å¼€å‘æ•ˆç‡,è¿˜èƒ½é™ä½ä»£ç çš„ç»´æŠ¤æˆæœ¬ã€‚</p>
<ol>
<li>å®ç°è‡ªåŠ¨åŒ–</li>
</ol>
<p>æœ€è®©æˆ‘æƒŠè®¶çš„æ˜¯,å¤§ç¥æ€»èƒ½åœ¨çŸ­æ—¶é—´å†…å®Œæˆçœ‹ä¼¼ä¸å¯èƒ½çš„ä»»åŠ¡ã€‚ä»–çš„ç§˜è¯€å°±æ˜¯:è‡ªåŠ¨åŒ–ã€‚</p>
<p>ä»ä»£ç éƒ¨ç½²åˆ°æµ‹è¯•,ä»–éƒ½å°½å¯èƒ½åœ°å®ç°è‡ªåŠ¨åŒ–ã€‚ä»–è¯´:â€é‡å¤çš„å·¥ä½œäº¤ç»™æœºå™¨,æˆ‘ä»¬çš„å¤§è„‘åº”è¯¥ä¸“æ³¨äºåˆ›é€ æ€§çš„æ€è€ƒã€‚â€</p>
<p>è¿™è®©æˆ‘æƒ³èµ·äº†è‡ªå·±æ›¾ç»ç†¬å¤œæ‰‹åŠ¨éƒ¨ç½²ä»£ç çš„ç»å†,é¡¿æ—¶æ„Ÿè§‰è‡ªå·±è¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ã€‚</p>
<ol>
<li>æŒç»­å­¦ä¹ å’Œåæ€</li>
</ol>
<p>å¤§ç¥æ€»æ˜¯åœ¨å­¦ä¹ æ–°ä¸œè¥¿ã€‚æ— è®ºæ˜¯æ–°çš„ç¼–ç¨‹è¯­è¨€,è¿˜æ˜¯æœ€æ–°çš„æŠ€æœ¯è¶‹åŠ¿,ä»–éƒ½ä¿æŒç€å¼ºçƒˆçš„å¥½å¥‡å¿ƒã€‚</p>
<p>ä»–ç»å¸¸è¯´:â€åœ¨è¿™ä¸ªè¡Œä¸š,å¦‚æœä½ è§‰å¾—è‡ªå·±å·²ç»å¤Ÿå‰å®³äº†,é‚£å°±æ„å‘³ç€ä½ å·²ç»å¼€å§‹è½åäº†ã€‚â€</p>
<p>è¿™å¥è¯æ·±æ·±åœ°è§¦åŠ¨äº†æˆ‘ã€‚ä½œä¸ºä¸€ä¸ªå³å°†æ¯•ä¸šçš„å­¦ç”Ÿ,æˆ‘æ›´åº”è¯¥ä¿æŒå­¦ä¹ çš„çƒ­æƒ…,ä¸æ–­æå‡è‡ªå·±ã€‚</p>
<p>ç»“è¯­:</p>
<p>é€šè¿‡è§‚å¯Ÿå’Œå­¦ä¹ 10xç¨‹åºå‘˜çš„æ€è€ƒæ–¹å¼,æˆ‘æ„è¯†åˆ°æˆä¸ºä¸€ä¸ªä¼˜ç§€çš„ç¨‹åºå‘˜ä¸ä»…ä»…æ˜¯æŠ€æœ¯é—®é¢˜,æ›´é‡è¦çš„æ˜¯æ€ç»´æ–¹å¼çš„è½¬å˜ã€‚</p>
<p>ç³»ç»ŸåŒ–æ€è€ƒã€æ˜ç¡®ç›®æ ‡ã€ä»»åŠ¡åˆ†è§£ã€åŠ å¼ºæ²Ÿé€šã€å®ç°è‡ªåŠ¨åŒ–ã€æŒç»­å­¦ä¹ ,è¿™äº›åŸåˆ™ä¸ä»…é€‚ç”¨äºç¼–ç¨‹,ä¹Ÿé€‚ç”¨äºæˆ‘ä»¬çš„å­¦ä¹ å’Œç”Ÿæ´»ã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªå³å°†æ­¥å…¥èŒåœºçš„å‡†ç¨‹åºå‘˜,æˆ‘å†³å®šä»ç°åœ¨å¼€å§‹å°±åŸ¹å…»è¿™ç§æ€è€ƒæ–¹å¼ã€‚ä¹Ÿè®¸æˆ‘ç°åœ¨è¿˜ä¸æ˜¯10xç¨‹åºå‘˜,ä½†æˆ‘ç›¸ä¿¡åªè¦åšæŒè¿™ç§æ€ç»´æ¨¡å¼,ç»ˆæœ‰ä¸€å¤©æˆ‘ä¹Ÿèƒ½æˆä¸ºåˆ«äººçœ¼ä¸­çš„â€å¤§ç¥â€ã€‚<br>æœ€å,ç¥å¤§å®¶éƒ½èƒ½æˆä¸º10xç¨‹åºå‘˜!</p>
]]></content>
      <categories>
        <category>æ€è€ƒ</category>
      </categories>
      <tags>
        <tag>æ€è€ƒæ–¹å¼</tag>
        <tag>ç¨‹åºå‘˜</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸€ä¸ªåŸºæœ¬çš„æ‹¦æˆªå™¨å®ç°ç¤ºä¾‹ï¼šAxios æ‹¦æˆªå™¨</title>
    <url>/xiaolangwiki/2022/01/12/14/</url>
    <content><![CDATA[<h2 id="ä¸€ä¸ªåŸºæœ¬çš„æ‹¦æˆªå™¨å®ç°ç¤ºä¾‹ï¼š"><a href="#ä¸€ä¸ªåŸºæœ¬çš„æ‹¦æˆªå™¨å®ç°ç¤ºä¾‹ï¼š" class="headerlink" title="ä¸€ä¸ªåŸºæœ¬çš„æ‹¦æˆªå™¨å®ç°ç¤ºä¾‹ï¼š"></a>ä¸€ä¸ªåŸºæœ¬çš„æ‹¦æˆªå™¨å®ç°ç¤ºä¾‹ï¼š</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">InterceptorManager</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">handlers</span> = [];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">use</span>(<span class="params">fulfilled, rejected</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">handlers</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">      fulfilled,</span><br><span class="line">      rejected</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">handlers</span>.<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">eject</span>(<span class="params">id</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">handlers</span>[id]) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">handlers</span>[id] = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Axios</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">interceptors</span> = &#123;</span><br><span class="line">      <span class="attr">request</span>: <span class="keyword">new</span> <span class="title class_">InterceptorManager</span>(),</span><br><span class="line">      <span class="attr">response</span>: <span class="keyword">new</span> <span class="title class_">InterceptorManager</span>()</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">request</span>(<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»º Promise é“¾</span></span><br><span class="line">    <span class="keyword">let</span> chain = [</span><br><span class="line">      <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Sending Request:&#x27;</span>, config);</span><br><span class="line">        <span class="keyword">return</span> config;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="literal">undefined</span></span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="property">handlers</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">interceptor</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (interceptor !== <span class="literal">null</span>) &#123;</span><br><span class="line">        chain.<span class="title function_">unshift</span>(interceptor.<span class="property">fulfilled</span>, interceptor.<span class="property">rejected</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ·»åŠ å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="property">handlers</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">interceptor</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (interceptor !== <span class="literal">null</span>) &#123;</span><br><span class="line">        chain.<span class="title function_">push</span>(interceptor.<span class="property">fulfilled</span>, interceptor.<span class="property">rejected</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰§è¡Œ Promise é“¾</span></span><br><span class="line">    <span class="keyword">let</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(config);</span><br><span class="line">    <span class="keyword">while</span> (chain.<span class="property">length</span>) &#123;</span><br><span class="line">      promise = promise.<span class="title function_">then</span>(chain.<span class="title function_">shift</span>(), chain.<span class="title function_">shift</span>());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> promise;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">const</span> axios = <span class="keyword">new</span> <span class="title class_">Axios</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Request Interceptor 1&#x27;</span>);</span><br><span class="line">    config.<span class="property">headers</span> = &#123; <span class="string">&#x27;X-Custom-Header&#x27;</span>: <span class="string">&#x27;foo&#x27;</span> &#125;;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Response Interceptor 1&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘é€è¯·æ±‚</span></span><br><span class="line">axios.<span class="title function_">request</span>(&#123; <span class="attr">url</span>: <span class="string">&#x27;https://api.example.com/data&#x27;</span> &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Final Response:&#x27;</span>, response))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error:&#x27;</span>, error));</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªç®€åŒ–ç‰ˆæœ¬åŒ…å«äº†ä»¥ä¸‹å…³é”®éƒ¨åˆ†ï¼š</p>
<ol>
<li><code>InterceptorManager</code> ç±»ï¼šç®¡ç†æ‹¦æˆªå™¨çš„æ·»åŠ å’Œç§»é™¤ã€‚</li>
<li><code>Axios</code> ç±»ï¼šåŒ…å«è¯·æ±‚æ–¹æ³•å’Œæ‹¦æˆªå™¨ç®¡ç†ã€‚</li>
<li><code>request</code> æ–¹æ³•ï¼š<ul>
<li>åˆ›å»ºä¸€ä¸ªåŒ…å«å®é™…è¯·æ±‚å¤„ç†å‡½æ•°çš„åˆå§‹ Promise é“¾ã€‚</li>
<li>å°†è¯·æ±‚æ‹¦æˆªå™¨æ·»åŠ åˆ°é“¾çš„å¼€å¤´ã€‚</li>
<li>å°†å“åº”æ‹¦æˆªå™¨æ·»åŠ åˆ°é“¾çš„æœ«å°¾ã€‚</li>
<li>ä½¿ç”¨ <code>while</code> å¾ªç¯æ‰§è¡Œæ•´ä¸ª Promise é“¾ã€‚</li>
</ul>
</li>
<li>ä½¿ç”¨ç¤ºä¾‹ï¼šå±•ç¤ºäº†å¦‚ä½•æ·»åŠ æ‹¦æˆªå™¨å’Œå‘é€è¯·æ±‚ã€‚</li>
</ol>
<p>è¿™ä¸ªå®ç°å±•ç¤ºäº†æ‹¦æˆªå™¨çš„åŸºæœ¬å·¥ä½œåŸç†ï¼š</p>
<ul>
<li>æ‹¦æˆªå™¨è¢«å­˜å‚¨åœ¨æ•°ç»„ä¸­ã€‚</li>
<li>è¯·æ±‚æ—¶ï¼Œåˆ›å»ºä¸€ä¸ª Promise é“¾ï¼ŒåŒ…å«æ‰€æœ‰æ‹¦æˆªå™¨å’Œå®é™…çš„è¯·æ±‚å¤„ç†ã€‚</li>
<li>Promise é“¾æŒ‰é¡ºåºæ‰§è¡Œï¼Œå…è®¸æ¯ä¸ªæ‹¦æˆªå™¨ä¿®æ”¹è¯·æ±‚æˆ–å“åº”ã€‚</li>
</ul>
<p>å®é™…çš„ Axios åº“æ›´åŠ å¤æ‚</p>
<h2 id="æ‹¦æˆªå™¨å®ç°çš„æ ¸å¿ƒ"><a href="#æ‹¦æˆªå™¨å®ç°çš„æ ¸å¿ƒ" class="headerlink" title="æ‹¦æˆªå™¨å®ç°çš„æ ¸å¿ƒ"></a>æ‹¦æˆªå™¨å®ç°çš„æ ¸å¿ƒ</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(config);</span><br><span class="line"><span class="keyword">while</span> (chain.<span class="property">length</span>) &#123;</span><br><span class="line">  promise = promise.<span class="title function_">then</span>(chain.<span class="title function_">shift</span>(), chain.<span class="title function_">shift</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç æ˜¯æ‹¦æˆªå™¨å®ç°çš„æ ¸å¿ƒï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ª Promise é“¾æ¥ä¾æ¬¡æ‰§è¡Œæ‰€æœ‰çš„æ‹¦æˆªå™¨å’Œå®é™…çš„è¯·æ±‚ã€‚è®©æˆ‘ä»¬é€æ­¥åˆ†æï¼š</p>
<ol>
<li><code>let promise = Promise.resolve(config);</code><ul>
<li>è¿™è¡Œåˆ›å»ºäº†ä¸€ä¸ªç«‹å³è§£å†³ï¼ˆresolveï¼‰çš„ Promiseï¼Œåˆå§‹å€¼æ˜¯ config å¯¹è±¡ã€‚</li>
<li>è¿™ä¸ª Promise å°†ä½œä¸ºæ•´ä¸ªé“¾çš„èµ·ç‚¹ã€‚</li>
</ul>
</li>
<li><code>while (chain.length) &#123; ... &#125;</code><ul>
<li>è¿™ä¸ªå¾ªç¯ä¼šä¸€ç›´æ‰§è¡Œï¼Œç›´åˆ° chain æ•°ç»„ä¸ºç©ºã€‚</li>
<li>chain æ•°ç»„åŒ…å«äº†æ‰€æœ‰çš„æ‹¦æˆªå™¨å‡½æ•°å’Œå®é™…çš„è¯·æ±‚å¤„ç†å‡½æ•°ã€‚</li>
</ul>
</li>
<li><code>promise = promise.then(chain.shift(), chain.shift());</code><ul>
<li><code>chain.shift()</code> ç§»é™¤å¹¶è¿”å›æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</li>
<li>è¿™é‡Œæ¯æ¬¡è°ƒç”¨ <code>shift()</code> ä¸¤æ¬¡ï¼Œåˆ†åˆ«è·å–æˆåŠŸå›è°ƒå’Œå¤±è´¥å›è°ƒã€‚</li>
<li><code>promise.then()</code> å°†è¿™ä¸¤ä¸ªå›è°ƒæ·»åŠ åˆ°å½“å‰ Promise çš„åé¢ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„ Promiseã€‚</li>
<li>æ–°çš„ Promise è¢«èµ‹å€¼å› <code>promise</code> å˜é‡ï¼Œå‡†å¤‡ä¸‹ä¸€æ¬¡å¾ªç¯ã€‚</li>
</ul>
</li>
</ol>
<p>å·¥ä½œæµç¨‹ç¤ºä¾‹ï¼š</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹æ‹¦æˆªå™¨å’Œè¯·æ±‚å¤„ç†å‡½æ•°ï¼š</p>
<ul>
<li>è¯·æ±‚æ‹¦æˆªå™¨ 1: requestInterceptor1</li>
<li>è¯·æ±‚æ‹¦æˆªå™¨ 2: requestInterceptor2</li>
<li>å®é™…è¯·æ±‚å¤„ç†: sendRequest</li>
<li>å“åº”æ‹¦æˆªå™¨ 1: responseInterceptor1</li>
<li>å“åº”æ‹¦æˆªå™¨ 2: responseInterceptor2</li>
</ul>
<p>åˆå§‹çš„ chain æ•°ç»„å¯èƒ½å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line">  requestInterceptor2, errorHandler2,</span><br><span class="line">  requestInterceptor1, errorHandler1,</span><br><span class="line">  sendRequest, <span class="literal">undefined</span>,</span><br><span class="line">  responseInterceptor1, errorHandler3,</span><br><span class="line">  responseInterceptor2, errorHandler4</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>å¾ªç¯æ‰§è¡Œè¿‡ç¨‹ï¼š</p>
<ol>
<li>ç¬¬ä¸€æ¬¡å¾ªç¯ï¼š<code>promise.then(requestInterceptor2, errorHandler2)</code></li>
<li>ç¬¬äºŒæ¬¡å¾ªç¯ï¼š<code>promise.then(requestInterceptor1, errorHandler1)</code></li>
<li>ç¬¬ä¸‰æ¬¡å¾ªç¯ï¼š<code>promise.then(sendRequest, undefined)</code></li>
<li>ç¬¬å››æ¬¡å¾ªç¯ï¼š<code>promise.then(responseInterceptor1, errorHandler3)</code></li>
<li>ç¬¬äº”æ¬¡å¾ªç¯ï¼š<code>promise.then(responseInterceptor2, errorHandler4)</code></li>
</ol>
<p>è¿™æ ·ï¼Œé€šè¿‡ä¸æ–­åœ°å°†æ‹¦æˆªå™¨å’Œè¯·æ±‚å¤„ç†å‡½æ•°æ·»åŠ åˆ° Promise é“¾ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå®Œæ•´çš„æ‰§è¡Œåºåˆ—ï¼Œç¡®ä¿äº†æ‰€æœ‰æ“ä½œæŒ‰ç…§æ­£ç¡®çš„é¡ºåºæ‰§è¡Œã€‚</p>
<p>è¿™ç§å®ç°æ–¹å¼çš„ä¼˜ç‚¹æ˜¯ï¼š</p>
<ol>
<li>çµæ´»æ€§ï¼šå¯ä»¥è½»æ¾æ·»åŠ æˆ–ç§»é™¤æ‹¦æˆªå™¨ã€‚</li>
<li>å¼‚æ­¥æ”¯æŒï¼šæ¯ä¸ªæ‹¦æˆªå™¨éƒ½å¯ä»¥æ˜¯å¼‚æ­¥çš„ã€‚</li>
<li>é”™è¯¯å¤„ç†ï¼šæ¯ä¸ªæ­¥éª¤éƒ½æœ‰ç›¸åº”çš„é”™è¯¯å¤„ç†æœºåˆ¶ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>axios</tag>
        <tag>interceptor</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»&quot;ç™»å½•&quot;åˆ°&quot;äººç”Ÿ&quot;:ä¸€ä¸ªå‡†ç¨‹åºå‘˜çš„&quot;ä»¥ç»ˆä¸ºå§‹&quot;é¢†æ‚Ÿ</title>
    <url>/xiaolangwiki/2022/09/21/22/</url>
    <content><![CDATA[<h1 id="ä»â€ç™»å½•â€åˆ°â€äººç”Ÿâ€-ä¸€ä¸ªå‡†ç¨‹åºå‘˜çš„â€ä»¥ç»ˆä¸ºå§‹â€é¢†æ‚Ÿ"><a href="#ä»â€ç™»å½•â€åˆ°â€äººç”Ÿâ€-ä¸€ä¸ªå‡†ç¨‹åºå‘˜çš„â€ä»¥ç»ˆä¸ºå§‹â€é¢†æ‚Ÿ" class="headerlink" title="ä»â€ç™»å½•â€åˆ°â€äººç”Ÿâ€:ä¸€ä¸ªå‡†ç¨‹åºå‘˜çš„â€ä»¥ç»ˆä¸ºå§‹â€é¢†æ‚Ÿ"></a>ä»â€ç™»å½•â€åˆ°â€äººç”Ÿâ€:ä¸€ä¸ªå‡†ç¨‹åºå‘˜çš„â€ä»¥ç»ˆä¸ºå§‹â€é¢†æ‚Ÿ</h1><p>å¤§å®¶å¥½,æˆ‘æ˜¯å°æµª,ä¸€ä¸ªå³å°†æ¯•ä¸šçš„è½¯ä»¶å·¥ç¨‹ä¸“ä¸šå­¦ç”Ÿã€‚æœ€è¿‘åœ¨åšé¡¹ç›®çš„æ—¶å€™,æˆ‘çªç„¶å¯¹â€ä»¥ç»ˆä¸ºå§‹â€è¿™ä¸ªæ¦‚å¿µæœ‰äº†å…¨æ–°çš„è®¤è¯†,æ„Ÿè§‰æ•´ä¸ªäººéƒ½å‡çº§äº†,å¿ä¸ä½æƒ³å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹ã€‚</p>
<p>è¿˜è®°å¾—å¤§äºŒé‚£ä¼šå„¿,æˆ‘ä»¬ä¸Šè½¯ä»¶å·¥ç¨‹è¯¾æ—¶åšè¿‡ä¸€ä¸ªè®¾è®¡ç™»å½•åŠŸèƒ½çš„å°ç»ƒä¹ ã€‚é‚£æ—¶å€™çš„æˆ‘,æ»¡è„‘å­éƒ½æ˜¯ç‚«é…·çš„ç•Œé¢è®¾è®¡ã€èŠ±é‡Œèƒ¡å“¨çš„åŠ¨ç”»æ•ˆæœ,ç”šè‡³è¿˜æƒ³ç€åŠ ä¸ªäººè„¸è¯†åˆ«å•¥çš„ã€‚ç»“æœå‘¢?è€å¸ˆçœ‹å®Œæˆ‘çš„è®¾è®¡å,åªè¯´äº†ä¸€å¥è¯:â€ä½ æœ‰è€ƒè™‘è¿‡ç”¨æˆ·çœŸæ­£éœ€è¦çš„æ˜¯ä»€ä¹ˆå—?â€</p>
<p>æˆ‘æ‡µäº†ã€‚æ˜¯å•Š,æˆ‘è®¾è®¡äº†åŠå¤©,å¥½åƒçœŸçš„æ²¡æƒ³è¿‡ç”¨æˆ·åˆ°åº•éœ€è¦ä»€ä¹ˆã€‚è¿™ä¸ªå°å°çš„æŒ«æŠ˜è®©æˆ‘å¼€å§‹æ€è€ƒ:æˆ‘ä»¬åšäº‹æƒ…çš„æ—¶å€™,æ˜¯ä¸æ˜¯åº”è¯¥å…ˆæƒ³æƒ³æœ€ç»ˆè¦è¾¾åˆ°ä»€ä¹ˆæ•ˆæœ,è€Œä¸æ˜¯ä¸€å¤´æ‰è¿›å»å°±å¼€å§‹å¹²?</p>
<p>åæ¥åœ¨å®ä¹ çš„æ—¶å€™,æˆ‘é‡åˆ°äº†ä¸€ä¸ªç‰¹åˆ«å‰å®³çš„mentorã€‚æœ‰ä¸€æ¬¡æˆ‘ä»¬åœ¨è®¨è®ºä¸€ä¸ªæ–°åŠŸèƒ½,æˆ‘åˆå¼€å§‹æ»”æ»”ä¸ç»åœ°è¯´èµ·å®ç°æ–¹æ¡ˆã€‚ä»–å¬äº†ä¸€ä¼šå„¿,æ‰“æ–­æˆ‘è¯´:â€å°æµª,å…ˆåˆ«æ€¥ç€è°ˆæ€ä¹ˆåšã€‚å’±ä»¬å…ˆæƒ³æƒ³,å¦‚æœè¿™ä¸ªåŠŸèƒ½åšå¥½äº†,ä¼šç»™ç”¨æˆ·å¸¦æ¥ä»€ä¹ˆæ ·çš„ä½“éªŒ?å®ƒä¼šè§£å†³ç”¨æˆ·ä»€ä¹ˆé—®é¢˜?â€</p>
<p>è¿™ä¸€åˆ»,æˆ‘ä»¿ä½›è¢«æ‰“å¼€äº†æ–°ä¸–ç•Œçš„å¤§é—¨ã€‚åŸæ¥,çœŸæ­£é«˜æ˜çš„ç¨‹åºå‘˜,ä¸æ˜¯å†™ä»£ç æœ€å¿«çš„,è€Œæ˜¯æœ€æ‡‚å¾—æ€è€ƒç›®æ ‡å’Œç»“æœçš„ã€‚</p>
<p>ä»é‚£ä»¥å,æˆ‘å¼€å§‹å°è¯•ç”¨â€ä»¥ç»ˆä¸ºå§‹â€çš„æ–¹å¼æ¥åšäº‹ã€‚æ¯”å¦‚åœ¨åšæ¯•ä¸šè®¾è®¡çš„æ—¶å€™,æˆ‘æ²¡æœ‰æ€¥ç€å†™ä»£ç ,è€Œæ˜¯å…ˆèŠ±äº†ä¸¤å‘¨æ—¶é—´å»è°ƒç ”ç”¨æˆ·éœ€æ±‚,è®¾æƒ³äº§å“ä¸Šçº¿åçš„åœºæ™¯ã€‚è¿™ä¸ªè¿‡ç¨‹è®©æˆ‘å‘ç°äº†å¾ˆå¤šä¹‹å‰å¿½è§†çš„ç»†èŠ‚,æœ€ååšå‡ºæ¥çš„ä½œå“ä¸ä»…å¾—åˆ°äº†è€å¸ˆçš„è‚¯å®š,è¿˜çœŸçš„è§£å†³äº†ä¸€äº›åŒå­¦çš„å®é™…é—®é¢˜ã€‚</p>
<p>ç°åœ¨å›æƒ³èµ·æ¥,æˆ‘å‘ç°â€ä»¥ç»ˆä¸ºå§‹â€å…¶å®ä¸åªæ˜¯ä¸€ç§å·¥ä½œæ–¹æ³•,æ›´æ˜¯ä¸€ç§ç”Ÿæ´»æ€åº¦ã€‚å®ƒè®©æˆ‘å­¦ä¼šäº†åœ¨è¡ŒåŠ¨ä¹‹å‰å…ˆæ€è€ƒç›®æ ‡,åœ¨å¿™ç¢Œä¹‹ä¸­ä¸å¿˜åˆå¿ƒã€‚</p>
<p>å°±æ‹¿æ‰¾å·¥ä½œæ¥è¯´å§ã€‚å¾ˆå¤šåŒå­¦ä¸€å¤´æ‰è¿›å„ç§é¢è¯•é¢˜æµ·é‡Œ,ä½†æˆ‘é€‰æ‹©å…ˆæƒ³æ¸…æ¥šè‡ªå·±ç†æƒ³çš„èŒä¸šå‘å±•è·¯å¾„ã€‚ç»“æœæ˜¯,è™½ç„¶æˆ‘å¯èƒ½åˆ·é¢˜æ²¡ä»–ä»¬å¤š,ä½†åœ¨é¢è¯•çš„æ—¶å€™èƒ½å¤Ÿæ¸…æ™°åœ°è¡¨è¾¾è‡ªå·±çš„èŒä¸šè§„åˆ’,åè€Œå¾—åˆ°äº†é¢è¯•å®˜çš„é’çã€‚</p>
<p>å½“ç„¶,å®è·µâ€ä»¥ç»ˆä¸ºå§‹â€å¹¶ä¸æ€»æ˜¯å®¹æ˜“çš„ã€‚æœ‰æ—¶å€™,æˆ‘ä¹Ÿä¼šé™·å…¥æ—¥å¸¸çäº‹,å¿˜è®°äº†æœ€åˆçš„ç›®æ ‡ã€‚ä½†æ¯å½“æˆ‘æ„Ÿåˆ°è¿·èŒ«æˆ–è€…å‹åŠ›å±±å¤§çš„æ—¶å€™,æˆ‘å°±ä¼šåœä¸‹æ¥é—®è‡ªå·±:â€æˆ‘æœ€ç»ˆæƒ³è¦è¾¾åˆ°ä»€ä¹ˆæ ·çš„ç»“æœ?â€è¿™ä¸ªç®€å•çš„é—®é¢˜æ€»èƒ½è®©æˆ‘é‡æ–°æ‰¾åˆ°æ–¹å‘ã€‚</p>
<p>å¯¹äºæˆ‘ä»¬è¿™äº›å³å°†è¸å…¥èŒåœºçš„å‡†ç¨‹åºå‘˜æ¥è¯´,â€ä»¥ç»ˆä¸ºå§‹â€çš„æ€ç»´æ–¹å¼å°¤ä¸ºé‡è¦ã€‚å› ä¸ºæˆ‘ä»¬çš„å·¥ä½œæœ¬è´¨ä¸Šæ˜¯åœ¨å°†æƒ³è±¡å˜ä¸ºç°å®,å¦‚æœè¿è‡ªå·±æƒ³è¦çš„ç»“æœéƒ½ä¸æ¸…æ¥š,åˆæ€ä¹ˆèƒ½å†™å‡ºå¥½çš„ä»£ç å‘¢?</p>
<p>æ‰€ä»¥,æˆ‘æƒ³å¯¹æ‰€æœ‰å’Œæˆ‘ä¸€æ ·çš„å­¦å¼Ÿå­¦å¦¹ä»¬è¯´:ä¸è¦æ€¥ç€åŸ‹å¤´è‹¦å¹²,å…ˆæŠ¬å¤´çœ‹çœ‹ä½ è¦åˆ°è¾¾çš„æ–¹å‘ã€‚æ— è®ºæ˜¯å­¦ä¹ ã€å·¥ä½œè¿˜æ˜¯ç”Ÿæ´»,éƒ½è¦å…ˆæƒ³æ¸…æ¥šä½ æƒ³è¦çš„ç»“æœæ˜¯ä»€ä¹ˆ,ç„¶åå†è§„åˆ’ä½ çš„è¡ŒåŠ¨ã€‚è¿™æ ·,ä½ çš„æ¯ä¸€åˆ†åŠªåŠ›éƒ½ä¸ä¼šç™½è´¹,æ¯ä¸€æ­¥éƒ½ä¼šç¦»ä½ çš„ç›®æ ‡æ›´è¿‘ä¸€äº›ã€‚</p>
<p>æœ€å,æˆ‘æƒ³ç”¨æˆ‘ä»¬ä¸“ä¸šå¸¸è¯´çš„ä¸€å¥è¯æ¥ç»“æŸè¿™ç¯‡æ–‡ç« :â€ä»£ç æ˜¯æ€ä¹ˆå†™çš„ä¸é‡è¦,é‡è¦çš„æ˜¯å®ƒèƒ½ä¸èƒ½è§£å†³é—®é¢˜ã€‚â€åŒæ ·,ç”Ÿæ´»ä¹Ÿæ˜¯å¦‚æ­¤,é‡è¦çš„ä¸æ˜¯ä½ å¤šä¹ˆå¿™ç¢Œ,è€Œæ˜¯ä½ æ˜¯å¦åœ¨æœç€è‡ªå·±æƒ³è¦çš„æ–¹å‘å‰è¿›ã€‚</p>
]]></content>
      <categories>
        <category>æ€è€ƒ</category>
      </categories>
      <tags>
        <tag>ç¨‹åºå‘˜</tag>
        <tag>æ€è€ƒ</tag>
        <tag>ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>webpackæ¨¡å—åŒ–åŸç†è§£æ - å¤§ä¸€æ–°ç”Ÿçš„å‰ç«¯å·¥ç¨‹åŒ–åˆæ¢</title>
    <url>/xiaolangwiki/2019/10/19/22/</url>
    <content><![CDATA[<p>webpackæ¨¡å—åŒ–åŸç†è§£æ - å¤§ä¸€æ–°ç”Ÿçš„å‰ç«¯å·¥ç¨‹åŒ–åˆæ¢</p>
<p>å¤§å®¶å¥½!æˆ‘æ˜¯å°æµª,ä¸€ååˆšåˆšè¸å…¥å¤§å­¦æ ¡å›­çš„è½¯ä»¶å·¥ç¨‹ä¸“ä¸šæ–°ç”Ÿã€‚è™½ç„¶æ‰å¤§ä¸€,ä½†æˆ‘å·²ç»å¯¹å‰ç«¯å¼€å‘äº§ç”Ÿäº†æµ“åšçš„å…´è¶£ã€‚æœ€è¿‘,æˆ‘å¼€å§‹æ¥è§¦å‰ç«¯å·¥ç¨‹åŒ–,å°¤å…¶æ˜¯webpackè¿™ä¸ªå¼ºå¤§çš„å·¥å…·ã€‚è¯´å®è¯,ä¸€å¼€å§‹æˆ‘å®Œå…¨è¢«å„ç§æ¦‚å¿µå’Œæœ¯è¯­ææ™•äº†ã€‚ä¸è¿‡,ç»è¿‡ä¸€æ®µæ—¶é—´çš„å­¦ä¹ å’Œå®è·µ,æˆ‘é€æ¸ç†è§£äº†webpackçš„æ ¸å¿ƒæ€æƒ³ã€‚ä»Šå¤©,æˆ‘æƒ³ä»¥ä¸€ä¸ªæ–°æ‰‹çš„è§†è§’,å’Œå¤§å®¶åˆ†äº«æˆ‘å¯¹webpackæ¨¡å—åŒ–åŸç†çš„ç†è§£ã€‚</p>
<p>è¿˜è®°å¾—æˆ‘ç¬¬ä¸€æ¬¡å¬è¯´webpackæ—¶çš„æƒ…æ™¯å—?é‚£æ˜¯åœ¨ä¸€æ¬¡å­¦æ ¡çš„å‰ç«¯æŠ€æœ¯åˆ†äº«ä¼šä¸Šã€‚å½“æ—¶,å­¦é•¿ä»¬è®¨è®ºçš„å†…å®¹å¯¹æˆ‘æ¥è¯´ç®€ç›´åƒå¤©ä¹¦ä¸€æ ·ã€‚ä½†æ˜¯,æˆ‘è¢«ä»–ä»¬æè¿°çš„å‰ç«¯å·¥ç¨‹åŒ–çš„é­…åŠ›æ·±æ·±å¸å¼•äº†ã€‚äºæ˜¯,æˆ‘å†³å®šè¦ä¸€æ¢ç©¶ç«Ÿ!</p>
<p>é¦–å…ˆ,è®©æˆ‘ä»¬æ¥ç†è§£webpackçš„æ ¸å¿ƒ - æ¨¡å—åŒ–ã€‚ä½œä¸ºä¸€ä¸ªåˆšæ¥è§¦ç¼–ç¨‹çš„æ–°æ‰‹,æˆ‘å¾ˆå¿«å°±æ„è¯†åˆ°,éšç€é¡¹ç›®è§„æ¨¡çš„å¢å¤§,ä»£ç ä¼šå˜å¾—è¶Šæ¥è¶Šéš¾ä»¥ç®¡ç†ã€‚è¿™æ—¶,æ¨¡å—åŒ–å°±æ˜¾å¾—å°¤ä¸ºé‡è¦äº†ã€‚å®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç»„ç»‡ä»£ç ,æé«˜å¯ç»´æŠ¤æ€§å’Œå¤ç”¨æ€§ã€‚é‚£ä¹ˆ,webpackæ˜¯å¦‚ä½•å®ç°æ¨¡å—åŒ–çš„å‘¢?è®©æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„ä¾‹å­å¼€å§‹:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¿™æ˜¯webpackæ‰“åŒ…åçš„ç®€åŒ–ç‰ˆæœ¬</span></span><br><span class="line">(<span class="keyword">function</span> (<span class="params">list</span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">require</span>(<span class="params">file</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> <span class="built_in">exports</span> = &#123;&#125;;</span><br><span class="line">      (<span class="keyword">function</span> (<span class="params"><span class="built_in">exports</span>, code</span>) &#123;</span><br><span class="line">        <span class="built_in">eval</span>(code);</span><br><span class="line">      &#125;)(<span class="built_in">exports</span>, list[file]);</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">exports</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">require</span>(<span class="string">&quot;index.js&quot;</span>);</span><br><span class="line">  &#125;)(&#123;</span><br><span class="line">    <span class="string">&quot;index.js&quot;</span>: <span class="string">`</span></span><br><span class="line"><span class="string">      var add = require(&#x27;add.js&#x27;).default</span></span><br><span class="line"><span class="string">      console.log(add(1 , 2))</span></span><br><span class="line"><span class="string">          `</span>,</span><br><span class="line">    <span class="string">&quot;add.js&quot;</span>: <span class="string">`exports.default = function(a,b)&#123;return a + b&#125;`</span>,</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<p>çœ‹åˆ°è¿™æ®µä»£ç ,æˆ‘ç¬¬ä¸€ååº”ä¹Ÿæ˜¯ä¸€è„¸æ‡µé€¼ã€‚ä½†æ˜¯åˆ«æ‹…å¿ƒ,è®©æˆ‘ä»¬ä¸€æ­¥æ­¥æ¥è§£æ:</p>
<ol>
<li>æœ€å¤–å±‚æ˜¯ä¸€ä¸ªè‡ªæ‰§è¡Œå‡½æ•°,å®ƒæ¥æ”¶ä¸€ä¸ªå‚æ•°<code>list</code>ã€‚è¿™ä¸ª<code>list</code>å…¶å®å°±æ˜¯æˆ‘ä»¬æ‰€æœ‰çš„æ¨¡å—ä»£ç ã€‚</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">(<span class="keyword">function</span> (<span class="params">list</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)(&#123;</span><br><span class="line">  <span class="string">&quot;index.js&quot;</span>: <span class="string">`...`</span>,</span><br><span class="line">  <span class="string">&quot;add.js&quot;</span>: <span class="string">`...`</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ol>
<li>åœ¨è¿™ä¸ªå‡½æ•°å†…éƒ¨,å®šä¹‰äº†ä¸€ä¸ª<code>require</code>å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°å°±æ˜¯æ¨¡å—åŠ è½½çš„æ ¸å¿ƒ:</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">require</span>(<span class="params">file</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> <span class="built_in">exports</span> = &#123;&#125;;</span><br><span class="line">  (<span class="keyword">function</span> (<span class="params"><span class="built_in">exports</span>, code</span>) &#123;</span><br><span class="line">    <span class="built_in">eval</span>(code);</span><br><span class="line">  &#125;)(<span class="built_in">exports</span>, list[file]);</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">exports</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>å®ƒåˆ›å»ºäº†ä¸€ä¸ª<code>exports</code>å¯¹è±¡,ç”¨äºå­˜å‚¨æ¨¡å—å¯¼å‡ºçš„å†…å®¹</li>
<li>ç„¶åç”¨ä¸€ä¸ªåŒ¿åå‡½æ•°åŒ…è£¹æ¨¡å—ä»£ç ,å¹¶ä¼ å…¥<code>exports</code>å¯¹è±¡</li>
<li>ä½¿ç”¨<code>eval</code>æ‰§è¡Œæ¨¡å—ä»£ç </li>
<li>æœ€åè¿”å›<code>exports</code>å¯¹è±¡,è¿™å°±æ˜¯æ¨¡å—çš„å¯¼å‡ºå†…å®¹</li>
</ul>
<ol>
<li>æœ€å,é€šè¿‡<code>require(&quot;index.js&quot;)</code>å¯åŠ¨æ•´ä¸ªåº”ç”¨ã€‚</li>
</ol>
<p>ç°åœ¨,è®©æˆ‘ä»¬çœ‹çœ‹<code>index.js</code>å’Œ<code>add.js</code>çš„å†…å®¹:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// index.js</span></span><br><span class="line"><span class="keyword">var</span> add = <span class="built_in">require</span>(<span class="string">&#x27;add.js&#x27;</span>).<span class="property">default</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add</span>(<span class="number">1</span> , <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// add.js</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">default</span> = <span class="keyword">function</span>(<span class="params">a,b</span>)&#123;<span class="keyword">return</span> a + b&#125;</span><br></pre></td></tr></table></figure>
<p>ä½ çœ‹,<code>index.js</code>é€šè¿‡<code>require</code>å‡½æ•°å¼•å…¥äº†<code>add.js</code>,å¹¶ä½¿ç”¨äº†å®ƒå¯¼å‡ºçš„<code>add</code>å‡½æ•°ã€‚è€Œ<code>add.js</code>åˆ™é€šè¿‡<code>exports.default</code>å¯¼å‡ºäº†ä¸€ä¸ªå‡½æ•°ã€‚</p>
<p>è¿™å°±æ˜¯webpackæ¨¡å—åŒ–çš„åŸºæœ¬åŸç†!å®ƒæŠŠæ¯ä¸ªæ–‡ä»¶éƒ½å˜æˆäº†ä¸€ä¸ªæ¨¡å—,é€šè¿‡<code>require</code>å’Œ<code>exports</code>å®ç°äº†æ¨¡å—é—´çš„å¼•ç”¨å’Œå¯¼å‡ºã€‚</p>
<p>å½“æˆ‘ç†è§£äº†è¿™ä¸ªåŸç†å,æˆ‘æ„Ÿè§‰æ•´ä¸ªäººéƒ½ä¸ä¸€æ ·äº†!çªç„¶é—´,é‚£äº›çœ‹èµ·æ¥å¾ˆé«˜æ·±çš„å‰ç«¯å·¥ç¨‹åŒ–æ¦‚å¿µå˜å¾—æ¸…æ™°èµ·æ¥ã€‚æˆ‘æ„è¯†åˆ°,webpackä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ‰“åŒ…å·¥å…·,å®ƒæ›´åƒæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ¨¡å—ç®¡ç†ç³»ç»Ÿã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªå¤§ä¸€æ–°ç”Ÿ,æˆ‘å¼€å§‹åœ¨æˆ‘çš„å°é¡¹ç›®ä¸­å°è¯•ä½¿ç”¨webpackã€‚è™½ç„¶è¿˜å¾ˆç®€å•,ä½†æˆ‘å‘ç°,é€šè¿‡åˆç†çš„æ¨¡å—åˆ’åˆ†,æˆ‘çš„ä»£ç å˜å¾—æ›´åŠ æ¸…æ™°,ä¹Ÿæ›´å®¹æ˜“ç»´æŠ¤äº†ã€‚è€Œä¸”,å½“æˆ‘éœ€è¦æ·»åŠ æ–°åŠŸèƒ½æ—¶,åªéœ€è¦ç¼–å†™æ–°çš„æ¨¡å—,ç„¶åé€šè¿‡<code>require</code>å¼•å…¥,å°±å¯ä»¥è½»æ¾é›†æˆåˆ°ç°æœ‰é¡¹ç›®ä¸­ã€‚</p>
<p>å½“ç„¶,æˆ‘çŸ¥é“webpackçš„åŠŸèƒ½è¿œä¸æ­¢äºæ­¤ã€‚å®ƒè¿˜æœ‰ä»£ç åˆ†å‰²ã€æ‡’åŠ è½½ã€çƒ­æ¨¡å—æ›¿æ¢ç­‰é«˜çº§ç‰¹æ€§ã€‚ä½†æ˜¯,ç†è§£äº†è¿™ä¸ªåŸºæœ¬åŸç†,æˆ‘æ„Ÿè§‰è‡ªå·±å·²ç»è¿ˆå‡ºäº†ç†è§£å‰ç«¯å·¥ç¨‹åŒ–çš„ç¬¬ä¸€æ­¥!</p>
<p>æœ€å,æˆ‘æƒ³å¯¹å’Œæˆ‘ä¸€æ ·åˆšå¼€å§‹å­¦ä¹ å‰ç«¯çš„åŒå­¦ä»¬è¯´:ä¸è¦è¢«é‚£äº›çœ‹ä¼¼å¤æ‚çš„æŠ€æœ¯å“åˆ°ã€‚æ¯ä¸ªæŠ€æœ¯èƒŒåéƒ½æœ‰å…¶æ ¸å¿ƒåŸç†,åªè¦æˆ‘ä»¬è‚¯ä¸‹åŠŸå¤«å»ç†è§£,å°±ä¸€å®šèƒ½å¤ŸæŒæ¡ã€‚å°±åƒæˆ‘ä»ä¸€ä¸ªå¯¹webpackä¸€æ— æ‰€çŸ¥çš„å°ç™½,å˜æˆäº†èƒ½å¤Ÿç†è§£å…¶åŸç†å¹¶åœ¨å°é¡¹ç›®ä¸­ä½¿ç”¨çš„æ–°æ‰‹ã€‚ç›¸ä¿¡ä½ ä»¬ä¹Ÿä¸€å®šå¯ä»¥!</p>
<p>å­¦ä¹ æ˜¯ä¸€ä¸ªæ¸è¿›çš„è¿‡ç¨‹,ä¿æŒå¥½å¥‡å¿ƒå’Œæ¢ç´¢ç²¾ç¥,æˆ‘ä»¬å°±èƒ½åœ¨ç¼–ç¨‹çš„é“è·¯ä¸Šè¶Šèµ°è¶Šè¿œã€‚è™½ç„¶æˆ‘ä»¬è¿˜æ˜¯å¤§ä¸€æ–°ç”Ÿ,ä½†åªè¦æŒç»­å­¦ä¹ å’Œå®è·µ,æœªæ¥çš„è·¯ä¸€å®šä¼šè¶Šæ¥è¶Šå®½å¹¿!</p>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>webpack</tag>
        <tag>æ¨¡å—åŒ–</tag>
        <tag>å‰ç«¯å·¥ç¨‹åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»äº†è§£åˆ°æ·±å…¥è™šæ‹Ÿdomå’Œå®ç°diffç®—æ³•è™šæ‹Ÿdomç®—æ³•</title>
    <url>/xiaolangwiki/2021/07/30/13/</url>
    <content><![CDATA[<h2 id="ä»äº†è§£åˆ°æ·±å…¥è™šæ‹ŸDOMå’Œå®ç°diffç®—æ³•è™šæ‹ŸDOM-å’Œ-diff-ç®—æ³•"><a href="#ä»äº†è§£åˆ°æ·±å…¥è™šæ‹ŸDOMå’Œå®ç°diffç®—æ³•è™šæ‹ŸDOM-å’Œ-diff-ç®—æ³•" class="headerlink" title="ä»äº†è§£åˆ°æ·±å…¥è™šæ‹ŸDOMå’Œå®ç°diffç®—æ³•è™šæ‹ŸDOM å’Œ diff ç®—æ³•"></a>ä»äº†è§£åˆ°æ·±å…¥è™šæ‹ŸDOMå’Œå®ç°diffç®—æ³•è™šæ‹ŸDOM å’Œ diff ç®—æ³•</h2><p>åŸæ–‡ï¼š<a href="https://juejin.cn/post/6990582632270528525">https://juejin.cn/post/6990582632270528525</a></p>
<blockquote>
<p>å‰è¨€</p>
</blockquote>
<p><code>è™šæ‹ŸDOM</code> å’Œ <code>diff</code> ç®—æ³• ï¼Œå¤§å®¶æœ‰çš„æ—¶å€™å°±ä¼šç»å¸¸å¬åˆ°ï¼Œé‚£ä¹ˆå®ƒä»¬æ˜¯ä»€ä¹ˆå®ç°çš„å‘¢ï¼Œè¿™æ˜¯å°æµªæˆ‘åœ¨å­¦ä¹ çš„ <code>è™šæ‹ŸDOM</code> å’Œ <code>diff</code> çš„æ—¶å€™æ€»ç»“ï¼Œåœ¨è¿™é‡Œå°±æ¥å¸¦å¤§å®¶æ¥æ·±å…¥äº†è§£ <code>virtual DOM</code> å’Œ <code>diff</code> ç®—æ³•ï¼Œä» <strong>snabbdom</strong> çš„åŸºç¡€ä½¿ç”¨ ,åˆ°è‡ªå·±å®ç°ä¸€ä¸ªä¸ç‰ˆ <strong>snabbdom</strong>ï¼Œè‡ªå·±å®ç° <strong>hå‡½æ•°</strong>(åˆ›å»ºè™šæ‹ŸDOM) <strong>patch</strong>å‡½æ•°(é€šè¿‡æ¯”è¾ƒæ–°æ—§è™šæ‹ŸDOMæ›´æ–°è§†å›¾)ï¼Œè¿™é‡Œæˆ‘ä¹Ÿç”»äº†å‡ ä¸ªåŠ¨å›¾ æ¥å¸®åŠ©å¤§å®¶ç†è§£ <strong>diff</strong> çš„å››ç§ä¼˜åŒ–ç­–ç•¥ï¼Œæ–‡ç« æœ‰ç‚¹é•¿ï¼Œå¸Œæœ›å¤§å®¶è€å¿ƒé˜…è¯»ï¼Œæœ€åä¼šè´´å‡ºæ‰€æœ‰ä»£ç ï¼Œå¤§å®¶å¯ä»¥åŠ¨æ‰‹è¯•è¯•å–”</p>
<p>æœ€åå¸Œæœ›å¤§å®¶èƒ½ç»™å°æµªä¸€ä¸ª <strong>èµ</strong></p>
<blockquote>
<p>å¾€æœŸç²¾å½©ï¼š</p>
<p><a href="https://juejin.cn/post/6989106100582744072" title="https://juejin.cn/post/6989106100582744072">æ‰‹å†™ä¸€ä¸ªç®€æ˜“vueå“åº”å¼å¸¦ä½ äº†è§£å“åº”å¼åŸç†</a></p>
<p><a href="https://juejin.cn/post/6988316779818778631" title="https://juejin.cn/post/6988316779818778631">ä»ä½¿ç”¨åˆ°è‡ªå·±å®ç°ç®€å•Vue Routerçœ‹è¿™ä¸ªå°±è¡Œäº†</a></p>
<p><a href="https://juejin.cn/post/6983934602196811789" title="https://juejin.cn/post/6983934602196811789">å‰ç«¯é¢è¯•å¿…ä¸å¯å°‘çš„åŸºç¡€çŸ¥è¯†ï¼Œè™½ç„¶å°‘ä½†æ˜¯ä½ ä¸èƒ½ä¸çŸ¥é“</a></p>
</blockquote>
<h2 id="1-ä»‹ç»"><a href="#1-ä»‹ç»" class="headerlink" title="1.ä»‹ç»"></a>1.ä»‹ç»</h2><blockquote>
<p><strong>Virtual DOM</strong> ç®€å•çš„ä»‹ç»</p>
</blockquote>
<p>æ˜¯<code>JavaScript</code>æŒ‰ç…§<code>DOM</code>çš„ç»“æ„æ¥åˆ›å»ºçš„è™šæ‹Ÿæ ‘å‹ç»“æ„å¯¹è±¡ï¼Œæ˜¯å¯¹<code>DOM</code>çš„æŠ½è±¡ï¼Œæ¯”<code>DOM</code>æ›´åŠ è½»é‡å‹</p>
<blockquote>
<p>ä¸ºå•¥è¦ä½¿ç”¨<strong>Virtual DOM</strong></p>
</blockquote>
<ul>
<li>å½“ç„¶æ˜¯å‰ç«¯ä¼˜åŒ–æ–¹é¢ï¼Œé¿å…é¢‘ç¹æ“ä½œ<code>DOM</code>ï¼Œé¢‘ç¹æ“ä½œ<code>DOM</code>ä¼šå¯èƒ½è®©æµè§ˆå™¨å›æµå’Œé‡ç»˜ï¼Œæ€§èƒ½ä¹Ÿä¼šéå¸¸ä½ï¼Œè¿˜æœ‰å°±æ˜¯æ‰‹åŠ¨æ“ä½œ <code>DOM</code> è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œè¦è€ƒè™‘æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜ï¼Œå½“å‰<code>jQuery</code>ç­‰åº“ç®€åŒ–äº† <code>DOM</code>æ“ä½œï¼Œä½†æ˜¯é¡¹ç›®å¤æ‚äº†ï¼Œ<code>DOM</code>æ“ä½œè¿˜æ˜¯ä¼šå˜å¾—å¤æ‚ï¼Œæ•°æ®æ“ä½œä¹Ÿå˜å¾—å¤æ‚</li>
<li>å¹¶ä¸æ˜¯æ‰€æœ‰æƒ…å†µä½¿ç”¨è™šæ‹Ÿ<code>DOM</code> éƒ½æé«˜æ€§èƒ½ï¼Œæ˜¯é’ˆå¯¹åœ¨å¤æ‚çš„çš„é¡¹ç›®ä½¿ç”¨ã€‚å¦‚æœç®€å•çš„æ“ä½œï¼Œä½¿ç”¨è™šæ‹Ÿ<code>DOM</code>,è¦åˆ›å»ºè™šæ‹Ÿ<code>DOM</code>å¯¹è±¡ç­‰ç­‰ä¸€ç³»åˆ—æ“ä½œï¼Œè¿˜ä¸å¦‚æ™®é€šçš„<code>DOM</code> æ“ä½œ</li>
<li>è™šæ‹Ÿ<code>DOM</code> å¯ä»¥å®ç°è·¨å¹³å°æ¸²æŸ“ï¼ŒæœåŠ¡å™¨æ¸²æŸ“ ã€å°ç¨‹åºã€åŸç”Ÿåº”ç”¨éƒ½ä½¿ç”¨äº†è™šæ‹Ÿ<code>DOM</code></li>
<li>ä½¿ç”¨è™šæ‹Ÿ<code>DOM</code>æ”¹å˜äº†å½“å‰çš„çŠ¶æ€ä¸éœ€è¦ç«‹å³çš„å»æ›´æ–°<code>DOM</code> è€Œä¸”æ›´æ–°çš„å†…å®¹è¿›è¡Œæ›´æ–°ï¼Œå¯¹äºæ²¡æœ‰æ”¹å˜çš„å†…å®¹ä¸åšä»»ä½•æ“ä½œï¼Œé€šè¿‡å‰åä¸¤æ¬¡å·®å¼‚è¿›è¡Œæ¯”è¾ƒ</li>
<li>è™šæ‹Ÿ DOM å¯ä»¥ç»´æŠ¤ç¨‹åºçš„çŠ¶æ€ï¼Œè·Ÿè¸ªä¸Šä¸€æ¬¡çš„çŠ¶æ€</li>
</ul>
<h2 id="2-snabbdom-ä»‹ç»"><a href="#2-snabbdom-ä»‹ç»" class="headerlink" title="2.snabbdom ä»‹ç»"></a>2.snabbdom ä»‹ç»</h2><blockquote>
<p>é¦–å…ˆæ¥ä»‹ç»ä¸‹ snabbdom</p>
</blockquote>
<p>æˆ‘ä»¬è¦äº†è§£è™šæ‹ŸDOM ï¼Œé‚£ä¹ˆå°±å…ˆäº†è§£å®ƒçš„å§‹ç¥–ï¼Œä¹Ÿå°±æ˜¯ <strong>snabbdom</strong></p>
<p><strong>snabbdom</strong> æ˜¯ä¸€ä¸ªå¼€æºçš„é¡¹ç›®ï¼Œ<strong>Vue</strong> é‡Œé¢çš„ è™šæ‹Ÿ<strong>DOM</strong> å½“åˆæ˜¯å€Ÿé‰´äº† <strong>snabbdom</strong>,æˆ‘ä»¬å¯ä»¥é€šè¿‡äº†è§£<strong>snabbdom</strong> çš„è™šæ‹Ÿ<strong>DOM</strong> æ¥ç†è§£ <strong>Vue</strong> çš„è™šæ‹Ÿ<strong>DOM</strong>,<strong>Vue</strong> çš„æºç å¤ªå¤šï¼Œ<strong>snabbdom</strong> æ¯”è¾ƒç®€æ´ï¼Œæ‰€ä»¥ç”¨å®ƒæ¥å±•å¼€ è™šæ‹Ÿ <strong>DOM</strong> çš„ç ”ç©¶</p>
<p>é€šè¿‡npm è¿›è¡Œå®‰è£…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install snabbdom</span><br></pre></td></tr></table></figure>
<h3 id="1-snabbdomç®€å•ä½¿ç”¨"><a href="#1-snabbdomç®€å•ä½¿ç”¨" class="headerlink" title="1.snabbdomç®€å•ä½¿ç”¨"></a>1.snabbdomç®€å•ä½¿ç”¨</h3><blockquote>
<p>ä¸‹é¢æ¥å†™ä¸ªç®€å•çš„ä¾‹å­ä½¿ç”¨ä¸‹ snabbdom</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/test.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>å†™ä¸ª test.js è¿›è¡Œä½¿ç”¨</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; h, init, thunk &#125; <span class="keyword">from</span> <span class="string">&#x27;snabbdom&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> patch = <span class="title function_">init</span>(\[\])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> vnode = <span class="title function_">h</span>(<span class="string">&#x27;div#box&#x27;</span>, <span class="string">&#x27;æµ‹è¯•&#x27;</span>, \[</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;ul.list&#x27;</span>, \[</span><br><span class="line">    <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, <span class="string">&#x27;æˆ‘æ˜¯ä¸€ä¸ªli&#x27;</span>),</span><br><span class="line">    <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, <span class="string">&#x27;æˆ‘æ˜¯ä¸€ä¸ªli&#x27;</span>),</span><br><span class="line">    <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, <span class="string">&#x27;æˆ‘æ˜¯ä¸€ä¸ªli&#x27;</span>),</span><br><span class="line">  \]),</span><br><span class="line">\])</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> app = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> oldNode = <span class="title function_">patch</span>(app, vnode)</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> vNode = <span class="title function_">h</span>(<span class="string">&#x27;div#box&#x27;</span>, <span class="string">&#x27;é‡æ–°è·å–äº†æ•°æ®&#x27;</span>, \[</span><br><span class="line">    <span class="title function_">h</span>(<span class="string">&#x27;ul.list&#x27;</span>, \[</span><br><span class="line">      <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, <span class="string">&#x27;æˆ‘æ˜¯ä¸€ä¸ªli&#x27;</span>),</span><br><span class="line">      <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, <span class="string">&#x27;é€šè¿‡pathåˆ¤æ–­äº†å·®å¼‚æ€§&#x27;</span>),</span><br><span class="line">      <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, <span class="string">&#x27;æ›´æ–°äº†æ•°æ®&#x27;</span>),</span><br><span class="line">    \]),</span><br><span class="line">  \])</span><br><span class="line"></span><br><span class="line">  <span class="title function_">patch</span>(oldNode, vNode)</span><br><span class="line">&#125;, <span class="number">3000</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/93f5b5f17b44461485732581e68afd90~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210726224703891"></p>
<p>å¯ä»¥çœ‹è§æŠŠ è™šæ‹Ÿ<strong>DOM</strong>æ›´æ–°åˆ°äº† çœŸå®<strong>DOM</strong> ,ç›´æ¥ æŠŠä¹‹å‰çš„ <strong>div#app</strong> ç»™æ›¿æ¢æ›´æ–°äº†</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/33bb43d23ef649e58cca26cf4e6290a9~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="9"></p>
<p>è¿‡äº†3ç§’è¿›è¡Œå¯¹æ¯”è™šæ‹Ÿ<strong>DOM</strong> çš„ å·®å¼‚æ¥æ·»åŠ åˆ°çœŸå®<strong>DOM</strong> ï¼Œè¿™é‡Œæ”¹å˜äº†ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ª <strong>li</strong> ç”¨hå‡½æ•°æ¸²æŸ“æˆè™šæ‹Ÿ<strong>DOM</strong> å’Œ<strong>oldNode</strong> ä¸ä¸€æ ·æ‰€ä»¥è¿›è¡Œäº†å¯¹æ¯”æ›´æ–°</p>
<h3 id="2-ä»‹ç»ä¸‹-snabbdomä¸­çš„æ¨¡å—"><a href="#2-ä»‹ç»ä¸‹-snabbdomä¸­çš„æ¨¡å—" class="headerlink" title="2.ä»‹ç»ä¸‹ snabbdomä¸­çš„æ¨¡å—"></a>2.ä»‹ç»ä¸‹ snabbdomä¸­çš„æ¨¡å—</h3><blockquote>
<p>å‡ ä¸ªæ¨¡å— è¿™é‡Œç®€å•è¿‡ä¸€ä¸‹</p>
</blockquote>
<div class="table-container">
<table>
<thead>
<tr>
<th>æ¨¡å—å</th>
<th>ç®€ä»‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>attributes</strong></td>
<td>DOM è‡ªå®šä¹‰å±æ€§ï¼ŒåŒ…æ‹¬ä¸¤ä¸ªå¸ƒå°”å€¼ <code>checked``selected</code>ï¼Œé€šè¿‡<code>setAttribute()</code> è®¾ç½®</td>
</tr>
<tr>
<td><strong>props</strong></td>
<td>æ˜¯DOM çš„ propertyå±æ€§ï¼Œé€šè¿‡ <code>element\[attr\] = value</code> è®¾ç½®</td>
</tr>
<tr>
<td><strong>dataset</strong></td>
<td>æ˜¯ <code>data-</code> å¼€å¤´çš„å±æ€§ data-srcâ€¦</td>
</tr>
<tr>
<td><strong>style</strong></td>
<td>è¡Œå†…æ ·å¼</td>
</tr>
<tr>
<td><strong>eventListeners</strong></td>
<td>ç”¨æ¥æ³¨å†Œå’Œç§»é™¤äº‹ä»¶</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p>æœ‰äº†ä¸Šé¢çš„ä»‹ç»ï¼Œé‚£æˆ‘ä»¬å°±æ¥ç®€å•çš„ä½¿ç”¨ä¸€ä¸‹</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; h, init &#125; <span class="keyword">from</span> <span class="string">&#x27;snabbdom&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> attr <span class="keyword">from</span> <span class="string">&#x27;snabbdom/modules/attributes&#x27;</span></span><br><span class="line"><span class="keyword">import</span> style <span class="keyword">from</span> <span class="string">&#x27;snabbdom/modules/style&#x27;</span></span><br><span class="line"><span class="keyword">import</span> eventListeners <span class="keyword">from</span> <span class="string">&#x27;snabbdom/modules/eventlisteners&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> patch = <span class="title function_">init</span>(\[attr, style, eventListeners\])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> vnode = <span class="title function_">h</span>(</span><br><span class="line">  <span class="string">&#x27;div#app&#x27;</span>,</span><br><span class="line">  &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">attrs</span>: &#123;</span><br><span class="line">      <span class="attr">myattr</span>: <span class="string">&#x27;æˆ‘æ˜¯è‡ªå®šä¹‰å±æ€§&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">style</span>: &#123;</span><br><span class="line">      <span class="attr">fontSize</span>: <span class="string">&#x27;29px&#x27;</span>,</span><br><span class="line">      <span class="attr">color</span>: <span class="string">&#x27;skyblue&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">on</span>: &#123;</span><br><span class="line">      <span class="attr">click</span>: clickHandler,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&#x27;æˆ‘æ˜¯å†…å®¹&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">clickHandler</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> elm = <span class="variable language_">this</span>.<span class="property">elm</span></span><br><span class="line">  elm.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">  elm.<span class="property">textContent</span> = <span class="string">&#x27;æˆ‘è¢«ç‚¹å‡»äº†&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> app = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">patch</span>(app, vnode)</span><br></pre></td></tr></table></figure>
<p>ç„¶åå† <code>html</code> ä¸­å¼•å…¥</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/module_test.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ¥çœ‹çœ‹æ•ˆæœ</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1875f83c496e4ad282639c099b510ac9~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="11"></p>
<p>å¯ä»¥çœ‹è§çš„æ˜¯ è‡ªå®šä¹‰å±æ€§ ï¼Œè¡Œå†…æ ·å¼ ï¼Œç‚¹å‡»äº‹ä»¶éƒ½è¢« <strong>h()</strong> æ¸²æŸ“å‡ºæ¥äº†</p>
<p>ä¸Šé¢çš„ä½¿ç”¨éƒ½ç®€å•åœ°è¿‡äº†ä¸€éï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ¥çœ‹çœ‹ <strong>snabbdom</strong> ä¸­çš„æºç å§</p>
<h2 id="3-è™šæ‹ŸDOM-ä¾‹å­"><a href="#3-è™šæ‹ŸDOM-ä¾‹å­" class="headerlink" title="3.è™šæ‹ŸDOM ä¾‹å­"></a>3.è™šæ‹ŸDOM ä¾‹å­</h2><p>è¯´äº†è¿™ä¹ˆä¹…çš„ <strong>h()</strong> å‡½æ•°å’Œ è™šæ‹Ÿ<strong>DOM</strong> é‚£ä¹ˆ æ¸²æŸ“å‡ºæ¥çš„ è™šæ‹Ÿ<strong>DOM</strong> æ˜¯ä»€ä¹ˆæ ·å‘¢</p>
<blockquote>
<p>çœŸå®DOM ç»“æ„</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>å“ˆå“ˆ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>è½¬ä¸ºä¸º è™šæ‹ŸDOM ä¹‹åçš„ç»“æ„</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  <span class="string">&quot;sel&quot;</span>: <span class="string">&quot;div&quot;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;class&quot;</span>: &#123; <span class="string">&quot;container&quot;</span>: <span class="literal">true</span> &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="string">&quot;elm&quot;</span>: <span class="literal">undefined</span>,</span><br><span class="line"></span><br><span class="line">  <span class="string">&quot;key&quot;</span>: <span class="literal">undefined</span>,</span><br><span class="line"></span><br><span class="line">  <span class="string">&quot;children&quot;</span>: \[</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;elm&quot;</span>: <span class="literal">undefined</span>,</span><br><span class="line">      <span class="string">&quot;key&quot;</span>: <span class="literal">undefined</span>,</span><br><span class="line">      <span class="string">&quot;sel&quot;</span>: <span class="string">&quot;p&quot;</span>,</span><br><span class="line">      <span class="string">&quot;data&quot;</span>: &#123; <span class="string">&quot;text&quot;</span>: <span class="string">&quot;å“ˆå“ˆ&quot;</span> &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;elm&quot;</span>: <span class="literal">undefined</span>,</span><br><span class="line">      <span class="string">&quot;key&quot;</span>: <span class="literal">undefined</span>,</span><br><span class="line">      <span class="string">&quot;sel&quot;</span>: <span class="string">&quot;ul&quot;</span>,</span><br><span class="line">      <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;class&quot;</span>: &#123; <span class="string">&quot;list&quot;</span>: <span class="literal">true</span> &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;children&quot;</span>: \[</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;elm&quot;</span>: <span class="literal">undefined</span>,</span><br><span class="line">          <span class="string">&quot;key&quot;</span>: <span class="literal">undefined</span>,</span><br><span class="line">          <span class="string">&quot;sel&quot;</span>: <span class="string">&quot;li&quot;</span>,</span><br><span class="line">          <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;text&quot;</span>: <span class="string">&quot;1&quot;</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">&quot;children&quot;</span>: <span class="literal">undefined</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;elm&quot;</span>: <span class="literal">undefined</span>,</span><br><span class="line">          <span class="string">&quot;key&quot;</span>: <span class="literal">undefined</span>,</span><br><span class="line">          <span class="string">&quot;sel&quot;</span>: <span class="string">&quot;li&quot;</span>,</span><br><span class="line">          <span class="string">&quot;data&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;text&quot;</span>: <span class="string">&quot;1&quot;</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">&quot;children&quot;</span>: <span class="literal">undefined</span></span><br><span class="line">        &#125;</span><br><span class="line">      \]</span><br><span class="line">    &#125;</span><br><span class="line">  \]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¹‹å‰æåˆ°çš„ <code>snabbdom</code> ä¸­ <code>patch</code>æ–¹æ³•</p>
<p>å°±æ˜¯å¯¹ <strong>æ–°çš„è™šæ‹ŸDOM</strong> å’Œ <strong>è€çš„è™šæ‹ŸDOM</strong> è¿›è¡Œ<strong>diff</strong>(ç²¾ç»†åŒ–æ¯”è¾ƒ)ï¼Œæ‰¾å‡ºæœ€å°é‡æ›´æ–° æ˜¯åœ¨è™šæ‹Ÿ<strong>DOM</strong> æ¯”è¾ƒ</p>
<p>ä¸å¯èƒ½æŠŠæ‰€æœ‰çš„ <strong>DOM</strong> éƒ½æ‹†æ‰ ç„¶åå…¨éƒ¨é‡æ–°æ¸²æŸ“</p>
<h2 id="4-h-å‡½æ•°"><a href="#4-h-å‡½æ•°" class="headerlink" title="4.h å‡½æ•°"></a>4.h å‡½æ•°</h2><p>åœ¨ä¸Šé¢æˆ‘ä»¬ä½“éªŒäº†<strong>è™šæ‹ŸDOM</strong>çš„ä½¿ç”¨ ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç°åœ¨æ¥å®ç°ä¸€ä¸ª ä¸ç‰ˆçš„ <strong>snabbdom</strong></p>
<blockquote>
<p>h å‡½æ•°åœ¨ä»‹ç»ä¸‹</p>
</blockquote>
<p>åœ¨ <strong>snabbdom</strong> æˆ‘ä»¬ä¹Ÿä½¿ç”¨äº†å¤šæ¬¡çš„ <strong>h</strong> å‡½æ•°ï¼Œä¸»è¦ä½œç”¨æ˜¯åˆ›å»º è™šæ‹ŸèŠ‚ç‚¹</p>
<p><strong>snabbdom</strong> ä½¿ç”¨ <strong>TS</strong> ç¼–å†™, æ‰€ä»¥ <strong>h</strong> å‡½æ•°ä¸­åšäº† <strong>æ–¹æ³•é‡è½½</strong> ä½¿ç”¨èµ·æ¥çµæ´»</p>
<p>ä¸‹é¢æ˜¯ <strong>snabbdom</strong> ä¸­ <strong>h</strong> å‡½æ•°ï¼Œå¯ä»¥çœ‹å‡º å‚æ•°çš„æœ‰å¥½å‡ ç§æ–¹å¼</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> declare <span class="keyword">function</span> <span class="title function_">h</span>(<span class="params">sel: string</span>): <span class="title class_">VNode</span>;</span><br><span class="line"><span class="keyword">export</span> declare <span class="keyword">function</span> <span class="title function_">h</span>(<span class="params">sel: string, data: VNodeData</span>): <span class="title class_">VNode</span>;</span><br><span class="line"><span class="keyword">export</span> declare <span class="keyword">function</span> <span class="title function_">h</span>(<span class="params">sel: string, children: VNodeChildren</span>): <span class="title class_">VNode</span>;</span><br><span class="line"><span class="keyword">export</span> declare <span class="keyword">function</span> <span class="title function_">h</span>(<span class="params">sel: string, data: VNodeData, children: VNodeChildren</span>): <span class="title class_">VNode</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å®ç° vnode å‡½æ•°</p>
</blockquote>
<p>åœ¨å†™ <strong>h</strong> å‡½æ•°ä¹‹å‰ å…ˆå®ç° <strong>vnode</strong> å‡½æ•°ï¼Œ<strong>vnode</strong> å‡½æ•°è¦åœ¨ <strong>h</strong> ä¸­ä½¿ç”¨ï¼Œ å…¶å®è¿™ä¸ª <strong>vnode</strong> å‡½æ•°å®ç°åŠŸèƒ½éå¸¸ç®€å• åœ¨ <strong>TS</strong> é‡Œé¢è§„å®šäº†å¾ˆå¤šç±»å‹ï¼Œä¸è¿‡æˆ‘è¿™é‡Œå’Œä¹‹åéƒ½æ˜¯ ç”¨ <strong>JS</strong> å»å†™</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">\* æŠŠä¼ å…¥çš„ å‚æ•° ä½œä¸º å¯¹è±¡è¿”å›</span><br><span class="line"> \* @param &#123;string&#125; sel é€‰æ‹©å™¨</span><br><span class="line"> \* @param &#123;object&#125; data æ•°æ®</span><br><span class="line"> \* @param &#123;array&#125; children å­èŠ‚ç‚¹</span><br><span class="line"> \* @param &#123;string&#125; text æ–‡æœ¬</span><br><span class="line"> \* @param &#123;dom&#125; elm <span class="variable constant_">DOM</span></span><br><span class="line"> \* @returns object</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params">sel, data, children, text, elm</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; sel, data, children, text, elm &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å®ç°ç®€æ˜“ h å‡½æ•°</p>
</blockquote>
<p>è¿™é‡Œå†™çš„ h å‡½æ•° åªå®ç°ä¸»è¦åŠŸèƒ½ï¼Œæ²¡æœ‰å®ç°é‡è½½ï¼Œç›´æ¥å®ç° 3ä¸ª å‚æ•°çš„ h å‡½æ•°</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> vnode <span class="keyword">from</span> <span class="string">&#x27;./vnode&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> \*</span><br><span class="line"> \* @param &#123;string&#125; a sel</span><br><span class="line"> \* @param &#123;object&#125; b data</span><br><span class="line"> \* @param &#123;any&#125; c æ˜¯å­èŠ‚ç‚¹ å¯ä»¥æ˜¯æ–‡æœ¬ï¼Œæ•°ç»„</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">h</span>(<span class="params">a, b, c</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">arguments</span>.<span class="property">length</span> &lt; <span class="number">3</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;è¯·æ£€æŸ¥å‚æ•°ä¸ªæ•°&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> c === <span class="string">&#x27;string&#x27;</span> || <span class="keyword">typeof</span> c === <span class="string">&#x27;number&#x27;</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">vnode</span>(a, b, <span class="literal">undefined</span>, c, <span class="literal">undefined</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(c)) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> children = \[\]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; c.<span class="property">length</span>; i++) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!(<span class="keyword">typeof</span> c\[i\] === <span class="string">&#x27;object&#x27;</span> &amp;&amp; c\[i\].<span class="property">sel</span>))</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºæ•°ç»„æ—¶åªèƒ½ä¼ é€’ h() å‡½æ•°&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      children.<span class="title function_">push</span>(c\[i\])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">vnode</span>(a, b, children, <span class="literal">undefined</span>, <span class="literal">undefined</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> c === <span class="string">&#x27;object&#x27;</span> &amp;&amp; c.<span class="property">sel</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> children = \[c\]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">vnode</span>(a, b, children, <span class="literal">undefined</span>, <span class="literal">undefined</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ˜¯ä¸æ˜¯å¾ˆç®€å•å‘¢ï¼Œä»–è¯´èµ·æ¥ä¹Ÿä¸æ˜¯é€’å½’ï¼Œåƒæ˜¯ä¸€ç§åµŒå¥—ï¼Œä¸æ–­åœ°æ”¶é›† <strong>{sel,data,children,text,elm}</strong></p>
<p><strong>chirldren</strong> é‡Œé¢å†å¥— <strong>{sel,data,children,text,elm}</strong></p>
<blockquote>
<p>ä¸¾ä¸ªä¾‹å­</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> h <span class="keyword">from</span> <span class="string">&#x27;./my-snabbdom/h&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> vnode = <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, &#123;&#125;,</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;ul&#x27;</span>, &#123;&#125;, \[</span><br><span class="line">    <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123;&#125;, <span class="string">&#x27;æˆ‘æ˜¯ä¸€ä¸ªli&#x27;</span>),</span><br><span class="line">    <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123;&#125;, <span class="string">&#x27;æˆ‘æ˜¯ä¸€ä¸ªli&#x27;</span>),</span><br><span class="line">    <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123;&#125;, <span class="string">&#x27;æˆ‘æ˜¯ä¸€ä¸ªli&#x27;</span>),</span><br><span class="line">  ),</span><br><span class="line">\])</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(vnode)</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/virtualdir/bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/942b20c050664ddb82a4073c95198075~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210727204731661"></p>
<p><strong>OK</strong>ï¼Œå†™çš„ <strong>h</strong> å‡½æ•°æ²¡æœ‰é—®é¢˜ï¼Œç”Ÿæˆäº†è™šæ‹Ÿ<strong>DOM</strong> æ ‘ï¼Œç”Ÿæˆäº†è™šæ‹Ÿ DOM,æˆ‘ä»¬ä¹‹å å°±ä¼šç”¨çš„åˆ°</p>
<p>ç®€å•è¯´ä¸‹æµç¨‹å§</p>
<p>å¤§å®¶éƒ½çŸ¥é“<code>js</code> å‡½æ•°æ‰§è¡Œï¼Œå½“ç„¶æ˜¯å…ˆæ‰§è¡Œæœ€é‡Œé¢çš„ å‡½æ•°</p>
<ul>
<li><p>1.<code>h(&#39;li&#39;, &#123;&#125;, &#39;æˆ‘æ˜¯ä¸€ä¸ªli&#39;)</code>ç¬¬ä¸€ä¸ªæ‰§è¡Œ è¿”å›çš„ <code>&#123;sel,data,children,text,elm&#125;</code> è¿ç»­ä¸‰ä¸ª li éƒ½æ˜¯è¿™ä¸ª</p>
</li>
<li><p>2.æ¥ç€å°±æ˜¯ <code>h(&#39;ul&#39;, &#123;&#125;, \[\])</code> è¿›å…¥åˆ°äº†ç¬¬äºŒä¸ªåˆ¤æ–­æ˜¯å¦ä¸ºæ•°ç»„ï¼Œç„¶å æŠŠæ¯ä¸€é¡¹ è¿›è¡Œåˆ¤æ–­æ˜¯å¦å¯¹è±¡ å’Œ æœ‰<strong>sel</strong> å±æ€§ï¼Œç„¶åæ·»åŠ åˆ° <strong>children</strong> é‡Œé¢åˆè¿”å›äº†å‡ºå» <code>&#123;sel,data,children,text,elm&#125;</code></p>
</li>
<li><p>3.ç¬¬ä¸‰å°±æ˜¯æ‰§è¡Œ <code>h(&#39;div&#39;, &#123;&#125;,h())</code> äº†ï¼Œ ç¬¬ä¸‰ä¸ªå‚æ•° ç›´æ¥æ˜¯ <code>h()</code>å‡½æ•° = <code>&#123;sel,data,children,text,elm&#125;</code> ï¼Œä»–çš„ <strong>children</strong> æŠŠä»–ç”¨ <strong>[ ]</strong> åŒ…èµ·æ¥</p>
<p>å†è¿”å›ç»™ <strong>vnode</strong></p>
</li>
</ul>
<h2 id="5-patch-å‡½æ•°"><a href="#5-patch-å‡½æ•°" class="headerlink" title="5.patch å‡½æ•°"></a>5.patch å‡½æ•°</h2><blockquote>
<p>ç®€ä»‹</p>
</blockquote>
<p>åœ¨ <strong>snabbdom</strong> ä¸­æˆ‘ä»¬ é€šè¿‡ <strong>init()</strong> è¿”å›äº†ä¸€ä¸ª <strong>patch</strong> å‡½æ•°ï¼Œé€šè¿‡ <strong>patch</strong> è¿›è¡Œå§æ¯”è¾ƒä¸¤ä¸ª è™šæ‹Ÿ DOM ç„¶åæ·»åŠ çš„ çœŸå®çš„ <strong>DOM</strong> æ ‘ä¸Šï¼Œä¸­é—´æ¯”è¾ƒå°±æ˜¯æˆ‘ä»¬ç­‰ä¸‹è¦è¯´çš„ <strong>diff</strong></p>
<p>å…ˆæ¥äº†è§£ä¸‹ <strong>patch</strong>é‡Œé¢åšäº†ä»€ä¹ˆ</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/58f567538c1d4cffa7264cf5467ed271~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210728172052418"></p>
<p>æŒ‰ç…§ä¸Šé¢çš„æµç¨‹æˆ‘ä»¬æ¥å†™ä¸ªç®€å•çš„ <strong>patch</strong></p>
<h3 id="1-patch"><a href="#1-patch" class="headerlink" title="1.patch"></a>1.patch</h3><blockquote>
<p>å…ˆå†™ä¸ªsameVnode</p>
</blockquote>
<p>ç”¨æ¥å¯¹æ¯”ä¸¤ä¸ªè™šæ‹Ÿ<strong>DOM</strong> çš„ <strong>key</strong> å’Œ <strong>sel</strong></p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">\* åˆ¤æ–­ä¸¤ä¸ªè™šæ‹ŸèŠ‚ç‚¹æ˜¯å¦æ˜¯åŒä¸€èŠ‚ç‚¹</span><br><span class="line"> \* @param &#123;vnode&#125; vnode1 è™šæ‹ŸèŠ‚ç‚¹<span class="number">1</span></span><br><span class="line"> \* @param &#123;vnode&#125; vnode2 è™šæ‹ŸèŠ‚ç‚¹<span class="number">2</span></span><br><span class="line"> \* @returns boolean</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">sameVnode</span>(<span class="params">vnode1, vnode2</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    (vnode1.<span class="property">data</span> ? vnode1.<span class="property">data</span>.<span class="property">key</span> : <span class="literal">undefined</span>) ===</span><br><span class="line">      (vnode2.<span class="property">data</span> ? vnode2.<span class="property">data</span>.<span class="property">key</span> : <span class="literal">undefined</span>) &amp;&amp; vnode1.<span class="property">sel</span> === vnode2.<span class="property">sel</span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å†™ä¸ªåŸºç¡€çš„patch</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> vnode <span class="keyword">from</span> <span class="string">&#x27;./vnode&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> \*</span><br><span class="line"> \* @param &#123;vnode/<span class="variable constant_">DOM</span>&#125; oldVnode</span><br><span class="line"> \* @param &#123;vnode&#125; newVnode</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">patch</span>(<span class="params">oldVnode, newVnode</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!oldVnode.<span class="property">sel</span>) &#123;</span><br><span class="line"></span><br><span class="line">    oldVnode = <span class="title function_">emptyNodeAt</span>(oldVnode)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="title function_">sameVnode</span>(oldVnode, newVnode)) &#123;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">  newVnode.<span class="property">elm</span> = oldVnode.<span class="property">elm</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> newVnode</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> \* è½¬ä¸º è™šæ‹Ÿ <span class="variable constant_">DOM</span></span><br><span class="line"> \* @param &#123;<span class="variable constant_">DOM</span>&#125; elm <span class="variable constant_">DOM</span>èŠ‚ç‚¹</span><br><span class="line"> \* @returns &#123;object&#125;</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">emptyNodeAt</span>(<span class="params">elm</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">vnode</span>(elm.<span class="property">tagName</span>.<span class="title function_">toLowerCase</span>(), <span class="literal">undefined</span>, <span class="literal">undefined</span>, <span class="literal">undefined</span>, elm)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨è¦å¤„ç†æ˜¯å¦æ˜¯ åŒä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹çš„é—®é¢˜</p>
<h3 id="2-createElm"><a href="#2-createElm" class="headerlink" title="2.createElm"></a>2.createElm</h3><blockquote>
<p>å…ˆæ¥å¤„ç†ä¸æ˜¯åŒä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹</p>
</blockquote>
<p>å¤„ç†è¿™ä¸ªæˆ‘ä»¬å¾—å»å†™ä¸ª åˆ›å»ºèŠ‚ç‚¹çš„æ–¹æ³• è¿™é‡Œå°±æ”¾åˆ° <strong>createElm.js</strong> ä¸­å®Œæˆ</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">\* åˆ›å»ºå…ƒç´ </span><br><span class="line"> \* @param &#123;vnode&#125; vnode è¦åˆ›å»ºçš„èŠ‚ç‚¹</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">createElm</span>(<span class="params">vnode</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> node = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(vnode.<span class="property">sel</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    vnode.<span class="property">text</span> !== <span class="string">&#x27;&#x27;</span> &amp;&amp;</span><br><span class="line">    (vnode.<span class="property">children</span> === <span class="literal">undefined</span> || vnode.<span class="property">children</span>.<span class="property">length</span> === <span class="number">0</span>)</span><br><span class="line">  ) &#123;</span><br><span class="line"></span><br><span class="line">    node.<span class="property">textContent</span> = vnode.<span class="property">text</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(vnode.<span class="property">children</span>) &amp;&amp; vnode.<span class="property">children</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> children = vnode.<span class="property">children</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; children.<span class="property">length</span>; i++) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> ch = children\[i\]</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> chDom = <span class="title function_">createElm</span>(ch)</span><br><span class="line"></span><br><span class="line">      node.<span class="title function_">appendChild</span>(chDom)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  vnode.<span class="property">elm</span> = node</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> node</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ <strong>createElm</strong> å°±æ˜¯ä½¿ç”¨äº†é€’å½’çš„æ–¹å¼å»åˆ›å»ºå­èŠ‚ç‚¹ ï¼Œç„¶åæˆ‘ä»¬å°±å» patch ä¸­ å…·ä½“çš„è°ƒç”¨è¿™ä¸ª åˆ›å»ºèŠ‚ç‚¹çš„æ–¹æ³•</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> vnode <span class="keyword">from</span> <span class="string">&#x27;./vnode&#x27;</span></span><br><span class="line"><span class="keyword">import</span> createElm <span class="keyword">from</span> <span class="string">&#x27;./createElm&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> \*</span><br><span class="line"> \* @param &#123;vnode/<span class="variable constant_">DOM</span>&#125; oldVnode</span><br><span class="line"> \* @param &#123;vnode&#125; newVnode</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">patch</span>(<span class="params">oldVnode, newVnode</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!oldVnode.<span class="property">sel</span>) &#123;</span><br><span class="line"></span><br><span class="line">    oldVnode = <span class="title function_">emptyNodeAt</span>(oldVnode)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="title function_">sameVnode</span>(oldVnode, newVnode)) &#123;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> newNode = <span class="title function_">createElm</span>(newVnode)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (oldVnode.<span class="property">elm</span>.<span class="property">parentNode</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> parentNode = oldVnode.<span class="property">elm</span>.<span class="property">parentNode</span></span><br><span class="line"></span><br><span class="line">      parentNode.<span class="title function_">insertBefore</span>(newNode, oldVnode.<span class="property">elm</span>)</span><br><span class="line"></span><br><span class="line">      parentNode.<span class="title function_">removeChild</span>(oldVnode.<span class="property">elm</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  newVnode.<span class="property">elm</span> = oldVnode.<span class="property">elm</span></span><br><span class="line">  <span class="keyword">return</span> newVnode</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨é€’å½’æ·»åŠ å­èŠ‚ç‚¹ åˆ°äº†æœ€åæˆ‘ä»¬åœ¨ <strong>patch</strong> æ·»åŠ åˆ° çœŸå®çš„ <strong>DOM</strong> ä¸­ï¼Œç§»é™¤ä¹‹å‰çš„è€èŠ‚ç‚¹</p>
<p>å†™åˆ°è¿™é‡Œäº†æ¥è¯•è¯• ä¸åŒèŠ‚ç‚¹ æ˜¯å¦çœŸçš„æ·»åŠ </p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> h <span class="keyword">from</span> <span class="string">&#x27;./my-snabbdom/h&#x27;</span></span><br><span class="line"><span class="keyword">import</span> patch <span class="keyword">from</span> <span class="string">&#x27;./my-snabbdom/patch&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> app = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> vnode = <span class="title function_">h</span>(<span class="string">&#x27;ul&#x27;</span>, &#123;&#125;, \[</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123;&#125;, <span class="string">&#x27;æˆ‘æ˜¯ä¸€ä¸ªli&#x27;</span>),</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123;&#125;, \[</span><br><span class="line">    <span class="title function_">h</span>(<span class="string">&#x27;p&#x27;</span>, &#123;&#125;, <span class="string">&#x27;æˆ‘æ˜¯ä¸€ä¸ªp&#x27;</span>),</span><br><span class="line">    <span class="title function_">h</span>(<span class="string">&#x27;p&#x27;</span>, &#123;&#125;, <span class="string">&#x27;æˆ‘æ˜¯ä¸€ä¸ªp&#x27;</span>),</span><br><span class="line">    <span class="title function_">h</span>(<span class="string">&#x27;p&#x27;</span>, &#123;&#125;, <span class="string">&#x27;æˆ‘æ˜¯ä¸€ä¸ªp&#x27;</span>),</span><br><span class="line">  \]),</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123;&#125;, <span class="string">&#x27;æˆ‘æ˜¯ä¸€ä¸ªli&#x27;</span>),</span><br><span class="line">\])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> oldVnode = <span class="title function_">patch</span>(app, vnode)</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span>hellow<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/virtualdir/bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6be430ef040d448b8b2b059b4823dfc2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210728164308771"></p>
<p>æŠŠ <strong>div#app</strong> ç»™æ›¿æ¢äº†ï¼Œå¹¶ä¸”æˆåŠŸæ›¿æ¢</p>
<h3 id="3-patchVnode"><a href="#3-patchVnode" class="headerlink" title="3.patchVnode"></a>3.patchVnode</h3><blockquote>
<p>æˆ‘ä»¬ç°åœ¨æ¥å®ç°åŒä¸€ä¸ªè™šæ‹Ÿ DOM çš„å¤„ç†</p>
</blockquote>
<p>åœ¨ patchVnode ä¸­</p>
<p>æ­¥éª¤éƒ½æ˜¯æŒ‰ç…§ ä¹‹å‰é‚£ä¸ªæµç¨‹å›¾è¿›è¡Œç¼–å†™,æˆ‘ä»¬æŠŠæ¯”è¾ƒä¸¤ä¸ª<strong>ç›¸åŒ</strong>çš„ è™šæ‹Ÿ DOM ä»£ç å†™åœ¨ <strong>patchVnode.js</strong>ä¸­</p>
<p>åœ¨æ¯”è¾ƒ ä¸¤ä¸ªç›¸åŒçš„è™šæ‹ŸèŠ‚ç‚¹åˆ†æ”¯ æœ‰å¥½å‡ ç§æƒ…å†µ</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> createElm <span class="keyword">from</span> <span class="string">&#x27;./createElm&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> \*</span><br><span class="line"> \* @param &#123;vnode&#125; oldVnode è€çš„è™šæ‹ŸèŠ‚ç‚¹</span><br><span class="line"> \* @param &#123;vnode&#125; newVnode æ–°çš„è™šæ‹ŸèŠ‚ç‚¹</span><br><span class="line"> \* @returns</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">patchVnode</span>(<span class="params">oldVnode, newVnode</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;åŒä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> (oldVnode === newVnode) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (newVnode.<span class="property">text</span> &amp;&amp; !newVnode.<span class="property">children</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (oldVnode.<span class="property">text</span> !== newVnode.<span class="property">text</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ–‡å­—ä¸ç›¸åŒ&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      oldVnode.<span class="property">elm</span>.<span class="property">textContent</span> = newVnode.<span class="property">text</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (oldVnode.<span class="property">children</span>) &#123;</span><br><span class="line">      ...è¿™é‡Œæ–°æ—§èŠ‚ç‚¹éƒ½å­˜åœ¨children è¿™é‡Œè¦ä½¿ç”¨ updateChildren ä¸‹é¢è¿›è¡Œå®ç°</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;oldæ²¡æœ‰childrenï¼Œnewæœ‰children&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      oldVnode.<span class="property">elm</span>.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> newChildren = newVnode.<span class="property">children</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; newChildren.<span class="property">length</span>; i++) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> node = <span class="title function_">createElm</span>(newChildren\[i\])</span><br><span class="line"></span><br><span class="line">        oldVnode.<span class="property">elm</span>.<span class="title function_">appendChild</span>(node)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŒ‰ç…§æµç¨‹å›¾è¿›è¡Œç¼–ç ï¼Œç°åœ¨è¦å¤„ç† <strong>newVnode</strong> å’Œ <strong>oldVnode</strong> éƒ½å­˜åœ¨ <strong>children</strong> çš„æƒ…å†µäº†</p>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬è¦è¿›è¡Œç²¾ç»†åŒ–æ¯”è¾ƒ ä¹Ÿå°±æ˜¯æˆ‘ä»¬ç»å¸¸è¯´çš„ <strong>diff</strong></p>
<h3 id="4-diff"><a href="#4-diff" class="headerlink" title="4.diff"></a>4.diff</h3><p>ç»å¸¸å¬åˆ°çš„ <strong>diff(ç²¾ç»†åŒ–æ¯”è¾ƒ)</strong> ,é‚£æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸‹</p>
<blockquote>
<p>diffå››ç§ä¼˜åŒ–ç­–ç•¥</p>
</blockquote>
<p>åœ¨è¿™é‡Œè¦ä½¿ç”¨ 4 ä¸ªæŒ‡é’ˆ,ä»1-4çš„é¡ºåºæ¥å¼€å§‹å‘½ä¸­ä¼˜åŒ–ç­–ç•¥ï¼Œå‘½ä¸­ä¸€ä¸ªï¼ŒæŒ‡é’ˆè¿›è¡Œç§»åŠ¨<code>(æ–°å‰å’Œæ—§å‰å‘ä¸‹ç§»åŠ¨ï¼Œæ–°åå’Œæ—§åå‘ä¸Šç§»åŠ¨)</code>ï¼Œæ²¡æœ‰å‘½ä¸­ï¼Œå°±ä½¿ç”¨<strong>ä¸‹ä¸€ä¸ªç­–ç•¥</strong>ï¼Œå¦‚æœå››ä¸ªç­–ç•¥éƒ½æ²¡æœ‰å‘½ä¸­ï¼Œåªèƒ½é å¾ªç¯æ¥æ‰¾</p>
<p>å‘½ä¸­ï¼šä¸¤ä¸ªèŠ‚ç‚¹ <strong>sel</strong> å’Œ <strong>key</strong> ä¸€æ ·</p>
<ol>
<li>æ–°å‰ä¸æ—§å‰</li>
<li>æ–°åä¸æ—§å</li>
<li>æ–°åä¸æ—§å‰</li>
<li>æ–°å‰ä¸æ—§å</li>
</ol>
<blockquote>
<p>å…ˆæ¥è¯´ä¸‹æ–°å¢çš„æƒ…å†µ</p>
</blockquote>
<p>å››ç§ç­–ç•¥éƒ½æ˜¯åœ¨ å¾ªç¯é‡Œé¢æ‰§è¡Œ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span>(æ—§å‰&lt;=æ—§å&amp;&amp;æ–°å‰&lt;=æ–°å)&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c5d39847b94f4a3ca1763eb939366ae0~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="14"></p>
<p>å¯ä»¥çœ‹å‡º <strong>æ—§å­èŠ‚ç‚¹</strong> å…ˆå¾ªç¯å®Œæ¯•ï¼Œé‚£ä¹ˆè¯´æ˜äº†æ–°çš„å­èŠ‚ç‚¹æœ‰éœ€è¦ æ–°å¢çš„ å­èŠ‚ç‚¹</p>
<p><strong>æ–°å‰</strong> å’Œ <strong>æ–°å</strong> çš„ èŠ‚ç‚¹ å°±æ˜¯éœ€è¦æ–°å¢çš„å­—èŠ‚</p>
<blockquote>
<p>åˆ é™¤çš„æƒ…å†µ1</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a8727f03b28e4dd48d960c73e3b4be85~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="19"></p>
<p>è¿™é‡Œæ–°å­èŠ‚ç‚¹ å…ˆå¾ªç¯å®Œæ¯•è¯´æ˜ æ—§å­èŠ‚ç‚¹æœ‰éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹</p>
<blockquote>
<p>åˆ é™¤çš„æƒ…å†µ2</p>
</blockquote>
<p>å½“æˆ‘ä»¬åˆ é™¤å¤šä¸ªï¼Œè€Œä¸” 4ç§ç­–ç•¥éƒ½æ²¡æœ‰æ»¡è¶³ï¼Œæˆ‘ä»¬å¾—é€šè¿‡ <strong>while</strong> å¾ªç¯ æ—§å­èŠ‚ç‚¹ æ‰¾åˆ° æ–°å­èŠ‚ç‚¹éœ€è¦å¯»æ‰¾èŠ‚ç‚¹å¹¶æ ‡è®°ä¸º <code>undefined</code> è™šæ‹ŸèŠ‚ç‚¹æ˜¯ <strong>undefined</strong>å®é™…ä¸Šåœ¨ <strong>DOM</strong>å·²ç»æŠŠå®ƒç§»åŠ¨äº† ,<strong>æ—§å‰</strong> å’Œ <strong>æ—§å</strong> ä¹‹é—´çš„èŠ‚ç‚¹å°±æ˜¯éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a4bc4cbb7093444988b87830f036bba3~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="18"></p>
<blockquote>
<p>å¤æ‚æƒ…å†µ1</p>
</blockquote>
<p>å½“è§¦å‘äº† ç¬¬å››ç§ ç­–ç•¥ï¼Œè¿™é‡Œå°±éœ€è¦ç§»åŠ¨èŠ‚ç‚¹äº†ï¼Œæ—§åæŒ‡å‘çš„èŠ‚ç‚¹ï¼ˆåœ¨è™šæ‹ŸèŠ‚ç‚¹æ ‡ä¸º <strong>undefined</strong>ï¼‰ï¼Œå®é™…æŠŠ <strong>æ–°å‰</strong> æŒ‡å‘çš„èŠ‚ç‚¹ åœ¨<strong>DOM</strong> ä¸­ ç§»åŠ¨åˆ°<strong>æ—§å‰ä¹‹å‰</strong></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/99cc589cb22548528139cc46d6498234~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="20"></p>
<blockquote>
<p>å¤æ‚æƒ…å†µ2</p>
</blockquote>
<p>å½“è§¦å‘äº† ç¬¬ä¸‰ç§ ç­–ç•¥ï¼Œè¿™é‡Œä¹Ÿéœ€è¦ç§»åŠ¨èŠ‚ç‚¹äº†ï¼Œæ—§å‰ æŒ‡å‘çš„èŠ‚ç‚¹ï¼ˆåœ¨è™šæ‹ŸèŠ‚ç‚¹æ ‡ä¸º <strong>undefined</strong>ï¼‰ï¼Œå®é™…æŠŠ <strong>æ–°å</strong> æŒ‡å‘çš„èŠ‚ç‚¹ åœ¨<strong>DOM</strong> ä¸­ ç§»åŠ¨åˆ°<strong>æ—§åä¹‹å</strong></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1f9bbbb7afce48da85d76991d7367e80~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="21"></p>
<blockquote>
<p>æ³¨æ„å‡ ä¸ªç‚¹ :</p>
</blockquote>
<ul>
<li><code>h(&#39;li&#39;,&#123;key:&#39;A&#39;&#125; : &quot;A&quot;&#125;)</code> æ¯”å¦‚è¿™å…¶ä¸­çš„ key æ˜¯è¿™ä¸ªèŠ‚ç‚¹çš„å”¯ä¸€çš„æ ‡è¯†</li>
<li>å®ƒçš„å­˜åœ¨æ˜¯åœ¨å‘Šè¯‰ <strong>diff</strong> ,åœ¨æ›´æ”¹å‰åå®ƒä»¬æ˜¯åŒä¸€ä¸ª<strong>DOM</strong>èŠ‚ç‚¹ã€‚</li>
<li>åªæœ‰æ˜¯<strong>åŒä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œ</strong>æ‰è¿›è¡Œç²¾ç»†åŒ–æ¯”è¾ƒï¼Œå¦åˆ™å°±æ˜¯<strong>æš´åŠ›åˆ é™¤æ—§çš„</strong>ã€æ’å…¥æ–°çš„</li>
<li>åŒä¸€è™šæ‹ŸèŠ‚ç‚¹ ä¸ä»…è¦ key ç›¸åŒè€Œä¸”è¦ é€‰æ‹©å™¨ç›¸åŒä¹Ÿå°±æ˜¯ä¸Šé¢çš„ <code>h()</code> å‡½æ•°åˆ›å»ºçš„ è™šæ‹ŸèŠ‚ç‚¹ å¯¹è±¡é‡Œçš„ <code>sel</code></li>
<li>åªè¿›è¡ŒåŒå±‚æ¯”è¾ƒï¼Œä¸ä¼šè¿›è¡Œè·¨å±‚æ¯”è¾ƒ</li>
</ul>
<h3 id="5-updateChildren"><a href="#5-updateChildren" class="headerlink" title="5.updateChildren"></a>5.updateChildren</h3><p>çœ‹äº†ä¸Šé¢å¯¹äº <strong>diff</strong> çš„ä»‹ç»ï¼Œä¸çŸ¥é“æˆ‘ç”»çš„å›¾ æ¼”ç¤ºæ¸…æ¥šäº†æ²¡ï¼Œç„¶åæˆ‘ä»¬æ¥ç€ç»§ç»­æ¥å®Œæˆ <strong>patchVnode</strong></p>
<p>æˆ‘ä»¬å¾—å†™ä¸ª <strong>updateChildren</strong> æ¥è¿›è¡Œç²¾ç»†åŒ–æ¯”è¾ƒ</p>
<p>è¿™ä¸ªæ–‡ä»¶å°±æ˜¯ <strong>diff</strong> ç®—æ³•çš„æ ¸å¿ƒï¼Œæˆ‘ä»¬ç”¨æ¥æ¯”è¾ƒ <strong>oldVnode</strong> å’Œ <strong>newVnode</strong> éƒ½å­˜åœ¨ <strong>children</strong> çš„æƒ…å†µ</p>
<p>è¿™é‡Œæœ‰ç‚¹ç»•ï¼Œæ³¨é‡Šéƒ½å†™äº†ï¼Œè¯·è€å¿ƒè§‚çœ‹ï¼Œæµç¨‹å°±æ˜¯æŒ‰ç…§ diff çš„å››ç§ç­–ç•¥æ¥å†™ï¼Œè¿˜è¦å¤„ç†æ²¡æœ‰å‘½ä¸­çš„æƒ…å†µ</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> createElm <span class="keyword">from</span> <span class="string">&#x27;./createElm&#x27;</span></span><br><span class="line"><span class="keyword">import</span> patchVnode <span class="keyword">from</span> <span class="string">&#x27;./patchVnode&#x27;</span></span><br><span class="line"><span class="keyword">import</span> sameVnode <span class="keyword">from</span> <span class="string">&#x27;./sameVnode&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> \*</span><br><span class="line"> \* @param &#123;dom&#125; parentElm çˆ¶èŠ‚ç‚¹</span><br><span class="line"> \* @param &#123;array&#125; oldCh æ—§å­èŠ‚ç‚¹</span><br><span class="line"> \* @param &#123;array&#125; newCh æ–°å­èŠ‚ç‚¹</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">updateChildren</span>(<span class="params">parentElm, oldCh, newCh</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> oldStartIdx = <span class="number">0</span>,</span><br><span class="line">    newStartIdx = <span class="number">0</span></span><br><span class="line">  <span class="keyword">let</span> oldEndIdx = oldCh.<span class="property">length</span> - <span class="number">1</span></span><br><span class="line">  <span class="keyword">let</span> newEndIdx = newCh.<span class="property">length</span> - <span class="number">1</span></span><br><span class="line">  <span class="keyword">let</span> oldStartVnode = oldCh\[<span class="number">0</span>\]</span><br><span class="line">  <span class="keyword">let</span> oldEndVnode = oldCh\[oldEndIdx\]</span><br><span class="line">  <span class="keyword">let</span> newStartVnode = newCh\[<span class="number">0</span>\]</span><br><span class="line">  <span class="keyword">let</span> newEndVnode = newCh\[newEndIdx\]</span><br><span class="line">  <span class="keyword">let</span> keyMap = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (newStartIdx &lt;= newEndIdx &amp;&amp; oldStartIdx &lt;= oldEndIdx) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---è¿›å…¥diff---&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (oldCh\[oldStartIdx\] == <span class="literal">undefined</span>) &#123;</span><br><span class="line">      oldStartVnode = oldCh\[++oldStartIdx\]</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldCh\[oldEndIdx\] == <span class="literal">undefined</span>) &#123;</span><br><span class="line">      oldEndVnode = oldCh\[--oldEndIdx\]</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (newCh\[newStartIdx\] == <span class="literal">undefined</span>) &#123;</span><br><span class="line">      newStartVnode = newCh\[++newStartIdx\]</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (newCh\[newEndIdx\] == <span class="literal">undefined</span>) &#123;</span><br><span class="line">      newEndVnode = newCh\[--newEndIdx\]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">sameVnode</span>(oldStartVnode, newStartVnode)) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;1å‘½ä¸­&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title function_">patchVnode</span>(oldStartVnode, newStartVnode)</span><br><span class="line"></span><br><span class="line">      newStartVnode = newCh\[++newStartIdx\]</span><br><span class="line">      oldStartVnode = oldCh\[++oldStartIdx\]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">sameVnode</span>(oldEndVnode, newEndVnode)) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;2å‘½ä¸­&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title function_">patchVnode</span>(oldEndVnode, newEndVnode)</span><br><span class="line"></span><br><span class="line">      newEndVnode = newCh\[--newEndIdx\]</span><br><span class="line">      oldEndVnode = oldCh\[--oldEndIdx\]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">sameVnode</span>(oldStartVnode, newEndVnode)) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;3å‘½ä¸­&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title function_">patchVnode</span>(oldStartVnode, newEndVnode)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      parentElm.<span class="title function_">insertBefore</span>(oldStartVnode.<span class="property">elm</span>, oldEndVnode.<span class="property">elm</span>.<span class="property">nextSibling</span>)</span><br><span class="line"></span><br><span class="line">      newEndVnode = newCh\[--newEndIdx\]</span><br><span class="line">      oldStartVnode = oldCh\[++oldStartIdx\]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">sameVnode</span>(oldEndVnode, newStartVnode)) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;4å‘½ä¸­&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title function_">patchVnode</span>(oldEndVnode, newStartVnode)</span><br><span class="line"></span><br><span class="line">      parentElm.<span class="title function_">insertBefore</span>(oldEndVnode.<span class="property">elm</span>, oldStartVnode.<span class="property">elm</span>)</span><br><span class="line"></span><br><span class="line">      newStartVnode = newCh\[++newStartIdx\]</span><br><span class="line">      oldEndVnode = oldCh\[--oldEndIdx\]</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;diffå››ç§ä¼˜åŒ–ç­–ç•¥éƒ½æ²¡å‘½ä¸­&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!keyMap) &#123;</span><br><span class="line"></span><br><span class="line">        keyMap = &#123;&#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = oldStartIdx; i &lt; oldEndIdx; i++) &#123;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">const</span> key = oldCh\[i\].<span class="property">data</span>.<span class="property">key</span></span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (!key) keyMap\[key\] = i</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> idInOld = keyMap\[newStartIdx.<span class="property">data</span>\]</span><br><span class="line">        ? keyMap\[newStartIdx.<span class="property">data</span>.<span class="property">key</span>\]</span><br><span class="line">        : <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (idInOld) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç§»åŠ¨èŠ‚ç‚¹&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> moveElm = oldCh\[idInOld\]</span><br><span class="line"></span><br><span class="line">        <span class="title function_">patchVnode</span>(moveElm, newStartVnode)</span><br><span class="line"></span><br><span class="line">        oldCh\[idInOld\] = <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        parentElm.<span class="title function_">insertBefore</span>(moveElm.<span class="property">elm</span>, oldStartVnode.<span class="property">elm</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ·»åŠ æ–°èŠ‚ç‚¹&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        parentElm.<span class="title function_">insertBefore</span>(<span class="title function_">createElm</span>(newStartVnode), oldStartVnode.<span class="property">elm</span>)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      newStartVnode = newCh\[++newStartIdx\]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (newStartIdx &lt;= newEndIdx) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è¿›å…¥æ·»åŠ å‰©ä½™èŠ‚ç‚¹&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> beforeFlag = newCh\[newEndIdx + <span class="number">1</span>\] ? newCh\[newEndIdx + <span class="number">1</span>\] : <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = newStartIdx; i &lt;= newEndIdx; i++) &#123;</span><br><span class="line"></span><br><span class="line">      parentElm.<span class="title function_">insertBefore</span>(<span class="title function_">createElm</span>(newCh\[i\]), beforeFlag)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldStartIdx &lt;= oldEndIdx) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è¿›å…¥åˆ é™¤å¤šä½™èŠ‚ç‚¹&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = oldStartIdx; i &lt;= oldEndIdx; i++) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (oldCh\[i\].<span class="property">elm</span>) parentElm.<span class="title function_">removeChild</span>(oldCh\[i\].<span class="property">elm</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ°äº†è¿™é‡Œæˆ‘ä»¬åŸºæœ¬å†™éƒ½å®Œæˆäº†ï¼Œ <strong>h</strong> å‡½æ•° åˆ›å»º è™šæ‹Ÿ <strong>DOM</strong> , <strong>patch</strong> æ¯”è¾ƒ è™šæ‹Ÿ<strong>DOM</strong> è¿›è¡Œæ›´æ–°è§†å›¾</p>
<h2 id="6-æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹å†™çš„"><a href="#6-æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹å†™çš„" class="headerlink" title="6.æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹å†™çš„"></a>6.æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹å†™çš„</h2><p>å…¶å®åœ¨å†™ä»£ç çš„æ—¶å€™å°±åœ¨ä¸æ–­çš„è°ƒè¯•ã€‚ã€‚ã€‚ç°åœ¨éšä¾¿æµ‹è¯•å‡ ä¸ª</p>
<h3 id="1-ä»£ç "><a href="#1-ä»£ç " class="headerlink" title="1.ä»£ç "></a>1.ä»£ç </h3><blockquote>
<p>html</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>ç­–ç•¥3<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>å¤æ‚<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>å¤æ‚<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>å¤æ‚<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    hellow</span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/virtualdir/bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>index.js</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> h <span class="keyword">from</span> <span class="string">&#x27;./my-snabbdom/h&#x27;</span></span><br><span class="line"><span class="keyword">import</span> patch <span class="keyword">from</span> <span class="string">&#x27;./my-snabbdom/patch&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> app = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> vnode = <span class="title function_">h</span>(<span class="string">&#x27;ul&#x27;</span>, &#123;&#125;, \[</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;A&#x27;</span> &#125;, <span class="string">&#x27;A&#x27;</span>),</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;B&#x27;</span> &#125;, <span class="string">&#x27;B&#x27;</span>),</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;C&#x27;</span> &#125;, <span class="string">&#x27;C&#x27;</span>),</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;D&#x27;</span> &#125;, <span class="string">&#x27;D&#x27;</span>),</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;E&#x27;</span> &#125;, <span class="string">&#x27;E&#x27;</span>),</span><br><span class="line">\])</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> oldVnode = <span class="title function_">patch</span>(app, vnode)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> vnode2 = <span class="title function_">h</span>(<span class="string">&#x27;ul&#x27;</span>, &#123;&#125;, \[</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;E&#x27;</span> &#125;, <span class="string">&#x27;E&#x27;</span>),</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;D&#x27;</span> &#125;, <span class="string">&#x27;D&#x27;</span>),</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;C&#x27;</span> &#125;, <span class="string">&#x27;C&#x27;</span>),</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;B&#x27;</span> &#125;, <span class="string">&#x27;B&#x27;</span>),</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;A&#x27;</span> &#125;, <span class="string">&#x27;A&#x27;</span>),</span><br><span class="line">\])</span><br><span class="line"><span class="keyword">let</span> vnode3 = <span class="title function_">h</span>(<span class="string">&#x27;ul&#x27;</span>, &#123;&#125;, \[</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;E&#x27;</span> &#125;, <span class="string">&#x27;E&#x27;</span>),</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;D&#x27;</span> &#125;, <span class="string">&#x27;D&#x27;</span>),</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;C&#x27;</span> &#125;, <span class="string">&#x27;C&#x27;</span>),</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;A&#x27;</span> &#125;, <span class="string">&#x27;A&#x27;</span>),</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;B&#x27;</span> &#125;, <span class="string">&#x27;B&#x27;</span>),</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;K&#x27;</span> &#125;, <span class="string">&#x27;K&#x27;</span>),</span><br><span class="line">\])</span><br><span class="line"><span class="keyword">let</span> vnode4 = <span class="title function_">h</span>(<span class="string">&#x27;ul&#x27;</span>, &#123;&#125;, \[</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;A&#x27;</span> &#125;, <span class="string">&#x27;A&#x27;</span>),</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;B&#x27;</span> &#125;, <span class="string">&#x27;B&#x27;</span>),</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;C&#x27;</span> &#125;, <span class="string">&#x27;C&#x27;</span>),</span><br><span class="line">\])</span><br><span class="line"><span class="keyword">let</span> vnode5 = <span class="title function_">h</span>(<span class="string">&#x27;ul&#x27;</span>, &#123;&#125;, \[</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;E&#x27;</span> &#125;, <span class="string">&#x27;E&#x27;</span>),</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;C&#x27;</span> &#125;, <span class="string">&#x27;C&#x27;</span>),</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;V&#x27;</span> &#125;, <span class="string">&#x27;V&#x27;</span>),</span><br><span class="line">\])</span><br><span class="line"><span class="keyword">let</span> vnode6 = <span class="title function_">h</span>(<span class="string">&#x27;ul&#x27;</span>, &#123;&#125;, \[</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;A&#x27;</span> &#125;, <span class="string">&#x27;A&#x27;</span>),</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;B&#x27;</span> &#125;, <span class="string">&#x27;B&#x27;</span>),</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;C&#x27;</span> &#125;, <span class="string">&#x27;C&#x27;</span>),</span><br><span class="line">  <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;D&#x27;</span> &#125;, <span class="string">&#x27;D&#x27;</span>),</span><br><span class="line">  <span class="title function_">h</span>(</span><br><span class="line">    <span class="string">&#x27;li&#x27;</span>,</span><br><span class="line">    &#123; <span class="attr">key</span>: <span class="string">&#x27;E&#x27;</span> &#125;,</span><br><span class="line">    <span class="title function_">h</span>(<span class="string">&#x27;ul&#x27;</span>, &#123;&#125;, \[</span><br><span class="line">      <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;A&#x27;</span> &#125;, <span class="string">&#x27;A&#x27;</span>),</span><br><span class="line">      <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;B&#x27;</span> &#125;, <span class="string">&#x27;B&#x27;</span>),</span><br><span class="line">      <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;C&#x27;</span> &#125;, <span class="string">&#x27;C&#x27;</span>),</span><br><span class="line">      <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;D&#x27;</span> &#125;, <span class="string">&#x27;D&#x27;</span>),</span><br><span class="line">      <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;E&#x27;</span> &#125;, <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;R&#x27;</span> &#125;, <span class="string">&#x27;R&#x27;</span>)),</span><br><span class="line">    \])</span><br><span class="line">  ),</span><br><span class="line">\])</span><br><span class="line"><span class="keyword">let</span> vnodeList = \[vnode2, vnode3, vnode4, vnode5, vnode6\]</span><br><span class="line"><span class="keyword">let</span> btn = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.btn&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; btn.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  btn\[i\].<span class="property">onclick</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">patch</span>(vnode, vnodeList\[i\])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-æ¼”ç¤º"><a href="#2-æ¼”ç¤º" class="headerlink" title="2.æ¼”ç¤º"></a>2.æ¼”ç¤º</h3><blockquote>
<p>ç­–ç•¥3</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0f95d637265f4ea894fb0ee36e9c9bdb~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="22"></p>
<blockquote>
<p>å¤æ‚</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5582ea0aa45e4b05b751e3c54a2b59c9~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="23"></p>
<blockquote>
<p>åˆ é™¤</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/246cbf9a6c6749a494e27f0ef5fecbb1~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="24"></p>
<blockquote>
<p>å¤æ‚</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0b351a63e539467598b4e3ff1990bef9~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="25"></p>
<blockquote>
<p>å¤æ‚ï¼ˆè¿™é‡Œæ˜¯ç®€å• ã€‚ã€‚ï¼‰</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ff817315ac8c4cacac1dab0330a96e6e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="26"></p>
<h2 id="7-ç»“è¯­"><a href="#7-ç»“è¯­" class="headerlink" title="7.ç»“è¯­"></a>7.ç»“è¯­</h2><p>æ³¨é‡Šæˆ‘éƒ½å†™äº†å–”ï¼Œå¤§å®¶å¯ä»¥å¯¹ç…§ æˆ‘ä¸Šé¢ç”»çš„å›¾ä¸æ¸…æ¥šå¯ä»¥åå¤è€å¿ƒçš„çœ‹å“ˆ</p>
<p>å¦‚æœçœ‹çš„è¯æ²¡ä»€ä¹ˆæ„Ÿè§‰ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±åŠ¨æ‰‹å†™å†™ï¼Œä¸‹é¢æˆ‘ä¼šè´´å‡ºæ‰€æœ‰çš„ä»£ç </p>
<p>ä»£ç åŒæ ·ä¹Ÿæ”¾åœ¨ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FLianTianNo1%2FVirtual_DOM_demo%2Ftree%2Fmain%2Fsrc%2Fmy-snabbdom" title="https://github.com/LianTianNo1/Virtual_DOM_demo/tree/main/src/my-snabbdom"><strong>github</strong></a></p>
<p>å®Œæ•´ä»£ç ï¼š</p>
<blockquote>
<p>h.js</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> vnode <span class="keyword">from</span> <span class="string">&#x27;./vnode&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> \*</span><br><span class="line"> \* @param &#123;string&#125; a sel</span><br><span class="line"> \* @param &#123;object&#125; b data</span><br><span class="line"> \* @param &#123;any&#125; c æ˜¯å­èŠ‚ç‚¹ å¯ä»¥æ˜¯æ–‡æœ¬ï¼Œæ•°ç»„</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">h</span>(<span class="params">a, b, c</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">arguments</span>.<span class="property">length</span> &lt; <span class="number">3</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;è¯·æ£€æŸ¥å‚æ•°ä¸ªæ•°&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> c === <span class="string">&#x27;string&#x27;</span> || <span class="keyword">typeof</span> c === <span class="string">&#x27;number&#x27;</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">vnode</span>(a, b, <span class="literal">undefined</span>, c, <span class="literal">undefined</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(c)) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> children = \[\]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; c.<span class="property">length</span>; i++) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!(<span class="keyword">typeof</span> c\[i\] === <span class="string">&#x27;object&#x27;</span> &amp;&amp; c\[i\].<span class="property">sel</span>))</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºæ•°ç»„æ—¶åªèƒ½ä¼ é€’ h() å‡½æ•°&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      children.<span class="title function_">push</span>(c\[i\])</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">vnode</span>(a, b, children, <span class="literal">undefined</span>, <span class="literal">undefined</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> c === <span class="string">&#x27;object&#x27;</span> &amp;&amp; c.<span class="property">sel</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> children = \[c\]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">vnode</span>(a, b, children, <span class="literal">undefined</span>, <span class="literal">undefined</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>patch.js</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> vnode <span class="keyword">from</span> <span class="string">&#x27;./vnode&#x27;</span></span><br><span class="line"><span class="keyword">import</span> createElm <span class="keyword">from</span> <span class="string">&#x27;./createElm&#x27;</span></span><br><span class="line"><span class="keyword">import</span> patchVnode <span class="keyword">from</span> <span class="string">&#x27;./patchVnode&#x27;</span></span><br><span class="line"><span class="keyword">import</span> sameVnode <span class="keyword">from</span> <span class="string">&#x27;./sameVnode&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> \*</span><br><span class="line"> \* @param &#123;vnode/<span class="variable constant_">DOM</span>&#125; oldVnode</span><br><span class="line"> \* @param &#123;vnode&#125; newVnode</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">patch</span>(<span class="params">oldVnode, newVnode</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!oldVnode.<span class="property">sel</span>) &#123;</span><br><span class="line"></span><br><span class="line">    oldVnode = <span class="title function_">emptyNodeAt</span>(oldVnode)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="title function_">sameVnode</span>(oldVnode, newVnode)) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">patchVnode</span>(oldVnode, newVnode)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> newNode = <span class="title function_">createElm</span>(newVnode)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (oldVnode.<span class="property">elm</span>.<span class="property">parentNode</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> parentNode = oldVnode.<span class="property">elm</span>.<span class="property">parentNode</span></span><br><span class="line"></span><br><span class="line">      parentNode.<span class="title function_">insertBefore</span>(newNode, oldVnode.<span class="property">elm</span>)</span><br><span class="line"></span><br><span class="line">      parentNode.<span class="title function_">removeChild</span>(oldVnode.<span class="property">elm</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  newVnode.<span class="property">elm</span> = oldVnode.<span class="property">elm</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> newVnode</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> \* è½¬ä¸º è™šæ‹Ÿ <span class="variable constant_">DOM</span></span><br><span class="line"> \* @param &#123;<span class="variable constant_">DOM</span>&#125; elm <span class="variable constant_">DOM</span>èŠ‚ç‚¹</span><br><span class="line"> \* @returns &#123;object&#125;</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">emptyNodeAt</span>(<span class="params">elm</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">vnode</span>(elm.<span class="property">tagName</span>.<span class="title function_">toLowerCase</span>(), <span class="literal">undefined</span>, <span class="literal">undefined</span>, <span class="literal">undefined</span>, elm)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>createElm.js</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">\* åˆ›å»ºå…ƒç´ </span><br><span class="line"> \* @param &#123;vnode&#125; vnode è¦åˆ›å»ºçš„èŠ‚ç‚¹</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">createElm</span>(<span class="params">vnode</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> node = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(vnode.<span class="property">sel</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    vnode.<span class="property">text</span> !== <span class="string">&#x27;&#x27;</span> &amp;&amp;</span><br><span class="line">    (vnode.<span class="property">children</span> === <span class="literal">undefined</span> || vnode.<span class="property">children</span>.<span class="property">length</span> === <span class="number">0</span>)</span><br><span class="line">  ) &#123;</span><br><span class="line"></span><br><span class="line">    node.<span class="property">textContent</span> = vnode.<span class="property">text</span></span><br><span class="line"></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(vnode.<span class="property">children</span>) &amp;&amp; vnode.<span class="property">children</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> children = vnode.<span class="property">children</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; children.<span class="property">length</span>; i++) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> ch = children\[i\]</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> chDom = <span class="title function_">createElm</span>(ch)</span><br><span class="line"></span><br><span class="line">      node.<span class="title function_">appendChild</span>(chDom)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  vnode.<span class="property">elm</span> = node</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> node</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>vnode.js</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">\* æŠŠä¼ å…¥çš„ å‚æ•° ä½œä¸º å¯¹è±¡è¿”å›</span><br><span class="line"> \* @param &#123;string&#125; sel é€‰æ‹©å™¨</span><br><span class="line"> \* @param &#123;object&#125; data æ•°æ®</span><br><span class="line"> \* @param &#123;array&#125; children å­èŠ‚ç‚¹</span><br><span class="line"> \* @param &#123;string&#125; text æ–‡æœ¬</span><br><span class="line"> \* @param &#123;dom&#125; elm <span class="variable constant_">DOM</span></span><br><span class="line"> \* @returns</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params">sel, data, children, text, elm</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; sel, data, children, text, elm &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>patchVnode.js</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> createElm <span class="keyword">from</span> <span class="string">&#x27;./createElm&#x27;</span></span><br><span class="line"><span class="keyword">import</span> updateChildren <span class="keyword">from</span> <span class="string">&#x27;./updateChildren&#x27;</span></span><br><span class="line"></span><br><span class="line"> \*</span><br><span class="line"> \* @param &#123;vnode&#125; oldVnode è€çš„è™šæ‹ŸèŠ‚ç‚¹</span><br><span class="line"> \* @param &#123;vnode&#125; newVnode æ–°çš„è™šæ‹ŸèŠ‚ç‚¹</span><br><span class="line"> \* @returns</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">patchVnode</span>(<span class="params">oldVnode, newVnode</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (oldVnode === newVnode) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (newVnode.<span class="property">text</span> &amp;&amp; !newVnode.<span class="property">children</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (oldVnode.<span class="property">text</span> !== newVnode.<span class="property">text</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ–‡å­—ä¸ç›¸åŒ&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      oldVnode.<span class="property">elm</span>.<span class="property">textContent</span> = newVnode.<span class="property">text</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (oldVnode.<span class="property">children</span>) &#123;</span><br><span class="line">      <span class="title function_">updateChildren</span>(oldVnode.<span class="property">elm</span>, oldVnode.<span class="property">children</span>, newVnode.<span class="property">children</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;oldæ²¡æœ‰childrenï¼Œnewæœ‰children&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      oldVnode.<span class="property">elm</span>.<span class="property">innerHTML</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> newChildren = newVnode.<span class="property">children</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; newChildren.<span class="property">length</span>; i++) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> node = <span class="title function_">createElm</span>(newChildren\[i\])</span><br><span class="line"></span><br><span class="line">        oldVnode.<span class="property">elm</span>.<span class="title function_">appendChild</span>(node)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>sameVnode.js</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">\* åˆ¤æ–­ä¸¤ä¸ªè™šæ‹ŸèŠ‚ç‚¹æ˜¯å¦æ˜¯åŒä¸€èŠ‚ç‚¹</span><br><span class="line"> \* @param &#123;vnode&#125; vnode1 è™šæ‹ŸèŠ‚ç‚¹<span class="number">1</span></span><br><span class="line"> \* @param &#123;vnode&#125; vnode2 è™šæ‹ŸèŠ‚ç‚¹<span class="number">2</span></span><br><span class="line"> \* @returns boolean</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">sameVnode</span>(<span class="params">vnode1, vnode2</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    (vnode1.<span class="property">data</span> ? vnode1.<span class="property">data</span>.<span class="property">key</span> : <span class="literal">undefined</span>) ===</span><br><span class="line">      (vnode2.<span class="property">data</span> ? vnode2.<span class="property">data</span>.<span class="property">key</span> : <span class="literal">undefined</span>) &amp;&amp; vnode1.<span class="property">sel</span> === vnode2.<span class="property">sel</span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>updateChildren.js</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> createElm <span class="keyword">from</span> <span class="string">&#x27;./createElm&#x27;</span></span><br><span class="line"><span class="keyword">import</span> patchVnode <span class="keyword">from</span> <span class="string">&#x27;./patchVnode&#x27;</span></span><br><span class="line"><span class="keyword">import</span> sameVnode <span class="keyword">from</span> <span class="string">&#x27;./sameVnode&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> \*</span><br><span class="line"> \* @param &#123;dom&#125; parentElm çˆ¶èŠ‚ç‚¹</span><br><span class="line"> \* @param &#123;array&#125; oldCh æ—§å­èŠ‚ç‚¹</span><br><span class="line"> \* @param &#123;array&#125; newCh æ–°å­èŠ‚ç‚¹</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">updateChildren</span>(<span class="params">parentElm, oldCh, newCh</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> oldStartIdx = <span class="number">0</span>,</span><br><span class="line">    newStartIdx = <span class="number">0</span></span><br><span class="line">  <span class="keyword">let</span> oldEndIdx = oldCh.<span class="property">length</span> - <span class="number">1</span></span><br><span class="line">  <span class="keyword">let</span> newEndIdx = newCh.<span class="property">length</span> - <span class="number">1</span></span><br><span class="line">  <span class="keyword">let</span> oldStartVnode = oldCh\[<span class="number">0</span>\]</span><br><span class="line">  <span class="keyword">let</span> oldEndVnode = oldCh\[oldEndIdx\]</span><br><span class="line">  <span class="keyword">let</span> newStartVnode = newCh\[<span class="number">0</span>\]</span><br><span class="line">  <span class="keyword">let</span> newEndVnode = newCh\[newEndIdx\]</span><br><span class="line">  <span class="keyword">let</span> keyMap = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (newStartIdx &lt;= newEndIdx &amp;&amp; oldStartIdx &lt;= oldEndIdx) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---è¿›å…¥diff---&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (oldCh\[oldStartIdx\] == <span class="literal">undefined</span>) &#123;</span><br><span class="line">      oldStartVnode = oldCh\[++oldStartIdx\]</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldCh\[oldEndIdx\] == <span class="literal">undefined</span>) &#123;</span><br><span class="line">      oldEndVnode = oldCh\[--oldEndIdx\]</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (newCh\[newStartIdx\] == <span class="literal">undefined</span>) &#123;</span><br><span class="line">      newStartVnode = newCh\[++newStartIdx\]</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (newCh\[newEndIdx\] == <span class="literal">undefined</span>) &#123;</span><br><span class="line">      newEndVnode = newCh\[--newEndIdx\]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">sameVnode</span>(oldStartVnode, newStartVnode)) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;1å‘½ä¸­&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title function_">patchVnode</span>(oldStartVnode, newStartVnode)</span><br><span class="line"></span><br><span class="line">      newStartVnode = newCh\[++newStartIdx\]</span><br><span class="line">      oldStartVnode = oldCh\[++oldStartIdx\]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">sameVnode</span>(oldEndVnode, newEndVnode)) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;2å‘½ä¸­&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title function_">patchVnode</span>(oldEndVnode, newEndVnode)</span><br><span class="line"></span><br><span class="line">      newEndVnode = newCh\[--newEndIdx\]</span><br><span class="line">      oldEndVnode = oldCh\[--oldEndIdx\]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">sameVnode</span>(oldStartVnode, newEndVnode)) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;3å‘½ä¸­&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title function_">patchVnode</span>(oldStartVnode, newEndVnode)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      parentElm.<span class="title function_">insertBefore</span>(oldStartVnode.<span class="property">elm</span>, oldEndVnode.<span class="property">elm</span>.<span class="property">nextSibling</span>)</span><br><span class="line"></span><br><span class="line">      newEndVnode = newCh\[--newEndIdx\]</span><br><span class="line">      oldStartVnode = oldCh\[++oldStartIdx\]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">sameVnode</span>(oldEndVnode, newStartVnode)) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;4å‘½ä¸­&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      <span class="title function_">patchVnode</span>(oldEndVnode, newStartVnode)</span><br><span class="line"></span><br><span class="line">      parentElm.<span class="title function_">insertBefore</span>(oldEndVnode.<span class="property">elm</span>, oldStartVnode.<span class="property">elm</span>)</span><br><span class="line"></span><br><span class="line">      newStartVnode = newCh\[++newStartIdx\]</span><br><span class="line">      oldEndVnode = oldCh\[--oldEndIdx\]</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;diffå››ç§ä¼˜åŒ–ç­–ç•¥éƒ½æ²¡å‘½ä¸­&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!keyMap) &#123;</span><br><span class="line"></span><br><span class="line">        keyMap = &#123;&#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = oldStartIdx; i &lt; oldEndIdx; i++) &#123;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">const</span> key = oldCh\[i\].<span class="property">data</span>.<span class="property">key</span></span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (!key) keyMap\[key\] = i</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> idInOld = keyMap\[newStartIdx.<span class="property">data</span>\]</span><br><span class="line">        ? keyMap\[newStartIdx.<span class="property">data</span>.<span class="property">key</span>\]</span><br><span class="line">        : <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (idInOld) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç§»åŠ¨èŠ‚ç‚¹&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> moveElm = oldCh\[idInOld\]</span><br><span class="line"></span><br><span class="line">        <span class="title function_">patchVnode</span>(moveElm, newStartVnode)</span><br><span class="line"></span><br><span class="line">        oldCh\[idInOld\] = <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        parentElm.<span class="title function_">insertBefore</span>(moveElm.<span class="property">elm</span>, oldStartVnode.<span class="property">elm</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ·»åŠ æ–°èŠ‚ç‚¹&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        parentElm.<span class="title function_">insertBefore</span>(<span class="title function_">createElm</span>(newStartVnode), oldStartVnode.<span class="property">elm</span>)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      newStartVnode = newCh\[++newStartIdx\]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (newStartIdx &lt;= newEndIdx) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è¿›å…¥æ·»åŠ å‰©ä½™èŠ‚ç‚¹&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> beforeFlag = newCh\[newEndIdx + <span class="number">1</span>\] ? newCh\[newEndIdx + <span class="number">1</span>\] : <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = newStartIdx; i &lt;= newEndIdx; i++) &#123;</span><br><span class="line"></span><br><span class="line">      parentElm.<span class="title function_">insertBefore</span>(<span class="title function_">createElm</span>(newCh\[i\]), beforeFlag)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oldStartIdx &lt;= oldEndIdx) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è¿›å…¥åˆ é™¤å¤šä½™èŠ‚ç‚¹&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = oldStartIdx; i &lt;= oldEndIdx; i++) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (oldCh\[i\].<span class="property">elm</span>) parentElm.<span class="title function_">removeChild</span>(oldCh\[i\].<span class="property">elm</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>å‰ç«¯</tag>
        <tag>è™šæ‹ŸDOM</tag>
        <tag>diffç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>å°æµªçš„Cç›˜å¤§ä½œæˆ˜ï¼šç”¨è½¯é“¾æ¥æ‹¯æ•‘æ¿’ä¸´å´©æºƒçš„ç”µè„‘</title>
    <url>/xiaolangwiki/2019/11/06/12/</url>
    <content><![CDATA[<h2 id="å°æµªçš„Cç›˜å¤§ä½œæˆ˜ï¼šç”¨è½¯é“¾æ¥æ‹¯æ•‘æ¿’ä¸´å´©æºƒçš„ç”µè„‘"><a href="#å°æµªçš„Cç›˜å¤§ä½œæˆ˜ï¼šç”¨è½¯é“¾æ¥æ‹¯æ•‘æ¿’ä¸´å´©æºƒçš„ç”µè„‘" class="headerlink" title="å°æµªçš„Cç›˜å¤§ä½œæˆ˜ï¼šç”¨è½¯é“¾æ¥æ‹¯æ•‘æ¿’ä¸´å´©æºƒçš„ç”µè„‘"></a>å°æµªçš„Cç›˜å¤§ä½œæˆ˜ï¼šç”¨è½¯é“¾æ¥æ‹¯æ•‘æ¿’ä¸´å´©æºƒçš„ç”µè„‘</h2><p>å¤§å®¶å¥½,æˆ‘æ˜¯å°æµª,ä¸€ä¸ª23å²çš„è½¯ä»¶å·¥ç¨‹ä¸“ä¸šå¤§ä¸€å­¦ç”Ÿã€‚æœ€è¿‘,æˆ‘é‡åˆ°äº†ä¸€ä¸ªè®©æˆ‘å¤´ç–¼ä¸å·²çš„é—®é¢˜â€”â€”æˆ‘çš„ç¬”è®°æœ¬ç”µè„‘Cç›˜å¿«è¦çˆ†ç‚¸äº†!ä½œä¸ºä¸€ä¸ªå–œæ¬¢å°è¯•å„ç§æ–°è½¯ä»¶çš„æå®¢,æˆ‘çš„Cç›˜æ€»æ˜¯å¾ˆå¿«å°±è¢«å¡«æ»¡ã€‚ä»Šå¤©,æˆ‘è¦å’Œå¤§å®¶åˆ†äº«æˆ‘æ˜¯å¦‚ä½•ç”¨è½¯é“¾æ¥è¿™ä¸ªç¥å¥‡çš„å·¥å…·æ¥è§£æ•‘æˆ‘çš„Cç›˜çš„ã€‚</p>
<p>æ•…äº‹æ˜¯è¿™æ ·çš„ï¼šå‰å‡ å¤©,æˆ‘æ­£å‡†å¤‡ä¸‹è½½ä¸€ä¸ªæ–°çš„æ¸¸æˆ,çªç„¶æ”¶åˆ°äº†ç³»ç»Ÿè­¦å‘Š:Cç›˜ç©ºé—´ä¸è¶³ã€‚æˆ‘çœ‹äº†çœ‹,å±…ç„¶åªå‰©ä¸‹ä¸åˆ°1GBçš„ç©ºé—´äº†!æˆ‘æ…Œäº†,å› ä¸ºé©¬ä¸Šå°±è¦å¼€å§‹ä¸€ä¸ªé‡è¦çš„ç¼–ç¨‹é¡¹ç›®,ç”µè„‘è¦æ˜¯å‡ºé—®é¢˜å°±ç³Ÿç³•äº†ã€‚</p>
<p>æˆ‘å°è¯•äº†å„ç§å¸¸è§„çš„æ¸…ç†æ–¹æ³•:åˆ é™¤ä¸´æ—¶æ–‡ä»¶ã€å¸è½½ä¸ç”¨çš„è½¯ä»¶ã€ç”šè‡³æŠŠä¸€äº›æ–‡ä»¶ç§»åŠ¨åˆ°Dç›˜ã€‚ä½†æ˜¯æ•ˆæœä¸å¤ªç†æƒ³,Cç›˜ç©ºé—´è¿˜æ˜¯å¾ˆç´§å¼ ã€‚æ­£å½“æˆ‘ä¸€ç­¹è«å±•æ—¶,æˆ‘æƒ³èµ·äº†æ“ä½œç³»ç»Ÿè¯¾ä¸Šè€å¸ˆæ›¾ç»æåˆ°è¿‡çš„ä¸€ä¸ªæ¦‚å¿µâ€”â€”è½¯é“¾æ¥ã€‚</p>
<p>ç»è¿‡ä¸€ç•ªç ”ç©¶,æˆ‘å‘ç°è½¯é“¾æ¥ç®€ç›´å°±æ˜¯ä¸ºæˆ‘è¿™ç§æƒ…å†µé‡èº«å®šåˆ¶çš„è§£å†³æ–¹æ¡ˆ!å®ƒå¯ä»¥è®©æˆ‘æŠŠä¸€äº›å ç”¨å¤§é‡ç©ºé—´çš„æ–‡ä»¶å¤¹â€è½¬ç§»â€åˆ°å…¶ä»–ç›˜,åŒæ—¶ä¿æŒåŸæ¥çš„è·¯å¾„ä¸å˜,ç®€ç›´å¤ªæ£’äº†!</p>
<p>ä¸‹é¢,æˆ‘æ¥ä¸€æ­¥æ­¥æ•™å¤§å®¶å¦‚ä½•ä½¿ç”¨è½¯é“¾æ¥æ¥æ‹¯æ•‘æ¿’ä¸´å´©æºƒçš„Cç›˜:</p>
<p>æ­¥éª¤1ï¼šæ‰¾å‡ºå ç”¨ç©ºé—´æœ€å¤§çš„æ–‡ä»¶å¤¹<br>é¦–å…ˆ,æˆ‘ä»¬éœ€è¦æ‰¾å‡ºCç›˜ä¸­å ç”¨ç©ºé—´æœ€å¤§çš„æ–‡ä»¶å¤¹ã€‚åœ¨æˆ‘çš„ç”µè„‘ä¸Š,æˆ‘å‘ç° <code>C:\Users\å°æµª\AppData\Local\Microsoft\Windows\WER</code> è¿™ä¸ªæ–‡ä»¶å¤¹å ç”¨äº†å°†è¿‘10GBçš„ç©ºé—´ã€‚è¿™ä¸ªæ–‡ä»¶å¤¹å­˜å‚¨çš„æ˜¯Windowsé”™è¯¯æŠ¥å‘Š,å¯ä»¥å®‰å…¨åœ°ç§»åŠ¨åˆ°å…¶ä»–ç›˜ã€‚</p>
<p>æ­¥éª¤2ï¼šå‡†å¤‡ç›®æ ‡è·¯å¾„<br>æˆ‘å†³å®šåœ¨Dç›˜åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹æ¥å­˜å‚¨è¿™äº›æ–‡ä»¶ã€‚</p>
<ul>
<li>æºè·¯å¾„ï¼š<code>C:\Users\å°æµª\AppData\Local\Microsoft\Windows\WER</code></li>
<li>ç›®æ ‡è·¯å¾„ï¼š<code>D:\Backups\Windows\WER</code></li>
</ul>
<p>æ­¥éª¤3ï¼šç§»åŠ¨æ–‡ä»¶<br>åœ¨è¿›è¡Œä¸‹ä¸€æ­¥ä¹‹å‰,æˆ‘ä»¬éœ€è¦å…ˆæŠŠæ–‡ä»¶ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚æ‰“å¼€å‘½ä»¤æç¤ºç¬¦(ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ),è¾“å…¥ä»¥ä¸‹å‘½ä»¤:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir &quot;D:\Backups\Windows&quot;</span><br><span class="line">move &quot;C:\Users\å°æµª\AppData\Local\Microsoft\Windows\WER&quot; &quot;D:\Backups\Windows\WER&quot;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„ä»£ç è§£é‡Šå¦‚ä¸‹:<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir &quot;æ–°æ–‡ä»¶å¤¹è·¯å¾„&quot;  # åˆ›å»ºæ–°çš„æ–‡ä»¶å¤¹</span><br><span class="line">move &quot;æºè·¯å¾„&quot; &quot;ç›®æ ‡è·¯å¾„&quot;  # ç§»åŠ¨æ–‡ä»¶å¤¹</span><br></pre></td></tr></table></figure></p>
<p>æ­¥éª¤4ï¼šåˆ›å»ºè½¯é“¾æ¥<br>ç°åœ¨,æˆ‘ä»¬æ¥åˆ›å»ºè½¯é“¾æ¥ã€‚åœ¨åŒä¸€ä¸ªå‘½ä»¤æç¤ºç¬¦çª—å£ä¸­,è¾“å…¥ä»¥ä¸‹å‘½ä»¤:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mklink /D &quot;C:\Users\å°æµª\AppData\Local\Microsoft\Windows\WER&quot; &quot;D:\Backups\Windows\WER&quot;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„ä»£ç è§£é‡Šå¦‚ä¸‹:<br><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mklink /D &quot;é“¾æ¥è·¯å¾„&quot; &quot;ç›®æ ‡è·¯å¾„&quot;</span><br></pre></td></tr></table></figure></p>
<ul>
<li><code>mklink</code>: Windowsç³»ç»Ÿç”¨äºåˆ›å»ºç¬¦å·é“¾æ¥çš„å‘½ä»¤</li>
<li><code>/D</code>: è¡¨ç¤ºæˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ªç›®å½•çš„ç¬¦å·é“¾æ¥</li>
<li><code>&quot;é“¾æ¥è·¯å¾„&quot;</code>: åŸæ¥çš„è·¯å¾„,ä¹Ÿæ˜¯æˆ‘ä»¬è¦åˆ›å»ºé“¾æ¥çš„åœ°æ–¹</li>
<li><code>&quot;ç›®æ ‡è·¯å¾„&quot;</code>: æˆ‘ä»¬å®é™…å­˜å‚¨æ–‡ä»¶çš„æ–°è·¯å¾„</li>
</ul>
<p>æ­¥éª¤5ï¼šéªŒè¯è½¯é“¾æ¥æ˜¯å¦åˆ›å»ºæˆåŠŸ<br>ä½ å¯ä»¥åœ¨æ–‡ä»¶èµ„æºç®¡ç†å™¨ä¸­æŸ¥çœ‹ <code>C:\Users\å°æµª\AppData\Local\Microsoft\Windows\</code> ç›®å½•,åº”è¯¥èƒ½çœ‹åˆ°ä¸€ä¸ªç®­å¤´å›¾æ ‡çš„WERæ–‡ä»¶å¤¹,è¿™å°±è¯´æ˜è½¯é“¾æ¥åˆ›å»ºæˆåŠŸäº†ã€‚</p>
<p>æ­¥éª¤6ï¼šæµ‹è¯•<br>é‡å¯ç”µè„‘,ç„¶åæ£€æŸ¥Cç›˜ç©ºé—´æ˜¯å¦å¢åŠ äº†ã€‚ä½ ä¼šæƒŠå–œåœ°å‘ç°,Cç›˜ç©ºé—´ä¸€ä¸‹å­å°±ç©ºå‡ºäº†10GB!</p>
<p>é€šè¿‡è¿™ä¸ªæ–¹æ³•,æˆ‘ä¸ä»…è§£å†³äº†Cç›˜ç©ºé—´ä¸è¶³çš„é—®é¢˜,è¿˜å­¦ä¼šäº†ä¸€ä¸ªéå¸¸å®ç”¨çš„æŠ€èƒ½ã€‚ä¹‹å,æˆ‘åˆç”¨åŒæ ·çš„æ–¹æ³•å¤„ç†äº†å…¶ä»–ä¸€äº›å¤§æ–‡ä»¶å¤¹,æœ€ç»ˆä¸ºCç›˜é‡Šæ”¾äº†å°†è¿‘30GBçš„ç©ºé—´!</p>
<p>ä½¿ç”¨è½¯é“¾æ¥æ—¶,è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹:</p>
<ol>
<li>æ€»æ˜¯ä½¿ç”¨ç®¡ç†å‘˜æƒé™æ‰§è¡Œmklinkå‘½ä»¤ã€‚</li>
<li>åœ¨ç§»åŠ¨æ–‡ä»¶å’Œåˆ›å»ºé“¾æ¥ä¹‹å‰,æœ€å¥½å…ˆå¤‡ä»½é‡è¦æ•°æ®ã€‚</li>
<li>ä¸è¦éšæ„åˆ é™¤æˆ–ç§»åŠ¨å·²ç»åˆ›å»ºäº†è½¯é“¾æ¥çš„æ–‡ä»¶å¤¹,è¿™å¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿå‡ºé”™ã€‚</li>
<li>å®šæœŸæ£€æŸ¥é“¾æ¥æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</li>
</ol>
<p>è½¯é“¾æ¥ä¸ä»…å¯ä»¥ç”¨äºèŠ‚çœCç›˜ç©ºé—´,è¿˜æœ‰å¾ˆå¤šå…¶ä»–æœ‰è¶£çš„åº”ç”¨ã€‚æ¯”å¦‚,ä½ å¯ä»¥ç”¨å®ƒæ¥ç»„ç»‡ä½ çš„é¡¹ç›®æ–‡ä»¶,æˆ–è€…ç®¡ç†æ¸¸æˆå­˜æ¡£ã€‚æŒæ¡äº†è¿™ä¸ªæŠ€èƒ½,ä½ å°±å¤šäº†ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·æ¥ç®¡ç†ä½ çš„æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<p>å¸Œæœ›æˆ‘çš„ç»å†å’Œè¿™ä¸ªæ•™ç¨‹èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚è®°ä½,åœ¨é‡åˆ°é—®é¢˜æ—¶ä¸è¦æ…Œå¼ ,ä»”ç»†æ€è€ƒ,æ€»ä¼šæœ‰è§£å†³çš„æ–¹æ³•ã€‚ä½œä¸ºæœªæ¥çš„è½¯ä»¶å·¥ç¨‹å¸ˆ,æˆ‘ä»¬è¦å­¦ä¼šç”¨æŠ€æœ¯çš„æ–¹æ³•æ¥è§£å†³ç”Ÿæ´»ä¸­çš„å„ç§é—®é¢˜ã€‚</p>
]]></content>
      <categories>
        <category>ç”µè„‘</category>
      </categories>
      <tags>
        <tag>è½¯é“¾æ¥</tag>
        <tag>Cç›˜</tag>
        <tag>ç”µè„‘</tag>
        <tag>æ¸…ç†Cç›˜</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»é›¶å¼€å§‹ ä¸€æ­¥æ­¥å­¦ä¹ å¾®å‰ç«¯</title>
    <url>/xiaolangwiki/2023/02/27/54/</url>
    <content><![CDATA[<h2 id="ä»é›¶å¼€å§‹ï¼Œä¸€æ­¥æ­¥å­¦ä¹ å¾®å‰ç«¯"><a href="#ä»é›¶å¼€å§‹ï¼Œä¸€æ­¥æ­¥å­¦ä¹ å¾®å‰ç«¯" class="headerlink" title="ä»é›¶å¼€å§‹ï¼Œä¸€æ­¥æ­¥å­¦ä¹ å¾®å‰ç«¯"></a>ä»é›¶å¼€å§‹ï¼Œä¸€æ­¥æ­¥å­¦ä¹ å¾®å‰ç«¯</h2><p>åŸæ–‡ï¼š<a href="https://juejin.cn/post/7204723936914554937">https://juejin.cn/post/7204723936914554937</a></p>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote>
<p>åœ¨å®ä¹ çš„è¿™æ®µæ—¶é—´æ¥è§¦äº†å¾ˆå¤šæ–°ä¸œè¥¿ï¼Œæ¯”å¦‚å¾®å‰ç«¯å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œåœ¨è¿™é‡Œå°æµªå°±æ¥èŠèŠå¾®å‰ç«¯ä¸­çš„ qiankun æ¡†æ¶</p>
</blockquote>
<h2 id="1-ä»‹ç»"><a href="#1-ä»‹ç»" class="headerlink" title="1.ä»‹ç»"></a>1.ä»‹ç»</h2><h3 id="1-1-ä¸ºä»€ä¹ˆéœ€è¦å¾®å‰ç«¯"><a href="#1-1-ä¸ºä»€ä¹ˆéœ€è¦å¾®å‰ç«¯" class="headerlink" title="1.1 ä¸ºä»€ä¹ˆéœ€è¦å¾®å‰ç«¯"></a>1.1 ä¸ºä»€ä¹ˆéœ€è¦å¾®å‰ç«¯</h3><blockquote>
<p>å½“æˆ‘ä»¬å¼€å‘å¤§å‹çš„å‰ç«¯åº”ç”¨æ—¶ï¼Œé€šå¸¸éœ€è¦å°†åº”ç”¨æ‹†åˆ†æˆå¤šä¸ªå­åº”ç”¨è¿›è¡Œå¼€å‘å’Œç»´æŠ¤ã€‚è¿™æ—¶å€™å¾®å‰ç«¯å°±æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚å¾®å‰ç«¯æ˜¯ä¸€ç§æ¶æ„æ¨¡å¼ï¼Œå®ƒå°†å‰ç«¯åº”ç”¨ç¨‹åºæ‹†åˆ†æˆå¤šä¸ªæ›´å°çš„ã€ç›¸å¯¹ç‹¬ç«‹çš„éƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½å¯ä»¥ç‹¬ç«‹å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²å’Œæ‰©å±•ã€‚åœ¨å¾®å‰ç«¯æ¶æ„ä¸­ï¼Œæ¯ä¸ªå­åº”ç”¨éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åº”ç”¨ç¨‹åºï¼Œå¯ä»¥ç‹¬ç«‹éƒ¨ç½²å’Œè¿è¡Œã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†å‰ç«¯åº”ç”¨ç¨‹åºçš„å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²å’Œç»´æŠ¤å·¥ä½œåˆ†è§£æˆå¤šä¸ªæ›´å°çš„ä»»åŠ¡ï¼Œæé«˜åº”ç”¨ç¨‹åºçš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚å¾®å‰ç«¯çš„å®ç°æ–¹å¼æœ‰å¤šç§ï¼Œå…¶ä¸­æ¯”è¾ƒå¸¸è§çš„æ–¹å¼æ˜¯é€šè¿‡ iframeã€Web Components æˆ–è€… JavaScript æ¨¡å—åŠ è½½å™¨æ¥å®ç°å­åº”ç”¨çš„éš”ç¦»å’Œç‹¬ç«‹è¿è¡Œã€‚é€šè¿‡è¿™äº›æ–¹å¼ï¼Œä¸åŒçš„å­åº”ç”¨ä¹‹é—´å¯ä»¥äº’ç›¸ç‹¬ç«‹ã€äº’ç›¸é€šä¿¡ï¼Œä»è€Œå®ç°ä¸€ä¸ªå®Œæ•´çš„å‰ç«¯åº”ç”¨ç¨‹åºã€‚</p>
</blockquote>
<h3 id="1-2-å¦‚ä½•åˆ¤æ–­è‡ªå·±çš„é¡¹ç›®éœ€è¦ä½¿ç”¨å¾®å‰ç«¯"><a href="#1-2-å¦‚ä½•åˆ¤æ–­è‡ªå·±çš„é¡¹ç›®éœ€è¦ä½¿ç”¨å¾®å‰ç«¯" class="headerlink" title="1.2 å¦‚ä½•åˆ¤æ–­è‡ªå·±çš„é¡¹ç›®éœ€è¦ä½¿ç”¨å¾®å‰ç«¯"></a>1.2 å¦‚ä½•åˆ¤æ–­è‡ªå·±çš„é¡¹ç›®éœ€è¦ä½¿ç”¨å¾®å‰ç«¯</h3><ol>
<li>é¡¹ç›®åŠŸèƒ½é€æ¸å¢å¤šï¼Œä»£ç è§„æ¨¡åºå¤§ï¼Œå¯¼è‡´ä»£ç ç»´æŠ¤å’Œå¼€å‘æ•ˆç‡ä½ä¸‹ï¼›</li>
<li>é¡¹ç›®éœ€è¦é›†æˆå¤šä¸ªä¸åŒæŠ€æœ¯æ ˆçš„æ¨¡å—æˆ–æœåŠ¡ï¼›</li>
<li>å›¢é˜Ÿæˆå‘˜åˆ†æ•£ï¼Œå„è‡ªè´Ÿè´£å¼€å‘ä¸åŒçš„æ¨¡å—æˆ–æœåŠ¡ï¼Œéœ€è¦å®ç°ç‹¬ç«‹å¼€å‘å’Œéƒ¨ç½²ï¼›</li>
<li>é¡¹ç›®éœ€è¦æ”¯æŒç‹¬ç«‹çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†å’Œç‰ˆæœ¬æ§åˆ¶ï¼›</li>
<li>éœ€è¦å®ç°é«˜å¯ç”¨æ€§å’Œå¼¹æ€§ä¼¸ç¼©ï¼›</li>
<li>éœ€è¦å®ç°åŠ¨æ€åŠ è½½å’Œå¸è½½å­åº”ç”¨ç­‰åœºæ™¯ã€‚</li>
</ol>
<blockquote>
<p>æ‰€ä»¥å‘¢ï¼Œå°æµªè§‰å¾—å¦‚æœé¡¹ç›®å…·æœ‰ä¸Šé¢è¿™äº›ç‰¹ç‚¹ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘ä½¿ç”¨å¾®å‰ç«¯æ¥ä¼˜åŒ–é¡¹ç›®æ¶æ„å’Œæå‡å¼€å‘æ•ˆç‡ã€‚</p>
</blockquote>
<h3 id="1-3-ä¸»åº”ç”¨å’Œå­åº”ç”¨"><a href="#1-3-ä¸»åº”ç”¨å’Œå­åº”ç”¨" class="headerlink" title="1.3 ä¸»åº”ç”¨å’Œå­åº”ç”¨"></a>1.3 ä¸»åº”ç”¨å’Œå­åº”ç”¨</h3><blockquote>
<p><code>qiankun</code> å®˜ç½‘åœ°å€æ˜¯ï¼š<a href="https://link.juejin.cn/?target=https%3A%2F%2Fqiankun.umijs.org%2F%25E3%2580%2582" title="https://qiankun.umijs.org/%E3%80%82">qiankun.umijs.org/</a></p>
<p>å®˜ç½‘çš„ä¾‹å­å’Œæ•™ç¨‹éƒ½å¾ˆè¯¦ç»†ï¼Œæ›´æ–°é€Ÿåº¦ä¹Ÿå¿«ï¼Œå¤§å®¶æƒ³å…·ä½“ä½¿ç”¨çš„å¯ä»¥å»å®˜ç½‘æŸ¥é˜…</p>
</blockquote>
<p><code>qiankun</code> æ˜¯ä¸€ä¸ªåŸºäº Single-SPA çš„å¾®å‰ç«¯è§£å†³æ–¹æ¡ˆï¼Œå®ƒæä¾›äº†ä¸€ç§è½»é‡çº§çš„å‰ç«¯æ¶æ„ï¼Œå¯ä»¥å°†å¤šä¸ªå­åº”ç”¨æ•´åˆæˆä¸€ä¸ªæ•´ä½“åº”ç”¨ã€‚<code>qiankun</code> çš„æ¶æ„åŒ…å«ä¸¤ä¸ªä¸»è¦çš„è§’è‰²ï¼š</p>
<ul>
<li>ä¸»åº”ç”¨ï¼ˆMaster Applicationï¼‰ï¼šè´Ÿè´£æ•´ä¸ªåº”ç”¨çš„æ¡†æ¶æ­å»ºã€è·¯ç”±åˆ†å‘å’Œå­åº”ç”¨çš„æ³¨å†Œå’Œåè°ƒç®¡ç†ã€‚</li>
<li>å­åº”ç”¨ï¼ˆMicro Applicationï¼‰ï¼šç‹¬ç«‹å¼€å‘çš„å‰ç«¯åº”ç”¨ç¨‹åºï¼Œå¯ä»¥ç‹¬ç«‹è¿è¡Œï¼Œä¹Ÿå¯ä»¥ä½œä¸ºä¸»åº”ç”¨çš„ä¸€ä¸ªå­æ¨¡å—è¿è¡Œã€‚</li>
</ul>
<h3 id="1-4-qiankun-çš„ç‰¹ç‚¹"><a href="#1-4-qiankun-çš„ç‰¹ç‚¹" class="headerlink" title="1.4 qiankun çš„ç‰¹ç‚¹"></a>1.4 qiankun çš„ç‰¹ç‚¹</h3><p><code>qiankun</code> çš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li>å®Œå¤‡çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼š<code>qiankun</code> æä¾›äº†å®Œå¤‡çš„å­åº”ç”¨ç”Ÿå‘½å‘¨æœŸç®¡ç†æ–¹æ¡ˆï¼Œå¯ä»¥è‡ªåŠ¨åŠ è½½ã€å¯åŠ¨ã€æŒ‚è½½ã€å¸è½½å’Œå¸è½½å­åº”ç”¨ã€‚</li>
<li>çµæ´»çš„åº”ç”¨è·¯ç”±åˆ†å‘ï¼š<code>qiankun</code> æä¾›äº†çµæ´»çš„è·¯ç”±åˆ†å‘æ–¹æ¡ˆï¼Œå¯ä»¥è‡ªå®šä¹‰è·¯ç”±åŒ¹é…è§„åˆ™ï¼Œå¯ä»¥é€šè¿‡ä¸»åº”ç”¨çš„è·¯ç”±æ¥åŒ¹é…å­åº”ç”¨çš„è·¯ç”±ã€‚</li>
<li>ç‹¬ç«‹çš„åº”ç”¨çŠ¶æ€ç®¡ç†ï¼š<code>qiankun</code> æä¾›äº†ç‹¬ç«‹çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼Œæ¯ä¸ªå­åº”ç”¨éƒ½å¯ä»¥ç‹¬ç«‹ç®¡ç†è‡ªå·±çš„çŠ¶æ€ï¼Œä¸»åº”ç”¨å¯ä»¥é€šè¿‡ props æ–¹å¼ä¼ é€’æ•°æ®ç»™å­åº”ç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡äº‹ä»¶æ€»çº¿çš„æ–¹å¼è¿›è¡Œé€šä¿¡ã€‚</li>
</ul>
<h3 id="1-5-å¦‚ä½•ä½¿ç”¨å¾®å‰ç«¯"><a href="#1-5-å¦‚ä½•ä½¿ç”¨å¾®å‰ç«¯" class="headerlink" title="1.5 å¦‚ä½•ä½¿ç”¨å¾®å‰ç«¯"></a>1.5 å¦‚ä½•ä½¿ç”¨å¾®å‰ç«¯</h3><p>åœ¨ä½¿ç”¨ <code>qiankun</code> æ„å»ºå¾®å‰ç«¯åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œï¼š</p>
<ol>
<li>åˆ›å»ºä¸»åº”ç”¨ï¼šä¸»åº”ç”¨è´Ÿè´£æ•´ä¸ªåº”ç”¨çš„æ¡†æ¶æ­å»ºã€è·¯ç”±åˆ†å‘å’Œå­åº”ç”¨çš„æ³¨å†Œå’Œåè°ƒç®¡ç†ã€‚å¯ä»¥ä½¿ç”¨ä»»ä½•å‰ç«¯æ¡†æ¶è¿›è¡Œå¼€å‘ï¼Œä¾‹å¦‚ Reactã€Vueã€Angular ç­‰ã€‚</li>
<li>åˆ›å»ºå­åº”ç”¨ï¼šå­åº”ç”¨æ˜¯ç‹¬ç«‹å¼€å‘çš„å‰ç«¯åº”ç”¨ç¨‹åºï¼Œå¯ä»¥ç‹¬ç«‹è¿è¡Œï¼Œä¹Ÿå¯ä»¥ä½œä¸ºä¸»åº”ç”¨çš„ä¸€ä¸ªå­æ¨¡å—è¿è¡Œã€‚æ¯ä¸ªå­åº”ç”¨éƒ½å¯ä»¥ä½¿ç”¨ä»»ä½•å‰ç«¯æ¡†æ¶è¿›è¡Œå¼€å‘ï¼Œä¾‹å¦‚ Reactã€Vueã€Angular ç­‰ã€‚</li>
<li>æ³¨å†Œå­åº”ç”¨ï¼šä¸»åº”ç”¨éœ€è¦åœ¨å¯åŠ¨æ—¶æ³¨å†Œæ‰€æœ‰çš„å­åº”ç”¨ã€‚æ³¨å†Œæ—¶éœ€è¦æŒ‡å®šå­åº”ç”¨çš„åç§°ã€è®¿é—®åœ°å€ã€åŠ è½½æ–¹å¼å’Œè·¯ç”±é…ç½®ç­‰ä¿¡æ¯ã€‚</li>
<li>å¯åŠ¨å­åº”ç”¨ï¼šä¸»åº”ç”¨åœ¨å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨åŠ è½½å’Œå¯åŠ¨æ‰€æœ‰çš„å­åº”ç”¨ï¼Œæ¯ä¸ªå­åº”ç”¨ä¼šæ ¹æ®é…ç½®çš„è®¿é—®åœ°å€è‡ªåŠ¨åŠ è½½ã€‚</li>
<li>åè°ƒå­åº”ç”¨ï¼šä¸»åº”ç”¨éœ€è¦åè°ƒç®¡ç†æ‰€æœ‰çš„å­åº”ç”¨ï¼ŒåŒ…æ‹¬å­åº”ç”¨çš„åŠ è½½ã€å¯åŠ¨ã€æŒ‚è½½ã€å¸è½½å’Œå¸è½½ç­‰æ“ä½œã€‚ä¸»åº”ç”¨å¯ä»¥é€šè¿‡ props æ–¹å¼ä¼ é€’æ•°æ®ç»™å­åº”ç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡äº‹ä»¶æ€»çº¿çš„æ–¹å¼è¿›è¡Œé€šä¿¡ã€‚</li>
<li>å¸è½½å­åº”ç”¨ï¼šå½“å­åº”ç”¨ä¸å†éœ€è¦æ—¶ï¼Œä¸»åº”ç”¨å¯ä»¥å¸è½½å­åº”ç”¨å¹¶é‡Šæ”¾èµ„æºï¼Œä»¥æé«˜ç³»ç»Ÿçš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚</li>
</ol>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œ<code>qiankun</code> è¿˜æä¾›äº†å¤šç§é«˜çº§ç‰¹æ€§ï¼Œä¾‹å¦‚å¼‚æ­¥åŠ è½½ã€å…¬å…±ä¾èµ–ã€æ ·å¼éš”ç¦»ã€ç¼“å­˜ä¼˜åŒ–ç­‰ï¼Œå¯ä»¥è¿›ä¸€æ­¥æé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<h2 id="2-ä½¿ç”¨qiankunæ­å»ºä¾‹å­ï¼š"><a href="#2-ä½¿ç”¨qiankunæ­å»ºä¾‹å­ï¼š" class="headerlink" title="2.ä½¿ç”¨qiankunæ­å»ºä¾‹å­ï¼š"></a>2.ä½¿ç”¨<code>qiankun</code>æ­å»ºä¾‹å­ï¼š</h2><p>è¿™é‡Œä¸¾ä¸€ä¸ª demo ä¾‹å­ï¼Œå¤§å®¶å¦‚æœæ„Ÿå…´è¶£å¯ä»¥æŒ‰ç…§å°æµªè¿™æ ·æ¥è¿›è¡Œæ­å»º ä¸€ä¸ªç®€å•çš„ <code>qiankun</code> å®ä¾‹ demo</p>
<ul>
<li>ä¸»åº”ç”¨ä½¿ç”¨ React</li>
<li>å­åº”ç”¨ 1 ä½¿ç”¨ Vue 3</li>
<li>å­åº”ç”¨ 2 ä½¿ç”¨ React</li>
</ul>
<h3 id="2-1-åˆ›å»ºä¸»åº”ç”¨"><a href="#2-1-åˆ›å»ºä¸»åº”ç”¨" class="headerlink" title="2.1 åˆ›å»ºä¸»åº”ç”¨"></a>2.1 åˆ›å»ºä¸»åº”ç”¨</h3><p>é¦–å…ˆéœ€è¦åˆ›å»ºä¸»åº”ç”¨ï¼Œæˆ‘ä»¬ä½¿ç”¨ create-react-app å¿«é€Ÿåˆ›å»ºä¸€ä¸ª React åº”ç”¨ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npx create-react-app qiankun-example</span><br></pre></td></tr></table></figure>
<p>å®‰è£…ä¾èµ–</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd qiankun-example</span><br><span class="line">npm install qiankun</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹ä¸»åº”ç”¨å…¥å£æ–‡ä»¶ src/index.jsï¼ŒåŠ å…¥ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; registerMicroApps, start &#125; <span class="keyword">from</span> <span class="string">&#x27;qiankun&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> apps = \[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;vue3&#x27;</span>,</span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&#x27;//localhost:8081&#x27;</span>,</span><br><span class="line">    <span class="attr">container</span>: <span class="string">&#x27;#subapp-viewport&#x27;</span>,</span><br><span class="line">    <span class="attr">activeRule</span>: <span class="string">&#x27;/vue3&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;react-app&#x27;</span>,</span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&#x27;//localhost:8082&#x27;</span>,</span><br><span class="line">    <span class="attr">container</span>: <span class="string">&#x27;#subapp-viewport&#x27;</span>,</span><br><span class="line">    <span class="attr">activeRule</span>: <span class="string">&#x27;/react-app&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">\];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">registerMicroApps</span>(apps);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">start</span>();</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢å°æµªé¦–å…ˆå®šä¹‰äº†ä¸¤ä¸ªå­åº”ç”¨ï¼Œåˆ†åˆ«æ˜¯ <code>Vue 3</code> åº”ç”¨å’Œ <code>React</code> åº”ç”¨ã€‚ç„¶åé€šè¿‡ <code>registerMicroApps</code> å‡½æ•°æ³¨å†Œå­åº”ç”¨ï¼Œå¯åŠ¨ <code>qiankun</code>ã€‚</p>
<h3 id="2-2-åˆ›å»ºå­åº”ç”¨-1ï¼šVue-3"><a href="#2-2-åˆ›å»ºå­åº”ç”¨-1ï¼šVue-3" class="headerlink" title="2.2 åˆ›å»ºå­åº”ç”¨ 1ï¼šVue 3"></a>2.2 åˆ›å»ºå­åº”ç”¨ 1ï¼šVue 3</h3><p>åœ¨ä¸»åº”ç”¨ä¸­æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>vue3</code> çš„å­åº”ç”¨ï¼Œéœ€è¦å…ˆåˆ›å»ºå­åº”ç”¨çš„ä»£ç ã€‚åœ¨ <code>vue-cli</code> ä¸­åˆ›å»ºä¸€ä¸ª <code>Vue 3</code> åº”ç”¨(å¤§å®¶ä¹Ÿå¯ä»¥ç”¨<code>vite</code>æ­å»ºï¼Œè¿™é‡Œæˆ‘ç”¨<code>vue-cli</code>)ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vue create subapp-vue3</span><br></pre></td></tr></table></figure>
<p>å®‰è£…ä¾èµ–ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd subapp-vue3</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹ src/main.jsï¼ŒåŠ å…¥ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> instance = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">  instance = <span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&quot;development&quot;</span>) &#123;</span><br><span class="line">  <span class="title function_">render</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">bootstrap</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">mount</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">render</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">unmount</span>(<span class="params"></span>) &#123;</span><br><span class="line">  instance.$destroy();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢å°æµªå®šä¹‰äº†å­åº”ç”¨çš„æ¸²æŸ“å‡½æ•°ï¼Œç”¨äºåœ¨ä¸»åº”ç”¨ä¸­æ¸²æŸ“å­åº”ç”¨ã€‚åœ¨å¼€å‘ç¯å¢ƒä¸‹ç›´æ¥æ¸²æŸ“ï¼Œè€Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹åˆ™é€šè¿‡å¯¼å‡º <code>bootstrap</code>ã€<code>mount</code> å’Œ <code>unmount</code> å‡½æ•°ï¼Œç”± <code>qiankun</code> è°ƒç”¨ã€‚</p>
<h3 id="2-3-åˆ›å»ºå­åº”ç”¨-2ï¼šReact-åº”ç”¨"><a href="#2-3-åˆ›å»ºå­åº”ç”¨-2ï¼šReact-åº”ç”¨" class="headerlink" title="2.3 åˆ›å»ºå­åº”ç”¨ 2ï¼šReact åº”ç”¨"></a>2.3 åˆ›å»ºå­åº”ç”¨ 2ï¼šReact åº”ç”¨</h3><p>æˆ‘ä»¬éœ€è¦å…ˆåˆ›å»º React åº”ç”¨ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npx create-react-app subapp-react</span><br></pre></td></tr></table></figure>
<p>å®‰è£…ä¾èµ–ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd subapp-react</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹ src/index.jsï¼ŒåŠ å…¥ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> instance = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;root&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&quot;development&quot;</span>) &#123;</span><br><span class="line">  <span class="title function_">render</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">bootstrap</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">mount</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">render</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">unmount</span>(<span class="params"></span>) &#123;</span><br><span class="line">  instance.$destroy();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡ŒåŒæ ·å®šä¹‰äº†å­åº”ç”¨çš„æ¸²æŸ“å‡½æ•°ï¼Œç”¨äºåœ¨ä¸»åº”ç”¨ä¸­æ¸²æŸ“å­åº”ç”¨ã€‚åœ¨å¼€å‘ç¯å¢ƒä¸‹ç›´æ¥æ¸²æŸ“ï¼Œè€Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹åˆ™é€šè¿‡å¯¼å‡º <code>bootstrap</code>ã€<code>mount</code> å’Œ <code>unmount</code> å‡½æ•°ï¼Œç”± <code>qiankun</code> è°ƒç”¨ã€‚</p>
<h3 id="2-4-å¯åŠ¨åº”ç”¨"><a href="#2-4-å¯åŠ¨åº”ç”¨" class="headerlink" title="2.4 å¯åŠ¨åº”ç”¨"></a>2.4 å¯åŠ¨åº”ç”¨</h3><p>æˆ‘ä»¬éœ€è¦åˆ†åˆ«å¯åŠ¨ä¸»åº”ç”¨å’Œä¸¤ä¸ªå­åº”ç”¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">å¯åŠ¨ä¸»åº”ç”¨</span><br><span class="line">cd qiankun-example</span><br><span class="line">npm start</span><br><span class="line"></span><br><span class="line">\# å¯åŠ¨ Vue 3 å­åº”ç”¨</span><br><span class="line">cd subapp-vue3</span><br><span class="line">npm run serve -- --port 8081</span><br><span class="line"></span><br><span class="line">\# å¯åŠ¨ React å­åº”ç”¨</span><br><span class="line">cd subapp-react</span><br><span class="line">npm start -- --port 8082</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨æµè§ˆå™¨ä¸­è®¿é—® <strong>[<a href="http://localhost:3000">http://localhost:3000</a></strong>ï¼Œå³å¯çœ‹åˆ°ä¸»åº”ç”¨çš„é¡µé¢ã€‚åœ¨ä¸»åº”ç”¨ä¸­ç‚¹å‡»â€œVue](<a href="https://link.juejin.cn/?target=http%3A%2F%2Flocalhost%3A3000**%25EF%25BC%258C%25E5%258D%25B3%25E5%258F%25AF%25E7%259C%258B%25E5%2588%25B0%25E4%25B8%25BB%25E5%25BA%2594%25E7%2594%25A8%25E7%259A%2584%25E9%25A1%25B5%25E9%259D%25A2%25E3%2580%2582%25E5%259C%25A8%25E4%25B8%25BB%25E5%25BA%2594%25E7%2594%25A8%25E4%25B8%25AD%25E7%2582%25B9%25E5%2587%25BB%25E2%2580%259CVue">https://link.juejin.cn/?target=http%3A%2F%2Flocalhost%3A3000**%25EF%25BC%258C%25E5%258D%25B3%25E5%258F%25AF%25E7%259C%258B%25E5%2588%25B0%25E4%25B8%25BB%25E5%25BA%2594%25E7%2594%25A8%25E7%259A%2584%25E9%25A1%25B5%25E9%259D%25A2%25E3%2580%2582%25E5%259C%25A8%25E4%25B8%25BB%25E5%25BA%2594%25E7%2594%25A8%25E4%25B8%25AD%25E7%2582%25B9%25E5%2587%25BB%25E2%2580%259CVue</a> â€œ<a href="http://localhost:3000\*\*%EF%BC%8C%E5%8D%B3%E5%8F%AF%E7%9C%8B%E5%88%B0%E4%B8%BB%E5%BA%94%E7%94%A8%E7%9A%84%E9%A1%B5%E9%9D%A2%E3%80%82%E5%9C%A8%E4%B8%BB%E5%BA%94%E7%94%A8%E4%B8%AD%E7%82%B9%E5%87%BB%E2%80%9CVue">http://localhost:3000\*\*%EF%BC%8C%E5%8D%B3%E5%8F%AF%E7%9C%8B%E5%88%B0%E4%B8%BB%E5%BA%94%E7%94%A8%E7%9A%84%E9%A1%B5%E9%9D%A2%E3%80%82%E5%9C%A8%E4%B8%BB%E5%BA%94%E7%94%A8%E4%B8%AD%E7%82%B9%E5%87%BB%E2%80%9CVue</a>â€œ) 3â€æˆ–â€œReact Appâ€æŒ‰é’®ï¼Œå³å¯è·³è½¬åˆ°å¯¹åº”çš„å­åº”ç”¨é¡µé¢ã€‚åœ¨å­åº”ç”¨é¡µé¢ä¸­ä¿®æ”¹å†…å®¹ï¼Œå¯ä»¥çœ‹åˆ°ä¸»åº”ç”¨ä¸­çš„å†…å®¹ä¹Ÿéšä¹‹å˜åŒ–ã€‚</p>
<h4 id="å­åº”ç”¨ä¸­éœ€è¦å¼•å…¥-qiankunï¼š"><a href="#å­åº”ç”¨ä¸­éœ€è¦å¼•å…¥-qiankunï¼š" class="headerlink" title="å­åº”ç”¨ä¸­éœ€è¦å¼•å…¥ qiankunï¼š"></a>å­åº”ç”¨ä¸­éœ€è¦å¼•å…¥ <code>qiankun</code>ï¼š</h4><p>æ³¨æ„ï¼šåœ¨å­åº”ç”¨ä¸­éœ€è¦å¼•å…¥ <code>qiankun</code> åº“ï¼Œåœ¨ <code>Vue 3</code> åº”ç”¨ä¸­éœ€è¦å®‰è£… <code>qiankun</code>ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install qiankun</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; registerMicroApps, start &#125; <span class="keyword">from</span> <span class="string">&#x27;qiankun&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">registerMicroApps</span>(\[...\]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">start</span>();</span><br></pre></td></tr></table></figure>
<p>React å­åº”ç”¨</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; registerMicroApps, start &#125; <span class="keyword">from</span> <span class="string">&#x27;qiankun&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">registerMicroApps</span>(\[...\]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">start</span>();</span><br></pre></td></tr></table></figure>
<p><code>registerMicroApps(\[...\])</code> ä¸­çš„ [â€¦] æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­åŒ…å«äº†æ³¨å†Œçš„å­åº”ç”¨çš„é…ç½®ä¿¡æ¯ï¼Œæ¯ä¸ªé…ç½®é¡¹æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè‡³å°‘åŒ…å«ä»¥ä¸‹å‡ ä¸ªå±æ€§:</p>
<ul>
<li><code>name</code>ï¼šå­åº”ç”¨çš„åç§°ï¼Œéœ€è¦ä¿è¯å”¯ä¸€æ€§ã€‚</li>
<li><code>entry</code>ï¼šå­åº”ç”¨çš„å…¥å£ URLã€‚</li>
<li><code>container</code>ï¼šå­åº”ç”¨æ¸²æŸ“çš„å®¹å™¨ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ª DOM å…ƒç´ æˆ–ä¸€ä¸ªé€‰æ‹©å™¨ã€‚</li>
<li><code>activeRule</code>ï¼šå­åº”ç”¨çš„æ¿€æ´»è§„åˆ™ï¼ŒæŒ‡å®šè¯¥å­åº”ç”¨åº”è¯¥åœ¨å“ªäº› URL ä¸‹è¢«æ¿€æ´»ã€‚</li>
</ul>
<p>ä¾‹å¦‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">registerMicroApps</span>(\[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;vue3&#x27;</span>,</span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&#x27;//localhost:8081&#x27;</span>,</span><br><span class="line">    <span class="attr">container</span>: <span class="string">&#x27;#vue3&#x27;</span>,</span><br><span class="line">    <span class="attr">activeRule</span>: <span class="string">&#x27;/vue3&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;react&#x27;</span>,</span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&#x27;//localhost:8082&#x27;</span>,</span><br><span class="line">    <span class="attr">container</span>: <span class="string">&#x27;#react&#x27;</span>,</span><br><span class="line">    <span class="attr">activeRule</span>: <span class="string">&#x27;/react&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">\]);</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šä»£ç æ³¨å†Œäº†ä¸¤ä¸ªå­åº”ç”¨ ä¸€ä¸ªæ˜¯ Vue 3 åº”ç”¨ï¼Œä¸€ä¸ªæ˜¯ React åº”ç”¨ã€‚</p>
<ol>
<li><code>name</code> åˆ†åˆ«ä¸º â€˜vue3â€™ å’Œ â€˜reactâ€™ï¼Œ</li>
<li><code>entry</code> åˆ†åˆ«ä¸º â€˜//localhost:8081â€™ å’Œ â€˜//localhost:8082â€™ï¼Œ</li>
<li><code>container</code> åˆ†åˆ«ä¸º â€˜#vue3â€™ å’Œ â€˜#reactâ€™ï¼Œ</li>
<li><code>activeRule</code> åˆ†åˆ«ä¸º â€˜/vue3â€™ å’Œ â€˜/reactâ€™ã€‚</li>
</ol>
<p>æ³¨æ„</p>
<p>1.<code>entry</code> å±æ€§çš„å€¼åº”è¯¥æ˜¯å­åº”ç”¨çš„è®¿é—® URLï¼Œå¯ä»¥æ˜¯æœ¬åœ°å¼€å‘æœåŠ¡å™¨çš„åœ°å€ï¼Œä¹Ÿå¯ä»¥æ˜¯éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šçš„åœ°å€ã€‚<code>container</code> å±æ€§çš„å€¼å¯ä»¥æ˜¯ä¸€ä¸ª DOM å…ƒç´ ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªé€‰æ‹©å™¨å­—ç¬¦ä¸²ã€‚åœ¨å­åº”ç”¨ä¸­ï¼Œæ¸²æŸ“ç»„ä»¶æ—¶éœ€è¦å°†ç»„ä»¶æŒ‚è½½åˆ°è¯¥å®¹å™¨ä¸­ã€‚<code>activeRule</code> å±æ€§çš„å€¼æ˜¯ä¸€ä¸ªè·¯å¾„åŒ¹é…è§„åˆ™ï¼Œè¡¨ç¤ºå­åº”ç”¨åº”è¯¥åœ¨å“ªäº› URL ä¸‹è¢«æ¿€æ´»ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼ã€‚å¦‚æœå½“å‰ URL åŒ¹é…äº†è¯¥è§„åˆ™ï¼Œåˆ™è¯¥å­åº”ç”¨ä¼šè¢«æ¿€æ´»ã€‚</p>
<p>2.å­åº”ç”¨ä¸­ä¹Ÿéœ€è¦å†™ <code>registerMicroApps(\[...\])</code> æ¥æ³¨å†Œå­åº”ç”¨ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼Œå­åº”ç”¨æ³¨å†Œæ—¶éœ€è¦æŒ‡å®šä¸€äº›é…ç½®é¡¹ï¼Œä»¥ä¾¿äºåœ¨ä¸»åº”ç”¨ä¸­æ­£ç¡®åŠ è½½å’Œç®¡ç†å­åº”ç”¨ã€‚ åœ¨å­åº”ç”¨ä¸­ï¼Œé€šå¸¸ä¼šå°† <code>registerMicroApps(\[...\])</code> å°è£…æˆä¸€ä¸ªå‡½æ•°ï¼Œä»¥ä¾¿äºä¸»åº”ç”¨åŠ è½½å­åº”ç”¨æ—¶è°ƒç”¨è¯¥å‡½æ•°æ³¨å†Œå­åº”ç”¨ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; registerMicroApps, start &#125; <span class="keyword">from</span> <span class="string">&#x27;qiankun&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">initApp</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">register</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">registerMicroApps</span>(\[</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;vue3&#x27;</span>,</span><br><span class="line">      <span class="attr">entry</span>: <span class="string">&#x27;//localhost:8081&#x27;</span>,</span><br><span class="line">      <span class="attr">container</span>: <span class="string">&#x27;#vue3&#x27;</span>,</span><br><span class="line">      <span class="attr">activeRule</span>: <span class="string">&#x27;/vue3&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  \]);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">start</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">bootstrap</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">initApp</span>();</span><br><span class="line">  <span class="title function_">render</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!<span class="variable language_">window</span>.\_\_POWERED\_BY\_QIANKUN\_\_) &#123;</span><br><span class="line">  <span class="title function_">bootstrap</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">mount</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="title function_">bootstrap</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">unmount</span>(<span class="params">props</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œregister() å‡½æ•°ç”¨æ¥æ³¨å†Œå­åº”ç”¨ï¼Œå…¶ä¸­çš„é…ç½®é¡¹ä¸ä¸»åº”ç”¨ä¸­çš„ç›¸åŒã€‚bootstrap() å‡½æ•°ç”¨æ¥å¯åŠ¨å­åº”ç”¨ï¼Œå…¶ä¸­åŒ…å«äº†åˆå§‹åŒ–å’Œæ¸²æŸ“ç­‰è¿‡ç¨‹ã€‚mount() å‡½æ•°ç”¨æ¥ä½œä¸ºå­åº”ç”¨åŠ è½½æ—¶çš„å…¥å£ï¼Œå…¶ä¸­åŒ…å«äº†æ³¨å†Œã€åˆå§‹åŒ–ã€æ¸²æŸ“ç­‰è¿‡ç¨‹ã€‚unmount() å‡½æ•°ç”¨æ¥ä½œä¸ºå­åº”ç”¨å¸è½½æ—¶çš„å…¥å£ï¼Œå…¶ä¸­åŒ…å«äº†é”€æ¯å­åº”ç”¨çš„è¿‡ç¨‹ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœå­åº”ç”¨æ˜¯ç‹¬ç«‹è¿è¡Œçš„ï¼Œå³éé€šè¿‡ä¸»åº”ç”¨åŠ è½½çš„ï¼Œé‚£ä¹ˆç›´æ¥è°ƒç”¨ bootstrap() å¯åŠ¨å­åº”ç”¨å³å¯ã€‚</p>
<h3 id="2-5-å…¨å±€çŠ¶æ€ç®¡ç†"><a href="#2-5-å…¨å±€çŠ¶æ€ç®¡ç†" class="headerlink" title="2.5 å…¨å±€çŠ¶æ€ç®¡ç†"></a>2.5 å…¨å±€çŠ¶æ€ç®¡ç†</h3><p>ä¸»åº”ç”¨å¯ä»¥é€šè¿‡ <code>setGlobalState</code> æ–¹æ³•æ¥è®¾ç½®å…¨å±€çŠ¶æ€ï¼Œå­åº”ç”¨å¯ä»¥é€šè¿‡ <code>onGlobalStateChange</code> æ–¹æ³•æ¥ç›‘å¬å…¨å±€çŠ¶æ€çš„å˜åŒ–ã€‚è¿™æ ·ï¼Œå½“ä¸»åº”ç”¨ä¿®æ”¹äº†å…¨å±€çŠ¶æ€æ—¶ï¼Œæ‰€æœ‰çš„å­åº”ç”¨éƒ½å¯ä»¥å¾—åˆ°é€šçŸ¥å¹¶è¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚</p>
<blockquote>
<p>åœ¨ä¸»åº”ç”¨ä¸­è®¾ç½®å…¨å±€çŠ¶æ€ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; setGlobalState &#125; <span class="keyword">from</span> <span class="string">&quot;qiankun&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">setGlobalState</span>(&#123; <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">&quot;lang&quot;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125; &#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨å­åº”ç”¨ä¸­ç›‘å¬å…¨å±€çŠ¶æ€çš„å˜åŒ–ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; onGlobalStateChange, setGlobalState &#125; <span class="keyword">from</span> <span class="string">&quot;qiankun&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">onGlobalStateChange</span>(<span class="function">(<span class="params">newState, prevousState</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;newState:&quot;</span>, newState);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;prevousState:&quot;</span>, prevousState);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title function_">setGlobalState</span>(&#123; <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">&quot;xiaolang&quot;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125; &#125;);</span><br></pre></td></tr></table></figure>
<h3 id="2-6-å­åº”ç”¨ä¹‹é—´å…±äº«çŠ¶æ€"><a href="#2-6-å­åº”ç”¨ä¹‹é—´å…±äº«çŠ¶æ€" class="headerlink" title="2.6 å­åº”ç”¨ä¹‹é—´å…±äº«çŠ¶æ€"></a>2.6 å­åº”ç”¨ä¹‹é—´å…±äº«çŠ¶æ€</h3><p>å­åº”ç”¨ä¹‹é—´å¯ä»¥é€šè¿‡ä¸»åº”ç”¨ä½œä¸ºä¸­ä»‹æ¥å®ç°çŠ¶æ€çš„å…±äº«ã€‚å…·ä½“å®ç°æ–¹å¼å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>åœ¨ä¸»åº”ç”¨ä¸­è®¾ç½®å…±äº«çŠ¶æ€</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; setGlobalState &#125; <span class="keyword">from</span> <span class="string">&quot;qiankun&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">setGlobalState</span>(&#123; <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">&quot;lang&quot;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125; &#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨ä¸»åº”ç”¨ä¸­å°†å…±äº«çŠ¶æ€ä¼ é€’ç»™å­åº”ç”¨ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; start &#125; <span class="keyword">from</span> <span class="string">&quot;qiankun&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">start</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;vue3&quot;</span>,</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;//localhost:8081&quot;</span>,</span><br><span class="line">  <span class="attr">container</span>: <span class="string">&quot;#vue3&quot;</span>,</span><br><span class="line">  <span class="attr">activeRule</span>: <span class="string">&quot;/vue3&quot;</span>,</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">shared</span>: &#123;</span><br><span class="line">      <span class="attr">getGlobalState</span>: <span class="function">() =&gt;</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(globalState),</span><br><span class="line">      <span class="attr">setGlobalState</span>: <span class="function">(<span class="params">state</span>) =&gt;</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="title function_">setGlobalState</span>(state)),</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨å­åº”ç”¨ä¸­ä½¿ç”¨å…±äº«çŠ¶æ€ï¼š</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; initGlobalState &#125; <span class="keyword">from</span> <span class="string">&quot;qiankun&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> actions = <span class="title function_">initGlobalState</span>(&#123; <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">&quot;lang1&quot;</span>, <span class="attr">age</span>: <span class="number">19</span> &#125; &#125;);</span><br><span class="line"></span><br><span class="line">actions.<span class="title function_">onGlobalStateChange</span>(<span class="function">(<span class="params">newState, prevousState</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;newState:&quot;</span>, newState);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;prevousState:&quot;</span>, prevousState);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">actions.<span class="title function_">setGlobalState</span>(&#123; <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">&quot;lang2&quot;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125; &#125;);</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ï¼Œä¸»åº”ç”¨é€šè¿‡ <code>props</code> å°† <code>getGlobalState</code> å’Œ <code>setGlobalState</code> ä¼ é€’ç»™äº†å­åº”ç”¨ã€‚å­åº”ç”¨å¯ä»¥é€šè¿‡ <code>initGlobalState</code> æ–¹æ³•æ¥åˆå§‹åŒ–å…¨å±€çŠ¶æ€ï¼Œå¹¶ä¸”å¯ä»¥ç›‘å¬å…¨å±€çŠ¶æ€çš„å˜åŒ–ã€‚åœ¨å­åº”ç”¨ä¸­ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹å…¨å±€çŠ¶æ€ï¼Œå¯ä»¥é€šè¿‡ <code>setGlobalState</code> æ–¹æ³•æ¥å®ç°ã€‚</p>
<h3 id="2-7-å­åº”ç”¨å¦‚ä½•è°ƒç”¨å…¶ä»–å­åº”ç”¨ç»„ä»¶"><a href="#2-7-å­åº”ç”¨å¦‚ä½•è°ƒç”¨å…¶ä»–å­åº”ç”¨ç»„ä»¶" class="headerlink" title="2.7 å­åº”ç”¨å¦‚ä½•è°ƒç”¨å…¶ä»–å­åº”ç”¨ç»„ä»¶"></a>2.7 å­åº”ç”¨å¦‚ä½•è°ƒç”¨å…¶ä»–å­åº”ç”¨ç»„ä»¶</h3><h4 id="Vue-å­åº”ç”¨ä¸­è°ƒç”¨-React-å­åº”ç”¨çš„ç»„ä»¶"><a href="#Vue-å­åº”ç”¨ä¸­è°ƒç”¨-React-å­åº”ç”¨çš„ç»„ä»¶" class="headerlink" title="Vue å­åº”ç”¨ä¸­è°ƒç”¨ React å­åº”ç”¨çš„ç»„ä»¶"></a>Vue å­åº”ç”¨ä¸­è°ƒç”¨ React å­åº”ç”¨çš„ç»„ä»¶</h4><p>å¯ä»¥å…ˆåœ¨ä¸»åº”ç”¨ä¸­é€šè¿‡ <code>registerMicroApps</code> æ–¹æ³•æ³¨å†Œå¥½æ‰€æœ‰çš„å­åº”ç”¨ï¼Œå¹¶åœ¨ä¸»åº”ç”¨ä¸­ç®¡ç†å­åº”ç”¨ä¹‹é—´çš„é€šä¿¡ã€‚ç„¶åï¼Œå¯ä»¥åœ¨éœ€è¦ä½¿ç”¨å…¶ä»–å­åº”ç”¨ç»„ä»¶çš„å­åº”ç”¨ä¸­é€šè¿‡ <code>loadMicroApp</code> æ–¹æ³•å¼‚æ­¥åŠ è½½å¯¹åº”çš„å­åº”ç”¨å¹¶è·å–åˆ°å¯¹åº”å­åº”ç”¨çš„å®ä¾‹ï¼Œä»è€Œä½¿ç”¨å…¶æä¾›çš„ç»„ä»¶ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; loadMicroApp &#125; <span class="keyword">from</span> <span class="string">&quot;qiankun&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">loadReactApp</span> = (<span class="params"></span>) =&gt;</span><br><span class="line">  <span class="title function_">loadMicroApp</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;reactApp&quot;</span>,</span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&quot;//localhost:8082&quot;</span>,</span><br><span class="line">    <span class="attr">container</span>: <span class="string">&quot;#react&quot;</span>,</span><br><span class="line">    <span class="attr">activeRule</span>: <span class="string">&quot;/react&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">VueApp</span> = &#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;h1&gt;VueApp&lt;/h1&gt;</span></span><br><span class="line"><span class="string">      &lt;react-component /&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">loadReactApp</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">app</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> <span class="title class_">ReactComponent</span> = app.<span class="title function_">getComponent</span>(<span class="string">&quot;ReactComponent&quot;</span>);</span><br><span class="line">      <span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&quot;react-component&quot;</span>, &#123;</span><br><span class="line">        <span class="attr">template</span>: <span class="string">`&lt;div&gt;&lt;ReactComponent /&gt;&lt;/div&gt;`</span>,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨ <code>VueApp</code> çš„ <code>mounted</code> ç”Ÿå‘½å‘¨æœŸä¸­å¼‚æ­¥åŠ è½½äº† <code>ReactApp</code> å¹¶è·å–åˆ°å…¶å®ä¾‹ï¼Œç„¶åé€šè¿‡ <code>getComponent</code> æ–¹æ³•è·å–åˆ°äº† <code>ReactApp</code> ä¸­æä¾›çš„ <code>ReactComponent</code> ç»„ä»¶ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º Vue ç»„ä»¶ä¾› <code>VueApp</code> ä½¿ç”¨ã€‚</p>
</blockquote>
<h4 id="React-å­åº”ç”¨ä¸­è°ƒç”¨-Vue-å­åº”ç”¨çš„ç»„ä»¶"><a href="#React-å­åº”ç”¨ä¸­è°ƒç”¨-Vue-å­åº”ç”¨çš„ç»„ä»¶" class="headerlink" title="React å­åº”ç”¨ä¸­è°ƒç”¨ Vue å­åº”ç”¨çš„ç»„ä»¶"></a>React å­åº”ç”¨ä¸­è°ƒç”¨ Vue å­åº”ç”¨çš„ç»„ä»¶</h4><blockquote>
<p>React å­åº”ç”¨ä¸­ï¼ŒåŠ è½½ Vue å­åº”ç”¨å¹¶è·å–å…¶ç»„ä»¶ï¼š</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; loadMicroApp, getGlobalState &#125; <span class="keyword">from</span> <span class="string">&#x27;qiankun&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> \[vueComponent, setVueComponent\] = <span class="title function_">useState</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> vueApp = <span class="title function_">loadMicroApp</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;vue3&#x27;</span>,</span><br><span class="line">      <span class="attr">entry</span>: <span class="string">&#x27;//localhost:8081&#x27;</span>,</span><br><span class="line">      <span class="attr">container</span>: <span class="string">&#x27;#vue3&#x27;</span>,</span><br><span class="line">      <span class="attr">activeRule</span>: <span class="string">&#x27;/vue3&#x27;</span>,</span><br><span class="line">      <span class="attr">props</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;vue-app&#x27;</span> &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    vueApp.<span class="title function_">onGlobalStateChange</span>(<span class="function">(<span class="params">state, prev</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;\[React\] Vue global state changed: &#x27;</span>, state);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    vueApp</span><br><span class="line">      .<span class="property">loadPromise</span>.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> vueInstance = vueApp.<span class="title function_">bootstrap</span>();</span><br><span class="line">        <span class="title function_">setVueComponent</span>(vueInstance.<span class="property">$children</span>\[<span class="number">0</span>\]);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> vueApp.<span class="title function_">unmount</span>();</span><br><span class="line">  &#125;, \[\]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>React App<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Vue App Component:<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;vueComponent &amp;&amp; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;vueComponent.message&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> vueComponent.handleClick()&#125;&gt;Click me!<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      )&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å½“ç„¶å¾—åœ¨ Vue å­åº”ç”¨ä¸­ï¼Œæš´éœ²ä¸€ä¸ªç»„ä»¶ï¼Œä¸Šé¢çš„<code>vueInstance.$children\[0\]</code>å°±æ˜¯è¿™ä¸ªç»„ä»¶ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      message: &quot;Hello from Vue!&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleClick() &#123;</span><br><span class="line">      console.log(&quot;Vue button clicked!&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h4 id="ä¼ é€’å‚æ•°"><a href="#ä¼ é€’å‚æ•°" class="headerlink" title="ä¼ é€’å‚æ•°"></a>ä¼ é€’å‚æ•°</h4><blockquote>
<p>åœ¨è°ƒç”¨å…¶ä»–å­åº”ç”¨çš„ç»„ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>props</code> ä¼ é€’å‚æ•°ï¼Œå’Œåœ¨æ™®é€šçš„ React ç»„ä»¶ä¸­ä¼ é€’ <code>props</code> æ˜¯ç±»ä¼¼çš„ã€‚å…·ä½“æ¥è¯´ï¼Œåœ¨è°ƒç”¨æ—¶ï¼Œå¯ä»¥å°†éœ€è¦ä¼ é€’çš„å‚æ•°æ”¾åœ¨ <code>props</code> å¯¹è±¡ä¸­ï¼Œç„¶åä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™ <code>render</code> æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; render, hydrate &#125; <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; registerMicroApps, start &#125; <span class="keyword">from</span> <span class="string">&#x27;qiankun&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">registerMicroApps</span>(\[...\]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">start</span>();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/\* è°ƒç”¨ Vue å­åº”ç”¨çš„ç»„ä»¶ */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;render(&#x27;vue3&#x27;, &#123; name: &#x27;Tom&#x27; &#125;, &#123; container: &#x27;#vue-container&#x27; &#125;)&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">hydrate</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>));</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æˆ‘ä»¬å‘ Vue å­åº”ç”¨çš„ç»„ä»¶ä¸­ä¼ é€’äº†ä¸€ä¸ªåä¸º <code>name</code> çš„å‚æ•°ï¼Œå¹¶ä¸”å°†å…¶æ¸²æŸ“åˆ°äº† <code>#vue-container</code> å®¹å™¨ä¸­ã€‚åœ¨ Vue å­åº”ç”¨ä¸­ï¼Œå¯ä»¥é€šè¿‡ <code>props</code> å¯¹è±¡è·å–è¿™ä¸ªå‚æ•°ï¼Œä¾‹å¦‚ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;Vue Component&lt;/h2&gt;</span><br><span class="line">    &lt;p&gt;Hello, &#123;&#123; name &#125;&#125;!&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;VueComponent&quot;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    name: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">      required: true,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œåœ¨ Vue å­åº”ç”¨ä¸­å°±å¯ä»¥é€šè¿‡ <code>this.$props.name</code> è®¿é—®è¿™ä¸ªå‚æ•°äº†</p>
<h4 id="æ³¨æ„ï¼š"><a href="#æ³¨æ„ï¼š" class="headerlink" title="æ³¨æ„ï¼š"></a>æ³¨æ„ï¼š</h4><p>ç”±äº Vue å’Œ React ä½¿ç”¨äº†ä¸åŒçš„æ¸²æŸ“å¼•æ“ï¼Œå®ƒä»¬ä¹‹é—´çš„ç»„ä»¶å¹¶ä¸å®Œå…¨å…¼å®¹ã€‚æˆ‘è¿™ä¸ªä¹Ÿæ˜¯è‡ªå·±æƒ³å°è¯•ä¸€ä¸‹ä¸åŒçš„è¯­è¨€ä»–ä»¬äº’ç›¸è°ƒç”¨ï¼Œæ‰€ä»¥å¤§å®¶åœ¨å®é™…å¼€å‘ä¸­éœ€è¦æ ¹æ®å…·ä½“æƒ…å†µæ¥é€‰æ‹©ä½¿ç”¨å“ªç§æ–¹å¼æ¥å®ç°ç»„ä»¶ä¹‹é—´çš„äº’ç›¸è°ƒç”¨ã€‚ä¸€èˆ¬çš„è¯è¿˜æ˜¯ vue è°ƒç”¨ vue, react è°ƒç”¨ react å…¼å®¹æ¯”è¾ƒå¥½ã€‚</p>
<p>ä¸Šé¢å°±æ˜¯å°±æ˜¯å°æµªä»‹ç»çš„ä¸€ä¸ªç®€å•çš„ <code>qiankun</code> å®ä¾‹ demoï¼ŒåŒ…æ‹¬ä¸»åº”ç”¨ä½¿ç”¨ <code>React</code>ï¼Œå­åº”ç”¨ 1 ä½¿ç”¨ <code>Vue 3</code>ï¼Œå­åº”ç”¨ 2 ä½¿ç”¨ <code>React</code> ã€‚</p>
<h2 id="3-æˆ‘å¼€å‘ä¸­é‡åˆ°çš„å‘ç‚¹"><a href="#3-æˆ‘å¼€å‘ä¸­é‡åˆ°çš„å‘ç‚¹" class="headerlink" title="3.æˆ‘å¼€å‘ä¸­é‡åˆ°çš„å‘ç‚¹"></a>3.æˆ‘å¼€å‘ä¸­é‡åˆ°çš„å‘ç‚¹</h2><blockquote>
<p>åœ¨å¹³æ—¶çš„å¼€å‘è‚¯å®šä¹Ÿä¸æ˜¯ä¸€å¸†é£é¡ºçš„ï¼Œä¹Ÿä¼šå¤šå¤šå°‘å°‘é‡åˆ°ä¸€äº›é—®é¢˜ï¼Œä¸‹é¢æ˜¯æˆ‘å¹³æ—¶é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼Œä¹ŸæŸ¥é˜…ä¸€äº›è§£å†³æªæ–½ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€è¯¦ç»†æŠŠè§£å†³æªæ–½å†™å‡ºæ¥ï¼Œå“ˆå“ˆå“ˆï¼Œå†™ä¸å®Œã€‚</p>
</blockquote>
<h3 id="3-1-è·¯ç”±é—®é¢˜ï¼š"><a href="#3-1-è·¯ç”±é—®é¢˜ï¼š" class="headerlink" title="3.1 è·¯ç”±é—®é¢˜ï¼š"></a>3.1 è·¯ç”±é—®é¢˜ï¼š</h3><p>ç”±äºä¸»åº”ç”¨å’Œå­åº”ç”¨éƒ½éœ€è¦è¿›è¡Œè·¯ç”±å¤„ç†ï¼Œéœ€è¦æ³¨æ„è·¯ç”±çš„å®šä¹‰ã€åŒ¹é…å’Œä¼ é€’ï¼Œç¡®ä¿å„ä¸ªå­åº”ç”¨ä¹‹é—´çš„è·¯ç”±èƒ½å¤Ÿæ­£ç¡®åœ°è¢«å¤„ç†ã€‚</p>
<p>æªæ–½ï¼šç»Ÿä¸€è·¯ç”±ç®¡ç†ï¼šå°½é‡é‡‡ç”¨ç›¸åŒçš„è·¯ç”±ç®¡ç†æ–¹å¼ï¼Œç¡®ä¿è·¯ç”±çš„å®šä¹‰å’ŒåŒ¹é…æ–¹å¼ç›¸åŒï¼Œæ–¹ä¾¿è¿›è¡Œä¼ é€’å’Œå¤„ç†ã€‚</p>
<h3 id="3-2-æ ·å¼éš”ç¦»é—®é¢˜ï¼š"><a href="#3-2-æ ·å¼éš”ç¦»é—®é¢˜ï¼š" class="headerlink" title="3.2 æ ·å¼éš”ç¦»é—®é¢˜ï¼š"></a>3.2 æ ·å¼éš”ç¦»é—®é¢˜ï¼š</h3><p>ç”±äºä¸åŒçš„å­åº”ç”¨ä¹‹é—´å¯èƒ½ä¼šæœ‰æ ·å¼å†²çªçš„é—®é¢˜ï¼Œéœ€è¦è€ƒè™‘å¦‚ä½•è¿›è¡Œæ ·å¼éš”ç¦»ï¼Œä»¥ç¡®ä¿å„ä¸ªå­åº”ç”¨ä¹‹é—´çš„æ ·å¼ä¸ä¼šäº’ç›¸å¹²æ‰°ã€‚</p>
<p>æªæ–½ï¼šå¯ä»¥é‡‡ç”¨ CSS Modulesã€BEM ç­‰æ–¹å¼è¿›è¡Œæ ·å¼éš”ç¦»ï¼Œæˆ–è€…ä½¿ç”¨ Shadow DOM ç­‰æŠ€æœ¯è¿›è¡Œæ ·å¼éš”ç¦»ã€‚åœ¨å…¬å¸é‡Œåé¢å…¨éƒ¨æ”¹ç”¨ CSS Modulesã€‚</p>
<h3 id="3-3-å…¨å±€çŠ¶æ€ç®¡ç†é—®é¢˜ï¼š"><a href="#3-3-å…¨å±€çŠ¶æ€ç®¡ç†é—®é¢˜ï¼š" class="headerlink" title="3.3 å…¨å±€çŠ¶æ€ç®¡ç†é—®é¢˜ï¼š"></a>3.3 å…¨å±€çŠ¶æ€ç®¡ç†é—®é¢˜ï¼š</h3><p>ç”±äºå„ä¸ªå­åº”ç”¨ä¹‹é—´éœ€è¦å…±äº«ä¸€äº›å…¨å±€çŠ¶æ€ï¼Œéœ€è¦è€ƒè™‘å¦‚ä½•è¿›è¡Œå…¨å±€çŠ¶æ€ç®¡ç†ï¼Œä»¥ä¾¿äºå„ä¸ªå­åº”ç”¨ä¹‹é—´èƒ½å¤Ÿå…±äº«æ•°æ®ã€‚</p>
<p>æªæ–½ï¼šå¯ä»¥é‡‡ç”¨ Reduxã€Mobx ç­‰å…¨å±€çŠ¶æ€ç®¡ç†åº“è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼Œæˆ–è€…ä½¿ç”¨ qiankun æä¾›çš„ propsã€emit ç­‰æ–¹å¼è¿›è¡ŒçŠ¶æ€ä¼ é€’ã€‚</p>
<h3 id="3-4-ç”Ÿå‘½å‘¨æœŸé—®é¢˜ï¼š"><a href="#3-4-ç”Ÿå‘½å‘¨æœŸé—®é¢˜ï¼š" class="headerlink" title="3.4 ç”Ÿå‘½å‘¨æœŸé—®é¢˜ï¼š"></a>3.4 ç”Ÿå‘½å‘¨æœŸé—®é¢˜ï¼š</h3><p>ç”±äº qiankun å¾®å‰ç«¯æ¡†æ¶ä¼šå¯¹ä¸»åº”ç”¨å’Œå­åº”ç”¨è¿›è¡Œç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œå› æ­¤éœ€è¦æ³¨æ„å„ä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„è°ƒç”¨æ—¶æœºå’Œé¡ºåºã€‚</p>
<p>æªæ–½ï¼šå¯ä»¥åœ¨å„ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­è¿›è¡Œå¿…è¦çš„å¤„ç†ï¼Œæˆ–è€…ä½¿ç”¨ qiankun æä¾›çš„ emitLifeCycles ç­‰æ–¹å¼è¿›è¡Œç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p>
<h3 id="3-5-ç¼“å­˜é—®é¢˜ï¼š"><a href="#3-5-ç¼“å­˜é—®é¢˜ï¼š" class="headerlink" title="3.5 ç¼“å­˜é—®é¢˜ï¼š"></a>3.5 ç¼“å­˜é—®é¢˜ï¼š</h3><p>ç”±äº qiankun å¾®å‰ç«¯æ¡†æ¶ä¼šå¯¹å„ä¸ªå­åº”ç”¨è¿›è¡Œç¼“å­˜ï¼Œéœ€è¦æ³¨æ„ç¼“å­˜çš„æ¸…ç†å’Œæ›´æ–°ï¼Œä»¥ç¡®ä¿å„ä¸ªå­åº”ç”¨ä¹‹é—´çš„æ•°æ®èƒ½å¤ŸåŠæ—¶åœ°åŒæ­¥æ›´æ–°</p>
<p>æªæ–½ï¼šå¯ä»¥ä½¿ç”¨ qiankun æä¾›çš„ prefetchã€sandbox ç­‰æ–¹å¼è¿›è¡Œç¼“å­˜ç®¡ç†ï¼Œæˆ–è€…æ‰‹åŠ¨æ¸…ç†å’Œæ›´æ–°ç¼“å­˜ã€‚</p>
<h3 id="3-6-é¿å…é‡å¤å¼•å…¥å…¬å…±ä¾èµ–ï¼š"><a href="#3-6-é¿å…é‡å¤å¼•å…¥å…¬å…±ä¾èµ–ï¼š" class="headerlink" title="3.6 é¿å…é‡å¤å¼•å…¥å…¬å…±ä¾èµ–ï¼š"></a>3.6 é¿å…é‡å¤å¼•å…¥å…¬å…±ä¾èµ–ï¼š</h3><blockquote>
<p>åœ¨å¤šä¸ªå­åº”ç”¨ä¹‹é—´å…±äº«ç»„ä»¶æ—¶ï¼Œåº”è¯¥é¿å…é‡å¤å¼•å…¥å…¬å…±ä¾èµ–ã€‚ä¸€ç§è§£å†³æ–¹æ³•æ˜¯å°†å…¬å…±ä¾èµ–æ‰“åŒ…ä¸ºä¸€ä¸ªå•ç‹¬çš„åº“ï¼Œå¹¶å°†å…¶å‘å¸ƒåˆ° npm ä¸Šï¼Œç„¶ååœ¨å­åº”ç”¨ä¸­é€šè¿‡ npm ä¾èµ–å¼•å…¥ã€‚å¦ä¸€ç§è§£å†³æ–¹æ³•æ˜¯å°†å…¬å…±ä¾èµ–æ‰“åŒ…ä¸º umd æ ¼å¼ï¼Œå¹¶åœ¨<code>qiankun</code>çš„<code>global</code>å¯¹è±¡ä¸Šæ³¨å†Œï¼Œä½¿å¾—å…¶ä»–å­åº”ç”¨å¯ä»¥é€šè¿‡<code>global</code>å¯¹è±¡æ¥è®¿é—®å…¬å…±ä¾èµ–ã€‚ä¾‹å¦‚ï¼š</p>
</blockquote>
<p>åœ¨ä¸»åº”ç”¨ä¸­æ³¨å†Œå…¬å…±ä¾èµ–ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MyComponent</span> <span class="keyword">from</span> <span class="string">&quot;my-component&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">MyComponent</span> = <span class="title class_">MyComponent</span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨å­åº”ç”¨ä¸­ä½¿ç”¨å…¬å…±ä¾èµ–ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">MyComponent</span> &#125; = <span class="variable language_">window</span>;</span><br></pre></td></tr></table></figure>
<h3 id="3-7-ç¡®ä¿åº”ç”¨èƒ½å¤Ÿæ­£ç¡®æ³¨å†Œ"><a href="#3-7-ç¡®ä¿åº”ç”¨èƒ½å¤Ÿæ­£ç¡®æ³¨å†Œ" class="headerlink" title="3.7 ç¡®ä¿åº”ç”¨èƒ½å¤Ÿæ­£ç¡®æ³¨å†Œ"></a>3.7 ç¡®ä¿åº”ç”¨èƒ½å¤Ÿæ­£ç¡®æ³¨å†Œ</h3><p>è¿™å¯èƒ½æ˜¯æˆ‘è‡ªå·±ä¼šé‡åˆ°çš„é—®é¢˜ï¼Œæœ‰æ—¶å€™å› ä¸ºè‡ªå·±æ‹¼é”™å•è¯ï¼Œå¯¼è‡´æ²¡æœ‰æ³¨å†ŒæˆåŠŸâ€¦..åº”ç”¨æ³¨å†Œæ˜¯ä¸€ä¸ªå…³é”®æ­¥éª¤ï¼Œéœ€è¦ç¡®ä¿ä¸»åº”ç”¨å’Œå­åº”ç”¨éƒ½èƒ½å¤Ÿæ­£ç¡®åœ°æ³¨å†Œåˆ°<code>qiankun</code>å¾®å‰ç«¯æ¡†æ¶ä¸­ã€‚åœ¨ä¸»åº”ç”¨ä¸­ï¼Œåº”è¯¥æ­£ç¡®åœ°è°ƒç”¨<code>registerMicroApps</code>å‡½æ•°ï¼Œå¹¶ç¡®ä¿å­åº”ç”¨çš„<code>entry</code>å’Œ<code>container</code>å±æ€§éƒ½è¢«æ­£ç¡®åœ°è®¾ç½®ã€‚åœ¨å­åº”ç”¨ä¸­ï¼Œåº”è¯¥æ­£ç¡®åœ°è°ƒç”¨<code>start</code>å‡½æ•°ï¼Œå¹¶ç¡®ä¿å­åº”ç”¨çš„<code>mount</code>å‡½æ•°èƒ½å¤Ÿæ­£ç¡®åœ°æ¸²æŸ“å­åº”ç”¨ã€‚</p>
<h2 id="4-ç»“è¯­ï¼š"><a href="#4-ç»“è¯­ï¼š" class="headerlink" title="4.ç»“è¯­ï¼š"></a>4.ç»“è¯­ï¼š</h2><p>â€‹ æœ‰çš„æ—¶å€™æŸ¥æ‰¾å¾®å‰ç«¯ç›¸å…³çš„é—®é¢˜çš„æ—¶å€™ï¼Œä¸‹é¢æ€»æœ‰è¨€è®ºï¼Œä¸çœ‹å¥½å¾®å‰ç«¯</p>
<p>â€‹ ç¡®å®ï¼Œå¾®å‰ç«¯éœ€è¦è§£å†³è®¸å¤šå¤æ‚çš„é—®é¢˜ï¼Œä¾‹å¦‚åº”ç”¨ç¨‹åºçš„æ‹†åˆ†ã€åº”ç”¨ç¨‹åºä¹‹é—´çš„é€šä¿¡å’Œæ•°æ®å…±äº«ç­‰ã€‚è¿™ä¼šå¢åŠ å¼€å‘å’Œç»´æŠ¤çš„å¤æ‚æ€§ï¼Œå¯èƒ½éœ€è¦é¢å¤–çš„å­¦ä¹ æˆæœ¬å’Œå·¥å…·æ”¯æŒã€‚å¾®å‰ç«¯åº”ç”¨ç¨‹åºå¯èƒ½éœ€è¦é€šè¿‡ç½‘ç»œåŠ è½½è®¸å¤šå°å—ä»£ç ï¼Œè¿™å¯èƒ½ä¼šå½±å“åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚æ­¤å¤–ï¼Œå¾®å‰ç«¯è¿˜éœ€è¦åœ¨è¿è¡Œæ—¶å¤„ç†ä¸€äº›é¢å¤–çš„é€»è¾‘ï¼Œä¾‹å¦‚è·¯ç”±å’ŒçŠ¶æ€ç®¡ç†ï¼Œå¾®å‰ç«¯åº”ç”¨ç¨‹åºå¯èƒ½éœ€è¦è·¨åŸŸé€šä¿¡å’Œæ•°æ®å…±äº«ï¼Œè¿™å¯èƒ½ä¼šå¼•å…¥ä¸€äº›å®‰å…¨é£é™©ã€‚æ­¤å¤–ï¼Œå¾®å‰ç«¯è¿˜éœ€è¦ç¡®ä¿åº”ç”¨ç¨‹åºçš„éš”ç¦»å’Œæ²™ç®±ï¼Œä»¥é˜²æ­¢åº”ç”¨ç¨‹åºä¹‹é—´çš„å½±å“å’Œæ”»å‡»ã€‚æŠ€æœ¯é€‰å‹ï¼šå¾®å‰ç«¯éœ€è¦å¤„ç†ä¸åŒçš„æŠ€æœ¯æ ˆå’Œæ¡†æ¶ä¹‹é—´çš„å…¼å®¹æ€§å’Œäº¤äº’æ€§ã€‚è¿™å¯èƒ½éœ€è¦é¢å¤–çš„å·¥ä½œã€‚ç­‰ç­‰é—®é¢˜ã€‚</p>
<h3 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h3><blockquote>
<p>â€‹ è™½ç„¶å¾®å‰ç«¯å­˜åœ¨ä¸€äº›æŒ‘æˆ˜å’Œé™åˆ¶ï¼Œä½†éšç€æŠ€æœ¯çš„å‘å±•å’Œç¤¾åŒºçš„æ”¯æŒï¼Œè¿™äº›é—®é¢˜å°†å¾—åˆ°è§£å†³ï¼Œå¾®å‰ç«¯ä¹Ÿå°†æˆä¸ºæ„å»ºå¤§å‹å‰ç«¯åº”ç”¨ç¨‹åºçš„ä¸€ç§æœ‰åŠ›é€‰æ‹©ã€‚æ€»ä¹‹ï¼Œqiankun æ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„å¾®å‰ç«¯è§£å†³æ–¹æ¡ˆï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç®¡ç†å’Œç»´æŠ¤å‰ç«¯åº”ç”¨ç¨‹åºï¼Œæé«˜åº”ç”¨ç¨‹åºçš„å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚åŒæ—¶ï¼Œqiankun ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸çµæ´»å’Œå¯æ‰©å±•çš„æ¡†æ¶ï¼Œå¯ä»¥é€‚ç”¨äºå„ç§å‰ç«¯åº”ç”¨ç¨‹åºçš„å¼€å‘åœºæ™¯ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>å¾®å‰ç«¯</tag>
        <tag>qiankun</tag>
      </tags>
  </entry>
  <entry>
    <title>å¿«é€Ÿä¸Šæ‰‹ Vuex åˆ° æ‰‹å†™ç®€æ˜“ Vuex</title>
    <url>/xiaolangwiki/2021/08/09/14/</url>
    <content><![CDATA[<h2 id="å¿«é€Ÿä¸Šæ‰‹-Vuex-åˆ°-æ‰‹å†™ç®€æ˜“-Vuex"><a href="#å¿«é€Ÿä¸Šæ‰‹-Vuex-åˆ°-æ‰‹å†™ç®€æ˜“-Vuex" class="headerlink" title="å¿«é€Ÿä¸Šæ‰‹ Vuex åˆ° æ‰‹å†™ç®€æ˜“ Vuex"></a>å¿«é€Ÿä¸Šæ‰‹ Vuex åˆ° æ‰‹å†™ç®€æ˜“ Vuex</h2><p>åŸæ–‡ï¼š<a href="https://juejin.cn/post/6994337441314242590">https://juejin.cn/post/6994337441314242590</a></p>
<blockquote>
<p>å‰è¨€</p>
</blockquote>
<p>é¦–å…ˆæ„Ÿè°¢å„ä½è¿™æ®µæ—¶é—´å¯¹å°æµªçš„æ”¯æŒï¼Œå°æµªä¼šç»§ç»­åŠªåŠ›çš„</p>
<p>ä»Šå¤©æœ¬ç¯‡æ–‡ç« æ˜¯å…³äº <code>Vuex</code>ï¼Œå¤§å®¶ä½¿ç”¨ <code>Vue</code> ä¸ä¼šé™Œç”Ÿå§</p>
<p>ä»Šå¤©æˆ‘ä»¬å…ˆå¯¹ <code>Vuex</code> è¿›è¡Œäº†è§£ï¼Œç„¶åè®²ä¸‹åŸºæœ¬çš„ç”¨æ³•ï¼Œç„¶åæˆ‘ä»¬è‡ªå·±å®ç°ä¸€ä¸ªç®€æ˜“çš„ <code>Vuex</code></p>
<p>æœ€åå¸Œæœ›å¤§å®¶èƒ½ç»™å°æµªä¸€ä¸ª <strong>èµ</strong></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/59bed0b088244e09ac9f88194d1dd7d0~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="img"></p>
<blockquote>
<p>å¾€æœŸç²¾å½©ï¼š</p>
<p><a href="https://juejin.cn/post/6990582632270528525" title="https://juejin.cn/post/6990582632270528525">ä»äº†è§£åˆ°æ·±å…¥è™šæ‹Ÿ DOM å’Œå®ç° diff ç®—æ³•</a></p>
<p><a href="https://juejin.cn/post/6989106100582744072" title="https://juejin.cn/post/6989106100582744072">æ‰‹å†™ä¸€ä¸ªç®€æ˜“ vue å“åº”å¼å¸¦ä½ äº†è§£å“åº”å¼åŸç†</a></p>
<p><a href="https://juejin.cn/post/6988316779818778631" title="https://juejin.cn/post/6988316779818778631">ä»ä½¿ç”¨åˆ°è‡ªå·±å®ç°ç®€å• Vue Router çœ‹è¿™ä¸ªå°±è¡Œäº†</a></p>
<p><a href="https://juejin.cn/post/6983934602196811789" title="https://juejin.cn/post/6983934602196811789">å‰ç«¯é¢è¯•å¿…ä¸å¯å°‘çš„åŸºç¡€çŸ¥è¯†ï¼Œè™½ç„¶å°‘ä½†æ˜¯ä½ ä¸èƒ½ä¸çŸ¥é“</a></p>
</blockquote>
<h2 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1.ç®€ä»‹"></a>1.ç®€ä»‹</h2><blockquote>
<p><strong>Vuex</strong> çŠ¶æ€ç®¡ç†æ’ä»¶</p>
</blockquote>
<p>åœ¨<code>Vue</code> æœ€é‡è¦å°±æ˜¯ <strong>æ•°æ®é©±åŠ¨</strong> å’Œ <strong>ç»„ä»¶åŒ–</strong>ï¼Œæ¯ä¸ª ç»„ä»¶éƒ½æœ‰è‡ªå·± <code>data</code> ,<code>template</code> å’Œ <code>methods</code>, <code>data</code>æ˜¯æ•°æ®ï¼Œæˆ‘ä»¬ä¹Ÿå«åšçŠ¶æ€ï¼Œé€šè¿‡<code>methods</code>ä¸­æ–¹æ³•æ”¹å˜ çŠ¶æ€æ¥æ›´æ–°è§†å›¾ï¼Œåœ¨å•ä¸ªç»„ä»¶ä¸­ä¿®æ”¹çŠ¶æ€æ›´æ–°è§†å›¾æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œä½†æ˜¯å®é™…å¼€å‘ä¸­æ˜¯å¤šä¸ªç»„ä»¶ï¼ˆè¿˜æœ‰å¤šå±‚ç»„ä»¶åµŒå¥—ï¼‰å…±äº«åŒä¸€ä¸ªçŠ¶æ€æ—¶ï¼Œè¿™ä¸ªæ—¶å€™ä¼ å‚å°±ä¼šå¾ˆç¹çï¼Œæˆ‘ä»¬è¿™é‡Œå°±å¼•è¿› <code>Vuex</code> æ¥è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼Œè´Ÿè´£ç»„ä»¶ä¸­çš„é€šä¿¡ï¼Œæ–¹ä¾¿ç»´æŠ¤ä»£ç </p>
<blockquote>
<p>Vuex ä¸»è¦è§£å†³çš„é—®é¢˜</p>
</blockquote>
<ul>
<li>å¤šä¸ªè§†å›¾ä¾èµ–åŒä¸€ä¸ªçŠ¶æ€</li>
<li>æ¥è‡ªä¸åŒè§†å›¾çš„è¡Œä¸ºéœ€è¦å˜æ›´åŒä¸€ä¸ªçŠ¶æ€</li>
</ul>
<blockquote>
<p>ä½¿ç”¨ Vuex çš„å¥½å¤„</p>
</blockquote>
<ul>
<li>èƒ½å¤Ÿåœ¨ <code>vuex</code> ä¸­é›†ä¸­ç®¡ç†å…±äº«çš„æ•°æ®ï¼Œæ˜“äºå¼€å‘å’ŒåæœŸç»´æŠ¤</li>
<li>èƒ½å¤Ÿé«˜æ•ˆåœ°å®ç°ç»„ä»¶ä¹‹é—´çš„æ•°æ®å…±äº«ï¼Œæé«˜å¼€å‘æ•ˆç‡</li>
<li>åœ¨ <code>vuex</code> ä¸­çš„æ•°æ®éƒ½æ˜¯å“åº”å¼çš„</li>
</ul>
<h2 id="2-Vuex-åŸºç¡€ä½¿ç”¨"><a href="#2-Vuex-åŸºç¡€ä½¿ç”¨" class="headerlink" title="2.Vuex åŸºç¡€ä½¿ç”¨"></a>2.Vuex åŸºç¡€ä½¿ç”¨</h2><blockquote>
<p>é¦–å…ˆåœ¨ Vue ä¸­æ·»åŠ  Vuex æ’ä»¶</p>
</blockquote>
<p>é€šè¿‡ <code>vue-cli</code> æ·»åŠ äº† <code>Vuex</code> åï¼Œåœ¨é¡¹ç›®çš„ <code>src</code> ç›®å½•ä¸‹ä¼šå¤šå‡ºä¸€ä¸ª <code>store</code> ç›®å½•ï¼Œç›®å½•ä¸‹ä¼šæœ‰ä¸ª <code>index.js</code></p>
<p>å½“ç„¶ä¹Ÿé€šè¿‡ <code>npm</code> è¿›è¡Œå®‰è£… <code>Vuex</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install vuex --save</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨å¼€å‘ç¯å¢ƒå¼€å¯ä¸¥æ ¼æ¨¡å¼ è¿™æ ·ä¿®æ”¹æ•°æ® å°±å¿…é¡»é€šè¿‡ mutation æ¥å¤„ç†</p>
</blockquote>
<p>åœ¨ package.json æ–‡ä»¶ scripts ä¸­å¯ä»¥è®¾ç½®ç¯å¢ƒï¼Œå½“æˆ‘ä»¬å¤„äºå¼€å‘ç¯å¢ƒæ—¶ï¼Œå¯ä»¥å¼€å¯ä¸¥æ ¼æ¨¡å¼</p>
<p>å¼€å¯ä¸¥æ ¼æ¨¡å¼çš„æ–¹å¼ä¹Ÿæ˜¯å¾ˆç®€å•çš„ä¸€è¡Œä»£ç å°±å¯ä»¥</p>
<p><code>strict:products.env.NODE_ENV !== &#39;production&#39;</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue from <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Vuex from <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line">export <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.Store(&#123;</span><br><span class="line"></span><br><span class="line"> strict:products.env.NODE_ENV !== <span class="string">&#x27;production&#x27;</span>,</span><br><span class="line"></span><br><span class="line"> state: &#123;</span><br><span class="line"> &#125;,</span><br><span class="line"></span><br><span class="line"> mutations: &#123;</span><br><span class="line"> &#125;,</span><br><span class="line"></span><br><span class="line"> actions: &#123;</span><br><span class="line"> &#125;,</span><br><span class="line"></span><br><span class="line"> modules: &#123;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¦ä½¿ç”¨ store å°±åœ¨æŠŠ store æŒ‚è½½åˆ° Vue ä¸­</p>
</blockquote>
<p>æŠŠ store æŒ‚è½½åˆ° Vue ä¹‹å ï¼Œæ‰€æœ‰çš„ç»„ä»¶å°±å¯ä»¥ç›´æ¥ä» store ä¸­è·å–å…¨å±€æ•°æ®äº†</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;./store&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  store,</span><br><span class="line">  <span class="attr">render</span>: <span class="function">(<span class="params">h</span>) =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">&#125;).$mount(<span class="string">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="1-state"><a href="#1-state" class="headerlink" title="1.state"></a>1.state</h3><blockquote>
<p>åœ¨ state ä¸­æ·»åŠ æ•°æ®</p>
</blockquote>
<p>æˆ‘ä»¬éœ€è¦å…±äº«çš„çŠ¶æ€éƒ½æ”¾åœ¨å†™åœ¨ state å¯¹è±¡é‡Œé¢</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;å¼ ä¸‰&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">21</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">modules</span>: &#123;&#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç»„ä»¶ä¸­è·å– state ä¸­çš„æ•°æ®</p>
</blockquote>
<p>è·å–åˆ° <code>state</code> æœ‰ä¸¤ç§æ–¹å¼</p>
<h4 id="1-ç›´æ¥ä½¿ç”¨-this-store-state-å±æ€§-ï¼Œï¼ˆthis-å¯ä»¥çœç•¥ï¼‰"><a href="#1-ç›´æ¥ä½¿ç”¨-this-store-state-å±æ€§-ï¼Œï¼ˆthis-å¯ä»¥çœç•¥ï¼‰" class="headerlink" title="1.ç›´æ¥ä½¿ç”¨ this.$store.state\[å±æ€§\] ï¼Œï¼ˆthis å¯ä»¥çœç•¥ï¼‰"></a>1.ç›´æ¥ä½¿ç”¨ <code>this.$store.state\[å±æ€§\]</code> ï¼Œï¼ˆ<code>this</code> å¯ä»¥çœç•¥ï¼‰</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123; this.$store.state.name &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    &#123;&#123; this.$store.state.age &#125;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h4 id="2-ä½¿ç”¨-mapState"><a href="#2-ä½¿ç”¨-mapState" class="headerlink" title="2.ä½¿ç”¨ mapState"></a>2.ä½¿ç”¨ <code>mapState</code></h4><p>é€šè¿‡ <code>mapState</code>æŠŠ <code>store</code> æ˜ å°„åˆ° ç»„ä»¶çš„è®¡ç®—å±æ€§ï¼Œå°±ç›¸å½“äºç»„ä»¶å†…éƒ¨æœ‰äº† <code>state</code> é‡Œçš„å±æ€§</p>
<p>çŸ¥é“è¿™é‡Œä¸ºå•¥è¦ç”¨ <code>...</code>å±•å¼€å—ï¼Œåˆ°æ—¶å€™å®ç° <code>mapState</code> æ—¶å°±çŸ¥é“äº†</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123; name &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    &#123;&#123; age &#125;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">computed</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ...<span class="title function_">mapState</span>(\[<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>\])</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>  <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„</p>
</blockquote>
<p>å½“ store ä¸­çš„å€¼ å’Œ å½“å‰ç»„ä»¶æœ‰ç›¸åŒçš„çŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ mapState æ–¹æ³•é‡Œä¼ é€’ä¸€ä¸ªå¯¹è±¡ è€Œä¸æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåœ¨å¯¹è±¡ä¸­ç»™çŠ¶æ€èµ·åˆ«å</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line"></span><br><span class="line">    ...<span class="title function_">mapState</span>(&#123; <span class="attr">name2</span>: <span class="string">&#x27;name&#x27;</span>, <span class="attr">age2</span>: <span class="string">&#x27;age&#x27;</span>&#125;\])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-Mutation"><a href="#2-Mutation" class="headerlink" title="2.Mutation"></a>2.Mutation</h3><p><code>Store</code> ä¸­çš„çŠ¶æ€ä¸èƒ½ç›´æ¥å¯¹å…¶è¿›è¡Œæ“ä½œï¼Œæˆ‘ä»¬å¾—ä½¿ç”¨ <code>Mutation</code> æ¥å¯¹ <code>Store</code> ä¸­çš„çŠ¶æ€è¿›è¡Œä¿®æ”¹ï¼Œè™½ç„¶çœ‹èµ·æ¥æœ‰äº›ç¹çï¼Œä½†æ˜¯æ–¹ä¾¿é›†ä¸­ç›‘æ§æ•°æ®çš„å˜åŒ–</p>
<p><code>state</code> çš„æ›´æ–°å¿…é¡»æ˜¯ <code>Mutation</code> æ¥å¤„ç†</p>
<blockquote>
<p>æˆ‘ä»¬ç°åœ¨ mutaions é‡Œå®šä¹‰ä¸ªæ–¹æ³•</p>
</blockquote>
<p>å¦‚æœæƒ³è¦å®šä¹‰çš„æ–¹æ³•èƒ½å¤Ÿä¿®æ”¹ <code>Store</code> ä¸­çš„çŠ¶æ€ï¼Œéœ€è¦å‚æ•°å°±æ˜¯ <code>state</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line"> <span class="attr">state</span>: &#123;</span><br><span class="line">   <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">   <span class="attr">age</span>: <span class="number">21</span>,</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="attr">mutations</span>: &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    \*</span><br><span class="line">    \* @param &#123;*&#125; state ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <span class="title class_">Store</span> ä¸­çš„çŠ¶æ€(å¿…é¡»ä¼ é€’)</span><br><span class="line">    \* @param &#123;*&#125; newName ä¼ å…¥çš„å‚æ•° åé¢æ˜¯å¤šä¸ª</span><br><span class="line">    */</span><br><span class="line">   <span class="title function_">changeName</span>(<span class="params">state, newName</span>) &#123;</span><br><span class="line"></span><br><span class="line">     state.<span class="property">name</span> = newName</span><br><span class="line">   &#125;,</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="attr">actions</span>: &#123;&#125;,</span><br><span class="line"> <span class="attr">modules</span>: &#123;&#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ mutations ä¸­çš„æ–¹æ³•</p>
</blockquote>
<p>åŒæ ·æœ‰ä¸¤ç§æ–¹æ³•åœ¨ç»„ä»¶è§¦å‘ <code>mutations</code> ä¸­çš„æ–¹æ³•</p>
<h4 id="1-this-store-commit-è§¦å‘"><a href="#1-this-store-commit-è§¦å‘" class="headerlink" title="1.this.$store.commit() è§¦å‘"></a>1.this.$store.commit() è§¦å‘</h4><p>åœ¨ <code>methods</code> ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢è¿›è¡Œè§¦å‘ <code>mutations</code> ä¸­çš„æ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;handleClick&quot;</span>&gt;</span>æ–¹å¼1 æŒ‰é’®ä½¿ç”¨ mutation ä¸­æ–¹æ³•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123; name &#125;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">computed</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ...<span class="title function_">mapState</span>(\[<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>\])</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;changeName&#x27;</span>, <span class="string">&#x27;å°æµª&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>  <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h4 id="2-ä½¿ç”¨-mapMutations"><a href="#2-ä½¿ç”¨-mapMutations" class="headerlink" title="2.ä½¿ç”¨ mapMutations"></a>2.ä½¿ç”¨ <code>mapMutations</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName(&#x27;å°æµª&#x27;)&quot;</span>&gt;</span>æ–¹å¼2 æŒ‰é’®ä½¿ç”¨ mutation ä¸­æ–¹æ³•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123; name &#125;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; mapState, mapMutations &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">computed</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ...<span class="title function_">mapState</span>(\[<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>\])</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ...<span class="title function_">mapMutations</span>(\[<span class="string">&#x27;changeName&#x27;</span>\])</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>  <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h3 id="3-Action"><a href="#3-Action" class="headerlink" title="3.Action"></a>3.Action</h3><blockquote>
<p><code>Action</code> å’Œ <code>Mutation</code> åŒºåˆ«</p>
</blockquote>
<p><code>Action</code> åŒæ ·ä¹Ÿæ˜¯ç”¨æ¥å¤„ç†ä»»åŠ¡ï¼Œä¸è¿‡å®ƒå¤„ç†çš„æ˜¯å¼‚æ­¥ä»»åŠ¡ï¼Œå¼‚æ­¥ä»»åŠ¡å¿…é¡»è¦ä½¿ç”¨ <code>Action</code>ï¼Œé€šè¿‡ <code>Action</code> è§¦å‘ <code>Mutation</code> é—´æ¥æ”¹å˜çŠ¶æ€ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ <code>Mutation</code> ç›´æ¥å¯¹å¼‚æ­¥ä»»åŠ¡è¿›è¡Œä¿®æ”¹</p>
<blockquote>
<p>å…ˆåœ¨ <code>Action</code> ä¸­å®šä¹‰ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•æ¥è°ƒç”¨ <code>Mutation</code> ä¸­çš„æ–¹æ³•</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line"> <span class="attr">state</span>: &#123;</span><br><span class="line">   <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">   <span class="attr">age</span>: <span class="number">21</span>,</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="attr">mutations</span>: &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    \*</span><br><span class="line">    \* @param &#123;*&#125; state ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <span class="title class_">Store</span> ä¸­çš„çŠ¶æ€(å¿…é¡»ä¼ é€’)</span><br><span class="line">    \* @param &#123;*&#125; newName ä¼ å…¥çš„å‚æ•° åé¢æ˜¯å¤šä¸ª</span><br><span class="line">    */</span><br><span class="line">   <span class="title function_">changeName</span>(<span class="params">state, newName</span>) &#123;</span><br><span class="line"></span><br><span class="line">     state.<span class="property">name</span> = newName</span><br><span class="line">   &#125;,</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="attr">actions</span>: &#123;</span><br><span class="line"></span><br><span class="line">    \*</span><br><span class="line">    \* @param &#123;*&#125; context ä¸Šä¸‹æ–‡é»˜è®¤ä¼ é€’çš„å‚æ•°</span><br><span class="line">    \* @param &#123;*&#125; newName è‡ªå·±ä¼ é€’çš„å‚æ•°</span><br><span class="line">    */</span><br><span class="line"></span><br><span class="line">   <span class="title function_">changeNameAsync</span>(<span class="params">context, newName</span>) &#123;</span><br><span class="line"></span><br><span class="line">     <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">       context.<span class="title function_">commit</span>(<span class="string">&#x27;changeName&#x27;</span>, newName)</span><br><span class="line">     &#125;, <span class="number">2000</span>)</span><br><span class="line">   &#125;,</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="attr">modules</span>: &#123;&#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>åœ¨ç»„ä»¶ä¸­æ˜¯ Action ä¸­çš„å¼‚æ­¥æ–¹æ³•ä¹Ÿæ˜¯æœ‰ä¸¤ç§æ–¹å¼</p>
<h4 id="1-this-store-dispatch"><a href="#1-this-store-dispatch" class="headerlink" title="1.this.$store.dispatch()"></a>1.<code>this.$store.dispatch()</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName2(&#x27;å°æµª&#x27;)&quot;</span>&gt;</span>æ–¹å¼1 æŒ‰é’®ä½¿ç”¨ action ä¸­æ–¹æ³•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123; name &#125;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; mapState, mapMutations &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">computed</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ...<span class="title function_">mapState</span>(\[<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>\])</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">changeName2</span>(<span class="params">newName</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;changeNameAsync&#x27;</span>, newName)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>  <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h4 id="2-ä½¿ç”¨-mapActions"><a href="#2-ä½¿ç”¨-mapActions" class="headerlink" title="2.ä½¿ç”¨ mapActions"></a>2.ä½¿ç”¨ <code>mapActions</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeNameAsync(&#x27;å°æµª&#x27;)&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      æ–¹å¼2 æŒ‰é’®ä½¿ç”¨ action ä¸­æ–¹æ³•</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123; name &#125;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; mapState, mapMutations, mapActions &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">computed</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ...<span class="title function_">mapState</span>(\[<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>\])</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ...<span class="title function_">mapActions</span>(\[<span class="string">&#x27;changeNameAsync&#x27;</span>\])</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>  <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h3 id="4-Getter"><a href="#4-Getter" class="headerlink" title="4.Getter"></a>4.Getter</h3><blockquote>
<p>ç®€ä»‹</p>
</blockquote>
<p><code>Getter</code> ç±»ä¼¼äºè®¡ç®—å±æ€§ï¼Œä½†æ˜¯æˆ‘ä»¬çš„æ•°æ®æ¥æºæ˜¯ <code>Vuex</code> ä¸­çš„ <code>state</code> ,æ‰€ä»¥å°±ä½¿ç”¨ <code>Vuex</code> ä¸­çš„ <code>Getter</code> æ¥å®Œæˆ</p>
<blockquote>
<p>åº”ç”¨åœºæ™¯</p>
</blockquote>
<p>éœ€è¦å¯¹ <code>state</code> åšä¸€äº›åŒ…è£…ç®€å•æ€§å¤„ç† å±•ç¤ºåˆ°è§†å›¾å½“ä¸­</p>
<blockquote>
<p>å…ˆæ¥å†™ä¸ª Getter</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line"> <span class="attr">state</span>: &#123;</span><br><span class="line">   <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">   <span class="attr">age</span>: <span class="number">21</span>,</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="attr">getters</span>: &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    \*</span><br><span class="line">    \* @param &#123;*&#125; state çŠ¶æ€ å¦‚æœè¦ä½¿ç”¨ state é‡Œé¢çš„æ•°æ®ï¼Œç¬¬ä¸€ä¸ªå‚æ•°é»˜è®¤å°±æ˜¯ state ï¼Œåå­—éšä¾¿å–</span><br><span class="line">    \* @returns</span><br><span class="line">    */</span><br><span class="line">   <span class="title function_">decorationName</span>(<span class="params">state</span>) &#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="string">`å¤§å®¶å¥½æˆ‘çš„åå­—å«<span class="subst">$&#123;state.name&#125;</span>ä»Šå¹´<span class="subst">$&#123;state.age&#125;</span>å²`</span></span><br><span class="line">   &#125;,</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ <code>Getter</code> ä¹Ÿæœ‰ä¸¤ç§æ–¹å¼å¯¼å…¥</p>
<h4 id="1-this-store-getters-åç§°"><a href="#1-this-store-getters-åç§°" class="headerlink" title="1.this.$store.getters\[åç§°\]"></a>1.<code>this.$store.getters\[åç§°\]</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123; this.$store.getters.decorationName &#125;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h4 id="2-ä½¿ç”¨-mapGetters"><a href="#2-ä½¿ç”¨-mapGetters" class="headerlink" title="2.ä½¿ç”¨ mapGetters"></a>2.ä½¿ç”¨ <code>mapGetters</code></h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123; decorationName &#125;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">computed</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ...<span class="title function_">mapGetters</span>(\[<span class="string">&#x27;decorationName&#x27;</span>\])</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h3 id="5-Module"><a href="#5-Module" class="headerlink" title="5.Module"></a>5.Module</h3><p>ä¸ºäº†é¿å…åœ¨ä¸€ä¸ªå¤æ‚çš„é¡¹ç›® <code>state</code> ä¸­çš„æ•°æ®å˜å¾—è‡ƒè‚¿ï¼Œ<code>Vuex</code> å…è®¸å°† <code>Store</code> åˆ†æˆä¸åŒçš„æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æœ‰å±äºè‡ªå·±çš„ <code>state</code>ï¼Œ<code>getter</code>ï¼Œ<code>action</code>ï¼Œ<code>mutation</code></p>
<blockquote>
<p>æˆ‘ä»¬è¿™é‡Œæ–°å»ºä¸€ä¸ª <code>animal.js</code> æ–‡ä»¶</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">  <span class="attr">animalName</span>: <span class="string">&quot;ç‹®å­&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">  <span class="title function_">setName</span>(<span class="params">state, newName</span>) &#123;</span><br><span class="line">    state.<span class="property">animalName</span> = newName;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  state,</span><br><span class="line">  mutations,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨ <code>store/index.js</code>ä¸­çš„ <code>modules</code> è¿›è¡ŒæŒ‚è½½è¿™ä¸ªæ¨¡å—</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> animal <span class="keyword">from</span> <span class="string">&quot;./animal&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    animal,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨äº†</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123; this.$store.state.animal.animalName &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;$store.commit(&#x27;setName&#x27;, &#x27;è€è™&#x27;)&quot;</span>&gt;</span>æ”¹å<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>$store.state\[åœ¨moduleä¸­æŒ‚è½½çš„æ¨¡å—å\]\[æŒ‚è½½çš„æ¨¡å—é‡Œçš„å±æ€§\]</code></p>
<p>æ˜¯ä¸æ˜¯è§‰å¾—è¿™ç§æ¨¡å¼å¾ˆå¤æ‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2984822b759a4bb8a8c04c4748c5f9f2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="img"></p>
<blockquote>
<p>æ·»åŠ å‘½åç©ºé—´</p>
</blockquote>
<p>å…¶å®ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>mapXXX</code> æ–¹æ³•è¿›è¡Œæ˜ å°„ï¼Œä¸è¿‡å†™æ³•æœ‰äº›è®¸ä¸åŒï¼Œå…ˆåœ¨å¯¼å‡ºçš„æ·»åŠ ä¸€ä¸ª<strong>å‘½åç©ºé—´</strong><code>namespaced: true</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">  <span class="attr">animalName</span>: <span class="string">&quot;ç‹®å­&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">  <span class="title function_">setName</span>(<span class="params">state, newName</span>) &#123;</span><br><span class="line">    state.<span class="property">animalName</span> = newName;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  state,</span><br><span class="line">  mutations,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ–¹å¼ 2</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123; animalName &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;setName(&#x27;è€é¹°&#x27;)&quot;</span>&gt;</span>æ”¹å<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; mapState, mapMutations &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">computed</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ...<span class="title function_">mapState</span>(<span class="string">&#x27;animal&#x27;</span>, \[<span class="string">&#x27;animalName&#x27;</span>\])</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ...<span class="title function_">mapMutations</span>(<span class="string">&#x27;animal&#x27;</span>, \[<span class="string">&#x27;setName&#x27;</span>\])</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="3-æ¨¡æ‹Ÿä¸€ä¸ªç®€å•çš„-Vuex"><a href="#3-æ¨¡æ‹Ÿä¸€ä¸ªç®€å•çš„-Vuex" class="headerlink" title="3.æ¨¡æ‹Ÿä¸€ä¸ªç®€å•çš„ Vuex"></a>3.æ¨¡æ‹Ÿä¸€ä¸ªç®€å•çš„ Vuex</h2><p>ä¸Šé¢æˆ‘ä»¬å·²ç»ä»‹ç»äº† <code>Vuex</code> çš„åŸºæœ¬ä½¿ç”¨ï¼Œç°åœ¨æˆ‘ä»¬æ¥è‡ªå·±åŠ¨æ‰‹å†™ä¸ªç®€å• <code>Vuex</code></p>
<p>ä»£ç æˆ‘éƒ½ä¼šå†™æ»¡æ³¨é‡Šæ–¹ä¾¿å¤§å®¶è§‚çœ‹ï¼Œä»£ç å¾ˆå°‘ï¼Œæœ‰å…´è¶£ï¼Œå¤§å®¶è€å¿ƒè§‚çœ‹ ãƒ½(ï¿£ â–½ ï¿£)ï¾‰</p>
<h3 id="1-index-js"><a href="#1-index-js" class="headerlink" title="1.index.js"></a>1.index.js</h3><blockquote>
<p>å…ˆæ­ä¸ªåŸºæœ¬çš„æ¶å­</p>
</blockquote>
<p>æˆ‘ä»¬åœ¨ <code>src</code> ç›®å½•ä¸‹ å»ºç«‹ä¸€ä¸ªå±äºæˆ‘ä»¬è‡ªå·±çš„ <code>Vuex</code> çš„æ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”åœ¨è¿™ä¸ªç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ª <code>index.js</code> æ–‡ä»¶ï¼Œæˆ‘ä»¬è¦æ¨¡æ‹Ÿçš„è¿™ä¸ª <code>Vuex</code> å°±ä¼šæ”¾åœ¨è¿™é‡Œé¢</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> _Vue = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Store</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">install</span>(<span class="params">Vue</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  install,</span><br><span class="line">  <span class="title class_">Store</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="2-install-æ–¹æ³•"><a href="#2-install-æ–¹æ³•" class="headerlink" title="2.install æ–¹æ³•"></a>2.install æ–¹æ³•</h3><blockquote>
<p>å› ä¸º Vuex æ’ä»¶ éœ€è¦ Vue.use() å®‰è£…ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»è¦æœ‰ä¸ª install æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•° ä¼ å…¥ Vue</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">install</span>(<span class="params">Vue</span>) &#123;</span><br><span class="line">  _Vue = <span class="title class_">Vue</span>;</span><br><span class="line"></span><br><span class="line">  _Vue.<span class="title function_">mixin</span>(&#123;</span><br><span class="line">    <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">$options</span>.<span class="property">store</span>) &#123;</span><br><span class="line">        _Vue.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$store</span> = <span class="variable language_">this</span>.<span class="property">$options</span>.<span class="property">store</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>3.æˆ‘ä»¬ç»§ç»­æ¥å®ç° <code>Store</code> ç±»</p>
</blockquote>
<p>å…ˆå®ŒæˆåŸºç¡€çš„ æ„é€ æ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> _Vue = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Store</span> &#123;</span><br><span class="line"></span><br><span class="line"> <span class="title function_">constructor</span>(<span class="params">options</span>) &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">const</span> state = options.<span class="property">state</span> || &#123;&#125;</span><br><span class="line">   <span class="keyword">const</span> mutations = options.<span class="property">mutations</span> || &#123;&#125;</span><br><span class="line">   <span class="keyword">const</span> actions = options.<span class="property">actions</span> || &#123;&#125;</span><br><span class="line">   <span class="keyword">const</span> getters = options.<span class="property">getters</span> || &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥ç€ï¼Œæˆ‘ä»¬æ¥å®ç° <code>state</code>,<code>getters</code>,<code>mutations</code>,<code>actions</code>,<code>commit</code>,<code>dispatch</code> å§</p>
<p>( ï¾Ÿ â–½ ï¾Ÿ)/</p>
<h3 id="3-state"><a href="#3-state" class="headerlink" title="3.state"></a>3.state</h3><p>æ˜¯ä¸æ˜¯è¶…ç®€å•ï¼Œç›´æ¥è°ƒç”¨ <code>Vue</code> çš„ <code>observable</code> æŠŠ <code>state</code> å˜æˆå“åº”å¼</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Store</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = _Vue.<span class="title function_">observable</span>(state);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-getters"><a href="#4-getters" class="headerlink" title="4.getters"></a>4.getters</h3><p>ä¸ºæ¯ä¸€ä¸ª <code>getters</code> é‡Œé¢çš„ æ–¹æ³•æ·»åŠ äº†ä¸€ä¸ª <code>get</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Store</span> &#123;</span><br><span class="line"> <span class="title function_">constructor</span>(<span class="params">options</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">getters</span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="title class_">Object</span>.<span class="title function_">keys</span>(getters).<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="variable language_">this</span>.<span class="property">getters</span>, key, &#123;</span><br><span class="line"></span><br><span class="line">       <span class="attr">get</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">         <span class="keyword">return</span> getters\[key\].<span class="title function_">call</span>(<span class="variable language_">this</span>, <span class="variable language_">this</span>.<span class="property">state</span>)</span><br><span class="line">       &#125;,</span><br><span class="line">     &#125;)</span><br><span class="line">   &#125;)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-mutations"><a href="#5-mutations" class="headerlink" title="5.mutations"></a>5.mutations</h3><p>è¿™é‡Œæ”¹å˜ <code>this</code> æŒ‡å‘</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Store</span> &#123;</span><br><span class="line"> <span class="title function_">constructor</span>(<span class="params">options</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">mutations</span> = &#123;&#125;</span><br><span class="line">   <span class="title class_">Object</span>.<span class="title function_">keys</span>(mutations).<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">mutations</span>\[key\] = <span class="function">(<span class="params">params</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">       mutations\[key\].<span class="title function_">call</span>(<span class="variable language_">this</span>, <span class="variable language_">this</span>.<span class="property">state</span>, params)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-actions"><a href="#6-actions" class="headerlink" title="6.actions"></a>6.actions</h3><p>å…¶å®å‘¢ï¼Œå’Œä¸Šé¢çš„ <code>mutations</code> å¤„ç†æ–¹å¼å·®ä¸å¤šï¼Œä¸è¿‡å‚æ•° ä¼ é€’çš„ä¸ä¸€æ ·ï¼Œéœ€è¦ä¼ é€’ ä¸Šä¸‹æ–‡ <code>context</code> ä¹Ÿå°±æ˜¯ <code>Store</code> çš„ä¸€ä¸ªå®ä¾‹ï¼Œè¿™é‡Œå°±æ˜¯ <code>this</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Store</span> &#123;</span><br><span class="line"> <span class="title function_">constructor</span>(<span class="params">options</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">actions</span> = &#123;&#125;</span><br><span class="line">   <span class="title class_">Object</span>.<span class="title function_">keys</span>(actions).<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">actions</span>\[key\] = <span class="function">(<span class="params">params</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">       actions\[key\].<span class="title function_">call</span>(<span class="variable language_">this</span>, <span class="variable language_">this</span>, params)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="7-commit"><a href="#7-commit" class="headerlink" title="7.commit"></a>7.commit</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Store</span> &#123;</span><br><span class="line"> <span class="title function_">constructor</span>(<span class="params">options</span>) &#123;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> commit = <span class="function">(<span class="params">eventName, params</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">mutations</span>\[eventName\](params)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-dispatch"><a href="#8-dispatch" class="headerlink" title="8.dispatch"></a>8.dispatch</h3><p><code>dispatch</code> å’Œ <code>commit</code> å®ç°å·®ä¸å¤š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Store</span> &#123;</span><br><span class="line"> <span class="title function_">constructor</span>(<span class="params">options</span>) &#123;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> dispatch = <span class="function">(<span class="params">eventName, params</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">actions</span>\[eventName\](params)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¥½äº†ï¼Œåˆ°äº†è¿™é‡Œå·®ä¸å¤šï¼Œä¸€ä¸ªä¸ç‰ˆçš„ <code>Vuex</code> å°±è¿™æ ·è¯ç”Ÿäº†ï¼Œæˆ‘ä»¬å†™ä¸ªä¾‹å­å»æµ‹è¯•ä¸‹å§</p>
<h3 id="9-æµ‹è¯•ä¾‹å­"><a href="#9-æµ‹è¯•ä¾‹å­" class="headerlink" title="9.æµ‹è¯•ä¾‹å­"></a>9.æµ‹è¯•ä¾‹å­</h3><blockquote>
<p>å…ˆå¯¼å…¥æˆ‘ä»¬è‡ªå·±å†™çš„ <code>Vuex</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&quot;../my-vuex/index&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;å¼ ä¸‰&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">21</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">changeName</span>(<span class="params">state, newName</span>) &#123;</span><br><span class="line">      state.<span class="property">name</span> = newName;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="title function_">changeNameAsync</span>(<span class="params">context, newName</span>) &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        context.<span class="title function_">commit</span>(<span class="string">&quot;changeName&quot;</span>, newName);</span><br><span class="line">      &#125;, <span class="number">2000</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="title function_">decorationName</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">`å¤§å®¶å¥½æˆ‘çš„åå­—å«<span class="subst">$&#123;state.name&#125;</span>ä»Šå¹´<span class="subst">$&#123;state.age&#125;</span>å²`</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸€ä¸ªç®€å•çš„ <code>vue</code> ç»„ä»¶</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æˆ‘æ˜¯ state æµ‹è¯•ï¼š&#123;&#123; this.$store.state.name &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æˆ‘æ˜¯ getters æµ‹è¯•:&#123;&#123; this.$store.getters.decorationName &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;$store.commit(&#x27;changeName&#x27;, &#x27;mutations æŒ‰é’®&#x27;)&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      mutations æŒ‰é’®</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;$store.dispatch(&#x27;changeNameAsync&#x27;, &#x27;actions æŒ‰é’®&#x27;)&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      actions æŒ‰é’®</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>  <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨ mian.js è¿˜æ˜¯ä¹‹å‰ä¸€æ ·çš„æŒ‚è½½æ²¡æ”¹</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&quot;./store&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  store,</span><br><span class="line">  <span class="attr">render</span>: <span class="function">(<span class="params">h</span>) =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">&#125;).$mount(<span class="string">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¾‹å­é¢„è§ˆ</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9cd6338c699643dc9ca1b853d7749170~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="27"></p>
<p>åˆ°äº†è¿™é‡Œå¹¶ä¸æ˜¯ç»“æŸäº†ï¼Œä¸å¦‚ç®€å•å®ç°ä¸€ä¸‹ å‡ ä¸ª <code>mapXXX</code> ,å®ç°èµ·æ¥éƒ½å·®ä¸å¤š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/df85a4edd845442292c66c3fc9fff38d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="img"></p>
<h3 id="10-mapSate"><a href="#10-mapSate" class="headerlink" title="10.mapSate"></a>10.mapSate</h3><p><code>...mapSate(\[&#39;age&#39;,\[&#39;name&#39;\]\])</code> ,æœ€å <code>computed</code> å¾—åˆ°çš„å°±æ˜¯ <code>age</code>: <code>21</code>, <code>name</code> : <code>&#39;å¼ ä¸‰&#39;</code> è¿™æ ·ï¼Œå°±å¯ä»¥åœ¨ ç»„ä»¶ä¸­ç›´æ¥ä½¿ç”¨äº†</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">mapState</span> = (<span class="params">params</span>) =&gt; &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(params))</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;æŠ±æ­‰ï¼Œå½“å‰æ˜¯ä¸ç‰ˆçš„Vuexï¼Œåªæ”¯æŒæ•°ç»„å‚æ•°&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  params.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    obj\[item\] = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>\[item\]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="11-mapMutations"><a href="#11-mapMutations" class="headerlink" title="11.mapMutations"></a>11.mapMutations</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">mapMutations</span> = (<span class="params">params</span>) =&gt; &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(params))</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;æŠ±æ­‰ï¼Œå½“å‰æ˜¯ä¸ç‰ˆçš„Vuexï¼Œåªæ”¯æŒæ•°ç»„å‚æ•°&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  params.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    obj\[item\] = <span class="keyword">function</span>(<span class="params">params</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(item, params)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="12-mapActions"><a href="#12-mapActions" class="headerlink" title="12.mapActions"></a>12.mapActions</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">mapActions</span> = (<span class="params">params</span>) =&gt; &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(params))</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;æŠ±æ­‰ï¼Œå½“å‰æ˜¯ä¸ç‰ˆçš„Vuexï¼Œåªæ”¯æŒæ•°ç»„å‚æ•°&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  params.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    obj\[item\] = <span class="keyword">function</span>(<span class="params">params</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(item, params)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="13-mapGetters"><a href="#13-mapGetters" class="headerlink" title="13.mapGetters"></a>13.mapGetters</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">mapGetters</span> = (<span class="params">params</span>) =&gt; &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(params))</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;æŠ±æ­‰ï¼Œå½“å‰æ˜¯ä¸ç‰ˆçš„Vuexï¼Œåªæ”¯æŒæ•°ç»„å‚æ•°&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  params.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    obj\[item\] = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">getters</span>\[item\]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="14-å¯¼å‡ºå’Œä½¿ç”¨"><a href="#14-å¯¼å‡ºå’Œä½¿ç”¨" class="headerlink" title="14.å¯¼å‡ºå’Œä½¿ç”¨"></a>14.å¯¼å‡ºå’Œä½¿ç”¨</h3><blockquote>
<p>æœ€åå°±æ˜¯å¯¼å‡º</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123; mapState, mapMutations, mapActions, mapGetters &#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½¿ç”¨æ–¹æ³•å’Œä¹‹å‰ä¸€æ ·</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeName(&#x27;ç‹—å­&#x27;)&quot;</span>&gt;</span>mapMutations<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeNameAsync(&#x27;ç‹—2å­&#x27;)&quot;</span>&gt;</span>mapMutations<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123; decorationName &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    &#123;&#123; age &#125;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; mapState, mapMutations, mapActions, mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;./my-vuex/index&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">computed</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ...<span class="title function_">mapState</span>(\[<span class="string">&#x27;age&#x27;</span>\]),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ...<span class="title function_">mapGetters</span>(\[<span class="string">&#x27;decorationName&#x27;</span>\])</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ...<span class="title function_">mapMutations</span>(\[<span class="string">&#x27;changeName&#x27;</span>\]),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    ...<span class="title function_">mapActions</span>(\[<span class="string">&#x27;changeNameAsync&#x27;</span>\])</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">...</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="3-ç»“è¯­"><a href="#3-ç»“è¯­" class="headerlink" title="3.ç»“è¯­"></a>3.ç»“è¯­</h2><p>å¥½äº†åˆ°äº†è¿™é‡Œï¼Œå…³äº <code>Vuex</code> æœ¬æ–‡å°±ç»“æŸäº†ï¼Œæˆ‘ä»¬ä» <code>Vuex</code> æ˜¯å•¥ï¼Œæ€ä¹ˆä½¿ç”¨ï¼ŒåŠ¨æ‰‹å®ç°ä¸€ä¸ªç®€å• <code>Vuex</code> æˆ‘ä»¬éƒ½å®Œæˆäº†ï¼Œå¸Œæœ›å¤§å®¶æœ‰æ‰€æ”¶è·</p>
<p>ä¸‹é¢æŠŠå®Œæˆçš„æˆ‘ä»¬æ¨¡æ‹Ÿçš„ <code>Vuex</code> ä»£ç è´´å‡ºï¼Œæ¬¢è¿å¤§å®¶ï¼Œå¤šå¤šäº¤æµï¼Œæœ‰ä»€ä¹ˆå†™é”™çš„åœ°æ–¹ï¼Œè¯·å¤§å®¶æŒ‡å‡º</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e7625b7e187b4616bb13da4653decfef~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="img"></p>
<h3 id="æ¨¡æ‹Ÿ-Vuex-å®Œæ•´ä»£ç "><a href="#æ¨¡æ‹Ÿ-Vuex-å®Œæ•´ä»£ç " class="headerlink" title="æ¨¡æ‹Ÿ Vuex å®Œæ•´ä»£ç "></a>æ¨¡æ‹Ÿ <code>Vuex</code> å®Œæ•´ä»£ç </h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> _Vue = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Store</span> &#123;</span><br><span class="line"></span><br><span class="line"> <span class="title function_">constructor</span>(<span class="params">options</span>) &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">const</span> state = options.<span class="property">state</span> || &#123;&#125;</span><br><span class="line">   <span class="keyword">const</span> mutations = options.<span class="property">mutations</span> || &#123;&#125;</span><br><span class="line">   <span class="keyword">const</span> actions = options.<span class="property">actions</span> || &#123;&#125;</span><br><span class="line">   <span class="keyword">const</span> getters = options.<span class="property">getters</span> || &#123;&#125;</span><br><span class="line"></span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">state</span> = _Vue.<span class="title function_">observable</span>(state)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">getters</span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="literal">null</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="title class_">Object</span>.<span class="title function_">keys</span>(getters).<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="variable language_">this</span>.<span class="property">getters</span>, key, &#123;</span><br><span class="line"></span><br><span class="line">       <span class="attr">get</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">         <span class="keyword">return</span> getters\[key\].<span class="title function_">call</span>(<span class="variable language_">this</span>, <span class="variable language_">this</span>.<span class="property">state</span>)</span><br><span class="line">       &#125;,</span><br><span class="line">     &#125;)</span><br><span class="line">   &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">mutations</span> = &#123;&#125;</span><br><span class="line">   <span class="title class_">Object</span>.<span class="title function_">keys</span>(mutations).<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">mutations</span>\[key\] = <span class="function">(<span class="params">params</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">       mutations\[key\].<span class="title function_">call</span>(<span class="variable language_">this</span>, <span class="variable language_">this</span>.<span class="property">state</span>, params)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">actions</span> = &#123;&#125;</span><br><span class="line">   <span class="title class_">Object</span>.<span class="title function_">keys</span>(actions).<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">actions</span>\[key\] = <span class="function">(<span class="params">params</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">       actions\[key\].<span class="title function_">call</span>(<span class="variable language_">this</span>, <span class="variable language_">this</span>, params)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;)</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> commit = <span class="function">(<span class="params">eventName, params</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">mutations</span>\[eventName\](params)</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> dispatch = <span class="function">(<span class="params">eventName, params</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">actions</span>\[eventName\](params)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">install</span>(<span class="params">Vue</span>) &#123;</span><br><span class="line"></span><br><span class="line"> _Vue = <span class="title class_">Vue</span></span><br><span class="line"></span><br><span class="line"> _Vue.<span class="title function_">mixin</span>(&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">$options</span>.<span class="property">store</span>) &#123;</span><br><span class="line"></span><br><span class="line">       _Vue.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$store</span> = <span class="variable language_">this</span>.<span class="property">$options</span>.<span class="property">store</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;,</span><br><span class="line"> &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mapState</span> = (<span class="params">params</span>) =&gt; &#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(params))</span><br><span class="line">   <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;æŠ±æ­‰ï¼Œå½“å‰æ˜¯ä¸ç‰ˆçš„Vuexï¼Œåªæ”¯æŒæ•°ç»„å‚æ•°&#x27;</span>)</span><br><span class="line"></span><br><span class="line"> <span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> params.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">   obj\[item\] = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>\[item\]</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;)</span><br><span class="line"> <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mapMutations</span> = (<span class="params">params</span>) =&gt; &#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(params))</span><br><span class="line">   <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;æŠ±æ­‰ï¼Œå½“å‰æ˜¯ä¸ç‰ˆçš„Vuexï¼Œåªæ”¯æŒæ•°ç»„å‚æ•°&#x27;</span>)</span><br><span class="line"></span><br><span class="line"> <span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> params.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">   obj\[item\] = <span class="keyword">function</span>(<span class="params">params</span>) &#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(item, params)</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;)</span><br><span class="line"> <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mapActions</span> = (<span class="params">params</span>) =&gt; &#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(params))</span><br><span class="line">   <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;æŠ±æ­‰ï¼Œå½“å‰æ˜¯ä¸ç‰ˆçš„Vuexï¼Œåªæ”¯æŒæ•°ç»„å‚æ•°&#x27;</span>)</span><br><span class="line"></span><br><span class="line"> <span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> params.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">   obj\[item\] = <span class="keyword">function</span>(<span class="params">params</span>) &#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(item, params)</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;)</span><br><span class="line"> <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mapGetters</span> = (<span class="params">params</span>) =&gt; &#123;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">if</span> (!<span class="title class_">Array</span>.<span class="title function_">isArray</span>(params))</span><br><span class="line">   <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;æŠ±æ­‰ï¼Œå½“å‰æ˜¯ä¸ç‰ˆçš„Vuexï¼Œåªæ”¯æŒæ•°ç»„å‚æ•°&#x27;</span>)</span><br><span class="line"></span><br><span class="line"> <span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> params.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">   obj\[item\] = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">getters</span>\[item\]</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;)</span><br><span class="line"> <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; mapState, mapMutations, mapActions, mapGetters &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"> install,</span><br><span class="line"> <span class="title class_">Store</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>Vuex</tag>
      </tags>
  </entry>
  <entry>
    <title>å¿«é€Ÿå…¥æ‰‹Electron æ‹¥æœ‰ä¸€ä¸ªè‡ªå·±çš„æ¡Œé¢åº”ç”¨</title>
    <url>/xiaolangwiki/2021/10/05/09/</url>
    <content><![CDATA[<h2 id="å¿«é€Ÿå…¥æ‰‹Electronï¼Œæ‹¥æœ‰ä¸€ä¸ªè‡ªå·±çš„æ¡Œé¢åº”ç”¨åœ¨è¿™é‡Œå°æµªä¼šç®€å•ä»‹ç»Elctronçš„ä¸€äº›åŸºæœ¬ä½¿ç”¨ï¼Œå’Œå¦‚ä½•å¿«é€Ÿç”¨Eletr"><a href="#å¿«é€Ÿå…¥æ‰‹Electronï¼Œæ‹¥æœ‰ä¸€ä¸ªè‡ªå·±çš„æ¡Œé¢åº”ç”¨åœ¨è¿™é‡Œå°æµªä¼šç®€å•ä»‹ç»Elctronçš„ä¸€äº›åŸºæœ¬ä½¿ç”¨ï¼Œå’Œå¦‚ä½•å¿«é€Ÿç”¨Eletr" class="headerlink" title="å¿«é€Ÿå…¥æ‰‹Electronï¼Œæ‹¥æœ‰ä¸€ä¸ªè‡ªå·±çš„æ¡Œé¢åº”ç”¨åœ¨è¿™é‡Œå°æµªä¼šç®€å•ä»‹ç»Elctronçš„ä¸€äº›åŸºæœ¬ä½¿ç”¨ï¼Œå’Œå¦‚ä½•å¿«é€Ÿç”¨Eletr"></a>å¿«é€Ÿå…¥æ‰‹Electronï¼Œæ‹¥æœ‰ä¸€ä¸ªè‡ªå·±çš„æ¡Œé¢åº”ç”¨åœ¨è¿™é‡Œå°æµªä¼šç®€å•ä»‹ç»Elctronçš„ä¸€äº›åŸºæœ¬ä½¿ç”¨ï¼Œå’Œå¦‚ä½•å¿«é€Ÿç”¨Eletr</h2><p>åŸæ–‡ï¼š<a href="https://juejin.cn/post/7015476516196712462">https://juejin.cn/post/7015476516196712462</a></p>
<blockquote>
<p>å‰è¨€</p>
</blockquote>
<p>å°æµªå­¦ä¹ <code>electron</code>çš„åŸå› æ˜¯è½¯ä»¶æ„é€ è¯¾éœ€è¦äº¤ä¸€ä¸ªè½¯ä»¶ä½œä¸šï¼Œä¸æƒ³ç”¨<code>java</code>å†™ï¼Œè¿˜ä¸èƒ½æ˜¯ç½‘é¡µï¼Œä¸€å¼€å§‹æƒ³åˆ°çš„æ˜¯ç”¨<code>uniapp</code>å†™ä¸ªé¡¹ç›®æ‰“åŒ…æˆ<code>APP</code>ï¼Œç„¶åæƒ³äº†æƒ³ï¼Œä¸€ç›´å¬è¯´ <code>electron</code> å¯ä»¥æŠŠå‰ç«¯é¡µé¢(<code>åŸç”Ÿ</code>/<code>h5</code>/<code>vue</code>/<code>react</code>â€¦)æ‰“åŒ…æˆæ¡Œé¢åº”ç”¨ï¼ŒæŠŠå‰ç«¯é¡µé¢å½“åš<code>GUI</code>è¿™å²‚ä¸æ˜¯å¾ˆ<code>Nice</code>,<code>Typora</code> å°±æ˜¯ <code>electron</code> åšçš„ï¼Œå¾ˆå¥½å¥‡ï¼Œå°±å»å­¦å­¦çœ‹ï¼Œä¸‹é¢æ˜¯å°æµªå­¦ä¹  <code>electron</code> çš„ç¬”è®°ï¼Œå¸Œæœ›èƒ½ç»™å¤§å®¶ä¸€ç‚¹å¸®åŠ©ï¼Œå­¦ä¹  <code>electron</code> æ•™ç¨‹å¥½åƒå¾ˆå¤šï¼Œä½†æ˜¯è¿˜æ˜¯å®˜æ–¹æ–‡æ¡£æ¯”è¾ƒæ¸…æ™°å…¨é¢ï¼Œæœ‰å¯èƒ½ä½ åœ¨è§†é¢‘æ•™ç¨‹é‡Œçœ‹è§çš„èƒ½ä½¿ç”¨çš„ï¼Œè‡ªå·±å»æ•²çš„æ—¶å€™å‘ç°å„ç§é—®é¢˜ï¼Œè¿˜ä»¥ä¸ºæ˜¯è‡ªå·±å“ªé‡Œæ‹¼é”™äº†ï¼Œä¸€çœ‹æ˜¯å®˜æ–¹æ–‡æ¡£æ›´æ–°äº†â€¦</p>
<h2 id="1-åŸºç¡€ä½¿ç”¨"><a href="#1-åŸºç¡€ä½¿ç”¨" class="headerlink" title="1.åŸºç¡€ä½¿ç”¨"></a>1.åŸºç¡€ä½¿ç”¨</h2><p>è¦æƒ³å¼„ä¸ªæ¡Œé¢ç«¯çš„åº”ç”¨ï¼Œé‚£æˆ‘ä»¬å¾—å¿«é€Ÿçš„å»äº†è§£å®ƒ</p>
<h3 id="1-1ç»ˆç«¯ä¹±ç é—®é¢˜"><a href="#1-1ç»ˆç«¯ä¹±ç é—®é¢˜" class="headerlink" title="1.1ç»ˆç«¯ä¹±ç é—®é¢˜"></a>1.1ç»ˆç«¯ä¹±ç é—®é¢˜</h3><blockquote>
<p><code>tip</code>: electron æ§åˆ¶æ‰“å°ä¼šå‡ºç°ä¸­æ–‡ä¹±ç </p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/415ede9a1d404238b155cab94420d9f7~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211004134055911"></p>
<p>åªéœ€è¦åœ¨ç»ˆç«¯ï¼ˆ<code>cmd</code>ï¼‰è¾“å…¥ <code>chcp 65001</code> è¿è¡Œä¸‹å°±è¡Œäº†</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1cc9e6036f4949e5becdd4c2bec3badb~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211004134132071"></p>
<h3 id="1-2å®‰è£…"><a href="#1-2å®‰è£…" class="headerlink" title="1.2å®‰è£…"></a>1.2å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// å¦‚æœæ²¡æœ‰node çš„è¯å…ˆè£… node</span><br><span class="line">http://nodejs.cn/download/</span><br><span class="line"></span><br><span class="line">// åœ¨å½“å‰ç›®å½•å®‰è£…æœ€æ–°</span><br><span class="line">npm i -D electron</span><br><span class="line"></span><br><span class="line">// å…¨å±€å®‰è£…æœ€æ–°</span><br><span class="line">cnpm install electron -g</span><br><span class="line"></span><br><span class="line">// å½“ç„¶ä½ å¯ä»¥æŒ‡å®šç‰ˆæœ¬å·å®‰è£…</span><br><span class="line">npm i -D electron@11.0.4</span><br></pre></td></tr></table></figure>
<p><code>node -v``electron -v</code>æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</p>
<h3 id="1-3å¿«é€Ÿåˆ›å»º"><a href="#1-3å¿«é€Ÿåˆ›å»º" class="headerlink" title="1.3å¿«é€Ÿåˆ›å»º"></a>1.3å¿«é€Ÿåˆ›å»º</h3><blockquote>
<p>å¼€å§‹åˆ›å»ºä¸€ä¸ª electron</p>
</blockquote>
<ul>
<li>é¦–å…ˆè¯´ä¸‹ç›®å½•å¿…é¡»åŒ…æ‹¬ï¼š<code>package.json</code> è¿™ä¸ªæ–‡ä»¶</li>
<li>ç„¶åè¦æœ‰ä¸ªå…¥å£æ–‡ä»¶ä¸‹é¢è¿™ä¸ªä¾‹å­æˆ‘ç”¨ <code>index.js</code>ä¸¾ä¾‹ï¼Œä¸è¿‡ä¸€èˆ¬å†™æˆ <code>main.js</code>æ¯”è¾ƒå¥½</li>
<li>èµ·ç ä½ éœ€è¦ä¸ªå±•ç¤ºçš„GUIç•Œé¢ï¼Œä¸€èˆ¬æ˜¯å‰ç«¯é¡µé¢ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ”¾ä¸ªç½‘å€</li>
</ul>
<p>æ–°å»ºä¸€ä¸ªç›®å½•(é¡¹ç›®):</p>
<p>åˆå§‹åŒ–<code>package.json</code>æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure>
<p>æè¿°è®°å¾—å†™ï¼Œè¿™ä¸ª<code>electron</code> æ‰“åŒ…çš„æ—¶å€™æˆ‘è®°å¾—éœ€è¦æè¿°</p>
<p>å¯åŠ¨å‘½ä»¤å†™ <code>&quot;test&quot;: &quot;nodemon --watch index.js --exec electron .&quot;</code> ï¼Œè¿™æ ·å­æœ€ååœ¨ç»ˆç«¯è¾“å…¥ <code>npm test</code>è¿™æ ·æ¯æ¬¡ä¿®æ”¹<code>index.js</code> ä¸»è¿›ç¨‹æ–‡ä»¶éƒ½ä¼šé‡æ–°å¯åŠ¨é¡¹ç›®äº†ï¼Œ<code>index.js</code>å¯ä»¥è‡ªè¡Œä¿®æ”¹ <code>main.js</code>ç­‰ç­‰</p>
<p>æ¥çœ‹çœ‹æœ€åçš„çš„ <code>package.json</code>æ–‡ä»¶å§</p>
 <figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;electron_demo&quot;</span>,</span><br><span class="line">  <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;description&quot;</span>: <span class="string">&quot;\\&quot;</span>è¿™æ˜¯ä¸€ä¸ªelectron demo\\<span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="string">&quot;main&quot;</span>: <span class="string">&quot;index.js&quot;</span>,</span><br><span class="line">  <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;test&quot;</span>: <span class="string">&quot;nodemon --watch index.js --exec electron .&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;author&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="string">&quot;license&quot;</span>: <span class="string">&quot;ISC&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘çš„ç›®å½•ä¸‹æ”¾äº†ä»¥ä¸‹å‡ ä¸ªæ–‡ä»¶</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c71f4ff2f1af4b369da5a8faf9ca4aaa~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211002115657083"></p>
<p><code>electron</code> åˆ†ä¸ºä¸¤ä¸ªè¿›ç¨‹ <strong>ä¸»è¿›ç¨‹</strong> å’Œ <strong>æ¸²æŸ“è¿›ç¨‹</strong></p>
<blockquote>
<p><code>index.js</code> è¿™ä¸ªæ–‡ä»¶æ˜¯ <strong>ä¸»è¿›ç¨‹</strong></p>
</blockquote>
<p>å®˜æ–¹æ˜¯è¿™æ ·å†™çš„</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; app, <span class="title class_">BrowserWindow</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createWindow</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> win = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">800</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">600</span>,</span><br><span class="line">    <span class="attr">webPreferences</span>: &#123;</span><br><span class="line">      <span class="attr">nodeIntegration</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  win.<span class="title function_">loadFile</span>(<span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  win.<span class="property">webContents</span>.<span class="title function_">openDevTools</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">whenReady</span>().<span class="title function_">then</span>(createWindow)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;window-all-closed&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (process.<span class="property">platform</span> !== <span class="string">&#x27;darwin&#x27;</span>) &#123;</span><br><span class="line">    app.<span class="title function_">quit</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;activate&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="title class_">BrowserWindow</span>.<span class="title function_">getAllWindows</span>().<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="title function_">createWindow</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>æˆ‘çœ‹å…¶ä»–äººå·®ä¸å¤šæ˜¯è¿™æ ·å†™çš„</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; app, <span class="title class_">BrowserWindow</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> win</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;ready&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    win = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="attr">resizable</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">width</span>: <span class="number">800</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">600</span>,</span><br><span class="line">    <span class="attr">icon</span>: iconPath,</span><br><span class="line">    <span class="attr">minWidth</span>: <span class="number">300</span>,</span><br><span class="line">    <span class="attr">minHeight</span>: <span class="number">500</span>,</span><br><span class="line">    <span class="attr">maxWidth</span>: <span class="number">300</span>,</span><br><span class="line">    <span class="attr">maxHeight</span>: <span class="number">600</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">webPreferences</span>:&#123;</span><br><span class="line">      <span class="attr">backgroundThrottling</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">nodeIntegration</span>:<span class="literal">true</span>,</span><br><span class="line">      <span class="attr">contextIsolation</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  win.<span class="title function_">loadFile</span>(<span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  win.<span class="title function_">on</span>(<span class="string">&#x27;closed&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">      win = <span class="literal">null</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;window-all-closed&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;çª—å£å…¨éƒ¨éƒ½å…³é—­äº†&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>index.html</code>æ˜¯<strong>æ¸²æŸ“è¿›ç¨‹</strong>ä¹Ÿå°±æ˜¯å‰ç«¯é¡µé¢é‡Œé¢éšä¾¿å†™ç‚¹ä¸œè¥¿ï¼Œè¿™é‡Œç›¸å½“æ˜¯æŠŠå‰ç«¯å½“æˆ GUI äº†</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>electron test<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    electron demo</span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¿™æ ·ä½¿ç”¨ <code>npm test</code> å°±å¯ä»¥å‡ºæ¥è¿™ä¹ˆä¸€ä¸ªç•Œé¢äº†ï¼Œ<code>test</code>è¿™ä¸ªå‘½ä»¤ æ˜¯ <code>package.json``script</code> ä¸­é…çš„</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/72537c1239d349bd96e785df06c7364f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211003211108491"></p>
<h2 id="2-Remote-æ¨¡å—"><a href="#2-Remote-æ¨¡å—" class="headerlink" title="2.Remote æ¨¡å—"></a>2.Remote æ¨¡å—</h2><p>åœ¨æ¸²æŸ“è¿›ç¨‹é‡Œï¼ˆæ¯”å¦‚<code>index.html</code>é‡Œé¢åŠ è½½äº†ä¸€äº›<strong>jsæ–‡ä»¶</strong>ï¼Œé‚£é‡Œé¢çš„<strong>js</strong>å¦‚æœè¦ä½¿ç”¨åˆ° <strong>BrowserWindow</strong> è¿™äº›å±æ€§çš„è¯å°±å¿…é¡»ä½¿ç”¨ <code>remote</code>ï¼‰</p>
<p>ä½¿ç”¨ <code>remote</code> æ¨¡å—, ä½ å¯ä»¥è°ƒç”¨ <code>main</code><strong>è¿›ç¨‹å¯¹è±¡çš„æ–¹æ³•</strong></p>
<h3 id="2-1-electron14-0ä¹‹å‰ç‰ˆæœ¬ä½¿ç”¨"><a href="#2-1-electron14-0ä¹‹å‰ç‰ˆæœ¬ä½¿ç”¨" class="headerlink" title="2.1.electron14.0ä¹‹å‰ç‰ˆæœ¬ä½¿ç”¨"></a>2.1.<strong>electron14.0</strong>ä¹‹å‰ç‰ˆæœ¬ä½¿ç”¨</h3><blockquote>
<p>åœ¨ä¸»è¿›ç¨‹çš„çª—å£ä¸­åŠ å…¥<code>enableRemoteModule: true</code>å‚æ•°æ‰èƒ½å¤Ÿè°ƒç”¨remoteæ¨¡å—</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; app, <span class="title class_">BrowserWindow</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;ready&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> win = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">800</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">600</span>,</span><br><span class="line">    <span class="attr">webPreferences</span>: &#123;</span><br><span class="line"></span><br><span class="line">      <span class="attr">enableRemoteModule</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">nodeIntegration</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">contextIsolation</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">  win.<span class="title function_">loadFile</span>(<span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  app.<span class="title function_">on</span>(<span class="string">&#x27;window-all-closed&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    win = <span class="literal">null</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;çª—å£å…¨éƒ¨éƒ½å…³é—­äº†&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç„¶ååœ¨æ¸²æŸ“è¿›ç¨‹é‡Œå†™ï¼Œè¿™é‡Œæˆ‘ç›´æ¥å†…åµŒjsäº†</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>electron test<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    electron demo</span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>æ·»åŠ æ–°çš„çª—å£<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> &#123; log &#125; = <span class="variable language_">console</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> &#123; <span class="title class_">BrowserWindow</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>).<span class="property">remote</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">      btn.<span class="property">onclick</span> = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> newWin = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">width</span>: <span class="number">800</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">height</span>: <span class="number">600</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        win.<span class="title function_">loadFile</span>(<span class="string">&#x27;index2.html&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        newWin.<span class="title function_">on</span>(<span class="string">&#x27;close&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          newWin = <span class="literal">null</span></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œç‚¹å‡»æŒ‰é’®ï¼Œå°±åˆå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„çª—å£äº†</p>
<h3 id="2-2-electron14-0ç‰ˆæœ¬APIä¿®æ”¹"><a href="#2-2-electron14-0ç‰ˆæœ¬APIä¿®æ”¹" class="headerlink" title="2.2.electron14.0ç‰ˆæœ¬APIä¿®æ”¹"></a>2.2.<strong>electron14.0</strong>ç‰ˆæœ¬APIä¿®æ”¹</h3><blockquote>
<p>ä½†æ˜¯è¿™é‡Œæ˜¯æœ‰ç‰ˆæœ¬çš„åŒºåˆ†çš„ï¼Œè¿™é‡Œä¸€å¼€å§‹ä¹Ÿå›°æ‰°äº†æˆ‘å¾ˆä¹…å¾ˆä¹…â€¦æœ€åçœ‹äº†ä¸‹æ–‡æ¡£<code>14.0</code>å æ”¹äº†ï¼Œæˆ‘ç”¨çš„<code>15</code>ã€‚ã€‚ã€‚</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/12832ff7f85c4ab89c34aaeebed3132f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211003215043335"></p>
<blockquote>
<p>1.è¿˜å¾—è‡ªè¡Œå®‰è£… <code>remote</code></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i -D @electron/remote</span><br></pre></td></tr></table></figure>
<blockquote>
<p>2.ä¸»è¿›ç¨‹ä¸­å¯¼å…¥</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;ready&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="built_in">require</span>(<span class="string">&#x27;@electron/remote/main&#x27;</span>).<span class="title function_">initialize</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>3.æ¸²æŸ“è¿›ç¨‹ä¸­</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">BrowserWindow</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@electron/remote&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="3-åˆ›å»ºç³»ç»Ÿèœå•"><a href="#3-åˆ›å»ºç³»ç»Ÿèœå•" class="headerlink" title="3.åˆ›å»ºç³»ç»Ÿèœå•"></a>3.åˆ›å»ºç³»ç»Ÿèœå•</h2><blockquote>
<p>1.æ–°å»ºä¸€ä¸ª menu.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Menu</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> template = \[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">label</span>: <span class="string">&#x27;èœå•ä¸€&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">submenu</span>: \[</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">label</span>: <span class="string">&#x27;å­èœå•ä¸€&#x27;</span> ,</span><br><span class="line"></span><br><span class="line">          <span class="attr">accelerator</span>: <span class="string">&#x27;ctrl+n&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123; <span class="attr">label</span>: <span class="string">&#x27;å­èœå•äºŒ&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">label</span>: <span class="string">&#x27;å­èœå•ä¸‰&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">label</span>: <span class="string">&#x27;å­èœå•å››&#x27;</span> &#125;,</span><br><span class="line">    \],</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">label</span>: <span class="string">&#x27;èœå•äºŒ&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">submenu</span>: \[</span><br><span class="line">      &#123; <span class="attr">label</span>: <span class="string">&#x27;å­èœå•ä¸€&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">label</span>: <span class="string">&#x27;å­èœå•äºŒ&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">label</span>: <span class="string">&#x27;å­èœå•ä¸‰&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">label</span>: <span class="string">&#x27;å­èœå•å››&#x27;</span> &#125;,</span><br><span class="line">    \],</span><br><span class="line">  &#125;,</span><br><span class="line">\]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myMenu = <span class="title class_">Menu</span>.<span class="title function_">buildFromTemplate</span>(template)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">Menu</span>.<span class="title function_">setApplicationMenu</span>(myMenu)</span><br></pre></td></tr></table></figure>
<p><code>accelerator: &#39;ctrl+n&#39;</code>å¯ä»¥æŒ‡å®šèœå•çš„å¿«æ·é”®</p>
<blockquote>
<p>2.éšä¾¿å†™ä¸ªé¡µé¢</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>è‡ªå®šä¹‰èœå•<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    è‡ªå®šä¹‰èœå•</span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>3.å†™ main.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; app, <span class="title class_">BrowserWindow</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> win = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;./menu&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;ready&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  win = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">800</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">600</span>,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  win.<span class="property">webContents</span>.<span class="title function_">openDevTools</span>()</span><br><span class="line">  win.<span class="title function_">loadFile</span>(<span class="string">&#x27;./index.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  win.<span class="title function_">on</span>(<span class="string">&#x27;close&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    win = <span class="literal">null</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>npm testå¯åŠ¨</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5ab8963721d54f73a508a93088ef71f6~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="46"></p>
<h2 id="4-ç»™èœå•æ·»åŠ äº‹ä»¶"><a href="#4-ç»™èœå•æ·»åŠ äº‹ä»¶" class="headerlink" title="4.ç»™èœå•æ·»åŠ äº‹ä»¶"></a>4.ç»™èœå•æ·»åŠ äº‹ä»¶</h2><blockquote>
<p>æ¯”å¦‚ç»™å­èœå•æ·»åŠ ä¸€ä¸ªç‚¹å‡»äº‹ä»¶æ–°å»ºä¸€ä¸ªçª—å£</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Menu</span>, <span class="title class_">BrowserWindow</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> template = \[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">label</span>: <span class="string">&#x27;èœå•ä¸€&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">submenu</span>: \[</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">label</span>: <span class="string">&#x27;å­èœå•ä¸€&#x27;</span>,</span><br><span class="line"></span><br><span class="line">        <span class="attr">click</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">let</span> sonWin = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line">            <span class="attr">width</span>: <span class="number">200</span>,</span><br><span class="line">            <span class="attr">height</span>: <span class="number">200</span>,</span><br><span class="line">          &#125;)</span><br><span class="line">          sonWin.<span class="title function_">loadFile</span>(<span class="string">&#x27;./index2.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line">          sonWin.<span class="title function_">on</span>(<span class="string">&#x27;close&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            sonWin = <span class="literal">null</span></span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123; <span class="attr">label</span>: <span class="string">&#x27;å­èœå•äºŒ&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">label</span>: <span class="string">&#x27;å­èœå•ä¸‰&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">label</span>: <span class="string">&#x27;å­èœå•å››&#x27;</span> &#125;,</span><br><span class="line">    \],</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">label</span>: <span class="string">&#x27;èœå•äºŒ&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">submenu</span>: \[</span><br><span class="line">      &#123; <span class="attr">label</span>: <span class="string">&#x27;å­èœå•ä¸€&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">label</span>: <span class="string">&#x27;å­èœå•äºŒ&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">label</span>: <span class="string">&#x27;å­èœå•ä¸‰&#x27;</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">label</span>: <span class="string">&#x27;å­èœå•å››&#x27;</span> &#125;,</span><br><span class="line">    \],</span><br><span class="line">  &#125;,</span><br><span class="line">\]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myMenu = <span class="title class_">Menu</span>.<span class="title function_">buildFromTemplate</span>(template)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">Menu</span>.<span class="title function_">setApplicationMenu</span>(myMenu)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ•ˆæœå›¾</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/68fdf9ed39c0403188c1193c1021b9b5~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="47"></p>
<blockquote>
<p>ä¸Šé¢çš„çš„å¼€å‘è€…å·¥å…·å’Œ<strong>chrome/edgeæµè§ˆå™¨</strong>ä¸€æ ·ï¼Œåœ¨èœå•æ çš„<code>View -&gt; Toggle Developer Tools</code>ï¼Œæˆ–è€… <code>Ctrl + Shift + I</code>å°±èƒ½è°ƒç”¨å‡ºæ¥ï¼Œç”¨æ¥è°ƒè¯•é¡µé¢</p>
</blockquote>
<h2 id="5-ä½¿ç”¨Node-js-æ¨¡å—-API"><a href="#5-ä½¿ç”¨Node-js-æ¨¡å—-API" class="headerlink" title="5.ä½¿ç”¨Node.js æ¨¡å—/API"></a>5.ä½¿ç”¨Node.js æ¨¡å—/API</h2><p>æ¯”å¦‚å†™ä¸ª<strong>è¯»å†™æ–‡ä»¶</strong>ä¾‹å­</p>
<p>åœ¨ä¸»çº¿ç¨‹åˆ›å»ºçª—å£çš„æ—¶å€™ <code>webPreferences</code>ä¸€å®šåœ¨åŠ ä¸Š <code>nodeIntegration: true</code>ï¼Œ<code>contextIsolation: false</code></p>
<p>è¿™æ ·åœ¨æ¸²æŸ“è¿›ç¨‹æ‰èƒ½ä½¿ç”¨<code>node</code> çš„ä¸€äº›è¯­æ³•</p>
<blockquote>
<p>main.js</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; app, <span class="title class_">BrowserWindow</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mainWindow = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;ready&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">  mainWindow = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">800</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">600</span>,</span><br><span class="line">    <span class="attr">webPreferences</span>: &#123;</span><br><span class="line">      <span class="attr">nodeIntegration</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">contextIsolation</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  mainWindow.<span class="title function_">loadFile</span>(<span class="string">&#x27;./main.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  mainWindow.<span class="title function_">on</span>(<span class="string">&#x27;close&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    mainWindow = <span class="literal">null</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>main.html ä¸»è¦çš„æ¸²æŸ“æ–‡ä»¶</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>è¯»å†™æ–‡ä»¶æµ‹è¯•<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;readFile()&quot;</span>&gt;</span>è¯»å–æ–‡ä»¶<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;writeFile()&quot;</span>&gt;</span>å†™å…¥æ–‡ä»¶<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;show\_file\_content&quot;</span>&gt;</span>é¡µé¢å†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>index.js åŠ è½½éœ€è¦çš„js</p>
</blockquote>
<p>å¯ä»¥çœ‹å‡ºï¼Œåœ¨æ¸²æŸ“è¿›ç¨‹ä¸­ï¼Œå°±æ˜¯<code>main.html</code> é‡Œé¢åŠ è½½çš„ <code>index.js</code> ä¸­ï¼Œæ—¢å¯ä»¥ä½¿ç”¨ <code>docment.getElementById</code> è¿™äº› <code>WebAPI</code>,åˆèƒ½ä½¿ç”¨ç”¨ <code>node</code> çš„æ¨¡å—è¿›è¡Œæ··å†™</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; log &#125; = <span class="variable language_">console</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> showContent = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;show\_file\_content&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">readFile</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è¯»å–æ–‡ä»¶&#x27;</span>)</span><br><span class="line">  fs.<span class="title function_">readFile</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;/test.txt&#x27;</span>), <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(err, <span class="string">&#x27;è¯»å–æ–‡ä»¶å¤±è´¥&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    showContent.<span class="property">innerText</span> = data</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> content = <span class="string">&#x27;ä»Šå¤©æ˜¯å›½åº†çš„ç¬¬äºŒå¤©ï¼Œåœ¨å­¦ electron&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">writeFile</span>(<span class="params"></span>) &#123;</span><br><span class="line">  fs.<span class="title function_">writeFile</span>(</span><br><span class="line">    path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;/test.txt&#x27;</span>),</span><br><span class="line">    content,</span><br><span class="line">    <span class="string">&#x27;utf8&#x27;</span>,</span><br><span class="line">    <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Error</span>(err, <span class="string">&#x27;è¯»å–æ–‡ä»¶å¤±è´¥&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="title function_">log</span>(<span class="string">&#x27;å†™å…¥æ–‡ä»¶æˆåŠŸ&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æµ‹è¯•ç”¨çš„ txt</p>
</blockquote>
<figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">ä»Šå¤©æ˜¯å›½åº†çš„ç¬¬äºŒå¤©ï¼Œåœ¨å­¦ electron</span><br></pre></td></tr></table></figure>
<blockquote>
<p>é¡¹ç›®çš„ç›®å½•</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/261e3ccd1caf4d26847e861205d73278~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211002155537033"></p>
<blockquote>
<p>æ•ˆæœå›¾</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e392606cde154267aed6ff0c08c57c09~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="45"></p>
<h2 id="6-è®¾ç½®æ— è¾¹æ¡†"><a href="#6-è®¾ç½®æ— è¾¹æ¡†" class="headerlink" title="6.è®¾ç½®æ— è¾¹æ¡†"></a>6.è®¾ç½®æ— è¾¹æ¡†</h2><blockquote>
<p>åœ¨åˆ›å»ºçª—å£çš„æ—¶å€™ å¯ä»¥è®¾ç½®æ— è¾¹æ¡†ï¼Œå¸¦çš„èœå•ä¹Ÿæ¶ˆå¤±äº†</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> win = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line">    <span class="attr">frame</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">width</span>: <span class="number">800</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">600</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>èœå•å…¶å®å®ƒè¿˜åœ¨ï¼Œä½ ä»ç„¶å¯ä»¥é€šè¿‡å¿«æ·é”®è°ƒç”¨å‡ºèœå•ï¼Œå¯ä»¥ç›´æ¥åˆ é™¤èœå•<code>win.removeMenu()</code></p>
<blockquote>
<p>æ²¡æœ‰èœå•æ æ€ä¹ˆå»æ‹–æ‹½çª—å£</p>
</blockquote>
<p>åœ¨cssä¸­ä½ å¯ä»¥è®¾ç½®å“ªä¸ªå¯ä»¥è¿›è¡Œæ‹–æ‹½/ç¦æ­¢æ‹–æ‹½</p>
<p>æ¯”å¦‚ <code>body&#123; -webkit-app-region: drag | no-drag;&#125;</code></p>
<blockquote>
<p>æ•ˆæœå›¾ï¼šæ— è¾¹æ¡†ï¼Œåœ¨<code>body</code>è®¾ç½®å¯æ‹–æ‹½</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/76910042f01a4848abb0948cdc20a828~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="44"></p>
<h2 id="7-ç³»ç»Ÿæ‰˜ç›˜"><a href="#7-ç³»ç»Ÿæ‰˜ç›˜" class="headerlink" title="7.ç³»ç»Ÿæ‰˜ç›˜"></a>7.ç³»ç»Ÿæ‰˜ç›˜</h2><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a7b3e10d88f54101a7889b42f01d5aa6~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211004102538924"></p>
<p>çœ‹åˆ°ä¸Šé¢è¿™ä¸ªå›¾å¤§å®¶éƒ½åº”è¯¥æ¸…æ¥šå§ï¼Œå½“æˆ‘ä»¬å…³é—­ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„æ—¶å€™ï¼Œå®ƒå…¶å®å…³é—­äº†ï¼Œä½†æ˜¯æ²¡æœ‰å®Œå…¨å…³é—­ï¼Œåªæ˜¯éšè—äº†ï¼Œæœ‰çš„å°±å­˜åœ¨ç³»ç»Ÿæ‰˜ç›˜ä¸­ï¼Œé‚£ä¹ˆå¦‚ä½•åœ¨<code>electron</code> è®¾ç½®ç³»ç»Ÿæ‰˜ç›˜å‘¢</p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.electronjs.org%2Fdocs%2Ftutorial%2Ftray" title="https://www.electronjs.org/docs/tutorial/tray">å®˜æ–¹æ–‡æ¡£ï¼šTray</a></p>
<blockquote>
<p>ä¸»è¿›ç¨‹ index.js</p>
</blockquote>
<p>åœ¨<code>electron</code> è¿™é‡Œä¸€å¼€å§‹æˆ‘å°±æ·»åŠ ç³»ç»Ÿæ‰˜ç›˜ï¼Œå½“ç„¶ä½ å¯ä»¥ç›‘å¬çª—å£è¢«å…³é—­çš„æ—¶å€™åœ¨åˆ›å»ºæ‰˜ç›˜</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; app, <span class="title class_">BrowserWindow</span>, <span class="title class_">Tray</span>, <span class="title class_">Menu</span>, nativeImage &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> win, tray</span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;ready&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  win = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">800</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">600</span>,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> icon = nativeImage.<span class="title function_">createFromPath</span>(</span><br><span class="line">    path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;/static/icon.png&#x27;</span>)</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  tray = <span class="keyword">new</span> <span class="title class_">Tray</span>(icon)</span><br><span class="line"></span><br><span class="line">  tray.<span class="title function_">setToolTip</span>(<span class="string">&#x27;electron demo is running&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  tray.<span class="title function_">setTitle</span>(<span class="string">&#x27;electron demo&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  tray.<span class="title function_">on</span>(<span class="string">&#x27;right-click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> tempate = \[</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">label</span>: <span class="string">&#x27;æ— æ“ä½œ&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">label</span>: <span class="string">&#x27;é€€å‡º&#x27;</span>,</span><br><span class="line">        <span class="attr">click</span>: <span class="function">() =&gt;</span> app.<span class="title function_">quit</span>(),</span><br><span class="line">      &#125;,</span><br><span class="line">    \]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> menuConfig = <span class="title class_">Menu</span>.<span class="title function_">buildFromTemplate</span>(tempate)</span><br><span class="line"></span><br><span class="line">    tray.<span class="title function_">popUpContextMenu</span>(menuConfig)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  tray.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (win.<span class="title function_">isVisible</span>()) &#123;</span><br><span class="line">      win.<span class="title function_">hide</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      win.<span class="title function_">show</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  win.<span class="title function_">loadFile</span>(<span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;window-all-closed&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">  win = <span class="literal">null</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;çª—å£å…¨éƒ¨éƒ½å…³é—­äº†&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ•ˆæœå›¾</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7baeb0d2309f4c38bb107a22a3690f49~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="48"></p>
<h2 id="8-è¿›ç¨‹é—´é€šä¿¡"><a href="#8-è¿›ç¨‹é—´é€šä¿¡" class="headerlink" title="8.è¿›ç¨‹é—´é€šä¿¡"></a>8.è¿›ç¨‹é—´é€šä¿¡</h2><p><code>electron</code>ä¸­ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä¸¤è€…ä¹‹é—´éœ€è¦é€šä¿¡</p>
<blockquote>
<p>å®˜æ–¹æ–‡æ¡£ï¼š</p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.electronjs.org%2Fdocs%2Fapi%2Fipc-main" title="https://www.electronjs.org/docs/api/ipc-main">ipcMain</a></p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.electronjs.org%2Fdocs%2Fapi%2Fipc-renderer" title="https://www.electronjs.org/docs/api/ipc-renderer">ipcRenderer</a></p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.electronjs.org%2Fdocs%2Fapi%2Fweb-contents%23contentssendchannel-args" title="https://www.electronjs.org/docs/api/web-contents#contentssendchannel-args">webContents</a></p>
</blockquote>
<p><strong>ä¸»çº¿ç¨‹</strong> åˆ° <strong>æ¸²æŸ“çº¿ç¨‹</strong> é€šè¿‡ <code>webContents.send</code> æ¥å‘é€ â€”-&gt;<code>ipcRenderer.on</code> æ¥ç›‘å¬</p>
<p><strong>æ¸²æŸ“çº¿ç¨‹</strong> åˆ° <strong>ä¸»çº¿ç¨‹</strong> éœ€è¦é€šè¿‡ <code>ipcRenderer.send</code>å‘é€ â€”-> <code>ipcMain.on</code>æ¥ç›‘å¬</p>
<h3 id="8-1-ä¸»è¿›ç¨‹åˆ°æ¸²æŸ“è¿›ç¨‹"><a href="#8-1-ä¸»è¿›ç¨‹åˆ°æ¸²æŸ“è¿›ç¨‹" class="headerlink" title="8.1.ä¸»è¿›ç¨‹åˆ°æ¸²æŸ“è¿›ç¨‹"></a>8.1.ä¸»è¿›ç¨‹åˆ°æ¸²æŸ“è¿›ç¨‹</h3><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.electronjs.org%2Fdocs%2Fapi%2Fweb-contents%23contentssendchannel-args" title="https://www.electronjs.org/docs/api/web-contents#contentssendchannel-args"><code>webContents.send(channel, ...args)</code></a></p>
<ul>
<li><code>channel</code> String</li>
<li><code>...args</code> any[]</li>
</ul>
<blockquote>
<p>ä¸»è¿›ç¨‹ <code>mian.js</code></p>
</blockquote>
<p>åœ¨ä¸»è¿›ç¨‹ä¸­ä½¿ç”¨ <code>webContents.send</code> å‘é€æ¶ˆæ¯</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; app, <span class="title class_">BrowserWindow</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> win</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;ready&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  win = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">800</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">600</span>,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="attr">webPreferences</span>: &#123;</span><br><span class="line">      <span class="attr">enableRemoteModule</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">nodeIntegration</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">contextIsolation</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    win.<span class="property">webContents</span>.<span class="title function_">send</span>(<span class="string">&#x27;mainMsg&#x27;</span>, <span class="string">&#x27;æˆ‘æ˜¯ä¸»çº¿ç¨‹å‘é€çš„æ¶ˆæ¯&#x27;</span>)</span><br><span class="line">  &#125;, <span class="number">3000</span>)</span><br><span class="line"></span><br><span class="line">  win.<span class="title function_">loadFile</span>(<span class="string">&#x27;main.html&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;window-all-closed&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">  win = <span class="literal">null</span></span><br><span class="line">  app.<span class="title function_">quit</span>()</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;çª—å£å…¨éƒ¨éƒ½å…³é—­äº†&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ¸²æŸ“è¿›ç¨‹ <code>main.html</code> å¤–é“¾ä¸€ä¸ª <code>render.js</code></p>
</blockquote>
<p>åœ¨æ¸²æŸ“çº¿ç¨‹ä¸­ä½¿ç”¨ <code>ipcRenderer.on</code>æ¥è¿›è¡Œç›‘å¬</p>
<p><code>ipcRenderer.on(channel, listener)</code></p>
<ul>
<li><code>channel</code> String</li>
<li><code>listener</code> Function</li>
</ul>
<p>ç›‘å¬ <code>channel</code>, å½“æœ‰æ–°æ¶ˆæ¯åˆ°è¾¾ï¼Œä½¿ç”¨ <code>listener(event, args...)</code> è°ƒç”¨ <code>listener</code> .</p>
<p>è¿˜æœ‰ä¸ªç›‘å¬ä¸€æ¬¡çš„æ¶ˆæ¯<code>ipcRenderer.once(channel, listener)</code></p>
<p>ä¸ºè¿™ä¸ªäº‹ä»¶æ·»åŠ ä¸€ä¸ªä¸€æ¬¡æ€§ <code>listener</code> å‡½æ•°.è¿™ä¸ª <code>listener</code> å°†åœ¨ä¸‹ä¸€æ¬¡æœ‰æ–°æ¶ˆæ¯è¢«å‘é€åˆ° <code>channel</code> çš„æ—¶å€™è¢«è¯·æ±‚è°ƒç”¨ï¼Œä¹‹åå°±è¢«åˆ é™¤äº†</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>é€šä¿¡æµ‹è¯•<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    é€šä¿¡æµ‹è¯•</span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;receive&quot;</span>&gt;</span>æ¥æ”¶ä¿¡æ¯<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./render.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
 <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> electron = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; ipcRenderer &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; log &#125; = <span class="variable language_">console</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">log</span>(ipcRenderer)</span><br><span class="line">ipcRenderer.<span class="title function_">on</span>(<span class="string">&#x27;mainMsg&#x27;</span>, <span class="function">(<span class="params">event, task</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">log</span>(task)</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;receive&#x27;</span>).<span class="property">innerText</span> = task</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ•ˆæœå›¾</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/087129ad564a42d8b54b1d1785710231~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="49"></p>
<h3 id="8-2-æ¸²æŸ“è¿›ç¨‹åˆ°ä¸»è¿›ç¨‹"><a href="#8-2-æ¸²æŸ“è¿›ç¨‹åˆ°ä¸»è¿›ç¨‹" class="headerlink" title="8.2.æ¸²æŸ“è¿›ç¨‹åˆ°ä¸»è¿›ç¨‹"></a>8.2.æ¸²æŸ“è¿›ç¨‹åˆ°ä¸»è¿›ç¨‹</h3><blockquote>
<p><code>render.js</code> æ¸²æŸ“çº¿ç¨‹ä¸­è¿›è¡Œå‘é€ <code>ipcRenderer.send</code></p>
</blockquote>
<p><code>ipcRenderer.send(channel\[, arg1\]\[, arg2\]\[, ...\])</code></p>
<ul>
<li><code>channel</code> String</li>
<li><code>arg</code> (å¯é€‰)</li>
</ul>
<p>è¿˜æœ‰å‘é€åŒæ­¥æ¶ˆæ¯çš„<code>ipcRenderer.sendSync(channel\[, arg1\]\[, arg2\]\[, ...\])</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>é€šä¿¡æµ‹è¯•<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    é€šä¿¡æµ‹è¯•</span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;receive&quot;</span>&gt;</span>æ¥æ”¶ä¿¡æ¯<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;sendMain()&quot;</span>&gt;</span>å‘é€æ¶ˆæ¯ç»™ä¸»çº¿ç¨‹<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./render.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> electron = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; ipcRenderer &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sendMain</span>(<span class="params"></span>) &#123;</span><br><span class="line">  ipcRenderer.<span class="title function_">send</span>(<span class="string">&#x27;task&#x27;</span>, <span class="string">&#x27;é€€å‡ºç¨‹åº&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>main.js</code> ä¸»è¿›ç¨‹é‡Œé¢ <code>ipcMain.on</code> è¿›è¡Œç›‘å¬ï¼Œè¿™é‡Œé€€å‡ºç¨‹åº</p>
</blockquote>
<p><code>ipcMain.on(channel, listener)</code></p>
<ul>
<li><code>channel</code> String</li>
<li><code>listener</code> Function</li>
</ul>
<p>ç›‘å¬ <code>channel</code>, å½“æ–°æ¶ˆæ¯åˆ°è¾¾ï¼Œå°†é€šè¿‡ <code>listener(event, args...)</code> è°ƒç”¨ <code>listener</code>.</p>
<p>è¿˜æœ‰ä¸ª <code>ipcMain.once(channel, listener)</code>ä¸ºäº‹ä»¶æ·»åŠ ä¸€ä¸ªä¸€æ¬¡æ€§ç”¨çš„<code>listener</code> å‡½æ•°.è¿™ä¸ª <code>listener</code> åªæœ‰åœ¨ä¸‹æ¬¡çš„æ¶ˆæ¯åˆ°è¾¾ <code>channel</code> æ—¶è¢«è¯·æ±‚è°ƒç”¨ï¼Œä¹‹åå°±è¢«åˆ é™¤äº†.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; app, <span class="title class_">BrowserWindow</span>, ipcMain &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;ready&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">ipcMain.<span class="title function_">on</span>(<span class="string">&#x27;task&#x27;</span>, <span class="function">(<span class="params">event, info</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (info === <span class="string">&#x27;é€€å‡ºç¨‹åº&#x27;</span>) &#123;</span><br><span class="line">    app.<span class="title function_">quit</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ•ˆæœå›¾</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/22c4401cffd7415ba5a167dc9778bd48~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="50"></p>
<p>è¿™æ ·å°±æ–¹ä¾¿é‡Œæˆ‘åšä¸€äº›çª—å£äº¤äº’ï¼Œæ¯”å¦‚<code>todoList</code>,åˆ°æ—¶é—´äº†å³ä¸‹è§’å¼¹å‡ºä¸€ä¸ªæ–°çš„çª—å£è¿›è¡Œæé†’</p>
<h3 id="8-3æ¸²æŸ“è¿›ç¨‹åˆ°æ¸²æŸ“è¿›ç¨‹"><a href="#8-3æ¸²æŸ“è¿›ç¨‹åˆ°æ¸²æŸ“è¿›ç¨‹" class="headerlink" title="8.3æ¸²æŸ“è¿›ç¨‹åˆ°æ¸²æŸ“è¿›ç¨‹"></a>8.3æ¸²æŸ“è¿›ç¨‹åˆ°æ¸²æŸ“è¿›ç¨‹</h3><p><code>ipcRenderer.sendTo(webContentsId, channel, ...args)</code></p>
<ul>
<li><code>webContentsId</code> Number</li>
<li><code>channel</code> String</li>
<li><code>...args</code> any[]</li>
</ul>
<p>é€šè¿‡ <code>channel</code> å‘é€æ¶ˆæ¯åˆ°å¸¦æœ‰ <code>webContentsId</code> çš„çª—å£.</p>
<p>å‰ææ˜¯è¦çŸ¥é“å¯¹åº”çš„æ¸²æŸ“è¿›ç¨‹çš„<code>ID</code></p>
<p>å½“ç„¶ä¹Ÿå¯ä»¥è®©ä¸»è¿›ç¨‹ä½œä¸ºä¸­è½¬ç«™ï¼Œå…ˆå‘åˆ°ä¸»è¿›ç¨‹åœ¨åˆ°å…¶ä»–çš„æ¸²æŸ“è¿›ç¨‹</p>
<h2 id="9-Vue-Electron"><a href="#9-Vue-Electron" class="headerlink" title="9.Vue + Electron"></a>9.Vue + Electron</h2><p>é‚£ä¹ˆ <code>Vue</code> æ€ä¹ˆä½¿ç”¨ <code>Electron</code> æ‰“åŒ…å‘¢ï¼Ÿæ¯•ç«Ÿå­¦ä¹ è¿™ä¸ªåˆè¡·ï¼Œå°±æ˜¯æŠŠ <code>Vue</code> é¡¹ç›®å˜æˆä¸€ä¸ªæ¡Œé¢åº”ç”¨ï¼Œå‰é¢è®²çš„éƒ½æ˜¯åŸç”Ÿçš„æ–¹æ³•ï¼Œé‚£ä¹ˆç»§ç»­å¾€ä¸‹é¢çœ‹å§</p>
<h3 id="9-1ä½ éœ€è¦æœ‰ä¸ªVueé¡¹ç›®"><a href="#9-1ä½ éœ€è¦æœ‰ä¸ªVueé¡¹ç›®" class="headerlink" title="9.1ä½ éœ€è¦æœ‰ä¸ªVueé¡¹ç›®"></a>9.1ä½ éœ€è¦æœ‰ä¸ªVueé¡¹ç›®</h3><p>å¦‚æœæ‰‹ä¸Šæ²¡æœ‰ï¼Œé‚£ä¹ˆç”¨ <code>vue ui</code> åˆ›å»ºä¸€ä¸ª<code>Vue</code>é¡¹ç›®/æˆ–è€…ç›´æ¥åœ¨å‘½ä»¤è¡Œé‡Œç”¨ <code>vue create</code> åˆ›å»º</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vue ui</span><br></pre></td></tr></table></figure>
<p>ç›¸ä¿¡å¤§å®¶éƒ½ä¼šï¼Œè¿™é‡Œæˆ‘å°±æ˜¯ç®€å•ç”¨<code>vue ui</code>çš„å»ºä¸€ä¸ªï¼Œè¿™é‡Œå¤§å®¶å¯ä»¥ç•¥è¿‡</p>
<p>é»˜è®¤æ‰“å¼€ä¸€ä¸ª8000ç«¯å£çš„æœåŠ¡ï¼Œä¸€ä¸ªå¯è§†åŒ–çš„UIç•Œé¢å°±å‡ºæ¥äº†</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a2e6923ef74c4f6ea63a1242f4666123~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005094817591"></p>
<blockquote>
<p>é€‰æ‹©å·¦ä¸‹è§’ æ›´å¤šâ€”-&gt;é¡¹ç›®ç®¡ç†å™¨</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/76c99d4115fc4fa59562e91cb4f75002~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005095048918"></p>
<blockquote>
<p>åˆ›å»º</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/afac3ffe606b4b46aa755acfaa838f9c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005095255377"></p>
<blockquote>
<p>é€‰æ‹©å¥½ç›®å½•ååœ¨æ­¤åˆ›å»º</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2e5f0460dcf54e77905a256fc9656569~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005095412222"></p>
<blockquote>
<p>å¡«å†™ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…ç®¡ç†æˆ‘è¿™é‡Œç”¨ npm ï¼Œç„¶åä¸‹ä¸€æ­¥</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/90b600e4a09446b6996e52bf2d466ccb~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005095517636"></p>
<blockquote>
<p>é€‰æ‹©é¢„è®¾ï¼Œæˆ‘è¿™é‡Œé€‰æ‰‹åŠ¨</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3f993f6435df4dc1acfbaba2a455f9b9~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005095738225"></p>
<blockquote>
<p>éœ€è¦å“ªäº›æ’ä»¶é€‰å“ªäº›ï¼Œæˆ‘è¿™é‡Œå°±é»˜è®¤äº†ï¼Œå› ä¸ºæ˜¯ä¸ªç®€å•çš„ä¾‹å­</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0ccff58b126f4525bc3aedae85b20d37~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005095856488"></p>
<blockquote>
<p>é€‰æ‹© Vue çš„ç‰ˆæœ¬2.x è¿˜æ˜¯ 3è¿™äº›æŒ‰ç…§ä½ çš„ä¹ æƒ¯æ¥ï¼Œå¹³æ—¶å†™ä»€ä¹ˆé€‰ä»€ä¹ˆ,ä¸‹é¢çš„é€‰é¡¹æˆ‘é€‰æ‹©çš„æ ‡å‡†</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c2c5865a163f451697b9b683f23e7c02~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005100020344"></p>
<blockquote>
<p>åˆ›å»ºé¡¹ç›®</p>
</blockquote>
<p>æˆ‘è¿™é‡Œå°±ä¸ä¿å­˜é¢„è®¾äº†ï¼Œç„¶åå°±æ˜¯æ¼«é•¿çš„ç­‰å¾…<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1e1fba4cee344604850def265dbb9951~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005100221788"></p>
<blockquote>
<p>åˆ›å»ºå®Œæ¯•åè¿è¡Œæ”¹é¡¹ç›®</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0711e3fde3644d1689b574ac2e353d5f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005102004448"></p>
<blockquote>
<p>å¯åŠ¨é¡¹ç›®</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/36896a3101db45069c8dbd833f950a0a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005102132311"></p>
<p>å°±ä¼šå¾—åˆ°ä¸€ä¸ªè¿™æ ·çš„é»˜è®¤é¡µé¢</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/33574a90ca55482faca8c36cffbb22fb~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005102159772"></p>
<p>å¥½äº†åˆ›å»ºé¡¹ç›®å®Œæ¯•ï¼Œç»§ç»­</p>
<h3 id="9-2æ·»åŠ -electron-æ’ä»¶"><a href="#9-2æ·»åŠ -electron-æ’ä»¶" class="headerlink" title="9.2æ·»åŠ  electron æ’ä»¶"></a>9.2æ·»åŠ  <code>electron</code> æ’ä»¶</h3><blockquote>
<p>åœ¨æ’ä»¶â€”&gt;æ·»åŠ æ’ä»¶ æœç´¢ <code>vue-cli-plugin-electron-builder</code>,å®‰è£…ç¬¬ä¸€ä¸ª</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5ef4ce8185e84d56b9e7378bf43633aa~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005102527050"></p>
<blockquote>
<p>æˆ‘è¿™é‡Œé»˜è®¤é€‰æ‹©electorn 13.0.0ç‰ˆæœ¬</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d0273671757f4d6285f2780955188d7a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005102834003"></p>
<blockquote>
<p>å®‰è£…å®Œæˆåä¼šå‡ºç°åœ¨å·²å®‰è£…æ’ä»¶é‡Œé¢</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/98682a2056cd495abd173a697421790b~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005103108921"></p>
<p>å½“ç„¶ä¹Ÿå¯ä»¥åœ¨ å‘½ä»¤è¡Œä¸­è¿›è¡Œå®‰è£…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vue add electron-builder</span><br></pre></td></tr></table></figure>
<h3 id="9-3è¿è¡Œ"><a href="#9-3è¿è¡Œ" class="headerlink" title="9.3è¿è¡Œ"></a>9.3è¿è¡Œ</h3><blockquote>
<p>åœ¨å½“å‰vueé¡¹ç›®ä¸‹çš„å‘½ä»¤è¡Œè¾“å…¥ä¸‹é¢çš„å‘½ä»¤è¿è¡Œ</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run electron:serve</span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1d5fc62b8e1b40eda84c32e1bd3c2080~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005103731994"></p>
<p>å¾ˆå¥½ï¼Œå·²ç»è¿è¡Œå‡ºæ¥äº†</p>
<h3 id="9-4-package-json-background-js"><a href="#9-4-package-json-background-js" class="headerlink" title="9.4 package.json``background.js"></a>9.4 <code>package.json``background.js</code></h3><p>æŸ¥çœ‹<code>package.json</code>æ–‡ä»¶æ‰¾æ‰¾ä¸»è¿›ç¨‹æ–‡ä»¶åœ¨å“ª</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0a9c7dd81b6f458bb0e26835c0c9c2b4~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005104023792"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/33301c3825a44c6a81a1dfde40a3ad0f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005104135614"></p>
<blockquote>
<p>ä¸»è¿›ç¨‹æ–‡ä»¶æ˜¯ <code>background.js</code>ï¼Œè¿™ä¸ªæ–‡ä»¶åœ¨ <code>Vueé¡¹ç›®/src/ä¸‹é¢</code></p>
</blockquote>
 <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; app, protocol, <span class="title class_">BrowserWindow</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;electron&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createProtocol &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-cli-plugin-electron-builder/lib&#x27;</span></span><br><span class="line"><span class="keyword">import</span> installExtension, &#123; <span class="variable constant_">VUEJS_DEVTOOLS</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;electron-devtools-installer&#x27;</span></span><br><span class="line"><span class="keyword">const</span> isDevelopment = process.<span class="property">env</span>.<span class="property">NODE_ENV</span> !== <span class="string">&#x27;production&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">protocol.<span class="title function_">registerSchemesAsPrivileged</span>(\[</span><br><span class="line">  &#123; <span class="attr">scheme</span>: <span class="string">&#x27;app&#x27;</span>, <span class="attr">privileges</span>: &#123; <span class="attr">secure</span>: <span class="literal">true</span>, <span class="attr">standard</span>: <span class="literal">true</span> &#125; &#125;</span><br><span class="line">\])</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">createWindow</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> win = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">800</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">600</span>,</span><br><span class="line">    <span class="attr">webPreferences</span>: &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="attr">nodeIntegration</span>: process.<span class="property">env</span>.<span class="property">ELECTRON</span>\_NODE\_INTEGRATION,</span><br><span class="line">      <span class="attr">contextIsolation</span>: !process.<span class="property">env</span>.<span class="property">ELECTRON</span>\_NODE\_INTEGRATION</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">WEBPACK</span>\_DEV\_SERVER_URL) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> win.<span class="title function_">loadURL</span>(process.<span class="property">env</span>.<span class="property">WEBPACK</span>\_DEV\_SERVER_URL)</span><br><span class="line">    <span class="keyword">if</span> (!process.<span class="property">env</span>.<span class="property">IS_TEST</span>) win.<span class="property">webContents</span>.<span class="title function_">openDevTools</span>()</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">createProtocol</span>(<span class="string">&#x27;app&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    win.<span class="title function_">loadURL</span>(<span class="string">&#x27;app://./index.html&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;window-all-closed&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (process.<span class="property">platform</span> !== <span class="string">&#x27;darwin&#x27;</span>) &#123;</span><br><span class="line">    app.<span class="title function_">quit</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;activate&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="title class_">BrowserWindow</span>.<span class="title function_">getAllWindows</span>().<span class="property">length</span> === <span class="number">0</span>) <span class="title function_">createWindow</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;ready&#x27;</span>, <span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (isDevelopment &amp;&amp; !process.<span class="property">env</span>.<span class="property">IS_TEST</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">installExtension</span>(<span class="variable constant_">VUEJS_DEVTOOLS</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Vue Devtools failed to install:&#x27;</span>, e.<span class="title function_">toString</span>())</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">createWindow</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (isDevelopment) &#123;</span><br><span class="line">  <span class="keyword">if</span> (process.<span class="property">platform</span> === <span class="string">&#x27;win32&#x27;</span>) &#123;</span><br><span class="line">    process.<span class="title function_">on</span>(<span class="string">&#x27;message&#x27;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (data === <span class="string">&#x27;graceful-exit&#x27;</span>) &#123;</span><br><span class="line">        app.<span class="title function_">quit</span>()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    process.<span class="title function_">on</span>(<span class="string">&#x27;SIGTERM&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      app.<span class="title function_">quit</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>çœ‹åˆ°ä¸Šé¢çš„ä¸»è¿›ç¨‹æ–‡ä»¶æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œä½ å¯ä»¥åƒä»¥å‰ä¸€æ ·åšä¸€äº›æ“ä½œï¼Œä½¿ç”¨nodeæ··å†™å®Œæˆä¸€äº›åŠŸèƒ½</p>
<h3 id="9-5æ‰“åŒ…"><a href="#9-5æ‰“åŒ…" class="headerlink" title="9.5æ‰“åŒ…"></a>9.5æ‰“åŒ…</h3><p>ä¸Šé¢æˆ‘ä»¬åªæ˜¯è¿è¡Œå‡ºæ¥äº†ï¼Œä¸Šäº¤çš„è½¯ä»¶ï¼Œè€å¸ˆæ€»ä¸ä¼šè¿˜ç‰¹æ„å»é…ç¯å¢ƒï¼Œç„¶å<code>npm run electron:serve</code>å§ï¼Œæ˜¾ç„¶æ˜¯ä¸å¯èƒ½çš„ï¼Œé‚£æˆ‘ä»¬ç»§ç»­è¿›è¡Œæ‰“åŒ…æˆä¸€ä¸ªå¯æ‰§è¡Œçš„æ–‡ä»¶exe</p>
<p>å‘½ä»¤è¡Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run electron:build</span><br></pre></td></tr></table></figure>
<h4 id="æ‰“åŒ…å‡ºç°çš„é—®é¢˜"><a href="#æ‰“åŒ…å‡ºç°çš„é—®é¢˜" class="headerlink" title="æ‰“åŒ…å‡ºç°çš„é—®é¢˜"></a>æ‰“åŒ…å‡ºç°çš„é—®é¢˜</h4><blockquote>
<p>æˆ‘åœ¨æ‰“åŒ…çš„æ—¶å€™ç‰¹åˆ«ä¸é¡ºåˆ©â€¦ æŸ¥æ¥æŸ¥å»åŸæ¥<code>electron</code> æ˜¯æœ‰é—®é¢˜</p>
</blockquote>
<p>æˆ‘ç»™å‡ºçš„å»ºè®®å°±æ˜¯ æŠŠ<code>node_modules</code>ç›®å½•ä¸‹çš„ <strong>electron åˆ é™¤</strong></p>
<p>ç”¨<code>cnpm</code> å®‰è£… <code>electron</code></p>
<p>å¦‚æœæ²¡æœ‰ <code>cnpm</code> å…ˆè¿›è¡Œå®‰è£…</p>
<blockquote>
<p>å…¨å±€å®‰è£…<code>cnpm</code></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line">cnpm -v</span><br></pre></td></tr></table></figure>
<blockquote>
<p>é‡æ–°å®‰è£… <code>electron</code></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cnpm i electron</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ‰“åŒ…</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">npm run <span class="attr">electron</span>:build</span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d7678cbda1804561935ae8ef6de76dcc~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005131543735"></p>
<p>æ‰“åŒ…å®Œæˆï¼Œæ‰“åŒ…çš„æ–‡ä»¶å°±æ”¾åœ¨é¡¹ç›®ä¸‹çš„ <code>dist_electron</code> é‡Œé¢</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/724e565bb55544f2875b79dcf918c8f2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005131647326"></p>
<h3 id="9-6å®‰è£…"><a href="#9-6å®‰è£…" class="headerlink" title="9.6å®‰è£…"></a>9.6å®‰è£…</h3><blockquote>
<p>åŒå‡»å°±è‡ªåŠ¨å®‰è£…äº†</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9e0725f12ac14e968284a61308834a68~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005131805110"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6c6ffdb7f54c428fb7bd774222edee60~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005131940327"></p>
<p>æ¡Œé¢ä¸Šå°±å‡ºç°è¿™ä¹ˆä¸€ä¸ªåº”ç”¨å›¾æ ‡</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/47def2592a1543b0901f34313dc75466~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005132041458"></p>
<h3 id="9-7è‡ªå®šä¹‰"><a href="#9-7è‡ªå®šä¹‰" class="headerlink" title="9.7è‡ªå®šä¹‰"></a>9.7è‡ªå®šä¹‰</h3><p>ç‚¹è¿›å»æŸ¥çœ‹æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯æ˜¯ä¸æ˜¯å¤ªlow äº†ï¼Œä¸€ç‚¹å‡»å°±æ˜¯è‡ªåŠ¨å®‰è£…ï¼Œè€Œä¸”ä½¿ç”¨çš„é»˜è®¤å›¾æ ‡</p>
<blockquote>
<p>å®‰è£…æ‰“åŒ…å·¥å…·</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cnpm i electron-builder --D</span><br></pre></td></tr></table></figure>
<h4 id="9-7-1-é¦–å…ˆæ‰¾ä¸€ä¸ª-icon-å›¾ç‰‡"><a href="#9-7-1-é¦–å…ˆæ‰¾ä¸€ä¸ª-icon-å›¾ç‰‡" class="headerlink" title="9.7.1.é¦–å…ˆæ‰¾ä¸€ä¸ª icon å›¾ç‰‡"></a>9.7.1.é¦–å…ˆæ‰¾ä¸€ä¸ª <code>icon</code> å›¾ç‰‡</h4><p>å¥½åƒæœ‰æ’ä»¶å¯ä»¥æŠŠå›¾ç‰‡è½¬ä¸ºå„ç§å¤§å°çš„<code>icon</code></p>
<p>å®‰è£…ä¸‹ï¼Œè¿™æ ·å°±ä¸ç”¨ç½‘ç«™ä¸Šè½¬å›¾ç‰‡äº†</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cnpm i electron-icon-builder</span><br></pre></td></tr></table></figure>
<p>éœ€è¦åœ¨<code>package.json</code>ä¸­<code>scripts</code>æ·»åŠ <code>build-icon</code>æŒ‡ä»¤</p>
<p><code>longzhu.jpg</code> è¿™ä¸ªå›¾ç‰‡è‡ªå·±æ‰¾çš„ å¡å¡ç½—ç‰¹ å¯ä»¥è‡ªè¡Œä¿®æ”¹</p>
<p><code>output</code> æ˜¯è¾“å‡ºæ–‡ä»¶å¤¹</p>
 <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;build-icon&quot;</span>: <span class="string">&quot;electron-icon-builder --input=./public/longzhu.jpg --output=build --flatten&quot;</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<p>å‘½ä»¤è¡Œè¾“å…¥</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run build-icon</span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ceecc86d39184d8c8d1703b4bfbe28a8~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005141605242"></p>
<p>buildå®Œæˆä¹‹åï¼Œç”Ÿæˆäº†ä¸åŒå¤§å°çš„å›¾ç‰‡</p>
<h4 id="9-7-2-vue-config-js"><a href="#9-7-2-vue-config-js" class="headerlink" title="9.7.2.vue.config.js"></a>9.7.2.vue.config.js</h4><p>å› ä¸ºæˆ‘ä»¬ä¹‹å‰å®‰è£…çš„æ’ä»¶æ˜¯ <code>vue-cli-plugin-electron-builder</code> ï¼Œè€Œä¸æ˜¯<code>electron-builder</code></p>
<p><code>electron-builder</code>æ‰“åŒ…æ™®é€šé¡¹ç›®ï¼Œ<code>build</code> é…ç½®ç›´æ¥åœ¨<code>package.json</code> é‡Œé¢å†™</p>
<p><code>vue-cli-plugin-electron-builder</code>çš„ <code>build</code> é…ç½®æ˜¯éœ€è¦åœ¨ é¡¹ç›®æ ¹ç›®å½•ä¸‹ <code>vue.config.js</code> é‡Œé¢é…ç½®</p>
<p>å¦‚æœæ²¡æœ‰è¯·æ–°å»º</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">pluginOptions</span>: &#123;</span><br><span class="line">    <span class="attr">electronBuilder</span>: &#123;</span><br><span class="line">      <span class="attr">builderOptions</span>: &#123;</span><br><span class="line">        <span class="attr">appId</span>: <span class="string">&quot;com.test.app&quot;</span>,</span><br><span class="line">        <span class="attr">productName</span>: <span class="string">&quot;Lang&quot;</span>,</span><br><span class="line">        <span class="attr">copyright</span>: <span class="string">&quot;Copyright Â© 2021&quot;</span>,</span><br><span class="line">        <span class="attr">directories</span>: &#123;</span><br><span class="line">          <span class="attr">output</span>: <span class="string">&quot;./dist&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">win</span>: &#123;</span><br><span class="line"></span><br><span class="line">          <span class="attr">icon</span>: <span class="string">&quot;./build/icons/icon.ico&quot;</span>,</span><br><span class="line">          <span class="attr">target</span>: \[</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">target</span>: <span class="string">&quot;nsis&quot;</span>,</span><br><span class="line">              <span class="attr">arch</span>: \[</span><br><span class="line">                <span class="string">&quot;x64&quot;</span>,</span><br><span class="line">                <span class="string">&quot;ia32&quot;</span></span><br><span class="line">              \]</span><br><span class="line">            &#125;</span><br><span class="line">          \]</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">nsis</span>: &#123;</span><br><span class="line">          <span class="attr">oneClick</span>: <span class="literal">false</span>,</span><br><span class="line">          <span class="attr">language</span>: <span class="string">&quot;2052&quot;</span>,</span><br><span class="line">          <span class="attr">perMachine</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="attr">allowToChangeInstallationDirectory</span>: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="9-7-3-æ‰§è¡Œæ‰“åŒ…"><a href="#9-7-3-æ‰§è¡Œæ‰“åŒ…" class="headerlink" title="9.7.3.æ‰§è¡Œæ‰“åŒ…"></a>9.7.3.æ‰§è¡Œæ‰“åŒ…</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run electron:build</span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/41fdf3c10fae49f8afccb04c8ec79a21~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005143529020"></p>
<p>OKï¼Œæ‰“åŒ…æˆåŠŸï¼</p>
<p><strong>å¯èƒ½é‡åˆ°çš„é—®é¢˜</strong></p>
<p>æ‰“åŒ…çš„è·¯ä¸Šä¸æ˜¯ä¸€å¸†é£é¡ºçš„ï¼Œåœ¨è¿™ä¸€æ­¥æ‰“åŒ…å¤±è´¥äº†ï¼Œå› ä¸ºæ‰“åŒ…çš„æ—¶å€™å»ä¸‹è½½ä¸€äº›ä¾èµ–ï¼Œç„¶åä¸‹è½½å¤±è´¥äº†</p>
<p>è§£å†³æ–¹æ³•1ï¼šæ¢¯å­</p>
<p>è§£å†³æ–¹æ³•2ï¼š <a href="https://link.juejin.cn/?target=https%3A%2F%2Fblog.csdn.net%2Fwm9028%2Farticle%2Fdetails%2F114583011" title="https://blog.csdn.net/wm9028/article/details/114583011">å¯ä»¥å‚è€ƒè¿™ä¸ª</a></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/25942115043b41e1ab4d86fbd36b72ef~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005143747806"></p>
<blockquote>
<p>æ‰“åŒ…å¥½çš„ä¸œè¥¿</p>
</blockquote>
<p>æ‰“åŒ…å¥½çš„ä¸œè¥¿æ”¾åœ¨æˆ‘ä»¬ä¹‹å‰é…ç½®çš„<code>build``output: &quot;./dist&quot;</code> //è¾“å‡ºæ–‡ä»¶è·¯å¾„</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1ac1db1992be43e2982b9ef0292e8189~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005144321420"></p>
<p>å¯ä»¥çœ‹å‡ºå›¾æ ‡å˜äº†</p>
<p><img src="https://juejin.cn/post/%E5%B0%8F%E6%B5%AA%E5%AD%A6%E4%B9%A0Electron.assets/image-20211005144400797.png" alt="image-20211005144400797"></p>
<p>æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰å®‰è£…æ–‡ä»¶å¤¹äº†</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b7e48cb6089941d4931870360c333b94~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005144559596"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f4e56d80bc164586b8379113709c42cd~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211005144749686"></p>
<p>å¥½äº†ï¼ŒåŸºç¡€çš„æ‰“åŒ…å·¥ä½œå°±è¿™ä¹ˆç»“æŸäº†ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å†™å±äºè‡ªå·±çš„è½¯ä»¶ï¼Œè¿™é‡Œåªæ˜¯ä¸€ä¸ªç®€å•çš„åº”ç”¨æ•™å­¦</p>
<h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p><code>Electron</code> çœŸçš„ä¸é”™è¯¶ï¼Œå»ºè®®å¤§å®¶å­¦ä¹ çš„æ—¶å€™å¤šçœ‹çœ‹å®˜æ–¹çš„æ–‡æ¡£ï¼Œè™½ç„¶å®˜æ–¹æ–‡æ¡£è¿˜æœ‰å¾ˆå¤šåœ°æ–¹æ²¡æœ‰ç¿»è¯‘å®Œæ•´ï¼Œä½†æ˜¯å¹¶ä¸å½±å“æˆ‘ä»¬å»å­¦ä¹ ä»–çš„çƒ­æƒ…ï¼Œæ„Ÿè§‰ç‰ˆæœ¬è¿­ä»£å¾ˆå¿«ï¼Œå®˜æ–¹æ–‡æ¡£æ˜¾å¾—åˆå¤šåˆä¹±ï¼Œå¤§å®¶å¯ä»¥åœ¨æ–‡æ¡£ä¸Šé¢æœç´¢</p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.electronjs.org%2Fdocs" title="https://www.electronjs.org/docs">Electronå®˜æ–¹æ–‡æ¡£</a></p>
<blockquote>
<p>å¾€æœŸç²¾å½©</p>
</blockquote>
<p><a href="https://juejin.cn/post/7006518993385160711" title="https://juejin.cn/post/7006518993385160711">è¿˜ä¸ä¼šVue3ï¼Ÿä¸€ç¯‡ç¬”è®°å¸¦ä½ å¿«é€Ÿå…¥é—¨</a></p>
<p><a href="https://juejin.cn/post/6999440503712251935" title="https://juejin.cn/post/6999440503712251935">è¿˜ä¸ä¼šTSï¼Ÿ å¸¦ä½  TypeScript å¿«é€Ÿå…¥é—¨</a></p>
<p><a href="https://juejin.cn/post/6994337441314242590" title="https://juejin.cn/post/6994337441314242590">å¿«é€Ÿä¸Šæ‰‹Vuex åˆ° æ‰‹å†™ç®€æ˜“ Vuex</a></p>
<p><a href="https://juejin.cn/post/6990582632270528525" title="https://juejin.cn/post/6990582632270528525">ä»äº†è§£åˆ°æ·±å…¥è™šæ‹ŸDOMå’Œå®ç°diffç®—æ³•</a></p>
<p><a href="https://juejin.cn/post/6989106100582744072" title="https://juejin.cn/post/6989106100582744072">æ‰‹å†™ä¸€ä¸ªç®€æ˜“vueå“åº”å¼å¸¦ä½ äº†è§£å“åº”å¼åŸç†</a></p>
<p><a href="https://juejin.cn/post/6988316779818778631" title="https://juejin.cn/post/6988316779818778631">ä»ä½¿ç”¨åˆ°è‡ªå·±å®ç°ç®€å•Vue Routerçœ‹è¿™ä¸ªå°±è¡Œäº†</a></p>
<p><a href="https://juejin.cn/post/6983934602196811789" title="https://juejin.cn/post/6983934602196811789">å‰ç«¯é¢è¯•å¿…ä¸å¯å°‘çš„åŸºç¡€çŸ¥è¯†ï¼Œè™½ç„¶å°‘ä½†æ˜¯ä½ ä¸èƒ½ä¸çŸ¥é“</a></p>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Electron</tag>
        <tag>æ¡Œé¢åº”ç”¨</tag>
      </tags>
  </entry>
  <entry>
    <title>å¿«é€Ÿå…¥é—¨Webpackçš„ç®€å•ä½¿ç”¨</title>
    <url>/xiaolangwiki/2022/01/02/42/</url>
    <content><![CDATA[<h2 id="å¿«é€Ÿå…¥é—¨-Webpack-çš„ç®€å•ä½¿ç”¨"><a href="#å¿«é€Ÿå…¥é—¨-Webpack-çš„ç®€å•ä½¿ç”¨" class="headerlink" title="å¿«é€Ÿå…¥é—¨ Webpack çš„ç®€å•ä½¿ç”¨"></a>å¿«é€Ÿå…¥é—¨ Webpack çš„ç®€å•ä½¿ç”¨</h2><p>åŸæ–‡ï¼š<a href="https://juejin.cn/post/7048497932647006216">https://juejin.cn/post/7048497932647006216</a></p>
<blockquote>
<p>å‰è¨€</p>
</blockquote>
<p>å¤§å®¶å¥½å‘€ï¼Œæˆ‘æ˜¯å°æµªï¼Œè¿™æ¬¡ç»™å¤§å®¶å¸¦æ¥çš„æ˜¯æˆ‘ä»¥å‰å­¦ä¹ <code>webpack</code>å¦‚ä½•ä½¿ç”¨çš„æ—¶å€™çš„å­¦ä¹ æ€»ç»“ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©åˆ°æœ‰éœ€è¦çš„æœ‹å‹ï¼Œåœ¨å­¦æ ¡é‡Œçš„äº‹æŒºå¤šçš„ï¼Œæ‰€ä»¥å¥½ä¹…éƒ½æ²¡æœ‰åœ¨æ˜é‡‘å‘æ–‡ç« ã€‚è¦æ”¾å‡äº†ï¼Œç»§ç»­åšæŒå­¦ä¹ ï¼Œåˆ·åˆ°æ—ä¸‰å¿ƒå¤§ä½¬çš„ B ç«™è§†é¢‘ï¼Œä¸‰å¿ƒå¤§ä½¬ä»–è‡ªå·±å†™æ–‡ç« ç„¶åå»åˆ†äº«ç»™ä»–äººï¼Œæ˜¯ä¸€ç§å¿«é€Ÿå­¦ä¹ çš„é€”å¾„ï¼Œæˆ‘è®¤ä¸ºå¯¹äºæˆ‘æ¥è¯´ä¹Ÿæ˜¯ååˆ†æ­£ç¡®ï¼Œåœ¨åˆ†äº«çš„åŒæ—¶è‡ªå·±å°è±¡ä¹Ÿä¼šæ·±åˆ»</p>
<p><strong>Webpack ç®€ä»‹</strong>ï¼š</p>
<blockquote>
<p>Webpack æ˜¯ç›®å‰ä¸»æµçš„å‰ç«¯å·¥ç¨‹åŒ–è§£å†³æ–¹æ¡ˆä¹‹ä¸€</p>
<p><strong>ä¸»è¦åŠŸèƒ½</strong>ï¼šå®ƒæä¾›äº†å‹å¥½çš„å‰ç«¯æ¨¡å—åŒ–å¼€å‘æ”¯æŒï¼Œä»¥åŠä»£ç å‹ç¼©æ··æ·†ã€å¤„ç†æµè§ˆå™¨ç«¯ JavaScript çš„å…¼å®¹æ€§ã€æ€§ èƒ½ä¼˜åŒ–ç­‰å¼ºå¤§çš„åŠŸèƒ½ã€‚</p>
<p><strong>å¥½å¤„</strong>ï¼šè®©ç¨‹åºå‘˜æŠŠå·¥ä½œçš„é‡å¿ƒæ”¾åˆ°å…·ä½“åŠŸèƒ½çš„å®ç°ä¸Šï¼Œæé«˜äº†å‰ç«¯å¼€å‘æ•ˆç‡å’Œé¡¹ç›®çš„å¯ç»´æŠ¤æ€§ã€‚ æ³¨æ„ï¼šç›®å‰ Vueï¼ŒReact ç­‰å‰ç«¯é¡¹ç›®ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯åŸºäº webpack è¿›è¡Œå·¥ç¨‹åŒ–å¼€å‘çš„</p>
</blockquote>
<h2 id="å‰æœŸå‡†å¤‡"><a href="#å‰æœŸå‡†å¤‡" class="headerlink" title="å‰æœŸå‡†å¤‡"></a>å‰æœŸå‡†å¤‡</h2><p>é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">project_name</span><br><span class="line">|â€”â€” src</span><br><span class="line">|    |â€”â€” index.js</span><br><span class="line">|â€”â€” index.html</span><br><span class="line">|â€”â€” package.json</span><br><span class="line">|â€”â€” webpack.config.js</span><br><span class="line">|â€”â€” babel.config.js</span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>åœ¨é¡¹ç›®ä¸­å®‰è£… webpack + webpack-cliï¼Œä½¿ç”¨ <code>-D</code> ç›¸å½“äº <code>--save-dev</code></p>
<p><code>-D</code> å†™å…¥åˆ°<code>package.json</code>ä¸­ <code>devDependencies</code>è¿›è¡Œæ·»åŠ ï¼Œè¡¨ç¤ºæˆ‘ä»¬åªæœ‰åœ¨å¼€å‘é˜¶æ®µæ‰ä½¿ç”¨åˆ°</p>
<p><code>-S</code> ç›¸å½“äº <code>--save</code> å†™å…¥åˆ° <code>dependencies</code> å¯¹è±¡ï¼Œè¡¨ç¤ºå¼€å‘ç¯å¢ƒå’Œç”Ÿäº§éƒ½ä½¿ç”¨</p>
<p>å¦‚æœé¡¹ç›®æ²¡æœ‰ <code>package.json</code> ä½¿ç”¨ <code>npm init -y</code> å¿«é€Ÿé…ç½®ä¸€ä¸‹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install webpack@5.42.1 webpack-cli@4.9.0 -D</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;webpack&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.42.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;webpack-cli&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.9.0&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®å¯åŠ¨å‘½ä»¤"><a href="#é…ç½®å¯åŠ¨å‘½ä»¤" class="headerlink" title="é…ç½®å¯åŠ¨å‘½ä»¤"></a>é…ç½®å¯åŠ¨å‘½ä»¤</h3><p>åœ¨<code>package.json</code>é…ç½® <code>scripts</code></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å‘½ä»¤è¡Œæˆ‘ä»¬å°±ä½¿ç”¨ <code>npm run dev</code> æ¥å¯åŠ¨ <code>webpack</code>å‘½ä»¤</p>
<h2 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h2><h3 id="åˆ›å»º-webpack-config-js-æ–‡ä»¶"><a href="#åˆ›å»º-webpack-config-js-æ–‡ä»¶" class="headerlink" title="åˆ›å»º webpack.config.js æ–‡ä»¶"></a>åˆ›å»º webpack.config.js æ–‡ä»¶</h3><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­ï¼Œåˆ›å»ºåä¸º webpack.config.js çš„ webpack é…ç½®æ–‡ä»¶ï¼Œwebpack åœ¨çœŸæ­£å¼€å§‹æ‰“åŒ…æ„å»ºä¹‹å‰ï¼Œä¼šå…ˆè¯»å–è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œä»è€ŒåŸºäºç»™å®šçš„é…ç½®ï¼Œå¯¹é¡¹ç›®è¿›è¡Œæ‰“åŒ…ã€‚</p>
<h3 id="è®¾ç½®-mode"><a href="#è®¾ç½®-mode" class="headerlink" title="è®¾ç½® mode"></a>è®¾ç½® mode</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><code>mode</code> å¯é€‰å€¼æœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<blockquote>
<p><code>development</code></p>
<ul>
<li>å¼€å‘ç¯å¢ƒ</li>
<li>ä¸ä¼šå¯¹æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶è¿›è¡Œä»£ç å‹ç¼©å’Œæ€§èƒ½ä¼˜åŒ–</li>
<li>æ‰“åŒ…é€Ÿåº¦å¿«ï¼Œé€‚åˆåœ¨å¼€å‘é˜¶æ®µä½¿ç”¨</li>
</ul>
<p><code>production</code></p>
<ul>
<li>ç”Ÿäº§ç¯å¢ƒ</li>
<li>ä¼šå¯¹æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶è¿›è¡Œä»£ç å‹ç¼©å’Œæ€§èƒ½ä¼˜åŒ–</li>
<li>æ‰“åŒ…é€Ÿåº¦å¾ˆæ…¢ï¼Œä»…é€‚åˆåœ¨é¡¹ç›®å‘å¸ƒé˜¶æ®µä½¿ç”¨</li>
</ul>
</blockquote>
<h3 id="è®¾ç½®å…¥å£å’Œå‡ºå£"><a href="#è®¾ç½®å…¥å£å’Œå‡ºå£" class="headerlink" title="è®¾ç½®å…¥å£å’Œå‡ºå£"></a>è®¾ç½®å…¥å£å’Œå‡ºå£</h3><p>webpack 4.x å’Œ 5.x ä¸­é»˜è®¤çº¦å®šï¼š</p>
<ul>
<li>é»˜è®¤å…¥å£æ–‡ä»¶ä¸º <code>src -&gt; index.js</code></li>
<li>é»˜è®¤è¾“å‡ºæ–‡ä»¶ <code>dist -&gt; main.js</code></li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥åœ¨<code>webpack.config.js</code>ä¸­è‡ªå®šä¹‰</p>
<p><code>entry</code>ï¼šæ‰“åŒ…çš„å…¥å£</p>
<p><code>output</code>ï¼šæ‰“åŒ…çš„å‡ºå£</p>
<p>æˆ‘ä»¬å°±å¯ä»¥åƒä¸‹é¢ä¸€æ ·è®¾ç½®</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/index.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: <span class="string">&quot;./dist/mian.js&quot;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>è¿˜æ˜¯è¿™æ ·å†™æ¯”è¾ƒå¥½ï¼Œä½¿ç”¨<code>path</code>æ¨¡å—æ¥æ‹¼æ¥è·¯å¾„</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">  <span class="attr">entry</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&quot;./src/index.js&quot;</span>),</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&quot;./dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;js/bundle.js&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="webpack-dev-server-ç®€å•ä½¿ç”¨"><a href="#webpack-dev-server-ç®€å•ä½¿ç”¨" class="headerlink" title="webpack-dev-server ç®€å•ä½¿ç”¨"></a>webpack-dev-server ç®€å•ä½¿ç”¨</h2><p>å½“ä¿®æ”¹äº†æºä»£ç ï¼Œ<code>webpack</code> ä¼šè‡ªåŠ¨è¿›è¡Œé¡¹ç›®çš„æ‰“åŒ…å’Œæ„å»ºï¼Œè¿™ä¸ªå°±ä¸ç”¨æ¯æ¬¡è‡ªå·±å»<code>npm run dev</code>äº†</p>
<p><code>webpack-dev-server</code> æä¾›çƒ­æ›´æ–°çš„å¼€å‘æœåŠ¡å™¨</p>
<h3 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install webpack-dev-server@3.11.2 -D</span><br></pre></td></tr></table></figure>
<p>å®‰è£…å®Œæ¯•ä¹‹åå¯é€šè¿‡ <code>webpack serve</code> å¯åŠ¨</p>
<h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>æ–¹ä¾¿<code>webpack-dev-server</code>çš„å¯åŠ¨æˆ‘ä»¬åœ¨<code>package.json</code>çš„<code>scripts</code>æ–°åŠ ä¸€ä¸ªå‘½ä»¤</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;serve&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack serve&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>
<p>åœ¨<code>webpack.config.js</code>é…ç½®ç«¯å£ï¼Œ<code>devServer</code>å¯é…ç½®çš„é€‰é¡¹æœ‰å¾ˆå¤šï¼Œæˆ‘åœ¨è¿™é‡Œå°±é…ç½®ä¸€ä¸ªç«¯å£</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">port</span>: <span class="number">8080</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>devServer.compressï¼Œå¯ç”¨ gzip å‹ç¼©ã€‚</p>
<p>devServer.contentBaseï¼Œå‘Šè¯‰æœåŠ¡å™¨ä»å“ªé‡Œæä¾›å†…å®¹ã€‚åªæœ‰åœ¨ä½ æƒ³è¦æä¾›é™æ€æ–‡ä»¶æ—¶æ‰éœ€è¦ã€‚</p>
<p>devServer.hostï¼ŒæŒ‡å®š hostã€‚ä½¿ç”¨ 0.0.0.0 å¯ä»¥è®©å±€åŸŸç½‘å†…å¯è®¿é—®ã€‚</p>
<p>devServer.hotï¼Œå¯ç”¨ webpack çš„æ¨¡å—çƒ­æ›¿æ¢ç‰¹æ€§ï¼ˆHot Module Replacementï¼‰ã€‚</p>
<p>devServer.hotOnlyï¼Œæ„å»ºå¤±è´¥çš„æ—¶å€™æ˜¯å¦ä¸å…è®¸å›é€€åˆ°ä½¿ç”¨åˆ·æ–°ç½‘é¡µã€‚</p>
<p>devServer.inlineï¼Œæ¨¡å¼åˆ‡æ¢ã€‚é»˜è®¤ä¸ºå†…è”æ¨¡å¼ï¼Œä½¿ç”¨ false åˆ‡æ¢åˆ° iframe æ¨¡å¼ã€‚</p>
<p>devServer.openï¼Œå¯åŠ¨ webpack-dev-server åæ˜¯å¦ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€é¦–é¡µã€‚</p>
<p>devServer.overlayï¼Œæ˜¯å¦å…è®¸ä½¿ç”¨å…¨å±è¦†ç›–çš„æ–¹å¼æ˜¾ç¤ºç¼–è¯‘é”™è¯¯ã€‚é»˜è®¤ä¸å…è®¸</p>
<p>devServer.portï¼Œç›‘å¬ç«¯å£å·ã€‚é»˜è®¤ 8080ã€‚</p>
<p>devServer.proxyï¼Œä»£ç†ï¼Œå¯¹äºå¦å¤–æœ‰å•ç‹¬çš„åç«¯å¼€å‘æœåŠ¡å™¨ API æ¥è¯´æ¯”è¾ƒé€‚åˆã€‚</p>
<p>devServer.publicPathï¼Œè®¾ç½®å†…å­˜ä¸­çš„æ‰“åŒ…æ–‡ä»¶çš„è¾“å‡ºç›®å½•ã€‚åŒºåˆ«äº output.publicPathã€‚</p>
</blockquote>
<p>ä¿®æ”¹åä½¿ç”¨ <code>npm run serve</code> è¿›è¡Œé¡¹ç›®çš„æ‰“åŒ…</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/05445615b7d24fda9a42568be26c67ff~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211225133914336"></p>
<p>æ‰“åŒ…å®Œæ¯•åï¼Œå¯åŠ¨ä¸€ä¸ªå®æ—¶æ‰“åŒ…çš„ <code>http</code> æœåŠ¡å™¨ï¼Œæç¤ºæˆ‘ä»¬è®¿é—® <code>http://localhost:8080/</code>ï¼Œè®¿é—®ä¹‹åå°±å¯ä»¥æŸ¥çœ‹æˆ‘ä»¬é¡µé¢æ•ˆæœ</p>
<h3 id="æ‰“åŒ…çš„æ–‡ä»¶"><a href="#æ‰“åŒ…çš„æ–‡ä»¶" class="headerlink" title="æ‰“åŒ…çš„æ–‡ä»¶"></a>æ‰“åŒ…çš„æ–‡ä»¶</h3><p>æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶å­˜æ”¾åˆ°äº†å†…å­˜ä¸­ï¼Œå› ä¸ºå†…å­˜æ›´å¿«ï¼Œæé«˜å®æ—¶æ‰“åŒ…çš„æ€§èƒ½ï¼Œæ‰€ä»¥ä¸Šé¢è®¾ç½®çš„<code>output</code>çš„è¾“å‡ºè·¯å¾„æ˜¯é’ˆå¯¹<strong>æ²¡æœ‰å®‰è£…</strong><code>webpack-dev-server</code>æ¥è¯´çš„</p>
<p>å¦‚ä½•è®¿é—®æˆ‘ä»¬æ‰“åŒ…å¥½çš„<code>bundel.js</code>å‘¢ï¼Œå› ä¸º <code>webpack-dev-server</code> å¼€å¯äº†ä¸€ä¸ªæœåŠ¡å™¨ï¼Œ<code>/</code>æ˜¯é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨<strong>åœ°å€æ </strong>å°±èƒ½è®¿é—®åˆ°<code>bundle.js</code></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/898d1a90f1e04ee8ae218ee1fc5a937d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211225135310863"></p>
<h2 id="æ’ä»¶-plugin"><a href="#æ’ä»¶-plugin" class="headerlink" title="æ’ä»¶ plugin"></a>æ’ä»¶ plugin</h2><p>é€šè¿‡å®‰è£…å’Œé…ç½®ç¬¬ä¸‰æ–¹çš„æ’ä»¶ï¼Œå¯ä»¥æ‹“å±• <code>webpack</code> ä½¿å®ƒæ›´å¼ºå¤§</p>
<h3 id="html-webpack-plugin"><a href="#html-webpack-plugin" class="headerlink" title="html-webpack-plugin"></a>html-webpack-plugin</h3><p>è¿™ä¸ªæ’ä»¶æˆ‘ä»¬ä¼šç»å¸¸ä½¿ç”¨åˆ°å®ƒï¼Œå°†å…¬å…±çš„<code>css</code>ï¼Œ<code>js</code>æ–‡ä»¶æ’å…¥åˆ° html ä¸­ï¼Œå¯ä»¥å‡å°‘è¯·æ±‚æ¬¡æ•°ï¼Œè¾¾åˆ°ä¼˜åŒ–çš„æ•ˆæœï¼Œä»¥é€šè¿‡æ­¤æ’ä»¶è‡ªå®šåˆ¶ <code>index.html</code> é¡µé¢çš„å†…å®¹ã€‚</p>
<p>HTML æ’ä»¶åœ¨ç”Ÿæˆçš„ <code>index.html</code> é¡µé¢ï¼Œè‡ªåŠ¨æ³¨å…¥äº†æ‰“åŒ…çš„ <code>bundle.js</code> æ–‡ä»¶</p>
<h4 id="å®‰è£…-2"><a href="#å®‰è£…-2" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install html-webpack-plugin@5.3.2 -D</span><br></pre></td></tr></table></figure>
<h4 id="é…ç½®-1"><a href="#é…ç½®-1" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>åœ¨ <code>webpack.config.js</code> çš„ <code>plugins</code> è¿›è¡Œé…ç½®</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="attr">plugins</span>: \[</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">template</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;./src/index.html&#x27;</span>),</span><br><span class="line">      <span class="attr">filename</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;./dist/index.html&#x27;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">  \],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>HtmlWebpackPlugin</code>æœ‰å¾ˆå¤šå¯é€‰çš„å‚æ•°ï¼Œæˆ‘å°±è¯´ä¸‹é¢ä¸‰ä¸ªå¸¸ç”¨çš„</p>
<blockquote>
<p><strong><code>title</code></strong>: ç”Ÿæˆçš„ html æ–‡æ¡£çš„æ ‡é¢˜ã€‚é…ç½®è¯¥é¡¹ï¼Œå®ƒå¹¶ä¸ä¼šæ›¿æ¢æŒ‡å®šæ¨¡æ¿æ–‡ä»¶ä¸­çš„ title å…ƒç´ çš„å†…å®¹</p>
<p><strong><code>template</code></strong>: æœ¬åœ°æ¨¡æ¿æ–‡ä»¶çš„ä½ç½®ï¼Œæ”¯æŒåŠ è½½å™¨(å¦‚ handlebarsã€ejsã€undersoreã€html ç­‰)</p>
<p><strong><code>filename</code></strong>ï¼šè¾“å‡ºæ–‡ä»¶çš„æ–‡ä»¶åç§°ï¼Œé»˜è®¤ä¸º<strong>index.html</strong>ï¼Œä¸é…ç½®å°±æ˜¯è¯¥æ–‡ä»¶åï¼›æ­¤å¤–ï¼Œè¿˜å¯ä»¥ä¸ºè¾“å‡ºæ–‡ä»¶æŒ‡å®šç›®å½•ä½ç½®ï¼ˆä¾‹å¦‚â€™./dist/index.htmlâ€™ï¼‰</p>
</blockquote>
<h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><p>è¿è¡Œå‘½ä»¤ <code>npm run dev</code> å°±å¯ä»¥çœ‹è§æ‰“åŒ…å®Œæˆ</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b66e1783df734f88a0b9c76e1f1d0005~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211225142229881"></p>
<p>å¦‚æœæ˜¯ç”¨ <code>npm run serve</code> å°±ä¸ä¼šæœ‰è¿™ä¸¤ä¸ªï¼Œè€Œæ˜¯éƒ½åœ¨å†…å­˜ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åœ°å€æ æŸ¥çœ‹</p>
<h3 id="clean-webpack-plugin"><a href="#clean-webpack-plugin" class="headerlink" title="clean-webpack-plugin"></a>clean-webpack-plugin</h3><p>æ—¶è‡ªåŠ¨æ¸…ç†æ‰ dist ç›®å½•ä¸­çš„æ—§æ–‡ä»¶</p>
<h4 id="å®‰è£…-3"><a href="#å®‰è£…-3" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install clean-webpack-plugin@3.0.0 -D</span><br></pre></td></tr></table></figure>
<h4 id="é…ç½®-2"><a href="#é…ç½®-2" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>åœ¨ <code>webpack.config.js</code> çš„ <code>plugins</code> è¿›è¡Œé…ç½®</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">ClenWebpackPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">plugins</span>: \[</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">ClenWebpackPlugin</span>(),</span><br><span class="line">  \],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åŠ è½½å™¨-loader"><a href="#åŠ è½½å™¨-loader" class="headerlink" title="åŠ è½½å™¨ loader"></a>åŠ è½½å™¨ loader</h2><p>é <code>.js</code> åç¼€æ¨¡å—<code>webpack</code>é»˜è®¤å¤„ç†ä¸äº†åªèƒ½ç†è§£ <code>JavaScript</code> å’Œ <code>JSON</code> æ–‡ä»¶ï¼Œéœ€è¦è°ƒç”¨<code>loader</code>åŠ è½½å™¨æ‰å¯ä»¥æ­£å¸¸æ‰“åŒ…</p>
<p><code>loader</code> åŠ è½½å™¨çš„ä½œç”¨ï¼š<strong>å¯¼å‡ºä¸ºå‡½æ•°çš„ <code>JavaScript</code> æ¨¡å—</strong>ã€‚æ¯”å¦‚ï¼š</p>
<blockquote>
<ul>
<li>css-loader æ‰“åŒ…å¤„ç† .css ç›¸å…³çš„æ–‡ä»¶</li>
<li>less-loader æ‰“åŒ…å¤„ç† .less ç›¸å…³çš„æ–‡ä»¶</li>
<li>babel-loader æ‰“åŒ…å¤„ç† webpack æ— æ³•å¤„ç†çš„é«˜çº§ js è¯­æ³•</li>
</ul>
</blockquote>
<h3 id="loader-è°ƒç”¨æµç¨‹"><a href="#loader-è°ƒç”¨æµç¨‹" class="headerlink" title="loader è°ƒç”¨æµç¨‹"></a>loader è°ƒç”¨æµç¨‹</h3><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5ce4b9fc6f334ca6a27cfb9a444f03d4~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20211225143748510"></p>
<h3 id="æ‰“åŒ…-css"><a href="#æ‰“åŒ…-css" class="headerlink" title="æ‰“åŒ… css"></a>æ‰“åŒ… css</h3><h4 id="å®‰è£…-4"><a href="#å®‰è£…-4" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i style-loader@3.0.0 css-loader@5.2.6 -D</span><br></pre></td></tr></table></figure>
<h4 id="é…ç½®-3"><a href="#é…ç½®-3" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>å…¶ä¸­ï¼Œ<code>test</code> è¡¨ç¤ºåŒ¹é…çš„æ–‡ä»¶ç±»å‹ï¼ˆç”¨æ­£åˆ™ï¼‰ï¼Œ <code>use</code> è¡¨ç¤ºå¯¹åº”è¦è°ƒç”¨çš„ <code>loader</code> æ³¨æ„ï¼š</p>
<ul>
<li><code>use</code> æ•°ç»„ä¸­æŒ‡å®šçš„ <code>loader</code> é¡ºåºæ˜¯å›ºå®šçš„</li>
<li><code>loader</code>è°ƒç”¨é¡ºåºæ˜¯ï¼šä»å³å¾€å·¦</li>
</ul>
<p>åœ¨ <code>webpack.config.js</code> çš„ <code>module</code> è¿›è¡Œé…ç½®</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: \[</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: \[<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>\],</span><br><span class="line">      &#125;,</span><br><span class="line">    \],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ‰“åŒ…-less"><a href="#æ‰“åŒ…-less" class="headerlink" title="æ‰“åŒ… less"></a>æ‰“åŒ… less</h3><h4 id="å®‰è£…-5"><a href="#å®‰è£…-5" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i less-loader@10.0.1 less@4.1.1 -D</span><br></pre></td></tr></table></figure>
<h4 id="é…ç½®-4"><a href="#é…ç½®-4" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>åœ¨ <code>webpack.config.js</code> çš„ <code>module</code> è¿›è¡Œé…ç½®</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  //...</span><br><span class="line">  module: &#123;</span><br><span class="line">    rules: \[</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="built_in">test</span>: /\\.less$/,</span><br><span class="line">        use: \[<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>,<span class="string">&#x27;less-loader\],</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">    \],</span></span><br><span class="line"><span class="string">  &#125;,</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä»–çš„ css æ‰“åŒ…å¤„ç†ä¹Ÿä¸€æ ·å®‰è£…æŒ‡å®šçš„åŠ è½½å™¨</p>
<h3 id="æ‰“åŒ…æ–‡ä»¶"><a href="#æ‰“åŒ…æ–‡ä»¶" class="headerlink" title="æ‰“åŒ…æ–‡ä»¶"></a>æ‰“åŒ…æ–‡ä»¶</h3><p><code>loader</code>é™¤äº†èƒ½æ‰“åŒ…<code>css</code>çš„ä¹‹å¤–ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>file-loader``url-loader</code>è¿˜å¯ä»¥å¯¹<code>url</code>å¼•ç”¨çš„å›¾ç‰‡è¿›è¡Œå¤„ç†</p>
<h4 id="å®‰è£…-6"><a href="#å®‰è£…-6" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i url-loader@4.1.1 file-loader@6.2.0 -D</span><br></pre></td></tr></table></figure>
<h4 id="é…ç½®-5"><a href="#é…ç½®-5" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>åœ¨ <code>webpack.config.js</code> çš„ <code>module</code> è¿›è¡Œé…ç½®</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: \[</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\\.jpg|png|gif$/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">           	<span class="attr">options</span>: &#123;</span><br><span class="line">                <span class="attr">limit</span>: <span class="number">77777</span>,</span><br><span class="line">                <span class="attr">outputPath</span>: <span class="string">&#x27;image&#x27;</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">    \],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>options</code>æ˜¯ <code>loader</code> çš„å‚æ•°é¡¹ï¼š</p>
<p><code>limit</code> ç”¨æ¥æŒ‡å®šå›¾ç‰‡çš„å¤§å°ï¼Œå•ä½æ˜¯å­—èŠ‚ï¼ˆbyteï¼‰åªæœ‰ â‰¤ limit å¤§å°çš„å›¾ç‰‡ï¼Œæ‰ä¼šè¢«è½¬ä¸º base64 æ ¼å¼çš„å›¾ç‰‡</p>
<p><code>outputPath</code>:æ˜¯æŒ‡å®šçš„å­˜å‚¨æ–‡ä»¶å¤¹ <code>dist/image</code> æŠŠå›¾ç‰‡æ–‡ä»¶ç»Ÿä¸€ç”Ÿæˆåˆ° image ç›®å½•ä¸­</p>
</blockquote>
<h3 id="babel-loader-ç®€å•ä½¿ç”¨"><a href="#babel-loader-ç®€å•ä½¿ç”¨" class="headerlink" title="babel-loader ç®€å•ä½¿ç”¨"></a>babel-loader ç®€å•ä½¿ç”¨</h3><p>å€ŸåŠ©äº <code>babel-loader</code> è¿›è¡Œæ‰“åŒ…å¤„ç† js ä¸­çš„é«˜çº§è¯­æ³•</p>
<h4 id="å®‰è£…-7"><a href="#å®‰è£…-7" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i babel-loader@8.2.2 @babel/core@7.14.6 @babel/plugin-proposal-decorators@7.14.5 -D</span><br></pre></td></tr></table></figure>
<h4 id="é…ç½®-6"><a href="#é…ç½®-6" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>åœ¨ <code>webpack.config.js</code> çš„ <code>module</code> è¿›è¡Œé…ç½®</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: \[</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\\.js$/</span>,</span><br><span class="line">        <span class="attr">use</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span></span><br><span class="line">      &#125;,</span><br><span class="line">    \],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šè®°å¾—ä½¿ç”¨<code>exclude</code>æ’é™¤æ‰ <code>/node_modules/</code>ä¸‹é¢çš„æ¨¡å—</p>
</blockquote>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»º <code>babel.config.js</code> æ–‡ä»¶è¿›è¡Œé…ç½®</p>
<p>å£°æ˜ <code>babel</code> å¯ç”¨çš„æ’ä»¶</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: \[\[<span class="string">&#x27;@babel/plugin-proposal-decorators&#x27;</span>, &#123; <span class="attr">legacy</span>: <span class="literal">true</span> &#125;\]\],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ‰“åŒ…å‘å¸ƒ"><a href="#æ‰“åŒ…å‘å¸ƒ" class="headerlink" title="æ‰“åŒ…å‘å¸ƒ"></a>æ‰“åŒ…å‘å¸ƒ</h2><p>å¼€å‘ç¯å¢ƒæ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶ä¸ä¼šè¿›è¡Œä»£ç å‹ç¼©å’Œæ€§èƒ½ä¼˜åŒ–ï¼Œè€Œä¸”å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ‰“åŒ…å‘å¸ƒ</p>
<p>åœ¨ <code>package.json</code>çš„<code>scripts</code>ä¸­æ–°å¢</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;build&quot;</span>: <span class="string">&quot;webpack --mode production&quot;</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>ä¹‹åä½¿ç”¨ <code>npm run build</code> å°±ç›´æ¥æ‰“åŒ…å‘å¸ƒäº†ï¼Œè¿™ä¸ª <code>--model</code> æ˜¯ <code>production</code> ä»£è¡¨ç”Ÿäº§ç¯å¢ƒï¼Œä¼šå¯¹æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶ è¿›è¡Œä»£ç å‹ç¼©å’Œæ€§èƒ½ä¼˜åŒ–ã€‚ è¿™é‡Œè¦†ç›– <code>webpack.config.js</code> ä¸­çš„ <code>model</code> é€‰é¡¹</p>
<h2 id="webpack-åˆ›å»º-Vue-é¡¹ç›®"><a href="#webpack-åˆ›å»º-Vue-é¡¹ç›®" class="headerlink" title="webpack åˆ›å»º Vue é¡¹ç›®"></a>webpack åˆ›å»º Vue é¡¹ç›®</h2><p>å…¶å®å¤§å®¶ä½¿ç”¨ <code>vue-cli</code> å’Œ <code>vue ui</code> æ­å»ºå‡ºæ¥çš„<code>vue</code>é¡¹ç›®<code>webpack</code>éƒ½å¸®æˆ‘ä»¬é…ç½®å¥½äº†ï¼Œè¿™é‡Œæˆ‘ä»‹ç»ä¸‹å¦‚ä½•ç”¨ <code>webpack</code> åˆ›å»º <code>vue</code> é¡¹ç›®ã€‚</p>
<h3 id="åˆå§‹åŒ–é¡¹ç›®ç›®å½•"><a href="#åˆå§‹åŒ–é¡¹ç›®ç›®å½•" class="headerlink" title="åˆå§‹åŒ–é¡¹ç›®ç›®å½•"></a>åˆå§‹åŒ–é¡¹ç›®ç›®å½•</h3><p>å»ºç«‹é¡¹ç›®æ–‡ä»¶å¤¹ä¹‹ååˆå§‹åŒ–<code>package.json</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º webpack é…ç½®æ–‡ä»¶ <code>webpack.config.js</code> åœ¨çœŸæ­£çš„å¼€å‘ä¸­åˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒï¼Œè¿™é‡Œä¸ºäº†æ–¹ä¾¿å°±åªå†™ä¸€ä¸ªã€‚</p>
<p><code>index.js</code>:å…¥å£æ–‡ä»¶</p>
<p><code>index.html</code>:å…¥å£æ–‡ä»¶æ¨¡æ¿</p>
<p><code>babel.config.js</code>ï¼šbabel é…ç½®æ–‡ä»¶ï¼ˆå…ˆåˆ›å»ºä¹‹ååœ¨è¯´ï¼‰</p>
<p>é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">project_name</span><br><span class="line">|â€”â€” src</span><br><span class="line">|    |â€”â€” index.js</span><br><span class="line">|    |â€”â€” App.vue</span><br><span class="line">|â€”â€” index.html</span><br><span class="line">|â€”â€” package.json</span><br><span class="line">|â€”â€” webpack.config.js</span><br><span class="line">|â€”â€” babel.config.js</span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…é…ç½®-webpack-ç›¸å…³"><a href="#å®‰è£…é…ç½®-webpack-ç›¸å…³" class="headerlink" title="å®‰è£…é…ç½® webpack ç›¸å…³"></a>å®‰è£…é…ç½® webpack ç›¸å…³</h3><p>å®‰è£… <code>webpack``webpack-cli``webpack-dev-server</code> ä¾èµ–</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install webpack@5.42.1 webpack-cli@4.9.0 webpack-dev-server@3.11.2 -D</span><br></pre></td></tr></table></figure>
<p>é…ç½® <code>package.json</code></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;serve&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack-dev-server --open --hot&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack --mode=development --progress --hide-modules&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>
<p>é…ç½® <code>webpack.config.js</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">  <span class="attr">entry</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&quot;./src/index.js&quot;</span>),</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&quot;./dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;js/bundle.js&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">contentBase</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&quot;./dist&quot;</span>),</span><br><span class="line">    <span class="attr">port</span>: <span class="number">8080</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…é…ç½®-Vue-ç›¸å…³"><a href="#å®‰è£…é…ç½®-Vue-ç›¸å…³" class="headerlink" title="å®‰è£…é…ç½® Vue ç›¸å…³"></a>å®‰è£…é…ç½® <code>Vue</code> ç›¸å…³</h3><p>å®‰è£… <code>vue</code> éœ€è¦çš„ä¾èµ– <code>vue-loader``vue-template-compiler</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install vue-loader vue-template-compiler -D</span><br></pre></td></tr></table></figure>
<p>å¦‚æœé¡¹ç›®æ²¡æœ‰ <code>vue</code> è®°å¾—è£… <code>vue</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install vue</span><br></pre></td></tr></table></figure>
<p>é…ç½® <code>webpack.config.js</code></p>
<blockquote>
<p>æ³¨æ„è¦å¼•å…¥ <code>VueLoaderPlugin</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">VueLoaderPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;vue-loader/lib/plugin&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"></span><br><span class="line"> <span class="attr">module</span>: &#123;</span><br><span class="line">      <span class="attr">rules</span>: \[</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/\\.vue$/</span>,</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;vue-loader&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">      \]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: \[</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">VueLoaderPlugin</span>()</span><br><span class="line">  \]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…æ’ä»¶"><a href="#å®‰è£…æ’ä»¶" class="headerlink" title="å®‰è£…æ’ä»¶"></a>å®‰è£…æ’ä»¶</h3><p><code>html-webpack-plugin</code>å’Œ<code>clean-webpack-plugin</code>æ’ä»¶ï¼Œè¿™ä¸¤ä¸ªæ’ä»¶æˆ‘ä»¬éƒ½ä¸Šé¢éƒ½æœ‰ä»‹ç»è¿‡</p>
<p>å®‰è£…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install html-webpack-plugin@5.3.2 clean-webpack-plugin@3.0.0 -D</span><br></pre></td></tr></table></figure>
<p>é…ç½® <code>webpack.config.js</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">CleanWebpackPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"></span><br><span class="line">	<span class="attr">plugins</span>: \[</span><br><span class="line">		<span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">     		<span class="attr">template</span>:<span class="string">&#x27;./index.html&#x27;</span>,</span><br><span class="line">		&#125;),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CleanWebpackPlugin</span>(),</span><br><span class="line">	\],</span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…åŠ è½½å™¨"><a href="#å®‰è£…åŠ è½½å™¨" class="headerlink" title="å®‰è£…åŠ è½½å™¨"></a>å®‰è£…åŠ è½½å™¨</h3><p><code>style-loader</code>ã€<code>css-loader</code>ã€ <code>file-loader``url-loader</code>ç­‰ç­‰æˆ‘ä»¬ä¸Šé¢éƒ½æœ‰ä»‹ç»å¦‚æœéœ€è¦<code>sass</code>ã€<code>less</code>åŠ è½½å™¨å¯è‡ªè¡Œå®‰è£…ï¼Œè¿™é‡Œæˆ‘å®‰è£…çš„æ˜¯<code>sass</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install style-loader@3.0.0 css-loader@5.2.6 url-loader@4.1.1 file-loader@6.2.0 sass-loader node-sass -D</span><br></pre></td></tr></table></figure>
<p>é…ç½® <code>webpack.config.js</code></p>
<blockquote>
<p><code>sass</code>è¦æŠŠ <code>node_modules</code> æ’é™¤</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"></span><br><span class="line">   <span class="attr">module</span>: &#123;</span><br><span class="line">       <span class="attr">rules</span>: \[</span><br><span class="line">           &#123;</span><br><span class="line">               <span class="attr">test</span>: <span class="regexp">/\\.css$/</span>,</span><br><span class="line">               <span class="attr">use</span>: \[</span><br><span class="line">                   <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">                   <span class="string">&#x27;css-loader&#x27;</span></span><br><span class="line">               \]</span><br><span class="line">           &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">           <span class="attr">test</span>: <span class="regexp">/\\.jpg|png|gif$/</span>,</span><br><span class="line">           <span class="attr">use</span>: &#123;</span><br><span class="line">               <span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">               <span class="attr">options</span>: &#123;</span><br><span class="line">                   <span class="attr">limit</span>: <span class="number">77777</span>,</span><br><span class="line">                   <span class="attr">outputPath</span>: <span class="string">&#x27;image&#x27;</span>,</span><br><span class="line">               	&#125;</span><br><span class="line">               &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">           &#123;</span><br><span class="line">             <span class="attr">test</span>: <span class="regexp">/\\.sass$/</span>,</span><br><span class="line">             <span class="attr">use</span>:\[<span class="string">&#x27;vue-style-loader&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;sass-loader&#x27;</span></span><br><span class="line">             \],</span><br><span class="line">             <span class="attr">include</span>: path.<span class="title function_">resolve</span>(__dirname + <span class="string">&#x27;/src/&#x27;</span>),</span><br><span class="line">             <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span></span><br><span class="line">           &#125;,</span><br><span class="line">       \]</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…-bable"><a href="#å®‰è£…-bable" class="headerlink" title="å®‰è£… bable"></a>å®‰è£… bable</h3><p>è¿™é‡Œæˆ‘å®‰è£…å‡ ä¸ªå¸¸ç”¨çš„</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install  babel-loader @babel/core @babel/cli @babel/preset-env -D</span><br><span class="line">npm install  @babel/runtime @babel/plugin-transform-runtime -D</span><br><span class="line">npm install  @babel/plugin-transform-arrow-functions -D</span><br></pre></td></tr></table></figure>
<p>é…ç½® <code>webpack.config.js</code></p>
<blockquote>
<p>åŒæ ·çš„å’Œä¸Šé¢ä¸€æ ·è¦æŠŠ <code>node_modules</code> æ’é™¤</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"></span><br><span class="line">   <span class="attr">module</span>: &#123;</span><br><span class="line">       <span class="attr">rules</span>: \[</span><br><span class="line"></span><br><span class="line">           &#123;</span><br><span class="line">               <span class="attr">test</span>: <span class="regexp">/\\.js$/</span>,</span><br><span class="line">               <span class="attr">use</span>: \[</span><br><span class="line">                   <span class="string">&#x27;babel-loader&#x27;</span></span><br><span class="line">               \],</span><br><span class="line">               <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span></span><br><span class="line">           &#125;,</span><br><span class="line">       \]</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é…ç½® <code>babel.config.js</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">api</span>) &#123;</span><br><span class="line">    api.<span class="title function_">cache</span>(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> presets = \[</span><br><span class="line">        <span class="string">&#x27;@babel/preset-env&#x27;</span>,</span><br><span class="line">    \];</span><br><span class="line">    <span class="keyword">const</span> plugins = \[</span><br><span class="line">        <span class="string">&#x27;@babel/plugin-transform-arrow-functions&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;@babel/plugin-transform-runtime&#x27;</span></span><br><span class="line">    \];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      presets,</span><br><span class="line">      plugins</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>æœ€åæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ <code>npm run serve</code>æ¥å¯åŠ¨<code>vue</code>é¡¹ç›®äº†</p>
<h2 id="å¾€æœŸç²¾å½©ï¼š"><a href="#å¾€æœŸç²¾å½©ï¼š" class="headerlink" title="å¾€æœŸç²¾å½©ï¼š"></a>å¾€æœŸç²¾å½©ï¼š</h2><blockquote>
<p><a href="https://juejin.cn/post/7015476516196712462" title="https://juejin.cn/post/7015476516196712462">å¿«é€Ÿå…¥æ‰‹ Electronï¼Œæ‹¥æœ‰ä¸€ä¸ªè‡ªå·±çš„æ¡Œé¢åº”ç”¨</a></p>
<p><a href="https://juejin.cn/post/7006518993385160711" title="https://juejin.cn/post/7006518993385160711">è¿˜ä¸ä¼š Vue3ï¼Ÿä¸€ç¯‡ç¬”è®°å¸¦ä½ å¿«é€Ÿå…¥é—¨</a></p>
<p><a href="https://juejin.cn/post/6999440503712251935" title="https://juejin.cn/post/6999440503712251935">è¿˜ä¸ä¼š TSï¼Ÿ å¸¦ä½  TypeScript å¿«é€Ÿå…¥é—¨</a></p>
<p><a href="https://juejin.cn/post/6994337441314242590" title="https://juejin.cn/post/6994337441314242590">å¿«é€Ÿä¸Šæ‰‹ Vuex åˆ° æ‰‹å†™ç®€æ˜“ Vuex</a></p>
<p><a href="https://juejin.cn/post/6990582632270528525" title="https://juejin.cn/post/6990582632270528525">ä»äº†è§£åˆ°æ·±å…¥è™šæ‹Ÿ DOM å’Œå®ç° diff ç®—æ³•</a></p>
<p><a href="https://juejin.cn/post/6989106100582744072" title="https://juejin.cn/post/6989106100582744072">æ‰‹å†™ä¸€ä¸ªç®€æ˜“ vue å“åº”å¼å¸¦ä½ äº†è§£å“åº”å¼åŸç†</a></p>
<p><a href="https://juejin.cn/post/6988316779818778631" title="https://juejin.cn/post/6988316779818778631">ä»ä½¿ç”¨åˆ°è‡ªå·±å®ç°ç®€å• Vue Router çœ‹è¿™ä¸ªå°±è¡Œäº†</a></p>
<p><a href="https://juejin.cn/post/6983934602196811789" title="https://juejin.cn/post/6983934602196811789">å‰ç«¯é¢è¯•å¿…ä¸å¯å°‘çš„åŸºç¡€çŸ¥è¯†ï¼Œè™½ç„¶å°‘ä½†æ˜¯ä½ ä¸èƒ½ä¸çŸ¥é“</a></p>
</blockquote>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Webpack</tag>
      </tags>
  </entry>
  <entry>
    <title>å‰ç«¯é¢è¯•å¿…ä¸å¯å°‘çš„åŸºç¡€çŸ¥è¯†ï¼Œè™½ç„¶å°‘ä½†æ˜¯ä½ ä¸èƒ½ä¸çŸ¥é“</title>
    <url>/xiaolangwiki/2021/07/12/28/</url>
    <content><![CDATA[<h2 id="å‰ç«¯é¢è¯•å¿…ä¸å¯å°‘çš„åŸºç¡€çŸ¥è¯†ï¼Œè™½ç„¶å°‘ä½†æ˜¯ä½ ä¸èƒ½ä¸çŸ¥é“"><a href="#å‰ç«¯é¢è¯•å¿…ä¸å¯å°‘çš„åŸºç¡€çŸ¥è¯†ï¼Œè™½ç„¶å°‘ä½†æ˜¯ä½ ä¸èƒ½ä¸çŸ¥é“" class="headerlink" title="å‰ç«¯é¢è¯•å¿…ä¸å¯å°‘çš„åŸºç¡€çŸ¥è¯†ï¼Œè™½ç„¶å°‘ä½†æ˜¯ä½ ä¸èƒ½ä¸çŸ¥é“"></a>å‰ç«¯é¢è¯•å¿…ä¸å¯å°‘çš„åŸºç¡€çŸ¥è¯†ï¼Œè™½ç„¶å°‘ä½†æ˜¯ä½ ä¸èƒ½ä¸çŸ¥é“</h2><blockquote>
<p>è¿™ä¸ªæ˜¯å°æµªå­¦ä¹ å‰ç«¯çš„æ—¶å€™å¯¹äºä¸€äº›é¢è¯•çš„åŸºç¡€çŸ¥è¯†çš„æ€»ç»“ï¼ˆè¿™é‡Œé¢æ²¡æ¶‰åŠæ¡†æ¶ï¼‰ï¼Œä¸æ˜¯å¾ˆå…¨ï¼Œä¸€æ–¹é¢æ˜¯å’Œå¤§å®¶ä¸€èµ·åˆ†äº«ï¼Œæœ‰é”™è¯¯çš„åœ°æ–¹è¯·å¤§å®¶å¤šå¤šæŒ‡æ•™æˆ‘è¿™ä¸ªæ–°äººï¼Œå¦ä¸€æ–¹é¢æ–¹ä¾¿è‡ªå·±å¤ä¹ ï¼Œè‡ªå·±æ€»ç»“åšç¬”è®°ä¹Ÿæ˜¯åŠ å¼ºå°è±¡çš„ä¸€ç§æ–¹å¼ï¼ŒåŠ æ²¹å–”ï¼å°æµªåŠªåŠ›å­¦å‰ç«¯</p>
</blockquote>
<h1 id="HTMLåŸºç¡€"><a href="#HTMLåŸºç¡€" class="headerlink" title="HTMLåŸºç¡€"></a>HTMLåŸºç¡€</h1><h2 id="1-å¦‚ä½•ç†è§£HTMLè¯­ä¹‰åŒ–"><a href="#1-å¦‚ä½•ç†è§£HTMLè¯­ä¹‰åŒ–" class="headerlink" title="1.å¦‚ä½•ç†è§£HTMLè¯­ä¹‰åŒ–"></a>1.å¦‚ä½•ç†è§£HTMLè¯­ä¹‰åŒ–</h2><h3 id="ä¸ºä»€ä¹ˆè¦è¯­ä¹‰åŒ–"><a href="#ä¸ºä»€ä¹ˆè¦è¯­ä¹‰åŒ–" class="headerlink" title="ä¸ºä»€ä¹ˆè¦è¯­ä¹‰åŒ–"></a>ä¸ºä»€ä¹ˆè¦è¯­ä¹‰åŒ–</h3><ol>
<li><p>é¡µé¢ä¸æ­¢æ˜¯ç»™äººçœ‹çš„ï¼Œæœºå™¨ä¹Ÿè¦çœ‹çˆ¬è™«ä¹Ÿè¦çœ‹</p>
</li>
<li><p>å¦‚æœå…¨éƒ¨éƒ½æ˜¯div+csså¸ƒå±€ï¼Œæœ‰çš„æ—¶å€™é¡µé¢å› ä¸ºä¸€äº›åŸå› åŠ è½½ä¸å‡ºæ¥æ ·å¼ï¼Œå…¨éƒ¨éƒ½æ˜¯divé¡µé¢å¯¹ç”¨æˆ·ä¸å‹å¥½</p>
</li>
</ol>
<h3 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><ol>
<li>è®©äººæ›´åŠ å®¹æ˜“è¯»æ‡‚ï¼Œæœ‰åˆ©äºæ„å»ºæ¸…æ™°çš„ç»“æ„(å¢åŠ ä»£ç çš„å¯è¯»æ€§)</li>
<li>è®©æœç´¢å¼•æ“æ›´åŠ å®¹æ˜“è¯»æ‡‚(æ–¹ä¾¿SEO)</li>
</ol>
<h2 id="2-è¯­ä¹‰åŒ–çš„æ ‡ç­¾æœ‰å“ªäº›"><a href="#2-è¯­ä¹‰åŒ–çš„æ ‡ç­¾æœ‰å“ªäº›" class="headerlink" title="2.è¯­ä¹‰åŒ–çš„æ ‡ç­¾æœ‰å“ªäº›"></a>2.è¯­ä¹‰åŒ–çš„æ ‡ç­¾æœ‰å“ªäº›</h2><h3 id="html5ä¹‹å‰çš„å¸¸ç”¨çš„è¯­ä¹‰åŒ–æ ‡ç­¾"><a href="#html5ä¹‹å‰çš„å¸¸ç”¨çš„è¯­ä¹‰åŒ–æ ‡ç­¾" class="headerlink" title="html5ä¹‹å‰çš„å¸¸ç”¨çš„è¯­ä¹‰åŒ–æ ‡ç­¾"></a>html5ä¹‹å‰çš„å¸¸ç”¨çš„è¯­ä¹‰åŒ–æ ‡ç­¾</h3><p><code>h1~h6 p br ul ol li dl dt dd em strong table thead tobdy tfoot td th caption</code></p>
<p>æ³¨æ„çš„ç‚¹ï¼š</p>
<ul>
<li><code>b</code>ã€<code>font</code>ã€<code>u</code>ç­‰çº¯æ ·å¼æ ‡ç­¾ä¸è¦ä½¿ç”¨</li>
<li><code>strong</code>æ˜¯ä¸ºäº†å¼ºè°ƒé‡è¦è€ŒåŠ ç²—ï¼ˆä¸è¦ç”¨<code>b``b</code>æ˜¯ä¸ºäº†åŠ ç²—è€ŒåŠ ç²—ï¼‰ï¼Œ<code>em</code>æ˜¯æ–œä½“æ˜¯å¼ºè°ƒï¼ˆä¸ç”¨<code>i``i</code>å°±æ˜¯æ–œä½“ï¼‰</li>
<li>æ¯ä¸ª<code>input</code>æ ‡ç­¾å¯¹åº”çš„è¯´æ˜æ–‡æœ¬éƒ½éœ€è¦ä½¿ç”¨<code>label</code>æ ‡ç­¾</li>
<li>è¡¨å•åŸŸè¦ä½¿ç”¨<code>fieldset</code>åŒ…èµ·æ¥ï¼Œå¹¶ä½¿ç”¨<code>legend</code>è¯´æ˜è¡¨å•çš„ç”¨é€”</li>
</ul>
<h3 id="html5æ–°å¢çš„å¸¸ç”¨çš„è¯­ä¹‰åŒ–æ ‡ç­¾"><a href="#html5æ–°å¢çš„å¸¸ç”¨çš„è¯­ä¹‰åŒ–æ ‡ç­¾" class="headerlink" title="html5æ–°å¢çš„å¸¸ç”¨çš„è¯­ä¹‰åŒ–æ ‡ç­¾"></a>html5æ–°å¢çš„å¸¸ç”¨çš„è¯­ä¹‰åŒ–æ ‡ç­¾</h3><p><code>header footer nav aside section artice</code></p>
<h2 id="3-å—çº§å…ƒç´ -å’Œ-å†…è”å…ƒç´ "><a href="#3-å—çº§å…ƒç´ -å’Œ-å†…è”å…ƒç´ " class="headerlink" title="3.å—çº§å…ƒç´  å’Œ å†…è”å…ƒç´ "></a>3.å—çº§å…ƒç´  å’Œ å†…è”å…ƒç´ </h2><h3 id="å—çº§å…ƒç´ "><a href="#å—çº§å…ƒç´ " class="headerlink" title="å—çº§å…ƒç´  :"></a>å—çº§å…ƒç´  :</h3><p><code>ul li ol dl dd dt table h1-h6 form p</code> ç­‰ç­‰ <code>display : block</code></p>
<h3 id="å†…è”å…ƒç´ -ï¼š"><a href="#å†…è”å…ƒç´ -ï¼š" class="headerlink" title="å†…è”å…ƒç´  ï¼š"></a>å†…è”å…ƒç´  ï¼š</h3><p><code>a span b img input button</code> ç­‰ç­‰ <code>display : inline-block</code></p>
<h3 id="æ ·å¼è½¬æ¢ï¼š"><a href="#æ ·å¼è½¬æ¢ï¼š" class="headerlink" title="æ ·å¼è½¬æ¢ï¼š"></a>æ ·å¼è½¬æ¢ï¼š</h3><ul>
<li><code>display:block</code> è¡Œå†…å…ƒç´ è½¬æ¢ä¸ºå—çº§å…ƒç´ </li>
<li><code>display:inline</code> å—çº§å…ƒç´ è½¬æ¢ä¸ºè¡Œå†…å…ƒç´ </li>
<li><code>display:inline-block</code> è½¬ä¸ºå†…è”å…ƒç´ </li>
</ul>
<h2 id="4-DOMæ€ä¹ˆä¼˜åŒ–"><a href="#4-DOMæ€ä¹ˆä¼˜åŒ–" class="headerlink" title="4.DOMæ€ä¹ˆä¼˜åŒ–"></a>4.DOMæ€ä¹ˆä¼˜åŒ–</h2><ul>
<li><p>å¯ä»¥ä½¿ç”¨ä¼ªå…ƒç´ ,é˜´å½±å®ç°çš„å†…å®¹å°½é‡ä¸ä½¿ç”¨</p>
</li>
<li><p><code>DOM</code>å®ç°ï¼Œå¦‚æ¸…é™¤æµ®åŠ¨ã€æ ·å¼å®ç°ç­‰;æŒ‰éœ€åŠ è½½ï¼Œå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“;</p>
</li>
<li><p>ç»“æ„åˆç†ï¼Œè¯­ä¹‰åŒ–æ ‡ç­¾</p>
</li>
<li><p>ä½¿ç”¨æ–‡æ¡£ç‰‡æ®µ</p>
</li>
<li><p><code>DOM</code>ç¼“å­˜</p>
</li>
<li><p><code>innerHTML</code>ä»£æ›¿<code>appendChild</code></p>
</li>
<li><p>è™šæ‹Ÿ<code>DOM</code></p>
</li>
</ul>
<h1 id="CSSåŸºç¡€"><a href="#CSSåŸºç¡€" class="headerlink" title="CSSåŸºç¡€"></a>CSSåŸºç¡€</h1><h2 id="1-ç›’å­æ¨¡å‹çš„å®½åº¦è®¡ç®—"><a href="#1-ç›’å­æ¨¡å‹çš„å®½åº¦è®¡ç®—" class="headerlink" title="1.ç›’å­æ¨¡å‹çš„å®½åº¦è®¡ç®—"></a>1.ç›’å­æ¨¡å‹çš„å®½åº¦è®¡ç®—</h2><h3 id="æ ‡å‡†ç›’å­æ¨¡å‹"><a href="#æ ‡å‡†ç›’å­æ¨¡å‹" class="headerlink" title="æ ‡å‡†ç›’å­æ¨¡å‹:"></a>æ ‡å‡†ç›’å­æ¨¡å‹:</h3><blockquote>
<p>é»˜è®¤ <code>box-sizing : content-box</code></p>
<p>offsetWidth : åŒ…æ‹¬ width + border + padding (ä¸åŒ…æ‹¬margin)</p>
<p>æ¯”å¦‚è¿™ä¸ªä¾‹å­</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">#box &#123;</span><br><span class="line">	width : 20px;</span><br><span class="line">	padding : 20px;</span><br><span class="line">	margin : 20px;</span><br><span class="line">	border : 2px solid #ccc;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¿™é‡Œè®¡ç®—å°±æ˜¯ offsetWidth :</p>
<p><code>document.getElementById(&#39;box&#39;).offsetWidth``64</code></p>
</blockquote>
<h3 id="å¼¹æ€§ç›’å­çš„è®¡ç®—"><a href="#å¼¹æ€§ç›’å­çš„è®¡ç®—" class="headerlink" title="å¼¹æ€§ç›’å­çš„è®¡ç®—"></a>å¼¹æ€§ç›’å­çš„è®¡ç®—</h3><blockquote>
<p>åŠ ä¸Š <code>box-sizing : border-box</code></p>
<p>æ€»çš„å®½åº¦è®¾ç½®å¤šå°‘å°±æ˜¯å¤šå°‘(width è®¾ç½®å¤šå°‘å°±æ˜¯å¤šå°‘)</p>
<p>ç„¶åå†…å®¹çš„å®½åº¦æ˜¯è‡ªå·±è®¡ç®—çš„</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">#box &#123;</span><br><span class="line">	width : 80px;</span><br><span class="line">	padding : 20px;</span><br><span class="line">	margin : 20px;</span><br><span class="line">	border : 2px solid #ccc;</span><br><span class="line">	box-sizing : border-box;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¿™é‡Œè®¡ç®—å°±æ˜¯ offsetWidth :</p>
<p><code>document.getElementById(&#39;box&#39;).offsetWidth``80</code></p>
<p>å¦‚æœpadding + border çš„å®½åº¦å¤§äº width</p>
<p>è¿™ä¸ªæ—¶å€™çš„offsetWidth å°±æ˜¯ padding + borderäº†</p>
</blockquote>
<h2 id="2-marignçºµå‘é‡å çš„é—®é¢˜"><a href="#2-marignçºµå‘é‡å çš„é—®é¢˜" class="headerlink" title="2.marignçºµå‘é‡å çš„é—®é¢˜"></a>2.marignçºµå‘é‡å çš„é—®é¢˜</h2><blockquote>
<p>marginé‡å æ˜¯æŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªç›’å­(å¯èƒ½ç›¸é‚»ä¹Ÿå¯èƒ½åµŒå¥—)çš„ç›¸é‚»è¾¹ç•Œ(å…¶é—´æ²¡æœ‰ä»»ä½•éç©ºå†…å®¹ã€è¡¥ç™½ã€è¾¹æ¡†)é‡åˆåœ¨ä¸€èµ·è€Œå½¢æˆä¸€ä¸ªå•ä¸€è¾¹ç•Œ</p>
<p>æ¯”å¦‚å°±æœ‰ä»¥ä¸‹çš„é—®é¢˜ï¼š</p>
</blockquote>
<h3 id="è®¡ç®—ç¬¬ä¸€è¡Œå’Œæœ€åä¸€è¡Œä¹‹é—´çš„è·ç¦»"><a href="#è®¡ç®—ç¬¬ä¸€è¡Œå’Œæœ€åä¸€è¡Œä¹‹é—´çš„è·ç¦»" class="headerlink" title="è®¡ç®—ç¬¬ä¸€è¡Œå’Œæœ€åä¸€è¡Œä¹‹é—´çš„è·ç¦»"></a>è®¡ç®—ç¬¬ä¸€è¡Œå’Œæœ€åä¸€è¡Œä¹‹é—´çš„è·ç¦»</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">line-height</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç¬¬ä¸€è¡Œ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æœ«è¡Œ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸­é—´çš„ç©ºç€çš„péƒ½æ²¡äº† ï¼Œå› ä¸ºæ²¡æœ‰é«˜åº¦</p>
<p>æœ€åä¸€è¡Œå’Œ ç¬¬ä¸€è¡Œä¹‹é—´çš„è·ç¦»æ˜¯ <code>20px</code></p>
<p>å› ä¸ºåœ¨<code>margin</code>çºµå‘ä¼šæœ‰é‡å </p>
</blockquote>
<p>è®¡ç®—æ–¹æ³•:</p>
<ul>
<li><p>å…¨éƒ¨éƒ½ä¸ºæ­£å€¼ï¼Œå–æœ€å¤§è€…ï¼›</p>
</li>
<li><p>ä¸å…¨æ˜¯æ­£å€¼ï¼Œåˆ™éƒ½å–ç»å¯¹å€¼ï¼Œç„¶åç”¨æ­£å€¼çš„æœ€å¤§å€¼å‡å»ç»å¯¹å€¼çš„æœ€å¤§å€¼ï¼›</p>
</li>
</ul>
<h2 id="3-marginè´Ÿå€¼"><a href="#3-marginè´Ÿå€¼" class="headerlink" title="3.marginè´Ÿå€¼"></a>3.marginè´Ÿå€¼</h2><ul>
<li><code>margin-top``margin-left</code>è´Ÿå€¼ï¼Œå…ƒç´ å‘ä¸Šã€å‘å·¦ç§»åŠ¨</li>
<li><code>margin-right</code> è´Ÿå€¼ ï¼Œå³ä¾§å…ƒç´ å·¦ç§»(â€œåç»­å…ƒç´ â€ä¼šè¢«æ‹‰å‘æŒ‡å®šæ–¹å‘)ï¼Œå…ƒç´ è‡ªèº«ä¸å˜</li>
<li><code>margin-bottom</code> è´Ÿå€¼ï¼Œå³ä¾§å…ƒç´ ä¸Šç§»åŠ¨(â€œåç»­å…ƒç´ â€ä¼šè¢«æ‹‰å‘æŒ‡å®šæ–¹å‘), å…ƒç´ è‡ªèº«ä¸å˜</li>
</ul>
<h2 id="4-BFC"><a href="#4-BFC" class="headerlink" title="4.BFC"></a>4.BFC</h2><blockquote>
<p>å…¨ç§°ï¼š<code>Block Formatting Context</code>ï¼Œ åä¸º â€œå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡â€ã€‚</p>
<p><code>BFC</code>æ˜¯ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„ç©ºé—´ï¼ˆä¸€å—ç‹¬ç«‹çš„æ¸²æŸ“åŒºåŸŸï¼‰ï¼Œè®©ç©ºé—´é‡Œçš„å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å¸ƒå±€</p>
</blockquote>
<h3 id="BFCè§„åˆ™"><a href="#BFCè§„åˆ™" class="headerlink" title="BFCè§„åˆ™"></a>BFCè§„åˆ™</h3><ul>
<li><code>BFC</code>å°±æ˜¯ä¸€ä¸ªå—çº§å…ƒç´ ï¼Œå—çº§å…ƒç´ ä¼šåœ¨å‚ç›´æ–¹å‘ä¸€ä¸ªæ¥ä¸€ä¸ªçš„æ’åˆ—</li>
<li><code>BFC</code>å°±æ˜¯é¡µé¢ä¸­çš„ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨é‡Œçš„æ ‡ç­¾ä¸ä¼šå½±å“åˆ°å¤–éƒ¨æ ‡ç­¾</li>
<li>å‚ç›´æ–¹å‘çš„è·ç¦»ç”±marginå†³å®šï¼Œ å±äºåŒä¸€ä¸ª<code>BFC</code>çš„ä¸¤ä¸ªç›¸é‚»çš„æ ‡ç­¾å¤–è¾¹è·ä¼šå‘ç”Ÿé‡å </li>
<li>è®¡ç®—<code>BFC</code>çš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®—</li>
</ul>
<h3 id="å½¢æˆBFCå¸¸è§æ¡ä»¶"><a href="#å½¢æˆBFCå¸¸è§æ¡ä»¶" class="headerlink" title="å½¢æˆBFCå¸¸è§æ¡ä»¶"></a>å½¢æˆBFCå¸¸è§æ¡ä»¶</h3><ul>
<li><code>float</code> ä¸ä¸º <code>none</code></li>
<li><code>position</code> ä¸º <code>absolute``fixed</code></li>
<li><code>overflow</code> ä¸æ˜¯ <code>visible</code></li>
<li><code>display</code> ä¸º <code>flex``inline-block``table-cell</code>ç­‰</li>
</ul>
<blockquote>
<p>å¸¸ç”¨çš„æƒ…æ™¯ <code>æ¸…é™¤æµ®åŠ¨``marginé‡å </code></p>
</blockquote>
<h2 id="5-floatå¸ƒå±€"><a href="#5-floatå¸ƒå±€" class="headerlink" title="5.floatå¸ƒå±€"></a>5.floatå¸ƒå±€</h2><blockquote>
<p>åŒé£ç¿¼å¸ƒå±€ å’Œ åœ£æ¯å¸ƒå±€æ˜¯PCç«¯çš„ç»å…¸å¸ƒå±€äº†</p>
<p>ä¸¤ä¾§çš„å®½åº¦å†™æ­»ï¼Œä¸­é—´çš„å®½åº¦è‡ªé€‚åº”</p>
<p>å…¬å…±ç»“æ„å¦‚ä¸‹</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>å…¬å…±æ ·å¼</p>
<p>ç»™<code>main</code>è®¾ç½®<code>width: 100%</code>,è®©å®ƒå§‹ç»ˆå æ»¡çª—å£ï¼Œè¿™æ ·æ‰æœ‰è‡ªé€‚åº”çš„æ•ˆæœã€‚</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;style type=&quot;<span class="selector-tag">text</span>/css&quot;&gt;</span><br><span class="line">    <span class="selector-tag">body</span> &#123;</span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">700px</span>;</span><br><span class="line">        <span class="attribute">min-width</span>: <span class="number">550px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.container</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">30vh</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.container</span> &gt; <span class="selector-tag">div</span> &#123;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">float</span>: left;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.main</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: aqua;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.left</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.right</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: green;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a3f906d5913046d194503a0a44bbbc70~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210707110318546.png"></p>
<h3 id="åœ£æ¯å¸ƒå±€"><a href="#åœ£æ¯å¸ƒå±€" class="headerlink" title="åœ£æ¯å¸ƒå±€"></a>åœ£æ¯å¸ƒå±€</h3><blockquote>
<p>ä¸ºä¸‰ä¸ªå…ƒç´ çš„çˆ¶å…ƒç´ åŠ ä¸Š<code>padding</code>å±æ€§ï¼Œè…¾å¼€ä½ç½®</p>
</blockquote>
 <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">30vh</span>;</span><br><span class="line">        <span class="attribute">padding-left</span>: <span class="number">100px</span>;</span><br><span class="line">        <span class="attribute">padding-right</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>leftè¦æ”¾åˆ°mainçš„å·¦è¾¹ï¼Œè®¾ç½®<code>margin-left: -100%</code>,å› ä¸º<code>margin</code>çš„ç™¾åˆ†æ¯”æ˜¯ç›¸å¯¹ä¸çˆ¶å…ƒç´ çš„ï¼Œæ‰€ä»¥éœ€è¦æ•´æ•´ä¸€è¡Œçš„å®½åº¦æ‰èƒ½è¡¥å¿è¿™ä¸ªmarginçš„å€¼ï¼Œæ‰€ä»¥leftå°±èƒ½åˆ°mainçš„ä½ç½®ã€‚</p>
<p>ç„¶åå†é€šè¿‡ç›¸å¯¹å®šä½ rightè‡ªèº«çš„å®½åº¦å°±åˆ°äº†æœ€å·¦è¾¹</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">        <span class="attribute">position</span>: relative;</span><br><span class="line">        <span class="attribute">margin-left</span>: -<span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">right</span>: <span class="number">100px</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>rightåˆ°mainçš„å³è¾¹ï¼Œæ¯”å¦‚<code>margin-right: -200px;</code>ï¼Œæ­£å¥½ä½¿mainé‡å rightçš„å®½åº¦ï¼Œå› ä¸ºè®¾ç½®äº†æµ®åŠ¨æ‰€ä»¥rightå°±ä¼šåˆ°mainçš„å³è¾¹äº†ã€‚</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">        <span class="attribute">margin-right</span>: -<span class="number">200px</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2454581fc9c54b79b36a65a13cf243eb~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210707113141261.png"></p>
<h3 id="åŒé£ç¿¼å¸ƒå±€"><a href="#åŒé£ç¿¼å¸ƒå±€" class="headerlink" title="åŒé£ç¿¼å¸ƒå±€"></a>åŒé£ç¿¼å¸ƒå±€</h3><p>åŒé£ç¿¼å¸ƒå±€éœ€è¦æ›´æ”¹ä¸‹å¸ƒå±€ï¼Œå› ä¸ºmainè®¾ç½®äº†100% ,ä¸èƒ½ç›´æ¥ç»™mainè®¾ç½®margin</p>
<blockquote>
<p>æ ·å¼</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;style type=&quot;<span class="selector-tag">text</span>/css&quot;&gt;</span><br><span class="line">      <span class="selector-tag">body</span> &#123;</span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">550px</span>;</span><br><span class="line">        <span class="attribute">min-width</span>: <span class="number">500px</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="selector-class">.container</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">30vh</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="selector-class">.container</span> &gt; <span class="selector-tag">div</span> &#123;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">float</span>: left;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="selector-class">.wrap</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: aqua;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">200px</span> <span class="number">0</span> <span class="number">100px</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="selector-class">.main</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="selector-class">.left</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: red;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="selector-class">.right</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: green;</span><br><span class="line">      &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>ç»“æ„</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/79b360649a7746c8b7c4812ec2434b11~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210707114727855.png"></p>
<blockquote>
<p>å†åˆ›é€ ä¸€ä¸ªå†…å®¹å±‚ï¼Œå°†æ‰€æœ‰è¦æ˜¾ç¤ºçš„å†…å®¹æ”¾åˆ°<code>wrap</code>ä¸­ï¼Œç»™<code>wrap</code>è®¾ç½®<code>margin</code>å°±å¯ä»¥äº†</p>
<p>leftè¦æ”¾åˆ°mainçš„å·¦è¾¹ï¼Œè®¾ç½®<code>margin-left: -100%</code>,å› ä¸º<code>margin</code>çš„ç™¾åˆ†æ¯”æ˜¯ç›¸å¯¹ä¸çˆ¶å…ƒç´ çš„ï¼Œæ‰€ä»¥éœ€è¦æ•´æ•´ä¸€è¡Œçš„å®½åº¦æ‰èƒ½è¡¥å¿è¿™ä¸ªmarginçš„å€¼ï¼Œæ‰€ä»¥leftå°±èƒ½åˆ°mainçš„å·¦è¾¹ã€‚</p>
<p>æ¥ç€è®©rightåˆ°mainçš„å³è¾¹ï¼Œåªéœ€è¦è®¾ç½®<code>margin-left</code>çš„å€¼ä¸ºè´Ÿçš„rightçš„å®½ï¼Œæ¯”å¦‚<code>margin-left: -200px;</code>ï¼Œæ­£å¥½ä½¿mainé‡å rightçš„å®½åº¦ï¼Œå› ä¸ºè®¾ç½®äº†æµ®åŠ¨æ‰€ä»¥rightå°±ä¼šåˆ°mainçš„å³è¾¹äº†ã€‚</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">        <span class="attribute">margin-left</span>: -<span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: red;</span><br><span class="line">      &#125;</span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">        <span class="attribute">margin-left</span>: -<span class="number">200px</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: green;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/95249ccd36fd433da550d0b970518147~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210707115153416.png"></p>
<h3 id="ä½¿ç”¨-flexä¹Ÿå¯ä»¥è¾¾åˆ°æ•ˆæœ"><a href="#ä½¿ç”¨-flexä¹Ÿå¯ä»¥è¾¾åˆ°æ•ˆæœ" class="headerlink" title="ä½¿ç”¨ flexä¹Ÿå¯ä»¥è¾¾åˆ°æ•ˆæœ"></a>ä½¿ç”¨ flexä¹Ÿå¯ä»¥è¾¾åˆ°æ•ˆæœ</h3><blockquote>
<p>cssæ ·å¼</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">html</span>,</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.center</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.left</span>,</span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: skyblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>htmlç»“æ„</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1266420a5def4c099915268a2f697a50~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210712104451124"></p>
<h3 id="ä½¿ç”¨å®šä½æ¥å®ç°"><a href="#ä½¿ç”¨å®šä½æ¥å®ç°" class="headerlink" title="ä½¿ç”¨å®šä½æ¥å®ç°"></a>ä½¿ç”¨å®šä½æ¥å®ç°</h3><blockquote>
<p>æœ€å¸¸ä½¿ç”¨çš„æ˜¯å®šä½æ¥å®ç°</p>
<p>cssæ ·å¼</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">html</span>,</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">	<span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.center</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.left</span>,</span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: skyblue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">	<span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">	<span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç»“æ„å’Œä¸Šé¢ä¸€æ ·</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/14b4aaf02bb14a789b34f660da77eabf~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210712111146802"></p>
<h2 id="6-æ‰‹å†™clearfix"><a href="#6-æ‰‹å†™clearfix" class="headerlink" title="6.æ‰‹å†™clearfix"></a>6.æ‰‹å†™clearfix</h2><blockquote>
<p>ä¸€èˆ¬çš„è¯æœ‰çš„æ—¶å€™ä¼šè¦æ±‚10så·¦å³ æ‰‹å†™clearfix ï¼Œå†™çš„æ—¶å€™æœ€å¥½ç†Ÿç»ƒä¸è¦çŠ¹è±«</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span> : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attribute">display</span> : table;</span><br><span class="line">    <span class="attribute">clear</span> : both;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.clearfix</span> &#123;</span><br><span class="line">    *zoom : <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="7-flexå®ç°ä¸€ä¸ªä¸‰ç‚¹çš„è‰²å­"><a href="#7-flexå®ç°ä¸€ä¸ªä¸‰ç‚¹çš„è‰²å­" class="headerlink" title="7.flexå®ç°ä¸€ä¸ªä¸‰ç‚¹çš„è‰²å­"></a>7.flexå®ç°ä¸€ä¸ªä¸‰ç‚¹çš„è‰²å­</h2><h3 id="flexåŸºç¡€çš„è¯­æ³•"><a href="#flexåŸºç¡€çš„è¯­æ³•" class="headerlink" title="flexåŸºç¡€çš„è¯­æ³•"></a>flexåŸºç¡€çš„è¯­æ³•</h3><p>ä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„</p>
<p><code>flex-direction</code>å±æ€§å†³å®šä¸»è½´çš„æ–¹å‘ï¼ˆå³é¡¹ç›®çš„æ’åˆ—æ–¹å‘ï¼‰ã€‚</p>
<ul>
<li><code>row</code> è¡¨ç¤ºä»å·¦å‘å³æ’åˆ—</li>
<li><code>row-reverse</code> è¡¨ç¤ºä»å³å‘å·¦æ’åˆ—</li>
<li><code>column</code> è¡¨ç¤ºä»ä¸Šå‘ä¸‹æ’åˆ—</li>
<li><code>column-reverse</code> è¡¨ç¤ºä»ä¸‹å‘ä¸Šæ’åˆ—</li>
</ul>
<p><code>flex-wrap</code>å¯ä»¥è®©Flexé¡¹ç›®æ¢è¡Œæ’åˆ—ã€‚</p>
<ul>
<li><code>nowrap</code>(ç¼ºçœ)ï¼šæ‰€æœ‰Flexé¡¹ç›®å•è¡Œæ’åˆ—</li>
<li><code>wrap</code>ï¼šæ‰€æœ‰Flexé¡¹ç›®å¤šè¡Œæ’åˆ—ï¼ŒæŒ‰ä»ä¸Šåˆ°ä¸‹çš„é¡ºåº</li>
<li><code>wrap-reverse</code>ï¼šæ‰€æœ‰Flexé¡¹ç›®å¤šè¡Œæ’åˆ—ï¼ŒæŒ‰ä»ä¸‹åˆ°ä¸Šçš„é¡ºåº</li>
</ul>
<p><code>flex-flow</code>å±æ€§æ˜¯<code>flex-direction</code>å±æ€§å’Œ<code>flex-wrap</code>å±æ€§çš„ç®€å†™å½¢å¼ï¼Œé»˜è®¤å€¼ä¸º<code>row nowrap</code></p>
<p><code>justify-content</code>å±æ€§å®šä¹‰äº†é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼åŠé¢å¤–ç©ºé—´çš„åˆ†é…æ–¹å¼ã€‚</p>
<ul>
<li><code>flex-start</code>(ç¼ºçœ)ï¼šä»å¯ç‚¹çº¿å¼€å§‹é¡ºåºæ’åˆ—</li>
<li><code>flex-end</code>ï¼šç›¸å¯¹ç»ˆç‚¹çº¿é¡ºåºæ’åˆ—</li>
<li><code>center</code>ï¼šå±…ä¸­æ’åˆ—</li>
<li><code>space-between</code>ï¼šé¡¹ç›®å‡åŒ€åˆ†å¸ƒï¼Œç¬¬ä¸€é¡¹åœ¨å¯ç‚¹çº¿ï¼Œæœ€åä¸€é¡¹åœ¨ç»ˆç‚¹çº¿</li>
<li><code>space-around</code>ï¼šé¡¹ç›®å‡åŒ€åˆ†å¸ƒï¼Œæ¯ä¸€ä¸ªé¡¹ç›®ä¸¤ä¾§æœ‰ç›¸åŒçš„ç•™ç™½ç©ºé—´ï¼Œç›¸é‚»é¡¹ç›®ä¹‹é—´çš„è·ç¦»æ˜¯ä¸¤ä¸ªé¡¹ç›®ä¹‹é—´ç•™ç™½çš„å’Œ</li>
<li><code>space-evenly</code>ï¼šé¡¹ç›®å‡åŒ€åˆ†å¸ƒï¼Œæ‰€æœ‰é¡¹ç›®ä¹‹é—´åŠé¡¹ç›®ä¸è¾¹æ¡†ä¹‹é—´è·ç¦»ç›¸ç­‰</li>
</ul>
<p><code>align-items</code>å±æ€§å®šä¹‰é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚</p>
<ul>
<li><code>stretch</code>(ç¼ºçœ)ï¼šäº¤å‰è½´æ–¹å‘æ‹‰ä¼¸æ˜¾ç¤º</li>
<li><code>flex-start</code>ï¼šé¡¹ç›®æŒ‰äº¤å‰è½´èµ·ç‚¹çº¿å¯¹é½</li>
<li><code>flex-end</code>ï¼šé¡¹ç›®æŒ‰äº¤å‰è½´ç»ˆç‚¹çº¿å¯¹é½</li>
<li><code>center</code>ï¼šäº¤å‰è½´æ–¹å‘é¡¹ç›®ä¸­é—´å¯¹é½</li>
<li><code>baseline</code>ï¼šäº¤å‰è½´æ–¹å‘æŒ‰ç¬¬ä¸€è¡Œæ–‡å­—åŸºçº¿å¯¹é½</li>
</ul>
<p><code>align-content</code>å±æ€§å®šä¹‰äº†åœ¨äº¤å‰è½´æ–¹å‘çš„å¯¹é½æ–¹å¼åŠé¢å¤–ç©ºé—´åˆ†é…ï¼Œç±»ä¼¼äºä¸»è½´ä¸Š<code>justify-content</code>çš„ä½œç”¨ã€‚</p>
<ul>
<li><code>stretch</code> (ç¼ºçœ)ï¼šæ‹‰ä¼¸æ˜¾ç¤º</li>
<li><code>flex-start</code>ï¼šä»å¯ç‚¹çº¿å¼€å§‹é¡ºåºæ’åˆ—</li>
<li><code>flex-end</code>ï¼šç›¸å¯¹ç»ˆç‚¹çº¿é¡ºåºæ’åˆ—</li>
<li><code>center</code>ï¼šå±…ä¸­æ’åˆ—</li>
<li><code>space-between</code>ï¼šé¡¹ç›®å‡åŒ€åˆ†å¸ƒï¼Œç¬¬ä¸€é¡¹åœ¨å¯ç‚¹çº¿ï¼Œæœ€åä¸€é¡¹åœ¨ç»ˆç‚¹çº¿</li>
<li><code>space-around</code>ï¼šé¡¹ç›®å‡åŒ€åˆ†å¸ƒï¼Œæ¯ä¸€ä¸ªé¡¹ç›®ä¸¤ä¾§æœ‰ç›¸åŒçš„ç•™ç™½ç©ºé—´ï¼Œç›¸é‚»é¡¹ç›®ä¹‹é—´çš„è·ç¦»æ˜¯ä¸¤ä¸ªé¡¹ç›®ä¹‹é—´ç•™ç™½</li>
</ul>
<h3 id="æ¥å®ç°ä¸€ä¸ªä¸‰ç‚¹çš„è‰²äº†-ç®€å•"><a href="#æ¥å®ç°ä¸€ä¸ªä¸‰ç‚¹çš„è‰²äº†-ç®€å•" class="headerlink" title="æ¥å®ç°ä¸€ä¸ªä¸‰ç‚¹çš„è‰²äº†(ç®€å•)"></a>æ¥å®ç°ä¸€ä¸ªä¸‰ç‚¹çš„è‰²äº†(ç®€å•)</h3><blockquote>
<p>å®ç°çš„æ€è·¯å°±æ˜¯ä½¿ç”¨flexå¸ƒå±€ã€‚ä¸»è½´æ˜¯<code>space-between</code>ã€‚</p>
<p>ç¬¬2ä¸ªç‚¹äº¤å‰è½´æ–¹å‘æ˜¯å±…ä¸­å¯¹é½ã€‚ ç¬¬3ä¸ªç‚¹é¡¹ç›®æŒ‰äº¤å‰è½´ç»ˆç‚¹çº¿å¯¹é½ã€‚</p>
<p>ç»“æ„</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ ·å¼</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;style type=&quot;<span class="selector-tag">text</span>/css&quot;&gt;</span><br><span class="line">      <span class="selector-class">.box</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">        <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="selector-class">.item</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: block;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">40px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">210</span>, <span class="number">225</span>, <span class="number">228</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="selector-class">.item</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) &#123;</span><br><span class="line">        <span class="attribute">align-self</span>: center;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="selector-class">.item</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>) &#123;</span><br><span class="line">        <span class="attribute">align-self</span>: flex-end;</span><br><span class="line">      &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/881c5ed898de4ea3addde083f9bf757e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210707122433924.png"></p>
<h2 id="8-å®šä½"><a href="#8-å®šä½" class="headerlink" title="8.å®šä½"></a>8.å®šä½</h2><blockquote>
<p>absolute relative fixed ç›¸å¯¹ä»€ä¹ˆå®šä½</p>
</blockquote>
<ul>
<li><code>static</code>é»˜è®¤çš„positionå€¼,æ— ç‰¹æ®Šå®šä½ï¼Œéµå¾ªæ ‡å‡†æ–‡æ¡£æµ</li>
<li><code>relative</code>ç›¸å¯¹äºè‡ªèº«å®šä½ ï¼Œä½†æ˜¯è¿˜æ˜¯å æ®åŸæ¥çš„ç©ºé—´ï¼ŒåŒæ—¶å¯é€šè¿‡<code>z-index</code>å®šä¹‰å±‚å å…³ç³»ã€‚</li>
<li><code>absolute</code> ç›¸å¯¹äºè¯¥å…ƒç´ æœ€è¿‘çš„å·²å®šä½çš„ç¥–å…ˆå…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰ä¸€ä¸ªç¥–å…ˆå…ƒç´ è®¾ç½®å®šä½ï¼Œé‚£ä¹ˆå‚ç…§ç‰©æ˜¯<code>body</code>å±‚ã€‚ä¸å æ®åŸæ¥çš„ç©ºé—´ï¼ŒåŒæ—¶å¯é€šè¿‡<code>z-index</code>å®šä¹‰å±‚å å…³ç³»ã€‚</li>
<li><code>fixed</code>ç›¸å¯¹äºæµè§ˆå™¨çª—å£è¿›è¡Œå›ºå®šå®šä½ï¼ŒåŒæ—¶å¯é€šè¿‡<code>z-index</code>å®šä¹‰å±‚å å…³ç³»ã€‚å¦‚æœä»–çš„ç¥–å…ˆå…ƒç´ æœ‰<code>transform</code>è¿™ä¸ªå±æ€§ï¼Œå®ƒä¼šå‚è€ƒä»–åšå›ºå®šå®šä½</li>
</ul>
<h2 id="9-å±…ä¸­å¯¹é½çš„å®ç°æ–¹å¼"><a href="#9-å±…ä¸­å¯¹é½çš„å®ç°æ–¹å¼" class="headerlink" title="9.å±…ä¸­å¯¹é½çš„å®ç°æ–¹å¼"></a>9.å±…ä¸­å¯¹é½çš„å®ç°æ–¹å¼</h2><blockquote>
<p>æ°´å¹³å±…ä¸­</p>
</blockquote>
<ul>
<li><code>inline</code> å…ƒç´  : <code>text-align : center</code></li>
<li><code>block</code> å…ƒç´  : <code>margin : auto</code></li>
<li><code>absolute</code> å…ƒç´  : <code>left : 50%</code> + <code>margin-left</code> è´Ÿè‡ªèº«çš„ä¸€åŠ</li>
</ul>
<blockquote>
<p>å‚ç›´å±…ä¸­</p>
</blockquote>
<ul>
<li><code>inline</code> å…ƒç´  ï¼š<code>line-heigth</code> ç­‰äº <code>height</code></li>
<li><code>absolute</code> å…ƒç´  ï¼š <code>top : 50%</code> + <code>margin-top</code> è´Ÿè‡ªèº«çš„ä¸€åŠ æˆ– <code>transform (-50%,-50%)</code></li>
<li><code>absolute</code> å…ƒç´  : <code>top, buttom, left, right = 0</code> + <code>margin : auto</code></li>
</ul>
<blockquote>
<p>flex çˆ¶ç›’å­è®¾ç½®</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">display</span>: flex;</span><br><span class="line"><span class="attribute">justify-content</span>: center;</span><br><span class="line"><span class="attribute">align-items</span>: center;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>table-cell è¿™ä¸ªæ˜¯é’ˆå¯¹ ä¸æ˜¯ç›’å­çš„å…ƒç´ å±…ä¸­ï¼Œä½†æ˜¯å¯ä»¥æŠŠé‡Œé¢çš„ç›’å­<code>display:inline-block</code></p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.father</span>&#123;</span><br><span class="line"> <span class="attribute">display</span>: table-cell;</span><br><span class="line"> <span class="attribute">vertical-align</span>: middle;</span><br><span class="line"> <span class="attribute">text-align</span>: center;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.son</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="10-line-heightç»§æ‰¿"><a href="#10-line-heightç»§æ‰¿" class="headerlink" title="10.line-heightç»§æ‰¿"></a>10.line-heightç»§æ‰¿</h2><ul>
<li>å†™å…·ä½“æ•°å€¼ï¼Œå¦‚30pxï¼Œåˆ™ç»§æ‰¿è¯¥å€¼(æ¯”è¾ƒå¥½ç†è§£)</li>
<li>å†™æ¯”ä¾‹ï¼Œå¦‚2/ 1.5 ,åˆ™ç»§æ‰¿è¯¥æ¯”ä¾‹(æ¯”è¾ƒå¥½ç†è§£)</li>
<li>å†™ç™¾åˆ†æ¯”ï¼Œ å¦‚200% ,åˆ™ç»§æ‰¿è®¡ç®—å‡ºæ¥çš„å€¼(è€ƒç‚¹)</li>
</ul>
<blockquote>
<p>æ¯”å¦‚è¿™ä¹ˆä¸€é“é¢˜ æ±‚pçš„è¡Œé«˜</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;style type=&quot;<span class="selector-tag">text</span>/css&quot;&gt;</span><br><span class="line">      <span class="selector-tag">body</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">        <span class="attribute">line-height</span>: <span class="number">200%</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="selector-tag">p</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">18</span>;</span><br><span class="line">      &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç»“æ„</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span>A<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¦‚æœæ˜¯ç™¾åˆ†æ¯”çš„è¯ï¼Œä»–ä¼šå…ˆä¹˜èµ·æ¥å†ç»§æ‰¿ 16*200%</p>
<p>å¦‚æœæ˜¯æ•°å­—ã€‚ç›´æ¥ç»§æ‰¿ï¼Œç”¨è‡ªå·±çš„fontsize*æ•°å­—</p>
</blockquote>
<h2 id="11-rem-æ˜¯ä»€ä¹ˆ"><a href="#11-rem-æ˜¯ä»€ä¹ˆ" class="headerlink" title="11.rem æ˜¯ä»€ä¹ˆ"></a>11.rem æ˜¯ä»€ä¹ˆ</h2><blockquote>
<p>remæ˜¯ä¸€ä¸ªé•¿åº¦å•ä½</p>
</blockquote>
<ul>
<li>px,ç»å¯¹é•¿åº¦å•ä½,æœ€å¸¸ç”¨</li>
<li>em ,ç›¸å¯¹é•¿åº¦å•ä½,ç›¸å¯¹äºçˆ¶å…ƒç´ ,ä¸å¸¸ç”¨</li>
<li>rem ,ç›¸å¯¹é•¿åº¦å•ä½ï¼Œç›¸å¯¹äºæ ¹å…ƒç´ ï¼Œå¸¸ç”¨äºå“åº”å¼å¸ƒå±€</li>
</ul>
<h2 id="12-å“åº”å¼å¸ƒå±€çš„å¸¸ç”¨æ–¹æ¡ˆ"><a href="#12-å“åº”å¼å¸ƒå±€çš„å¸¸ç”¨æ–¹æ¡ˆ" class="headerlink" title="12.å“åº”å¼å¸ƒå±€çš„å¸¸ç”¨æ–¹æ¡ˆ"></a>12.å“åº”å¼å¸ƒå±€çš„å¸¸ç”¨æ–¹æ¡ˆ</h2><ul>
<li>media-query ,æ ¹æ®ä¸åŒçš„å±å¹•å®½åº¦è®¾ç½®æ ¹å…ƒç´ font-size</li>
<li>remï¼ŒåŸºäºæ ¹å…ƒç´ çš„ç›¸å¯¹å•ä½</li>
</ul>
<h2 id="13-remçš„å¼Šç«¯-â€œé˜¶æ¢¯â€æ€§"><a href="#13-remçš„å¼Šç«¯-â€œé˜¶æ¢¯â€æ€§" class="headerlink" title="13.remçš„å¼Šç«¯:â€œé˜¶æ¢¯â€æ€§"></a>13.remçš„å¼Šç«¯:â€œé˜¶æ¢¯â€æ€§</h2><blockquote>
<p>åƒä¸‹é¢çš„åª’ä½“æŸ¥è¯¢ ,å°±æ¯”å¦‚ä¸­é—´çš„375~413 ï¼Œå½“å±å¹•çš„å®½åº¦è¾¾åˆ°376,378<code>font-size</code>è¿˜æ˜¯100pxï¼Œä¸ä¼šå®æ—¶å˜åŒ–</p>
<p>é™¤éè¶…è¿‡äº†è¿™ä¸ªèŒƒå›´</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">@media only screen and (max-width: 374px) &#123;</span><br><span class="line">        /\* iphone5 æˆ–è€…æ›´å°çš„å°ºå¯¸ï¼Œä»¥iphone5 çš„å®½åº¦(320px)æ¯”ä¾‹è®¾ç½®font-size */</span><br><span class="line">        html &#123;</span><br><span class="line">          font-size: 86px;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">@media only screen and (min-width: 375px) and (max-width: 413px) &#123;</span><br><span class="line">        /\* iphone6/7/8å’Œiphone X */</span><br><span class="line">        html &#123;</span><br><span class="line">          font-size: 100px;</span><br><span class="line">&#125;</span><br><span class="line">      &#125;</span><br><span class="line">@media only screen and (min-width: 414px) &#123;</span><br><span class="line">        /\* iphone6p æˆ–è€…æ›´å¤§çš„å°ºå¯¸ï¼Œä»¥iphone6p çš„å®½åº¦(414px) æ¯”ä¾‹è®¾ç½®font-size */</span><br><span class="line">        html &#123;</span><br><span class="line">          font-size: 110px;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="14-ç½‘é¡µè§†å£å°ºå¯¸"><a href="#14-ç½‘é¡µè§†å£å°ºå¯¸" class="headerlink" title="14.ç½‘é¡µè§†å£å°ºå¯¸"></a>14.ç½‘é¡µè§†å£å°ºå¯¸</h2><blockquote>
<p>ç½‘é¡µè§†å£å°ºå¯¸</p>
</blockquote>
<ul>
<li><code>window.screen.height</code> // å±å¹•é«˜åº¦</li>
<li><code>window.innerHeight</code> // ç½‘é¡µè§†å£é«˜åº¦</li>
<li><code>document.body.clientHeight</code> // bodyé«˜åº¦</li>
</ul>
<blockquote>
<p>vw/vh</p>
</blockquote>
<ul>
<li><code>vh</code>ç½‘é¡µè§†å£é«˜åº¦çš„1/100</li>
<li><code>vw</code>ç½‘é¡µè§†å£å®½åº¦çš„1/100</li>
<li><code>vmax</code>å–ä¸¤è€…æœ€å¤§å€¼; <code>vmin</code>å–ä¸¤è€…æœ€å°å€¼</li>
</ul>
<h2 id="15-é‡ç»˜å’Œå›æµ"><a href="#15-é‡ç»˜å’Œå›æµ" class="headerlink" title="15.é‡ç»˜å’Œå›æµ"></a>15.é‡ç»˜å’Œå›æµ</h2><blockquote>
<p><strong>é‡ç»˜</strong>ï¼šæŒ‡çš„æ˜¯å½“é¡µé¢ä¸­çš„å…ƒç´ ä¸è„±ç¦»æ–‡æ¡£æµï¼Œè€Œç®€å•åœ°è¿›è¡Œæ ·å¼çš„å˜åŒ–ï¼Œæ¯”å¦‚ä¿®æ”¹é¢œè‰²ã€èƒŒæ™¯ç­‰ï¼Œ æµè§ˆå™¨é‡æ–°ç»˜åˆ¶æ ·å¼<strong>å›æµ</strong>ï¼šæŒ‡çš„æ˜¯å¤„äºæ–‡æ¡£æµä¸­ <code>DOM</code> çš„å°ºå¯¸å¤§å°ã€ä½ç½®æˆ–è€…æŸäº›å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¯¼è‡´æµè§ˆå™¨é‡æ–°æ¸² æŸ“éƒ¨åˆ†æˆ–å…¨éƒ¨æ–‡æ¡£çš„æƒ…å†µ</p>
</blockquote>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œå›æµè¦æ¯”é‡ç»˜æ¶ˆè€—æ€§èƒ½å¼€æ”¯æ›´å¤§ã€‚å¦å¤–ï¼Œä¸€äº›å±æ€§çš„è¯»å–ä¹Ÿä¼šå¼•èµ·å›æµï¼Œæ¯”å¦‚è¯»å–æŸä¸ª DOM çš„é«˜åº¦å’Œå®½åº¦ï¼Œæˆ–è€…ä½¿ç”¨ getComputedStyle æ–¹æ³•ã€‚</p>
<h1 id="JSåŸºç¡€"><a href="#JSåŸºç¡€" class="headerlink" title="JSåŸºç¡€"></a>JSåŸºç¡€</h1><blockquote>
<p>JSåŸºç¡€çŸ¥è¯†,è§„å®šè¯­æ³•(ECMA262æ ‡å‡†)</p>
<p>JSWebAPIï¼Œç½‘é¡µæ“ä½œçš„API(W3Cæ ‡å‡†)</p>
<p>å‰è€…æ˜¯åè€…çš„åŸºç¡€ï¼Œä¸¤è€…ç»“åˆæ‰èƒ½çœŸæ­£å®é™…åº”ç”¨</p>
</blockquote>
<h2 id="1-class-å’Œ-ç»§æ‰¿"><a href="#1-class-å’Œ-ç»§æ‰¿" class="headerlink" title="1.class å’Œ ç»§æ‰¿"></a>1.class å’Œ ç»§æ‰¿</h2><blockquote>
<p>ç®€å•çš„å›é¡¾ä¸‹<code>class``constructor``å±æ€§``æ–¹æ³•</code> æ³¨ï¼š<code>classæ˜¯ES6è¯­æ³•</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">number</span> = number</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">skill</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æˆ‘æ˜¯<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>ä»Šå¹´<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>æˆ‘ä¼šå­¦ä¹ `</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> zhangsan = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&#x27;å¼ ä¸‰&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(zhangsan.<span class="property">name</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(zhangsan.<span class="property">number</span>)</span><br><span class="line">zhangsan.<span class="title function_">skill</span>()</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç»§æ‰¿ <code>extends``super``æ‰©å±•æˆ–é‡å†™æ–¹æ³•</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">eat</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> ç‰¹èƒ½åƒ`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_ inherited__">People</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name, number</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(name)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name + <span class="string">&#x27;ã€æ³•å¤–ç‹‚å¾’ã€‘&#x27;</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">number</span> = number</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">skill</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`æˆ‘æ˜¯<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>ä»Šå¹´<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>æˆ‘ä¼šå­¦ä¹ `</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> zhangsan = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&#x27;å¼ ä¸‰&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(zhangsan.<span class="property">name</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(zhangsan.<span class="property">number</span>)</span><br><span class="line">zhangsan.<span class="title function_">skill</span>()</span><br><span class="line">zhangsan.<span class="title function_">eat</span>()</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>typeof Student</code> â€œfunctionâ€<code>typeof People</code> â€œfunctionâ€</p>
<p>ç”±æ­¤å¯è§ <code>class</code> ä¹Ÿæ˜¯ <code>function</code></p>
</blockquote>
<h2 id="2-å˜é‡ç±»å‹"><a href="#2-å˜é‡ç±»å‹" class="headerlink" title="2.å˜é‡ç±»å‹"></a>2.å˜é‡ç±»å‹</h2><h3 id="åŸå§‹ç±»å‹"><a href="#åŸå§‹ç±»å‹" class="headerlink" title="åŸå§‹ç±»å‹"></a>åŸå§‹ç±»å‹</h3><blockquote>
<p>æ³¨æ„ï¼šåŸå§‹ç±»å‹ä¸åŒ…å« Objectã€‚</p>
<p>ECMAScript ä¸­å®šä¹‰äº† 6 ç§åŸå§‹ç±»å‹ï¼š</p>
</blockquote>
<ul>
<li>Boolean</li>
<li>String</li>
<li>Number</li>
<li>Null</li>
<li>Undefined</li>
<li>Symbolï¼ˆES6 æ–°å®šä¹‰ï¼‰</li>
</ul>
<h3 id="typeof"><a href="#typeof" class="headerlink" title="typeof"></a>typeof</h3><p>typeof å¯ä»¥åˆ¤æ–­ä»¥ä¸‹å‡ ç§ç±»å‹ï¼š</p>
<ul>
<li>undefined</li>
<li>boolean</li>
<li>number</li>
<li>string</li>
<li>object</li>
<li>function</li>
<li>symbol</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<p><code>typeof null</code> ç»“æœæ˜¯ <code>object</code> ï¼Œå®é™…è¿™æ˜¯ typeof çš„ä¸€ä¸ªbugï¼Œnullæ˜¯åŸå§‹å€¼ï¼Œéå¼•ç”¨ç±»å‹</p>
<p><code>typeof æ•°ç»„</code> ç»“æœæ˜¯ <code>object</code> ï¼Œç»“æœä¸­æ²¡æœ‰ <code>array</code> è¿™ä¸€é¡¹ï¼Œå¼•ç”¨ç±»å‹é™¤äº† <code>function</code> å…¶ä»–çš„å…¨ éƒ¨éƒ½æ˜¯ <code>object</code></p>
<p><code>typeof Symbol()</code> ç”¨ <code>typeof</code> è·å– <code>symbol</code> ç±»å‹çš„å€¼å¾—åˆ°çš„æ˜¯ <code>symbol</code> ï¼Œè¿™æ˜¯ ES6 æ–°å¢çš„çŸ¥è¯†ç‚¹</p>
</blockquote>
<h3 id="ç±»å‹åˆ¤æ–­-instanceof"><a href="#ç±»å‹åˆ¤æ–­-instanceof" class="headerlink" title="ç±»å‹åˆ¤æ–­ - instanceof"></a>ç±»å‹åˆ¤æ–­ - instanceof</h3><blockquote>
<p>instanceof æ˜¯åŸºäºåŸå‹é“¾æŸ¥æ‰¾</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">zhangsan <span class="keyword">instanceof</span> <span class="title class_">Student</span></span><br><span class="line"></span><br><span class="line">zhangsan <span class="keyword">instanceof</span> <span class="title class_">People</span></span><br><span class="line"></span><br><span class="line">zhangsan <span class="keyword">instanceof</span> <span class="title class_">Object</span></span><br><span class="line"></span><br><span class="line">\[\] <span class="keyword">instanceof</span> <span class="title class_">Array</span></span><br><span class="line"></span><br><span class="line">\[\] <span class="keyword">instanceof</span> <span class="title class_">Object</span></span><br><span class="line"></span><br><span class="line">&#123;&#125; <span class="keyword">instanceof</span> <span class="title class_">Object</span></span><br></pre></td></tr></table></figure>
<h2 id="3-åŸå‹"><a href="#3-åŸå‹" class="headerlink" title="3.åŸå‹"></a>3.åŸå‹</h2><blockquote>
<p>åŸå‹</p>
</blockquote>
<p>åŸå‹å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ä¾‹â€œç»§æ‰¿â€é‚£ä¸ªå¯¹è±¡çš„å±æ€§ã€‚åœ¨åŸå‹ä¸Šå®šä¹‰çš„å±æ€§ï¼Œé€šè¿‡â€œç»§æ‰¿â€ï¼Œå®ä¾‹ä¹Ÿæ‹¥æœ‰äº†è¿™ä¸ªå±æ€§ã€‚â€œç»§æ‰¿â€è¿™ä¸ªè¡Œä¸ºæ˜¯åœ¨ new æ“ä½œç¬¦å†…éƒ¨å®ç°çš„ã€‚</p>
<p>æ„é€ å‡½æ•°å†…éƒ¨æœ‰ä¸€ä¸ªåä¸º prototype çš„å±æ€§ï¼Œé€šè¿‡è¿™ä¸ªå±æ€§å°±èƒ½è®¿é—®åˆ°åŸå‹</p>
<blockquote>
<p>éšå¼åŸå‹ æ˜¾ç¤ºåŸå‹</p>
<p><code>Student</code>å°±æ˜¯æ„é€ å‡½æ•°ï¼Œ<code>Student.prototype</code> å°±æ˜¯åŸå‹</p>
<p>å®ä¾‹é€šè¿‡ <code>\_\_proto\_\_</code> è®¿é—®åˆ°åŸå‹</p>
<p>æ‰€ä»¥è¿™ä¸¤è€…æ˜¯ç­‰ä»·çš„ï¼š</p>
</blockquote>
<ul>
<li><code>zhangsan.prototype</code> æ˜¾å¼åŸå‹</li>
<li><code>zhangsan.\_\_proto\_\_</code>éšå¼åŸå‹</li>
<li><code>zhangsan.prototype</code> === <code>zhangsan.\_\_proto\_\_</code></li>
</ul>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d08a5a679b8040f2b33803500209564c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210707135253242.png"></p>
<h2 id="4-åŸå‹é“¾"><a href="#4-åŸå‹é“¾" class="headerlink" title="4.åŸå‹é“¾"></a>4.åŸå‹é“¾</h2><blockquote>
<p>åŸå‹é“¾</p>
</blockquote>
<p>åŸå‹é‡Œé¢ä¹Ÿæœ‰ä¸ª<code>\_\_proto\_\_</code>å±æ€§ï¼ŒåŸå‹å¯ä»¥é€šè¿‡è¿™ä¸ªå±æ€§è®¿é—®åˆ°åŸå‹å®ƒè‡ªå·±çš„åŸå‹</p>
<p>ä¸¾ä¸ªæ —å­</p>
<p><code>Student</code> çš„ä¸€ä¸ªå®ä¾‹ <code>zhangsan</code> ï¼Œå½“è°ƒç”¨å®ƒçš„ä¸€ä¸ªå±æ€§æˆ–è€…æ–¹æ³•æ—¶ï¼Œä»–è‡ªèº«æ²¡æœ‰è¿™ä¸ªæ–¹æ³•æˆ–è€…å±æ€§ï¼Œå®ƒå°±é€šè¿‡<code>\_\_proto\_\_</code>æ¥è¿›è¡Œè®¿é—®åŸå‹çœ‹çœ‹åŸå‹ä¸Šæœ‰æ— è¯¥å±æ€§å’Œæ–¹æ³•ï¼Œæœ‰çš„è¯å°±èƒ½ç›´æ¥ä½¿ç”¨ï¼Œæ²¡æœ‰å°±æŸ¥æ‰¾åŸå‹çš„<code>\_\_proto\_\_</code>ä¹Ÿå°±æ˜¯åŸå‹çš„åŸå‹ç»§ç»­æ‰¾æœ‰æ²¡æœ‰è¯¥å±æ€§æˆ–è€…æ–¹æ³•ç›´åˆ°æœ€é¡¶å±‚ä¸º<code>null</code>ä¸ºæ­¢ï¼Œæ²¡æœ‰æŸ¥æ‰¾åˆ°å°±æ˜¯ä¸å­˜åœ¨</p>
<p>è¿™ç§ä¸æ–­å‘ä¸Šæœç´¢å½¢æˆçš„é“¾çŠ¶å…³ç³»æˆ‘ä»¬å°±ç§°ä¸ºåŸå‹é“¾</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3c854a540c674c2cb21c6fdc85b276fd~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210707165624028"></p>
<h2 id="5-å¦‚ä½•å‡†ç¡®çš„åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯æ•°ç»„"><a href="#5-å¦‚ä½•å‡†ç¡®çš„åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯æ•°ç»„" class="headerlink" title="5.å¦‚ä½•å‡†ç¡®çš„åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯æ•°ç»„"></a>5.å¦‚ä½•å‡†ç¡®çš„åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯æ•°ç»„</h2><blockquote>
<p>æ˜¾ç„¶é€šè¿‡ <code>typeof \[\]</code>åˆ¤æ–­ä¸èƒ½å¾—åˆ°æƒ³è¦çš„ç»“æœ â€œobjectâ€</p>
<p>å¸¸ç”¨çš„æ–¹æ³•å°±æ˜¯instanceof åŸºäºåŸå‹é“¾æŸ¥æ‰¾çš„æ–¹å¼è¿›è¡Œåˆ¤æ–­</p>
<p>è¿˜æœ‰å°±æ˜¯é€šè¿‡Object.prototype.toStringè¿›è¡Œåˆ¤æ–­</p>
</blockquote>
<ul>
<li><code>\[\] instanceof Array</code> ç»“æœ ï¼š<code>true</code></li>
<li><code>Object.prototype.toString.call(\[\])</code> ç»“æœï¼š <code>&quot;\[object Array\]&quot;</code></li>
</ul>
<h2 id="6-æ‰‹å†™ç®€æ˜“çš„jQuery-è€ƒè™‘æ’ä»¶å’Œæ‰©å±•æ€§"><a href="#6-æ‰‹å†™ç®€æ˜“çš„jQuery-è€ƒè™‘æ’ä»¶å’Œæ‰©å±•æ€§" class="headerlink" title="6.æ‰‹å†™ç®€æ˜“çš„jQuery è€ƒè™‘æ’ä»¶å’Œæ‰©å±•æ€§"></a>6.æ‰‹å†™ç®€æ˜“çš„jQuery è€ƒè™‘æ’ä»¶å’Œæ‰©å±•æ€§</h2><blockquote>
<p>å†™ä¸ªç®€å•çš„htmlç­‰ä¸‹ä½¿ç”¨</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>ç‚¹æˆ‘<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>ç‚¹æˆ‘<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>ç‚¹æˆ‘<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>ç‚¹æˆ‘<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>ç‚¹æˆ‘<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>é¦–å…ˆå…ˆç®€å•çš„å†™ä¸ªjQuery</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">jQuery</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">selector</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> result = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(selector)</span><br><span class="line">        <span class="keyword">const</span> lenght = result.<span class="property">length</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; result.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            <span class="variable language_">this</span>\[i\] = result\[i\]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">lenght</span> = lenght</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">selector</span> = result</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">get</span>(<span class="params">index</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>\[index\]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">each</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">this</span>.<span class="property">lenght</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">const</span> ele = <span class="variable language_">this</span>\[i\]</span><br><span class="line">            <span class="title function_">fn</span>(ele)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">on</span>(<span class="params">type, fn</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">each</span>(<span class="function">(<span class="params">ele</span>) =&gt;</span> &#123;</span><br><span class="line">            ele.<span class="title function_">addEventListener</span>(type, fn, <span class="literal">false</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jQuery.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">dialog</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;è¿™æ˜¯ä¸€ä¸ªdialog&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">$</span> = (<span class="params">selector</span>) =&gt; <span class="keyword">new</span> <span class="title function_">jQuery</span>(selector)</span><br><span class="line"></span><br><span class="line">$(<span class="string">&#x27;ul li&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">$().<span class="title function_">dialog</span>()</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¹Ÿå¯ä»¥ç»§ç»­é€ è½®å­</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">myJQuery</span> <span class="keyword">extends</span> <span class="title class_ inherited__">jQuery</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">selector</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(selector)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">css</span>(<span class="params">json</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> json) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">each</span>(<span class="function">(<span class="params">ele</span>) =&gt;</span> &#123;</span><br><span class="line">                ele.<span class="property">style</span>\[key\] = json\[key\]</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title function_">myJQuery</span>(<span class="string">&#x27;ul li&#x27;</span>).<span class="title function_">css</span>(&#123;</span><br><span class="line">    <span class="attr">background</span>: <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="7-ä½œç”¨åŸŸå’Œé—­åŒ…"><a href="#7-ä½œç”¨åŸŸå’Œé—­åŒ…" class="headerlink" title="7.ä½œç”¨åŸŸå’Œé—­åŒ…"></a>7.ä½œç”¨åŸŸå’Œé—­åŒ…</h2><blockquote>
<p>ç®€å•æ¥è¯´ï¼Œ<strong>ä½œç”¨åŸŸ</strong> æŒ‡ç¨‹åºä¸­å®šä¹‰å˜é‡çš„åŒºåŸŸï¼Œå®ƒå†³å®šäº†å½“å‰æ‰§è¡Œä»£ç å¯¹å˜é‡çš„è®¿é—®æƒé™ã€‚</p>
<p>ç”±äºä½œç”¨åŸŸçš„é™åˆ¶ï¼Œæ¯æ®µç‹¬ç«‹çš„æ‰§è¡Œä»£ç å—åªèƒ½è®¿é—®è‡ªå·±ä½œç”¨åŸŸå’Œå¤–å±‚ä½œç”¨åŸŸä¸­çš„å˜é‡ï¼Œæ— æ³•è®¿é—®åˆ°å†…å±‚ä½œç”¨åŸŸçš„å˜é‡ã€‚</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/883328d851964552920b41db24f7b224~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210707195902417"></p>
<p><code>javascript</code> ä¸­å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸¤ç§ä½œç”¨åŸŸç±»å‹ï¼š</p>
<ul>
<li><strong>å…¨å±€ä½œç”¨åŸŸ</strong>ï¼šå…¨å±€ä½œç”¨åŸŸä¸ºç¨‹åºçš„æœ€å¤–å±‚ä½œç”¨åŸŸï¼Œä¸€ç›´å­˜åœ¨ã€‚</li>
<li><strong>å‡½æ•°ä½œç”¨åŸŸ</strong>ï¼šå‡½æ•°ä½œç”¨åŸŸåªæœ‰å‡½æ•°è¢«å®šä¹‰æ—¶æ‰ä¼šåˆ›å»ºï¼ŒåŒ…å«åœ¨çˆ¶çº§å‡½æ•°ä½œç”¨åŸŸ / å…¨å±€ä½œç”¨åŸŸå†…ã€‚</li>
</ul>
<blockquote>
<p>è‡ªç”±å˜é‡</p>
</blockquote>
<ul>
<li>ä¸€ä¸ªå˜é‡åœ¨å½“å‰ä½œç”¨åŸŸæ²¡æœ‰å®šä¹‰ï¼Œä½†è¢«ä½¿ç”¨äº†</li>
<li>å‘ä¸Šçº§ä½œç”¨åŸŸï¼Œä¸€å±‚ä¸€å±‚ä¾æ¬¡å¯»æ‰¾ï¼Œç›´è‡³æ‰¾åˆ°ä¸ºæ­¢</li>
<li>å¦‚æœåˆ°å…¨å±€ä½œç”¨åŸŸéƒ½æ²¡æ‰¾åˆ°,åˆ™æŠ¥é”™Xx is not defined</li>
</ul>
<blockquote>
<p>ä½œç”¨åŸŸé“¾</p>
</blockquote>
<p>å¦‚æœå½“å‰ä½œç”¨åŸŸä¸­çš„ä½¿ç”¨çš„è‡ªç”±å˜é‡æ²¡æœ‰å®šä¹‰ï¼Œå°±ä¼šå‘å¤–å±‚ä½œç”¨åŸŸä¸­å¯»æ‰¾ï¼Œå¦‚æœå¤–å±‚æ²¡æœ‰å°±ç»§ç»­ä¸€ç›´å¯»æ‰¾ä¸‹å»ï¼Œå¦‚æœå…¨å±€ä½œç”¨åŸŸéƒ½æ²¡æœ‰å°±æ˜¯æ²¡æœ‰æŠ¥é”™ <code>ReferenceError</code>è¿™ç§ä¸æ–­å‘ä¸Šæœç´¢å½¢æˆçš„é“¾çŠ¶å…³ç³»ç§°ä¸ºä½œç”¨åŸŸé“¾</p>
<blockquote>
<p>å—çº§ä½œç”¨åŸŸ</p>
</blockquote>
<p><code>ES6</code> æ ‡å‡†æå‡ºäº†ä½¿ç”¨ <code>let</code> å’Œ <code>const</code> ä»£æ›¿ <code>var</code> å…³é”®å­—ï¼Œæ¥â€œåˆ›å»ºå—çº§ä½œç”¨åŸŸâ€</p>
<p>ç®€å•æ¥è¯´ï¼ŒèŠ±æ‹¬å·å†… <code>&#123;...&#125;</code> çš„åŒºåŸŸå°±æ˜¯å—çº§ä½œç”¨åŸŸåŒºåŸŸã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½œç”¨åŸŸçš„ä¸€ä¸ªå¸¸è§è¿ç”¨åœºæ™¯ä¹‹ä¸€ï¼Œå°±æ˜¯ <strong>æ¨¡å—åŒ–</strong>ã€‚ å…¨å±€ä½œç”¨åŸŸæ±¡æŸ“å’Œå˜é‡åå†²çªï¼Œä»£ç ç»“æ„è‡ƒè‚¿ä¸”å¤ç”¨æ€§ä¸é«˜ã€‚</p>
<p>é—­åŒ…: èƒ½å¤Ÿè®¿é—®å…¶ä»–å‡½æ•°å†…éƒ¨å˜é‡çš„å‡½æ•°ï¼Œè¢«ç§°ä¸º <strong>é—­åŒ…</strong>ã€‚</p>
<p>æ˜¯ä½œç”¨åŸŸåº”ç”¨çš„ç‰¹æ®Šæƒ…å†µ</p>
<p>æœ‰ä¸¤ç§è¡¨ç°:å‡½æ•°ä½œä¸º<strong>å‚æ•°è¢«ä¼ é€’å‡½æ•°</strong> å’Œ <strong>ä½œä¸ºè¿”å›å€¼è¢«è¿”å›</strong></p>
<p>åº”ç”¨åœºæ™¯: å¤§å¤šæ•°æ˜¯åœ¨éœ€è¦ç»´æŠ¤å†…éƒ¨å˜é‡çš„åœºæ™¯ä¸‹ã€‚</p>
<p>ä¾‹å­ä¸€</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> a = <span class="number">30</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">print</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> a = <span class="number">100</span></span><br><span class="line"><span class="title function_">test</span>()()</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¾‹å­äºŒ</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> b = <span class="number">30</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(b)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test2</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> b = <span class="number">100</span></span><br><span class="line">    <span class="title function_">fn</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">test2</span>(fun)</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>æ‰€æœ‰çš„è‡ªç”±å˜é‡çš„æŸ¥æ‰¾ï¼Œæ˜¯åœ¨å‡½æ•°å®šä¹‰çš„åœ°æ–¹ï¼Œå‘ä¸Šçº§ä½œç”¨åŸŸæŸ¥æ‰¾**</strong>ä¸æ˜¯åœ¨æ‰§è¡Œçš„åœ°æ–¹!**</p>
<p>ç”±äºé—­åŒ…ä½¿ç”¨è¿‡åº¦è€Œå¯¼è‡´çš„å†…å­˜å ç”¨æ— æ³•é‡Šæ”¾çš„æƒ…å†µï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºï¼š<strong>å†…å­˜æ³„éœ²</strong>ã€‚</p>
</blockquote>
<h2 id="8-this"><a href="#8-this" class="headerlink" title="8.this"></a>8.this</h2><blockquote>
<p>thiså–ä»€ä¹ˆå€¼æ˜¯åœ¨å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ç¡®å®šä¸æ˜¯å®šä¹‰çš„æ—¶å€™ç¡®å®š</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn1</span>()</span><br><span class="line"></span><br><span class="line">fn1.<span class="title function_">call</span>(&#123; <span class="attr">a</span>: <span class="number">1</span> &#125;)</span><br><span class="line">fn1.<span class="title function_">bind</span>(&#123; <span class="attr">b</span>: <span class="number">2</span> &#125;)()</span><br></pre></td></tr></table></figure>
<ol>
<li>æ™®é€šå‡½æ•°ä¸­ï¼šthis-&gt;window</li>
<li>å®šæ—¶å™¨ä¸­ï¼šthis-&gt;window</li>
<li>æ„é€ å‡½æ•°ä¸­ï¼šthis-&gt;å½“å‰å®ä¾‹åŒ–çš„å¯¹è±¡</li>
<li>äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼šthis-&gt;äº‹ä»¶è§¦å‘å¯¹è±¡</li>
<li>åœ¨ js ä¸­ä¸€èˆ¬ç†è§£å°±æ˜¯è°è°ƒç”¨è¿™ä¸ª this å°±æŒ‡å‘è°</li>
</ol>
<h2 id="9-åˆ›å»º10ä¸ª-a-æ ‡ç­¾ï¼Œç‚¹å‡»çš„æ—¶å€™å¼¹å‡ºå¯¹åº”çš„åºå·"><a href="#9-åˆ›å»º10ä¸ª-a-æ ‡ç­¾ï¼Œç‚¹å‡»çš„æ—¶å€™å¼¹å‡ºå¯¹åº”çš„åºå·" class="headerlink" title="9.åˆ›å»º10ä¸ª a æ ‡ç­¾ï¼Œç‚¹å‡»çš„æ—¶å€™å¼¹å‡ºå¯¹åº”çš„åºå·"></a>9.åˆ›å»º10ä¸ª a æ ‡ç­¾ï¼Œç‚¹å‡»çš„æ—¶å€™å¼¹å‡ºå¯¹åº”çš„åºå·</h2><blockquote>
<p>è€ƒå¯Ÿå—çº§ä½œç”¨åŸŸ</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> a = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">    a.<span class="property">innerHTML</span> = i + <span class="string">&#x27;&lt;br&gt;&#x27;</span></span><br><span class="line">    a.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">        e.<span class="title function_">preventDefault</span>()</span><br><span class="line">        <span class="title function_">alert</span>(i)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="10-å®é™…å¼€å‘ä¸­é—­åŒ…çš„åº”ç”¨"><a href="#10-å®é™…å¼€å‘ä¸­é—­åŒ…çš„åº”ç”¨" class="headerlink" title="10.å®é™…å¼€å‘ä¸­é—­åŒ…çš„åº”ç”¨"></a>10.å®é™…å¼€å‘ä¸­é—­åŒ…çš„åº”ç”¨</h2><blockquote>
<p>éšè—æ•°æ® åªæä¾›API ä¿è¯æ•°æ®å®‰å…¨</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createCache</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> data = &#123;&#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="title function_">set</span>(<span class="params">key, val</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(data, key, val)</span><br><span class="line">            data\[key\] = val</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">get</span>(<span class="params">key</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> data\[key\]</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> c = <span class="title function_">createCache</span>()</span><br><span class="line">c.<span class="title function_">set</span>(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;haha &#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c.<span class="title function_">get</span>(<span class="string">&#x27;a&#x27;</span>))</span><br></pre></td></tr></table></figure>
<h2 id="11-æ‰‹å†™call-apply-bindå‡½æ•°"><a href="#11-æ‰‹å†™call-apply-bindå‡½æ•°" class="headerlink" title="11.æ‰‹å†™call,apply,bindå‡½æ•°"></a>11.æ‰‹å†™call,apply,bindå‡½æ•°</h2><h3 id="æ‰‹å†™call-apply-bind-æ¯”è¾ƒåŸºç¡€"><a href="#æ‰‹å†™call-apply-bind-æ¯”è¾ƒåŸºç¡€" class="headerlink" title="æ‰‹å†™call,apply,bind æ¯”è¾ƒåŸºç¡€"></a>æ‰‹å†™call,apply,bind æ¯”è¾ƒåŸºç¡€</h3><blockquote>
<p>æ‰‹å†™<code>call</code> ï¼Œ<code>call</code>çš„æ€§èƒ½æ¯” <code>apply</code>é«˜</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">call1</span> = <span class="keyword">function</span> (<span class="params">obj, ...args</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> context = obj</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> fn = <span class="title class_">Symbol</span>()</span><br><span class="line"></span><br><span class="line">  context\[fn\] = <span class="variable language_">this</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> result = context\[fn\](...args)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">delete</span> context\[fn\]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">base</span> + num1 + num2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">base</span>: <span class="number">1</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sum.<span class="title function_">call1</span>(obj, <span class="number">100</span>, <span class="number">200</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ‰‹å†™<code>apply</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">apply1</span> = <span class="keyword">function</span> (<span class="params">obj, args</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> context = obj</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> fn = <span class="title class_">Symbol</span>()</span><br><span class="line"></span><br><span class="line">  context\[fn\] = <span class="variable language_">this</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> result = context\[fn\](...args)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">delete</span> context\[fn\]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">num1, num2</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">base</span> + num1 + num2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">base</span>: <span class="number">1</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sum.<span class="title function_">apply1</span>(obj, \[<span class="number">100</span>, <span class="number">200</span>\])</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ‰‹å†™<code>bind</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">mybind</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> args = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> myThis = args.<span class="title function_">shift</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> self = <span class="variable language_">this</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> self.<span class="title function_">apply</span>(myThis, args)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>, a + b)</span><br><span class="line">&#125;</span><br><span class="line">fn.<span class="title function_">mybind</span>(&#123; <span class="attr">a</span>: <span class="number">1</span> &#125;, <span class="number">1</span>, <span class="number">2</span>)()</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ‰‹å†™å®Œæ•´çš„<code>bind</code> æ”¯æŒ<code>new</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">bind</span> = <span class="keyword">function</span>(<span class="params">OThis, ...outherArgs</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> thatFunc = <span class="variable language_">this</span></span><br><span class="line">    <span class="keyword">const</span> fBind = <span class="keyword">function</span>(<span class="params">...innerArgs</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> thisFunc.<span class="title function_">apply</span>(</span><br><span class="line">        	<span class="variable language_">this</span> <span class="keyword">instanceof</span> thatFunc ? <span class="variable language_">this</span> : <span class="title class_">OThis</span>, \[...outherArgs, ...innerArgs\]</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fBind.<span class="property">prototeye</span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(thatFunc.<span class="property"><span class="keyword">prototype</span></span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> fBind</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¾‹é¢˜"><a href="#ä¾‹é¢˜" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fn1&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fn2&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn1.<span class="property">call</span>.<span class="title function_">call</span>(fn2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fn1.<span class="property">call</span>.<span class="property">call</span>.<span class="property">call</span>.<span class="property">call</span>.<span class="property">call</span>.<span class="property">call</span>.<span class="property">call</span>.<span class="title function_">call</span>(fn2)</span><br></pre></td></tr></table></figure>
<h2 id="12-å¼‚æ­¥"><a href="#12-å¼‚æ­¥" class="headerlink" title="12.å¼‚æ­¥"></a>12.å¼‚æ­¥</h2><blockquote>
<p><code>JS</code>æ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œåªèƒ½åŒæ—¶åšä¸€ä»¶äº‹å„¿</p>
<p>æµè§ˆå™¨å’Œ<code>nodejs</code>å·²æ”¯æŒJSå¯åŠ¨è¿›ç¨‹ï¼Œå¦‚<code>Web Worker</code></p>
<p><code>JS</code>å’Œ<code>DOM</code>æ¸²æŸ“å…±ç”¨åŒä¸€ä¸ªçº¿ç¨‹,å› ä¸º<code>JS</code>å¯ä¿®æ”¹<code>DOM</code>ç»“æ„</p>
</blockquote>
<p>å› ä¸ºæ˜¯å•çº¿ç¨‹</p>
<p>é‡åˆ°ç­‰å¾…(ç½‘ç»œè¯·æ±‚,å®šæ—¶ä»»åŠ¡)ä¸èƒ½å¡ä½,éœ€è¦å¼‚æ­¥,é‡‡ç”¨äº†å›è°ƒcallbackå‡½æ•°å½¢å¼</p>
<blockquote>
<p>åŒæ­¥å’Œå¼‚æ­¥</p>
</blockquote>
<ul>
<li>åŸºäºJSæ˜¯å•çº¿ç¨‹è¯­è¨€</li>
<li>å¼‚æ­¥ä¸ä¼šé˜»å¡ä»£ç æ‰§è¡Œ</li>
<li>åŒæ­¥ä¼šé˜»å¡ä»£ç æ‰§è¡Œ</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">100</span>)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">300</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">200</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">100</span>)</span><br><span class="line"><span class="title function_">alert</span>(<span class="number">1</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">200</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åº”ç”¨åœºæ™¯ ï¼š</p>
</blockquote>
<p>ç½‘ç»œè¯·æ±‚, æ¯”å¦‚ajaxå›¾ç‰‡åŠ è½½</p>
<p>å®šæ—¶ä»»åŠ¡,æ¯”å¦‚ setTimeout</p>
<h2 id="13-callback-hell-å›è°ƒåœ°ç‹±"><a href="#13-callback-hell-å›è°ƒåœ°ç‹±" class="headerlink" title="13.callback hell å›è°ƒåœ°ç‹±"></a>13.callback hell å›è°ƒåœ°ç‹±</h2><blockquote>
<p>æ¯”å¦‚è¿™ä¸ªä¾‹å­ï¼Œä¸€ç›´å¾€ä¸‹é¢åµŒå¥—ï¼ˆå‡½æ•°ä½œä¸ºå‚æ•°å±‚å±‚åµŒå¥—ï¼‰</p>
</blockquote>
<p>å›è°ƒåœ°ç‹±æœ€ä¸»è¦çš„å°±æ˜¯å› ä¸ºåŠŸèƒ½é€»è¾‘ä»£ç åµŒå¥—çš„å±‚æ¬¡å¤ªå¤š,å¯¼è‡´å¯è¯»æ€§é™ä½,ç»´æŠ¤å›°éš¾,é¿å…å›è°ƒåœ°ç‹±çš„æœ€é‡è¦çš„æ–¹é¢æ˜¯å°†åŠŸèƒ½ç§»å¼€,ä¿æŒä»£ç ç®€å•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$.<span class="title function_">get</span>(url1, <span class="function">(<span class="params">data1</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>. <span class="title function_">log</span>(datal)</span><br><span class="line"></span><br><span class="line">    $.<span class="title function_">get</span>(url2ï¼Œ(data2) =&gt; &#123;</span><br><span class="line">        <span class="variable language_">console</span>. <span class="title class_">Log</span>(data2)</span><br><span class="line"></span><br><span class="line">        $.<span class="title function_">get</span>(url3, <span class="function">(<span class="params">data3</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>. <span class="title function_">log</span>(data3)</span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="14-Promise"><a href="#14-Promise" class="headerlink" title="14.Promise"></a>14.Promise</h2><blockquote>
<p><strong>Promise</strong>:æ˜¯ç¼–å†™å¼‚æ­¥ä»£ç çš„ä¸€ç§æ–¹å¼ï¼Œå®ƒä»ç„¶ä»¥è‡ªé¡¶å‘ä¸‹çš„æ–¹å¼æ‰§è¡Œï¼Œå¹¶ä¸”ç”±äºé¼“åŠ±ä½¿ç”¨try / catchæ ·å¼é”™è¯¯å¤„ç†è€Œå¤„ç†æ›´å¤šç±»å‹çš„é”™è¯¯</p>
<p><strong>Promise</strong>è§£å†³äº†å›è°ƒåœ°ç‹±<strong>åµŒå¥—</strong>çš„é—®é¢˜</p>
</blockquote>
<h3 id="1-ä¸€ä¸ªç®€å•çš„Promiseä¾‹å­"><a href="#1-ä¸€ä¸ªç®€å•çš„Promiseä¾‹å­" class="headerlink" title="1.ä¸€ä¸ªç®€å•çš„Promiseä¾‹å­"></a>1.ä¸€ä¸ªç®€å•çš„Promiseä¾‹å­</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params">url</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">            url,</span><br><span class="line">            <span class="title function_">success</span>(<span class="params">data</span>) &#123;</span><br><span class="line">                <span class="title function_">resolve</span>(data)</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="title function_">error</span>(<span class="params">err</span>) &#123;</span><br><span class="line">                <span class="title function_">reject</span>(err)</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> url1 = <span class="string">&#x27;/data1.json&#x27;</span></span><br><span class="line"><span class="keyword">const</span> ur12 = <span class="string">&#x27;/data2.json&#x27;</span></span><br><span class="line"><span class="keyword">const</span> url3 = <span class="string">&#x27;/data3.json&#x27;</span></span><br><span class="line"><span class="title function_">getData</span>(url1)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">(<span class="params">data1</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data1)</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">getData</span>(url2)</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">(<span class="params">data2</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data2)</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">getData</span>(url3)</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">(<span class="params">data3</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data3)</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(err))</span><br></pre></td></tr></table></figure>
<h3 id="2-æ‰‹å†™ç”¨PromiseåŠ è½½ä¸€å¼ å›¾ç‰‡"><a href="#2-æ‰‹å†™ç”¨PromiseåŠ è½½ä¸€å¼ å›¾ç‰‡" class="headerlink" title="2.æ‰‹å†™ç”¨PromiseåŠ è½½ä¸€å¼ å›¾ç‰‡"></a>2.æ‰‹å†™ç”¨PromiseåŠ è½½ä¸€å¼ å›¾ç‰‡</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">loadImg</span>(<span class="params">url</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> img = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;img&#x27;</span>)</span><br><span class="line">        img.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(&#123; img, <span class="attr">msg</span>: <span class="string">&#x27;å›¾ç‰‡åŠ è½½æˆåŠŸ&#x27;</span> &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        img.<span class="property">onerror</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`<span class="subst">$&#123;img.src&#125;</span>å›¾ç‰‡åŠ è½½å¤±è´¥`</span>))</span><br><span class="line">        &#125;</span><br><span class="line">        img.<span class="property">src</span> = url</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">loadImg</span>(<span class="string">&#x27;./img/2.jpg&#x27;</span>)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(res.<span class="property">img</span>)</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a9c18a58b6754e089e07aae1f9fd9091~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210708110216819"></p>
<h2 id="15-event-loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰"><a href="#15-event-loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰" class="headerlink" title="15.event loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰"></a>15.event loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰</h2><blockquote>
<p>å¼‚æ­¥å’Œäº‹ä»¶å¾ªç¯çš„å…³ç³»</p>
</blockquote>
<ul>
<li>JSæ˜¯å•çº¿ç¨‹è¿è¡Œçš„</li>
<li>å¼‚æ­¥è¦åŸºäºå›è°ƒæ¥å®ç°</li>
<li>event loopå°±æ˜¯å¼‚æ­¥å›è°ƒçš„å®ç°åŸç†</li>
</ul>
<blockquote>
<p>JSä»£ç æ˜¯å¦‚ä½•æ‰§è¡Œçš„</p>
</blockquote>
<ul>
<li>ä»å‰åˆ°å,ä¸€è¡Œä¸€-è¡Œæ‰§è¡Œ</li>
<li>å¦‚æœæŸä¸€è¡Œæ‰§è¡ŒæŠ¥é”™ï¼Œåˆ™åœæ­¢ä¸‹é¢ä»£ç çš„æ‰§è¡Œ</li>
<li>å…ˆæŠŠåŒæ­¥ä»£ç æ‰§è¡Œå®Œï¼Œå†æ‰§è¡Œå¼‚æ­¥</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hi&#x27;</span>)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span> <span class="title function_">cb1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title class_">Log</span>(<span class="string">&#x27;cb1&#x27;</span>)</span><br><span class="line">&#125;, <span class="number">5000</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Bye&#x27;</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>äº‹ä»¶å¾ªç¯è¿‡ç¨‹ï¼ˆè¿˜æ²¡æ¶‰åŠå®ä»»åŠ¡/å¾®ä»»åŠ¡ï¼‰</p>
</blockquote>
<ol>
<li>åŒæ­¥ä»£ç ,ä¸€è¡Œä¸€ è¡Œæ”¾åœ¨<code>Call Stack</code>æ‰§è¡Œ(åŒæ­¥ä»»åŠ¡åœ¨æ ˆé‡Œå‹æ ˆå¼¹æ ˆæ‰§è¡Œ)</li>
<li>é‡åˆ°å¼‚æ­¥,ä¼šå…ˆâ€œè®°å½•â€ä¸‹,ç­‰å¾…æ—¶æœº(å®šæ—¶ã€ç½‘ç»œè¯·æ±‚ç­‰)</li>
<li>æ—¶æœºåˆ°äº†,å°±ç§»åŠ¨åˆ°<code>Callback Queue</code>(å›è°ƒé˜Ÿåˆ—)</li>
<li>å¦‚<code>Call Stack</code>ä¸ºç©º(å³åŒæ­¥ä»£ç æ‰§è¡Œå®Œ) <code>Event Loop</code>å¼€å§‹å·¥ä½œ</li>
<li>è½®è¯¢æŸ¥æ‰¾<code>Callback Queue</code>(å›è°ƒé˜Ÿåˆ—) , å¦‚æœ‰åˆ™ç§»åŠ¨åˆ°<code>Call Stack</code>æ‰§è¡Œ</li>
<li>ç„¶åç»§ç»­è½®è¯¢æŸ¥æ‰¾(æ°¸åŠ¨æœºä¸€æ ·)</li>
</ol>
<blockquote>
<p>è‡ªå·±ç”»çš„å›¾ï¼Œä¸å¯¹çš„åœ°æ–¹è¯·å¤šå¤šæŒ‡æ•™</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/aacb9edfd8684117a03660dcd4a7ce01~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210708121124506"></p>
<h2 id="16-PromiseçŠ¶æ€"><a href="#16-PromiseçŠ¶æ€" class="headerlink" title="16.PromiseçŠ¶æ€"></a>16.PromiseçŠ¶æ€</h2><blockquote>
<p>ä¸‰ç§çŠ¶æ€</p>
</blockquote>
<ul>
<li><code>pending</code> ä¸ä¼šè§¦å‘thenå’Œcatch</li>
<li><code>resolved</code> ä¼šè§¦å‘åç»­çš„thenå›è°ƒå‡½æ•°</li>
<li><code>rejected</code> ä¼šè§¦å‘åç»­çš„catchå›è°ƒå‡½æ•°</li>
</ul>
<blockquote>
<p>çŠ¶æ€çš„è¡¨ç° å’Œ å˜åŒ– ï¼ˆ<strong>å˜åŒ–æ˜¯ä¸å¯é€†çš„</strong>ï¼‰</p>
</blockquote>
<p><code>pending</code>ä¸€> <code>resolved</code> æˆ– <code>pending</code>ä¸€> <code>rejected</code></p>
<blockquote>
<p><code>then</code> å’Œ <code>catch</code> å¯¹çŠ¶æ€çš„å½±å“(é‡è¦)</p>
</blockquote>
<ul>
<li><code>then</code>æ­£å¸¸è¿”å›<strong>resolved</strong>ï¼Œ é‡Œé¢æœ‰æŠ¥é”™åˆ™è¿”å›<strong>rejected</strong></li>
<li><code>catch</code>æ­£å¸¸è¿”å›<strong>resolved</strong>ï¼Œé‡Œé¢æœ‰æŠ¥é”™åˆ™è¿”å›<strong>rejected</strong></li>
</ul>
<blockquote>
<p>thenå’Œcatchçš„é“¾å¼è°ƒç”¨(å¸¸è€ƒ)</p>
<p>ç½‘ä¸Šçš„promiseä¹ é¢˜å¾ˆå¤šçš„ï¼Œæˆ‘è¿™é‡Œå°±ç¼–ä¸€ä¸ªç®€å•ç‚¹çš„ï¼Œæœ€åæ‰“å°çš„ç»“æœ</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p1 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">100</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">p1.<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;err&#x27;</span>))</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p2 = <span class="title class_">Promise</span>.<span class="title function_">reject</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;then error&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">p2.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;200&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;300&#x27;</span>)</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;err&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;400&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;500&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;600&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>æœ€åæ‰“å° çš„æ˜¯ <code>100 300 500 600</code></p>
<blockquote>
<p>ç½‘ä¸Šæ‰’ä¸¤ä¸ªç®€å•çš„</p>
<p>ä¾‹é¢˜1</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>()</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;erro1&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<p>æ‰“å°çš„æ˜¯ <code>1 2 3</code></p>
<blockquote>
<p>ä¾‹é¢˜2</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>()</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;erro1&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<p>æ‰“å°çš„æ˜¯ <code>1 2</code></p>
<blockquote>
<p>ç½‘ä¸Šçš„ä¾‹é¢˜å¾ˆå¤šå“ˆï¼Œå¤§å®¶æœ‰ç‚¹æ—¶å€™å¯ä»¥å¤šç»ƒä¹ </p>
</blockquote>
<h2 id="17-async-await"><a href="#17-async-await" class="headerlink" title="17.async / await"></a>17.async / await</h2><blockquote>
<p><code>async</code> / <code>await</code> å’Œ å¼‚æ­¥å›è°ƒ<code>callback hell</code></p>
</blockquote>
<ul>
<li><code>Promise</code><strong>then**</strong>catch**é“¾å¼è°ƒç”¨,ä½†ä¹Ÿæ˜¯åŸºäºå›è°ƒå‡½æ•°</li>
<li><code>async</code>/ <code>await</code>æ˜¯åŒæ­¥è¯­æ³•,<strong>å½»åº•æ¶ˆç­</strong>å¼‚æ­¥å›è°ƒçš„ç»ˆææ­¦å™¨</li>
<li>ä½†å’Œ<code>Promise</code>å¹¶ä¸äº’æ–¥ ,åè€Œ,ä¸¤è€…ç›¸è¾…ç›¸æˆ</li>
</ul>
<blockquote>
<p><code>async</code> / <code>await</code> å’Œ <code>Promise</code>çš„å…³ç³»</p>
</blockquote>
<ul>
<li>æ‰§è¡Œ<code>async</code>å‡½æ•°ï¼Œè¿”å›çš„æ˜¯<strong>Promise</strong>å¯¹è±¡</li>
<li><code>await</code>ç›¸å½“äº<code>Promise</code>çš„<strong>then</strong></li>
<li><code>try...catch</code>å¯æ•è·å¼‚å¸¸ï¼Œä»£æ›¿äº†<code>Promise</code> çš„<strong>catch</strong></li>
</ul>
<blockquote>
<p>ä¸‹é¢å‡ ä¸ªä¾‹å­</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">!(<span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> p1 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">300</span>)</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> p1</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;data&#x27;</span>, data)</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line">!(<span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> datal = <span class="keyword">await</span> <span class="number">400</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;datal&#x27;</span>, datal)</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">resolve</span>(<span class="number">500</span>)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">!(<span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> data2 = <span class="keyword">await</span> <span class="title function_">fn1</span>()</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;data2&#x27;</span>, data2)</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line">!(<span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> p4 = <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">&#x27;err&#x27;</span>)</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> p4</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (ex) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(ex)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¼‚æ­¥çš„æœ¬è´¨</p>
</blockquote>
<ul>
<li><code>async</code>/ <code>await</code>æ˜¯æ¶ˆç­å¼‚æ­¥å›è°ƒçš„ç»ˆææ­¦å™¨</li>
<li>JSè¿˜æ˜¯å•çº¿ç¨‹,è¿˜å¾—æ˜¯æœ‰å¼‚æ­¥,è¿˜å¾—æ˜¯åŸºäº<code>event loop</code></li>
<li><code>async/await</code>åªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œä½†è¿™é¢—ç³–çœŸé¦™!</li>
</ul>
<blockquote>
<p>ç»“åˆäº‹ä»¶å¾ªç¯åšä¸¤ä¸ªä¾‹é¢˜</p>
<p>ä¾‹é¢˜ä¸€</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;async1 start&#x27;</span>)</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">async2</span>()</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;async1 end&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;async2&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;script start&#x27;</span>)</span><br><span class="line"><span class="title function_">async1</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;script end&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>ç»“æœæ‰“å°çš„æ˜¯ ï¼š</p>
<p><code>script start</code></p>
<p><code>async1 start</code></p>
<p><code>async2</code></p>
<p><code>script end</code></p>
<p><code>async1 end</code></p>
<blockquote>
<p>ä¾‹é¢˜äºŒ</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">!(<span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;async1 start&#x27;</span>)</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">async2</span>()</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;async1 end&#x27;</span>)</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">async3</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;async1 end 2&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async2</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;async2&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async3</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;async3&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;script start&#x27;</span>)</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">async1</span>()</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;script end&#x27;</span>)</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<p>æ‰“å°çš„ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f2b03b35bddd4755b02c97715c665352~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210708141256573"></p>
<h2 id="18-for-â€¦-of"><a href="#18-for-â€¦-of" class="headerlink" title="18.for â€¦ of"></a>18.for â€¦ of</h2><blockquote>
<p><code>for .. in</code> (ä»¥åŠ<code>forEach``for</code> )æ˜¯å¸¸è§„çš„åŒæ­¥éå†</p>
<p><code>for .. of</code>å¸¸ç”¨äºå¼‚æ­¥çš„éå†</p>
<p>ç”¨ä¸ªä¾‹å­æ¥è¯´æ˜ä¸¤ä¸ªçš„åŒºåˆ«</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">item</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">resolve</span>(item * item)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr = \[<span class="number">100</span>, <span class="number">200</span>, <span class="number">300</span>\]</span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">forEach</span>(<span class="title function_">async</span> (i) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">await</span> <span class="title function_">test</span>(i))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä¾‹å­ï¼Œä½¿ç”¨åŒæ­¥éå†çš„æ—¶å€™ æ˜¯åœ¨1000msåå…¨éƒ¨æŠŠç»“æœæ‰“å°å‡ºæ¥äº†ï¼Œè€Œä¸æ˜¯éš”ä¸€ç§’æ‰“å°</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/862ef534afc741f3a7de6836114d8905~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="1"></p>
<blockquote>
<p>ä½¿ç”¨<code>for ... of</code> éå†</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params">item</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">resolve</span>(item * item)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr = \[<span class="number">100</span>, <span class="number">200</span>, <span class="number">300</span>\]</span><br><span class="line"></span><br><span class="line">!(<span class="keyword">async</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> arr) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">await</span> <span class="title function_">test</span>(item))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨<code>for...of</code> éå†ä¼š 1000ms æ‰“å°ä¸€æ¬¡</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f87e9d7e03244fe2839ff251a500da39~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="2"></p>
<h2 id="19-å®ä»»åŠ¡-å¾®ä»»åŠ¡"><a href="#19-å®ä»»åŠ¡-å¾®ä»»åŠ¡" class="headerlink" title="19.å®ä»»åŠ¡/å¾®ä»»åŠ¡"></a>19.å®ä»»åŠ¡/å¾®ä»»åŠ¡</h2><blockquote>
<p>ç®€å•ä»‹ç»:</p>
<p>å¾®ä»»åŠ¡å’Œå®ä»»åŠ¡çš†ä¸º<strong>å¼‚æ­¥ä»»åŠ¡</strong>ï¼Œå®ƒä»¬éƒ½å±äºä¸€ä¸ªé˜Ÿåˆ—ï¼Œä¸»è¦åŒºåˆ«åœ¨äºä»–ä»¬çš„<strong>æ‰§è¡Œé¡ºåº</strong></p>
</blockquote>
<ul>
<li>å®ä»»åŠ¡: setTimeoutï¼ŒsetIntervalï¼ŒAjaxï¼ŒDOMäº‹ä»¶</li>
<li>å¾®ä»»åŠ¡: Promise async/await</li>
<li>å¾®ä»»åŠ¡æ‰§è¡Œæ—¶æœºæ¯”å®ä»»åŠ¡è¦æ—©</li>
</ul>
<blockquote>
<p>å…ˆæ¥ä¸ªç®€å•çš„demo</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>)</span><br><span class="line">&#125;, <span class="number">1</span>)</span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>)</span><br></pre></td></tr></table></figure>
<p>ç»“æœï¼š<code>1 4 3 2</code></p>
<blockquote>
<p>è¯´ä¸‹DOMæ¸²æŸ“</p>
</blockquote>
<ul>
<li>JSæ˜¯å•çº¿ç¨‹çš„ï¼Œè€Œä¸”å’ŒDOMæ¸²æŸ“å…±ç”¨ä¸€ä¸ªçº¿ç¨‹</li>
<li>JSæ‰§è¡Œçš„æ—¶å€™ï¼Œå¾—ç•™ä¸€-äº›æ—¶æœºä¾›DOMæ¸²æŸ“</li>
<li>æ¯æ¬¡Call Stackï¼ˆæ‰§è¡Œæ ˆï¼‰æ¸…ç©º(å³æ¯æ¬¡è½®è¯¢ç»“æŸ)ï¼Œ å³åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œ</li>
<li>éƒ½æ˜¯DOMé‡æ–°æ¸²æŸ“çš„æœºä¼šï¼ŒDOMç»“æ„å¦‚æœ‰æ”¹å˜åˆ™é‡æ–°æ¸²æŸ“</li>
<li>ç„¶åå†å»è§¦å‘ä¸‹ä¸€æ¬¡Event Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰</li>
</ul>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d2ed3e9cb47a43658ca6dabdbe18e295~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210708144736486"></p>
<blockquote>
<p>å®ä»»åŠ¡: DOMæ¸²æŸ“åè§¦å‘,å¦‚<code>setTimeout</code></p>
<p>å¾®ä»»åŠ¡: DOMæ¸²æŸ“å‰è§¦å‘ï¼Œå¦‚<code>Promise</code></p>
<p>å¾®ä»»åŠ¡æ˜¯ES6è¯­æ³•è§„å®šçš„</p>
<p>å®ä»»åŠ¡æ˜¯ç”±æµè§ˆå™¨è§„å®šçš„</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/429bc6b1d7cc4058abebbfd479169785~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210708145221088"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6b7801ad56014aec9b9203c5f4443af5~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210708145248926"></p>
<blockquote>
<p>åœ¨<strong>äº‹ä»¶å¾ªç¯</strong>ä¸­ <code>å®ä»»åŠ¡</code>/<code>å¾®ä»»åŠ¡</code> ä¹‹é—´çš„å…³ç³»</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8b4305b9bab247d988372ccc04788e4f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210708151152089"></p>
<blockquote>
<p>å†™ä¸¤ä¸ªä¾‹é¢˜</p>
<p>ä¾‹é¢˜ä¸€</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;async1 start&#x27;</span>)</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">async2</span>()</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;async1 end&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">async2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;async2&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;script start&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;setitmeout&#x27;</span>)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="title function_">async1</span>()</span><br></pre></td></tr></table></figure>
<p>ç»“æœï¼š <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b377eb78ddde4b699f0a649366a7731a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210708152230776"></p>
<blockquote>
<p>ä¾‹é¢˜äºŒ</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;promise1&#x27;</span>)</span><br><span class="line">  <span class="title function_">resolve</span>()</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;promise2&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;script end&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>ç»“æœï¼š<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/27ea271c40e3463faf5394a175fdf418~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210708152608397"></p>
<h2 id="20-DOMèŠ‚ç‚¹"><a href="#20-DOMèŠ‚ç‚¹" class="headerlink" title="20.DOMèŠ‚ç‚¹"></a>20.DOMèŠ‚ç‚¹</h2><blockquote>
<p>DOM æ˜¯ä¸€ç§æ ‘ç»“æ„ ï¼ˆDOMæ ‘ï¼‰</p>
<p>èŠ‚ç‚¹æ“ä½œ ç®€å•ä¸¾å‡ ä¸ªä¾‹å­ï¼Œè¿™äº›åŸºæœ¬APIä¸ç”¨å¤ªå¤šä»‹ç»</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> div1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;diV1&#x27;</span>) / å…ƒç´ </span><br><span class="line"><span class="keyword">const</span> divList = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(divList.<span class="property">length</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(divList\[<span class="number">0</span>\])</span><br><span class="line"><span class="keyword">const</span> containerListe = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;container&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> pList = <span class="variable language_">document</span>.<span class="title function_">querySelectorAlL</span>(<span class="string">&#x27;p&#x27;</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>DOM</code>èŠ‚ç‚¹çš„<code>property</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> pListe = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(p)</span><br><span class="line"><span class="keyword">const</span> p = pList\[<span class="number">0</span>\]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(pList\[<span class="number">0</span>\].<span class="property">style</span>.<span class="property">width</span>) / è·å–æ ·å¼</span><br><span class="line">p.<span class="property">style</span>.<span class="property">width</span> = <span class="string">&#x27;100px&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="property">className</span>)</span><br><span class="line">p.<span class="property">className</span> = <span class="string">&#x27;p1&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="property">nodeName</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="property">nodeType</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>DOM</code>èŠ‚ç‚¹çš„<code>attribute</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> pListe = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(p)</span><br><span class="line"><span class="keyword">const</span> p = pList\[<span class="number">0</span>\]</span><br><span class="line">p.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-src&#x27;</span>, <span class="string">&#x27;./21.pro.jpg&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-src&#x27;</span>))</span><br><span class="line"></span><br><span class="line">p.<span class="title function_">setAttribute</span>(<span class="string">&#x27;style&#x27;</span>, <span class="string">&#x27;color:#ccc;&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="title function_">getAttribute</span>(<span class="string">&#x27;style&#x27;</span>))</span><br><span class="line">p.<span class="title function_">removeAttribute</span>(<span class="string">&quot;style&quot;</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>property</code> :ä¿®æ”¹å¯¹è±¡å±æ€§,ä¸ä¼šä½“ç°åˆ°htmlç»“æ„ä¸­</p>
<p><code>attribute</code> :ä¿®æ”¹htmlå±æ€§,ä¼šæ”¹å˜htmlç»“æ„</p>
<p>ä¸¤è€…éƒ½<strong>æœ‰å¯èƒ½</strong>å¼•èµ·<code>DOM</code><strong>é‡æ–°æ¸²æŸ“</strong></p>
</blockquote>
<h2 id="21-DOMèŠ‚ç‚¹æ“ä½œ"><a href="#21-DOMèŠ‚ç‚¹æ“ä½œ" class="headerlink" title="21.DOMèŠ‚ç‚¹æ“ä½œ"></a>21.DOMèŠ‚ç‚¹æ“ä½œ</h2><blockquote>
<p>èŠ‚ç‚¹æ“ä½œ</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;p&quot;</span>);</span><br><span class="line">p.<span class="title function_">remove</span>();</span><br><span class="line">p.<span class="title function_">removeChild</span>(clildEle)</span><br><span class="line"><span class="keyword">const</span> p2 = p.<span class="title function_">cloneNode</span>(<span class="literal">true</span>)</span><br><span class="line">box.<span class="title function_">appendChild</span>(p);</span><br><span class="line">box.<span class="title function_">appendChild</span>(p2);</span><br><span class="line">p.<span class="title function_">insertBefore</span>(newele,ele)</span><br><span class="line">box.<span class="title function_">replaceChild</span>(newEle,oldEle)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="property">nodeType</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>èŠ‚ç‚¹ä¹‹é—´çš„è”ç³»</p>
</blockquote>
<ul>
<li><p>parentNode æŸ¥æ‰¾çˆ¶èŠ‚ç‚¹</p>
</li>
<li><p>childElementCount è¿”å›å­å…ƒç´ çš„ä¸ªæ•°<strong>ä¸åŒ…æ‹¬æ–‡æœ¬èŠ‚ç‚¹å’Œæ³¨é‡Š</strong></p>
</li>
<li><p>firstChild æŸ¥æ‰¾æŒ‡å®šèŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ç‚¹</p>
</li>
<li><p>lastChild æŸ¥æ‰¾æŒ‡å®šèŠ‚ç‚¹çš„æœ€åä¸€ä¸ªå­—èŠ‚ç‚¹</p>
</li>
<li><p>previousSibling æŸ¥æ‰¾æŒ‡å®šèŠ‚ç‚¹çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹</p>
</li>
<li><p>firstElementChild è¿”å›ç¬¬ä¸€ä¸ªå­å…ƒç´ </p>
</li>
<li><p>lastElementChild è¿”å›æœ€åä¸€ä¸ªå­å…ƒç´ </p>
</li>
<li><p>previousElementSibling è¿”å›å‰ä¸€ä¸ªç›¸é‚»å…„å¼Ÿå…ƒç´ </p>
</li>
<li><p>nextElementSibling è¿”å›åä¸€ä¸ªç›¸é‚»å…„å¼Ÿå…ƒç´ </p>
</li>
<li><p>nextSibling æŸ¥æ‰¾æŒ‡å®šèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</p>
</li>
</ul>
<h2 id="22-DOMæ€§èƒ½"><a href="#22-DOMæ€§èƒ½" class="headerlink" title="22.DOMæ€§èƒ½"></a>22.DOMæ€§èƒ½</h2><ul>
<li>DOMæ“ä½œéå¸¸â€æ˜‚è´µâ€ï¼Œ é¿å…é¢‘ç¹çš„DOMæ“ä½œ</li>
<li>å¯¹DOMæŸ¥è¯¢åšç¼“å­˜</li>
<li>å°†é¢‘ç¹æ“ä½œæ”¹ä¸ºä¸€æ¬¡æ€§æ“ä½œ</li>
</ul>
<blockquote>
<p>DOM æŸ¥è¯¢åšç¼“å­˜</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;p&#x27;</span>).<span class="property">length</span>; i++) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pList = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;p&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> length = pList.<span class="property">length</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å°†é¢‘ç¹æ“ä½œæ”¹åšä¸€æ¬¡æ€§æ“ä½œ</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fragment = <span class="variable language_">document</span>.<span class="title function_">createDocumentFragment</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">const</span> img = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;img&#x27;</span>)</span><br><span class="line">  img.<span class="property">src</span> = <span class="string">&#x27;./img/2.jpg&#x27;</span></span><br><span class="line">  fragment.<span class="title function_">appendChild</span>(img)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(fragment)</span><br></pre></td></tr></table></figure>
<h2 id="23-BOM-ç®€å•çš„è¿‡ä¸€é"><a href="#23-BOM-ç®€å•çš„è¿‡ä¸€é" class="headerlink" title="23.BOM ç®€å•çš„è¿‡ä¸€é"></a>23.BOM ç®€å•çš„è¿‡ä¸€é</h2><blockquote>
<p><code>BOM</code> çš„æ ¸å¿ƒå¯¹è±¡<code>window</code>:</p>
</blockquote>
<ul>
<li><code>window</code>æ˜¯å…¨å±€å¯¹è±¡</li>
<li>æµè§ˆå™¨çª—å£çš„<code>JavaScript</code>æ¥å£</li>
</ul>
<blockquote>
<p><code>navigator</code></p>
</blockquote>
<p>å®¢æœç«¯æ ‡è¯†æµè§ˆå™¨çš„æ ‡å‡†ï¼Œä¸»è¦ç”¨æ¥è®°å½•å’Œæ£€æµ‹æµè§ˆå™¨ä¸è®¾å¤‡çš„ä¸»è¦ä¿¡æ¯</p>
<blockquote>
<p>å¦‚ä½•è¯†åˆ«æµè§ˆå™¨ï¼Ÿ</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> ua = <span class="variable language_">window</span>.<span class="property">navigator</span>.<span class="property">userAgent</span></span><br><span class="line"><span class="keyword">const</span> isChrome = ua.<span class="title function_">indexOf</span>(<span class="string">&#x27;Chrome&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(isChrome)</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>screen</code></p>
</blockquote>
<p>ä¿å­˜å®¢æœç«¯èƒ½åŠ›çš„å¯¹è±¡ ä¸¾å‡ ä¸ªå¸¸è§çš„å±æ€§</p>
<ul>
<li><code>height</code>: å±å¹•åƒç´ é«˜åº¦</li>
<li><code>left</code>: å½“å‰å±å¹•å·¦è¾¹çš„åƒç´ è·ç¦»</li>
<li><code>top</code>: å½“å‰å±å¹•é¡¶ç«¯çš„åƒç´ è·ç¦»</li>
<li><code>width</code>: å±å¹•åƒç´ å®½åº¦</li>
</ul>
<blockquote>
<p><code>location</code> å¯ä»¥ç”¨<code>location</code>æ‹†è§£<code>url</code></p>
</blockquote>
<ul>
<li><code>protocol</code>ï¼šåè®®</li>
<li><code>host</code>ï¼šåŸŸåå’Œç«¯å£</li>
<li><code>hostname</code>ï¼šæœåŠ¡å™¨å</li>
<li><code>pathname</code>ï¼š<code>url</code>è·¯å¾„</li>
<li><code>hash</code>ï¼šå“ˆå¸Œå€¼</li>
<li><code>href</code>ï¼š<code>url</code>å­—æ®µ</li>
<li><code>search</code>ï¼šæŸ¥è¯¢å­—æ®µ</li>
</ul>
<blockquote>
<p><code>history</code></p>
</blockquote>
<ul>
<li><code>go()</code>ï¼šè·³è½¬é¡µé¢</li>
<li><code>forward</code>ï¼šå‰è¿›</li>
<li><code>back()</code>ï¼šåé€€</li>
</ul>
<h2 id="24-äº‹ä»¶"><a href="#24-äº‹ä»¶" class="headerlink" title="24.äº‹ä»¶"></a>24.äº‹ä»¶</h2><blockquote>
<p>äº‹ä»¶ç»‘å®š ç®€å•ä»‹ç»ä¸‹ï¼Œç›¸ä¿¡å¤§å®¶éƒ½ä¼š</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> btn = docment.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn&#x27;</span>)</span><br><span class="line"></span><br><span class="line">btn.<span class="property">onclick</span> = <span class="title function_">funcition</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">btn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;,<span class="literal">false</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç®€è¿°äº‹ä»¶å†’æ³¡çš„æµç¨‹</p>
</blockquote>
<ul>
<li>åŸºäºDOMæ ‘å½¢ç»“æ„</li>
<li>äº‹ä»¶ä¼šé¡ºç€è§¦å‘å…ƒç´ ç½‘ä¸Šå†’æ³¡</li>
<li>åº”ç”¨åœºæ™¯:<strong>äº‹ä»¶ä»£ç†</strong></li>
</ul>
<blockquote>
<p>äº‹ä»¶ä»£ç†çš„å¥½å¤„</p>
</blockquote>
<ul>
<li>ä»£ç ç®€æ´</li>
<li>å‡å°‘æµè§ˆå™¨å†…å­˜å ç”¨</li>
<li>ä½†æ˜¯,ä¸è¦æ»¥ç”¨</li>
<li>å¯¹äºé‚£äº›æ–°æ·»åŠ çš„å…ƒç´ ï¼Œæœ€å¥½å°±ä½¿ç”¨äº‹ä»¶ä»£ç†</li>
</ul>
<blockquote>
<p>ä¾‹å­ ï¼š æ— é™ä¸‹æ‹‰å›¾ç‰‡åˆ—è¡¨,å¦‚ä½•ç›‘å¬æ¯ä¸ªå›¾ç‰‡çš„ç‚¹å‡»</p>
</blockquote>
<ul>
<li>äº‹ä»¶ä»£ç†</li>
<li>ç”¨e.targetè·å–è§¦å‘å…ƒç´ </li>
<li>ç”¨matchesæ¥åˆ¤æ–­æ˜¯å¦æ˜¯è§¦å‘å…ƒç´ </li>
</ul>
<blockquote>
<p>è‡ªå·±å°è£…é€šç”¨çš„äº‹ä»¶ç»‘å®šå‡½æ•°</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">bindEvent</span> = <span class="keyword">function</span> (<span class="params">type, selector, fn</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (fn == <span class="literal">null</span>) &#123;</span><br><span class="line">    fn = selector</span><br><span class="line">    selector = <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">addEventListener</span>(type, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> target = e.<span class="property">target</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (selector) &#123;</span><br><span class="line">      <span class="keyword">if</span> (target.<span class="title function_">matches</span>(selector)) &#123;</span><br><span class="line">        fn.<span class="title function_">call</span>(target, e)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">      fn.<span class="title function_">call</span>(target, e)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ul = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;ul&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ul.<span class="title function_">bindEvent</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ul.<span class="title function_">bindEvent</span>(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;li&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="25-ajax"><a href="#25-ajax" class="headerlink" title="25.ajax"></a>25.ajax</h2><blockquote>
<p>æ‰‹å†™ä¸€ä¸ªç®€å•çš„ajax</p>
<p>getè¯·æ±‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line"></span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;./test.json&#x27;</span>, <span class="literal">true</span>)</span><br><span class="line">xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (xhr.<span class="property">status</span> === <span class="number">200</span> &amp;&amp; xhr.<span class="property">readyState</span> === <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">responseText</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">xhr.<span class="title function_">send</span>(<span class="literal">null</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>postè¯·æ±‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line"></span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;localhost://mytest&#x27;</span>, <span class="literal">true</span>)</span><br><span class="line">xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (xhr.<span class="property">status</span> === <span class="number">200</span> &amp;&amp; xhr.<span class="property">readyState</span> == <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">responseText</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">xhr.<span class="title function_">send</span>(</span><br><span class="line">  <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>çŠ¶æ€ç  <code>xhr.readyState</code></p>
</blockquote>
<ul>
<li>0- (æœªåˆå§‹åŒ–)è¿˜æ²¡æœ‰è°ƒç”¨send(æ–¹æ³•</li>
<li>1- (è½½å…¥)å·²è°ƒç”¨send(æ–¹æ³•,æ­£åœ¨å‘é€è¯·æ±‚</li>
<li>2- (è½½å…¥å®Œæˆ) send()æ–¹æ³•æ‰§è¡Œå®Œæˆ,å·²ç»æ¥æ”¶åˆ°å…¨éƒ¨å“åº”å†…å®¹</li>
<li>3- (äº¤äº’)æ­£åœ¨è§£æå“åº”å†…å®¹</li>
<li>4- (å®Œæˆ)å“åº”å†…å®¹è§£æå®Œæˆ,å¯ä»¥åœ¨å®¢æˆ·ç«¯è°ƒç”¨</li>
</ul>
<blockquote>
<p>å“åº”ç  <code>xhr.status</code></p>
</blockquote>
<ul>
<li>2xx -è¡¨ç¤ºæˆåŠŸå¤„ç†è¯·æ±‚,å¦‚200</li>
<li>3xx -éœ€è¦é‡å®šå‘ï¼Œæµè§ˆå™¨ç›´æ¥è·³è½¬ï¼Œå¦‚301 302 304</li>
<li>4xx -å®¢æˆ·ç«¯è¯·æ±‚é”™è¯¯,å¦‚404 403</li>
<li>5xx -æœåŠ¡å™¨ç«¯é”™è¯¯</li>
</ul>
<h2 id="26-è·¨åŸŸ"><a href="#26-è·¨åŸŸ" class="headerlink" title="26.è·¨åŸŸ"></a>26.è·¨åŸŸ</h2><blockquote>
<p>ä»€ä¹ˆäº‹è·¨åŸŸ</p>
</blockquote>
<p>ç®€å•æ¥è¯´ï¼šç”±äºåŒæºç­–ç•¥çš„åŸå› æµè§ˆå™¨ä¸èƒ½æ‰§è¡Œå…¶ä»–ç½‘ç«™çš„è„šæœ¬</p>
<p>æ‰€æœ‰çš„è·¨åŸŸ,éƒ½å¿…é¡»ç»è¿‡serverç«¯å…è®¸å’Œé…åˆ</p>
<p>æœªç»serverç«¯å…è®¸å°±å®ç°è·¨åŸŸ,è¯´æ˜æµè§ˆå™¨æœ‰æ¼æ´,å±é™©ä¿¡å·</p>
<blockquote>
<p>åŒæºæ”¿ç­–</p>
</blockquote>
<ul>
<li>ajaxè¯·æ±‚æ—¶,æµè§ˆå™¨è¦æ±‚å½“å‰ç½‘é¡µå’Œserverå¿…é¡»<strong>åŒæº</strong>(å®‰å…¨)</li>
<li>åŒæº:<strong>åè®®</strong>ã€<strong>åŸŸå</strong>ã€<strong>ç«¯å£</strong>,ä¸‰è€…å¿…é¡»ä¸€-è‡´</li>
<li>å‰ç«¯: <a href="https://link.juejin.cn/?target=http%3A%2F%2Fa.com%3A8080%2F" title="http://a.com:8080/">a.com:8080/</a> ; server :<a href="https://link.juejin.cn/?target=https%3A%2F%2Fb.com%2Fapi%2Fxx%25EF%25BC%2588%25E4%25B8%258D%25E5%2590%258C%25E6%25BA%2590%25EF%25BC%2589" title="https://b.com/api/xx%EF%BC%88%E4%B8%8D%E5%90%8C%E6%BA%90%EF%BC%89">b.com/api/xxï¼ˆä¸åŒæºï¼‰</a></li>
</ul>
<blockquote>
<p>åŠ è½½å›¾ç‰‡ ã€cssã€ jså¯<strong>æ— è§†</strong>åŒæºç­–ç•¥</p>
</blockquote>
<ul>
<li><code>&lt;img src=è·¨åŸŸçš„å›¾ç‰‡åœ°å€/&gt;</code>å¯ç”¨äºç»Ÿè®¡æ‰“ç‚¹,å¯ä½¿ç”¨ç¬¬ä¸‰Eæ–¹ç»Ÿè®¡æœåŠ¡</li>
<li><code>&lt;link href=è·¨åŸŸçš„cssåœ°å€/&gt;</code> å¯ä½¿ç”¨CDN , CDNä¸€èˆ¬éƒ½æ˜¯å¤–åŸŸ</li>
<li><code>&lt;script src=è·¨åŸŸçš„jsåœ°å€&gt; &lt;/script&gt;</code> å¯ä½¿ç”¨CDNï¼Œå¯å®ç°<strong>JSON</strong></li>
</ul>
<blockquote>
<p><code>jsonp</code></p>
</blockquote>
<p>å› ä¸ºscriptæ ‡ç­¾å¯ä»¥å‘é€getè¯·æ±‚ï¼Œæ¯”å¦‚å¼•ç”¨CDNï¼Œæˆ‘ä»¬å¯ä»¥åŠ¨æ€çš„åˆ›å»ºscriptæ ‡ç­¾ï¼Œå†å»è¯·æ±‚ä¸€ä¸ªå¸¦å‚ç½‘å€æ¥å®ç°è·¨åŸŸé€šä¿¡</p>
<ul>
<li>scriptæ ‡ç­¾å¯ç»•è¿‡è·¨åŸŸé™åˆ¶</li>
<li>æœåŠ¡å™¨å¯ä»¥ä»»æ„åŠ¨æ€æ‹¼æ¥æ•°æ®è¿”å›</li>
<li>æ‰€ä»¥ï¼Œ<code>&lt;script&gt;</code>å°±å¯ä»¥è·å¾—è·¨åŸŸçš„æ•°æ®,åªè¦æœåŠ¡ç«¯æ„¿æ„è¿”å›</li>
</ul>
<blockquote>
<p>å†™ä¸ªç®€æ˜“jsonpçš„ä¾‹å­</p>
<p>åå°æ˜¯ <code>node.js</code> + <code>express</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/info&#x27;</span>,<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="string">&#x27;fn(&#123;name : &#x27;</span>å¼ ä¸‰<span class="string">&#x27;&#125;)&#x27;</span></span><br><span class="line"></span><br><span class="line">    res.<span class="title function_">send</span>(result)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å‰ç«¯</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">fn</span> = <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://localhost:8080/mytest/info&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>å½“ç„¶è‡ªå·±ä¹Ÿå¯ä»¥è‡ªå·±å°è£…ä¸€ä¸ªjsonpå‡½æ•°</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">jsonp</span>(<span class="params">options</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> script = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> params = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> attr <span class="keyword">in</span> options.<span class="property">data</span>) &#123;</span><br><span class="line">    params += <span class="string">&#x27;&amp;&#x27;</span> + attr + <span class="string">&#x27;=&#x27;</span> + options.<span class="property">data</span>\[attr\]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> fnName = <span class="string">&#x27;myJsonp&#x27;</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>().<span class="title function_">toString</span>().<span class="title function_">replace</span>(<span class="string">&#x27;.&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">window</span>\[fnName\] = options.<span class="property">success</span></span><br><span class="line"></span><br><span class="line">  script.<span class="property">src</span> = options.<span class="property">url</span> + <span class="string">&#x27;?callback=&#x27;</span> + fnName + params</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(script)</span><br><span class="line"></span><br><span class="line">  script.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(<span class="variable language_">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">btn.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">jsonp</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;urlåœ°å€&#x27;</span>,</span><br><span class="line">    <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>jQueryå®ç°jsonp</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;urlåœ°å€&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="attr">dataType</span>: <span class="string">&#x27;jsonp&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="attr">jsonpCallback</span>: <span class="string">&#x27;callback&#x27;</span>,</span><br><span class="line">  <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨<code>jQuery</code>å‘èµ·<code>JSONP</code>è¯·æ±‚ï¼Œä¼šè‡ªåŠ¨æºå¸¦ä¸€ä¸ª <code>callback=jQueryxxx</code>çš„å‚æ•°, <code>jQuery</code> æ˜¯éšæœºç”Ÿæˆçš„ä¸€ä¸ªå›è°ƒå‡½æ•°åç§°ã€‚</p>
<blockquote>
<p><code>CORS</code> -æœåŠ¡å™¨è®¾ç½®<code>http header</code></p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Headers&#x27;</span>, <span class="string">&#x27;Content-Type, X-Custom-Header&#x27;</span>)</span><br><span class="line"></span><br><span class="line">res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>, <span class="string">&#x27;POST, GET, DELETE, HEAD&#x27;</span>)</span><br><span class="line"></span><br><span class="line">res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>, <span class="string">&#x27;*&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="27-ajaxå·¥å…·"><a href="#27-ajaxå·¥å…·" class="headerlink" title="27.ajaxå·¥å…·"></a>27.ajaxå·¥å…·</h2><blockquote>
<p>jQueryä¸­å°è£…çš„$.ajaxå°±ä¸å¤šè¯´äº†</p>
<p>Fetchï¼šç®€å•çš„ä¾‹å­ é»˜è®¤<strong>GET</strong>è¯·æ±‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;urlåœ°å€&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(data))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err));</span><br></pre></td></tr></table></figure>
<p>Fetchåº•å±‚æ˜¯ç”¨Promiseå®ç°ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨asyncæ¥ä¼˜åŒ–ä¸Šé¢çš„ä»£ç ï¼Œå‡å°‘å›è°ƒï¼Œä½¿å…¶æ›´åŠ è¯­ä¹‰åŒ–ã€å®¹æ˜“ç†è§£</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">!(<span class="keyword">async</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;urlåœ°å€&#x27;</span>)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">    &#125;<span class="keyword">catch</span>(err)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Fetchçš„<strong>POST</strong>è¯·æ±‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(url, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">        <span class="string">&quot;Content-type&quot;</span>: <span class="string">&quot;application/x-www-form-urlencoded; charset=UTF-8&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">body</span>: <span class="string">&#x27;name=&quot;zhangsan&quot;&amp;age=18&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¸¦ä¸Š<strong>cookie</strong>éœ€è¦è®¾ç½®credentials</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(url, &#123;</span><br><span class="line">  <span class="attr">credentials</span>: <span class="string">&#x27;include&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>axiosçš„åŸºæœ¬ç”¨æ³•åº”è¯¥ä¸å¿…å¤šè¯´äº†ã€‚å¤§å®¶åŸºæœ¬å¤©å¤©ç”¨å§</p>
</blockquote>
<h2 id="28-å­˜å‚¨"><a href="#28-å­˜å‚¨" class="headerlink" title="28.å­˜å‚¨"></a>28.å­˜å‚¨</h2><blockquote>
<p>æè¿°<code>cookie``localStorage``sessionStorage</code>åŒºåˆ«</p>
<p>cookie</p>
</blockquote>
<ul>
<li>æœ¬èº«ç”¨äºæµè§ˆå™¨å’Œ<code>server</code>é€šè®¯</li>
<li>åœ¨<code>html5</code>ä¹‹å‰ è¢«â€å€Ÿç”¨â€åˆ°æœ¬åœ°å­˜å‚¨æ¥</li>
<li>å¯ç”¨<code>document.cookie =</code> æ¥ä¿®æ”¹</li>
</ul>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a88350ddbced48e19f7f4b5fbfe2dffd~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210708221336289"></p>
<blockquote>
<p><code>cookie</code>ç¼ºç‚¹</p>
</blockquote>
<ul>
<li>å­˜å‚¨å¤§å°ï¼Œæœ€å¤§4KB</li>
<li><code>http</code>è¯·æ±‚æ—¶éœ€è¦å‘é€åˆ°æœåŠ¡ç«¯ï¼Œå¢åŠ è¯·æ±‚æ•°æ®é‡</li>
<li>åªèƒ½ç”¨<code>document.cookie =</code> æ¥ä¿®æ”¹,å¤ªè¿‡ç®€é™‹</li>
</ul>
<blockquote>
<p><code>localStorage</code>å’Œ<code>sessionStorage</code></p>
</blockquote>
<ul>
<li><code>HTML5</code>ä¸“é—¨ä¸ºå­˜å‚¨è€Œè®¾è®¡ï¼Œæœ€å¤§å¯å­˜5M</li>
<li>APIç®€å•æ˜“ç”¨<code>setItem``getItem</code></li>
<li>ä¸ä¼šéšç€<code>http</code>è¯·æ±‚è¢«å‘é€å‡ºå»</li>
<li><code>localStorage</code>æ•°æ®ä¼šæ°¸ä¹…å­˜å‚¨ï¼Œé™¤éä»£ç æˆ–æ‰‹åŠ¨åˆ é™¤</li>
<li><code>sessionStorage</code>æ•°æ®åªå­˜åœ¨äºå½“å‰ä¼šè¯,æµè§ˆå™¨å…³é—­åˆ™æ¸…ç©º</li>
<li>ä¸€èˆ¬ç”¨<code>localStorage</code>ä¼šæ›´å¤šä¸€-äº›</li>
</ul>
<h2 id="29-HTTP"><a href="#29-HTTP" class="headerlink" title="29.HTTP"></a>29.HTTP</h2><blockquote>
<p>çŠ¶æ€ç åˆ†ç±»</p>
</blockquote>
<ul>
<li>1xxæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚</li>
<li>2xxè¯·æ±‚æˆåŠŸ,å¦‚200</li>
<li>3xxé‡å®šå‘,å¦‚302</li>
<li>4xxå®¢æˆ·ç«¯é”™è¯¯ï¼Œå¦‚404</li>
<li>5xxæœåŠ¡ç«¯é”™è¯¯,å¦‚500</li>
</ul>
<blockquote>
<p>å¸¸è§çŠ¶æ€ç </p>
</blockquote>
<ul>
<li><code>200</code>æˆåŠŸ</li>
<li><code>301</code>æ°¸ä¹…é‡å®šå‘(é…åˆ<code>location</code> ,æµè§ˆå™¨è‡ªåŠ¨å¤„ç†)</li>
<li><code>302</code>ä¸´æ—¶é‡å®šå‘(é…åˆ<code>location</code> ,æµè§ˆå™¨è‡ªåŠ¨å¤„ç†)</li>
<li><code>304</code>èµ„æºæœªè¢«ä¿®æ”¹</li>
<li><code>404</code>èµ„æºæœªæ‰¾åˆ°</li>
<li><code>403</code>æ²¡æœ‰æƒé™</li>
<li><code>500</code>æœåŠ¡å™¨é”™è¯¯</li>
<li><code>504</code>ç½‘å…³è¶…æ—¶</li>
</ul>
<blockquote>
<p>å…³äºåè®®å’Œè§„èŒƒ</p>
</blockquote>
<ul>
<li>å°±æ˜¯ä¸€ä¸ªçº¦å®š</li>
<li>è¦æ±‚å¤§å®¶éƒ½è·Ÿç€æ‰§è¡Œ</li>
<li>ä¸è¦è¿åè§„èŒƒ,ä¾‹å¦‚IEæµè§ˆå™¨</li>
</ul>
<blockquote>
<p><code>http headers</code></p>
<p><code>Request Headers</code></p>
</blockquote>
<ul>
<li>Acceptæµè§ˆå™¨å¯æ¥æ”¶çš„æ•°æ®æ ¼å¼</li>
<li>Accept-Encodingæµè§ˆå™¨å¯æ¥æ”¶çš„å‹ç¼©ç®—æ³•,å¦‚gzip</li>
<li>Accept-Languangeæµè§ˆå™¨å¯æ¥æ”¶çš„è¯­è¨€,å¦‚zh-CN</li>
<li>Connection: keep-alive - -æ¬¡TCPè¿æ¥é‡å¤ä½¿ç”¨</li>
<li>cookie</li>
<li>Host</li>
<li>User-Agent (ç®€ç§°UA )æµè§ˆå™¨ä¿¡æ¯</li>
<li>Content-typeå‘é€æ•°æ®çš„æ ¼å¼,å¦‚application/json</li>
</ul>
<blockquote>
<p><code>Response Headers</code></p>
</blockquote>
<ul>
<li>Content-typeè¿”å›æ•°æ®çš„æ ¼å¼ï¼Œå¦‚application/json</li>
<li>Content-lengthè¿”å›æ•°æ®çš„å¤§å°ï¼Œå¤šå°‘å­—èŠ‚</li>
<li>Content-Encodingè¿”å›æ•°æ®çš„å‹ç¼©ç®—æ³•ï¼Œå¦‚gzip</li>
<li>Set-Cookie</li>
</ul>
<blockquote>
<p>è‡ªå®šä¹‰<code>header</code>äº†è§£ä¸‹</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">header : &#123;</span><br><span class="line">    <span class="string">&#x27;X-Requested-with&#x27;</span>: <span class="string">&#x27;XMLHttpRequest&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="30-HTTPç¼“å­˜"><a href="#30-HTTPç¼“å­˜" class="headerlink" title="30.HTTPç¼“å­˜"></a>30.HTTPç¼“å­˜</h2><blockquote>
<p>å…³äºç¼“å­˜</p>
</blockquote>
<ul>
<li>å‡å°‘å¸¦å®½ï¼Œå‡å°‘è¯·æ±‚æ•°é‡ï¼Œå‡è½»æœåŠ¡å™¨å‹åŠ›ï¼Œæå‡æ€§èƒ½</li>
<li>æµè§ˆå™¨ç¼“å­˜ä¸€èˆ¬éƒ½æ˜¯é’ˆå¯¹é™æ€èµ„æºï¼Œæ¯”å¦‚ jsã€cssã€å›¾ç‰‡ ç­‰</li>
</ul>
<h3 id="å¼ºåˆ¶ç¼“å­˜"><a href="#å¼ºåˆ¶ç¼“å­˜" class="headerlink" title="å¼ºåˆ¶ç¼“å­˜"></a>å¼ºåˆ¶ç¼“å­˜</h3><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c691ebaeffde4c9584fd9384734d432f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210709155528877"></p>
<p>å¦‚æœè¿‡æœŸäº† å†æ¬¡è¯·æ±‚ ï¼Œè¿”å›<code>Cache-Control</code></p>
<blockquote>
<p><code>Cache-Control</code></p>
<p><code>Response Headers</code>ä¸­ æ§åˆ¶å¼ºåˆ¶ç¼“å­˜çš„é€»è¾‘</p>
<p>ä¾‹å¦‚<code>Cache-Control</code>: <code>max-age=31536000</code> ( å•ä½æ˜¯ç§’)</p>
</blockquote>
<ul>
<li>publicï¼šèµ„æºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½å¯ä»¥ç¼“å­˜ã€‚</li>
<li>priviteï¼šèµ„æºåªæœ‰å®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜ã€‚</li>
<li>no-cacheï¼šå®¢æˆ·ç«¯ç¼“å­˜èµ„æºï¼Œä½†æ˜¯æ˜¯å¦ç¼“å­˜éœ€è¦ç»è¿‡åå•†ç¼“å­˜æ¥éªŒè¯ã€‚</li>
<li>no-storeï¼šä¸ä½¿ç”¨ç¼“å­˜ã€‚</li>
<li>max-ageï¼šç¼“å­˜ä¿è´¨æœŸã€‚</li>
</ul>
<blockquote>
<p>å…³äº<code>Expires</code></p>
</blockquote>
<ul>
<li>åŒåœ¨<code>Response Headers</code>ä¸­</li>
<li>åŒä¸ºæ§åˆ¶ç¼“å­˜è¿‡æœŸ</li>
<li>å·²è¢«<code>Cache-Control</code>ä»£æ›¿</li>
</ul>
<h3 id="åå•†ç¼“å­˜"><a href="#åå•†ç¼“å­˜" class="headerlink" title="åå•†ç¼“å­˜"></a>åå•†ç¼“å­˜</h3><blockquote>
<ul>
<li>æœåŠ¡å™¨ç«¯ç¼“å­˜ç­–ç•¥</li>
<li>æœåŠ¡å™¨åˆ¤æ–­å®¢æˆ·ç«¯èµ„æºï¼Œæ˜¯å¦å’ŒæœåŠ¡ç«¯èµ„æºä¸€æ ·</li>
<li>è‡´åˆ™è¿”å›304 , å¦åˆ™è¿”å›200å’Œæœ€æ–°çš„èµ„æº</li>
</ul>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5f7a1307d76143cd86cb890a6035e409~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210709155459528"></p>
<blockquote>
<p>èµ„æºæ ‡è¯†</p>
</blockquote>
<ul>
<li>åœ¨<code>Response Headers</code>ä¸­ï¼Œæœ‰ä¸¤ç§</li>
<li><code>Last-Modified</code>èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´</li>
<li><code>Etag</code>èµ„æºçš„å”¯ä¸€æ ‡è¯†( -ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç±»ä¼¼äººç±»çš„æŒ‡çº¹)</li>
</ul>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f65e646917a84409a11794d02d1d2e68~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210709160347279"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3aa9e7f06b0c44a28a2d0455abaa021c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210709160501440"></p>
<blockquote>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ª<code>Headers</code>å®ä¾‹</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c86392599cf74fe6ba8c094c44bfdeaf~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210709160613179"></p>
<blockquote>
<p><code>Last-Modified</code>å’Œ<code>Etag</code></p>
</blockquote>
<ul>
<li>ä¼šä¼˜å…ˆä½¿ç”¨<code>Etag</code></li>
<li><code>Last-Modified</code>åªèƒ½ç²¾ç¡®åˆ°<strong>ç§’çº§</strong></li>
<li>å¦‚æœèµ„æºè¢«é‡å¤ç”Ÿæˆï¼Œè€Œå†…å®¹ä¸å˜ï¼Œåˆ™<code>Etag</code>æ›´ç²¾ç¡®</li>
</ul>
<h3 id="ç¼“å­˜æµç¨‹å›¾"><a href="#ç¼“å­˜æµç¨‹å›¾" class="headerlink" title="ç¼“å­˜æµç¨‹å›¾"></a>ç¼“å­˜æµç¨‹å›¾</h3><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ccf8a70a39de458b91946ba9def58ac4~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210709161010069"></p>
<blockquote>
<p>ä¸‰ç§åˆ·æ–°æ“ä½œå¯¹ç¼“å­˜çš„å½±å“</p>
</blockquote>
<p>æ­£å¸¸æ“ä½œ:åœ°å€æ è¾“å…¥<code>url</code> ,è·³è½¬é“¾æ¥,å‰è¿›åé€€ç­‰</p>
<p>æ‰‹åŠ¨åˆ·æ–°: <code>F5</code>ï¼Œç‚¹å‡»åˆ·æ–°æŒ‰é’®,å³å‡»èœå•åˆ·æ–°</p>
<p>å¼ºåˆ¶åˆ·æ–°: <code>ctrl + F5</code></p>
<ul>
<li>æ­£å¸¸æ“ä½œ:å¼ºåˆ¶ç¼“å­˜æœ‰æ•ˆ,åå•†ç¼“å­˜æœ‰æ•ˆ</li>
<li>æ‰‹åŠ¨åˆ·æ–°:å¼ºåˆ¶ç¼“å­˜å¤±æ•ˆ,åå•†ç¼“å­˜æœ‰æ•ˆ</li>
<li>å¼ºåˆ¶åˆ·æ–°:å¼ºåˆ¶ç¼“å­˜å¤±æ•ˆ,åå•†ç¼“å­˜å¤±æ•ˆ</li>
</ul>
<h1 id="å…³äºå¼€å‘ç¯å¢ƒ"><a href="#å…³äºå¼€å‘ç¯å¢ƒ" class="headerlink" title="å…³äºå¼€å‘ç¯å¢ƒ"></a>å…³äºå¼€å‘ç¯å¢ƒ</h1><h2 id="1-git"><a href="#1-git" class="headerlink" title="1.git"></a>1.git</h2><blockquote>
<p>æœ€å¸¸ç”¨çš„ä»£ç ç‰ˆæœ¬ç®¡ç†å·¥å…·</p>
<p>å¤§å‹é¡¹ç›®éœ€è¦å¤šäººåä½œå¼€å‘,å¿…é¡»ç†Ÿç”¨git</p>
<p>å¦‚æœä½ ä¸çŸ¥é“æˆ–è€…ä¹‹å‰ä¸ç”¨git ,ä¸ä¼šé€šè¿‡é¢è¯•</p>
</blockquote>
<ul>
<li>Mac OSè‡ªå¸¦gitå‘½ä»¤ï¼Œwindowså¯å»å®˜ç½‘ä¸‹è½½å®‰è£…</li>
<li>gitæœåŠ¡ç«¯å¸¸è§çš„æœ‰github coding.netç­‰</li>
<li>å¤§å…¬å¸ä¼šæ­å»ºè‡ªå·±çš„å†…ç½‘gitæœåŠ¡</li>
</ul>
<p>æˆ‘è¿™é‡Œå°±ä¸ç”¨å¤šå¤šä»‹ç»äº†ï¼Œæˆ‘å°±è¯´ä¸‹æˆ‘ä»¬ç»å¸¸ç”¨çš„æ“ä½œ</p>
<blockquote>
<p>ç¬¬ä¸€æ¬¡ä½¿ç”¨gitï¼Œé…ç½®ç”¨æˆ·ä¿¡æ¯</p>
</blockquote>
<ul>
<li>ç”¨æˆ·åï¼š<code>git config --global user.name &quot;ç”¨æˆ·å&quot;</code></li>
<li>æˆ·é‚®ç®±ï¼š<code>git config --global user.email &quot;é‚®ç®±åœ°å€&quot;</code></li>
</ul>
<blockquote>
<p>åˆå§‹åŒ–ä»“åº“</p>
</blockquote>
<ul>
<li>åˆ›å»ºä¸€ä¸ªæ–°çš„æœ¬åœ°ä»“åº“ï¼š<code>git init</code></li>
<li>æˆ–è€…ä»è¿œç¨‹gitä»“åº“å¤åˆ¶é¡¹ç›®ï¼š<code>git clone &lt;è¿œç¨‹gitä»“åº“urlåœ°å€&gt;</code></li>
</ul>
<blockquote>
<p>æ·»åŠ åˆ°æš‚å­˜åŒº</p>
</blockquote>
<ul>
<li>æ·»åŠ æŒ‡å®šæ–‡ä»¶ï¼š<code>git add æ–‡ä»¶1 æ–‡ä»¶2 ...</code></li>
<li>æ·»åŠ æ–‡ä»¶å¤¹ï¼š<code>git add \[æ–‡ä»¶å¤¹\]</code></li>
<li>æ·»åŠ æ‰€æœ‰æ–‡ä»¶ï¼š<code>git add .</code></li>
</ul>
<blockquote>
<p>æ’¤é”€</p>
</blockquote>
<ul>
<li>å–æ¶ˆæš‚å­˜åŒºå·²ç»æš‚å­˜çš„æ–‡ä»¶ï¼š<code>git reset HEAD æ–‡ä»¶1 ...</code></li>
<li>éšè—å½“å‰å˜æ›´ï¼Œä»¥ä¾¿èƒ½å¤Ÿåˆ‡æ¢åˆ†æ”¯ï¼š<code>git stash</code>ï¼›</li>
<li>å¦‚æœä»£ç å†™é”™åˆ°äº†åˆ†æ”¯å…ˆ <code>git stash</code> åˆ‡æ¢åˆ†æ”¯å å°±<code>git stash pop</code> é‡Šæ”¾åˆšæ‰çš„å†…å®¹</li>
</ul>
<blockquote>
<p>é‡å‘½åæ–‡ä»¶</p>
</blockquote>
<ul>
<li>å¹¶æäº¤åˆ°æš‚å­˜åŒºï¼š<code>git mv \[old\] \[new\]</code></li>
</ul>
<blockquote>
<p>æŸ¥çœ‹ä¿¡æ¯</p>
</blockquote>
<ul>
<li>æŸ¥è¯¢å½“å‰å·¥ä½œåŒºæ‰€æœ‰æ–‡ä»¶çš„çŠ¶æ€ï¼š<code>git status</code></li>
<li>æ¯”è¾ƒå½“å‰ä¿®æ”¹çš„æ–‡ä»¶ å’Œ æš‚å­˜åŒºçš„ å·®å¼‚ï¼š<code>git diff æ–‡ä»¶</code></li>
<li>ç›´æ¥æ¯”è¾ƒæœ‰ä¿®æ”¹çš„æ‰€æœ‰çš„æ–‡ä»¶ï¼š<code>git diff</code></li>
</ul>
<blockquote>
<p>æäº¤</p>
</blockquote>
<p>æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼š<code>git commit -m &quot;æäº¤ä¿¡æ¯&quot;</code></p>
<p>æ’¤é”€ä¸Šæ¬¡æäº¤ï¼š<code>git commit --amend</code></p>
<p>è·³è¿‡æš‚å­˜åŒºç›´æ¥æäº¤ï¼Œè‡ªå·±ä¸ç”¨<code>add .</code>ï¼š<code>git commit -a -m &quot;æäº¤ä¿¡æ¯&quot;</code></p>
<blockquote>
<p>åˆ†æ”¯ç®¡ç†</p>
</blockquote>
<ul>
<li>æ˜¾ç¤ºæ‰€æœ‰åˆ†æ”¯ï¼š<code>git branch</code></li>
<li>åˆ›å»ºåˆ†æ”¯ï¼š<code>git branch &lt;æ–°åˆ†æ”¯åç§°&gt;</code></li>
<li>æ–°å»ºå­åˆ†æ”¯ï¼š<code>git checkout -b &lt;å­åˆ†æ”¯åç§°&gt;</code></li>
<li>åˆ‡æ¢åˆ°å…¶ä»–åˆ†æ”¯ï¼š<code>git checkout &lt;åˆ†æ”¯åç§°&gt;</code></li>
<li>å½“å‰åˆ†æ”¯ä¸å…¶ä»–åˆ†æ”¯åˆå¹¶ï¼š<code>git merge &lt;åˆ†æ”¯åç§°&gt;</code></li>
<li>æŠŠè¿œç¨‹åˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ï¼š<code>git merge &lt;è¿œç¨‹åˆ†æ”¯&gt;/&lt;æœ¬åœ°åˆ†æ”¯&gt;</code></li>
<li>åˆ é™¤åˆ†æ”¯ï¼š<code>git branch -d &lt;åˆ†æ”¯åç§°&gt;</code></li>
<li>æ·»åŠ è¿œç¨‹ä»“åº“ï¼š<code>git remote add \[remote-name\] \[url\]</code>æ¯”å¦‚githubè¿™ä¸ªä¾‹å­<code>git remote add origin url</code></li>
<li>å°†æœ¬åœ°ä»“åº“æŸåˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“ä¸Šï¼š<code>git push \[è¿œç¨‹ä»“åº“\] \[åˆ†æ”¯åå­—\]</code> è¿™é‡Œä¸¾ä¸ªä¾‹å­<code>git push origin master</code></li>
</ul>
<h2 id="2-æŠ“åŒ…"><a href="#2-æŠ“åŒ…" class="headerlink" title="2.æŠ“åŒ…"></a>2.æŠ“åŒ…</h2><blockquote>
<p>ç§»åŠ¨ç«¯h5é¡µï¼ŒæŸ¥çœ‹ç½‘ç»œè¯·æ±‚,éœ€è¦ç”¨å·¥å…·æŠ“åŒ…</p>
<p><code>windows</code>ä¸€èˆ¬ç”¨<code>fiddler</code></p>
<p><code>Mac OS</code> - -èˆ¬ç”¨<code>charles</code></p>
<p>æŠ“åŒ…+è°ƒè¯•çš„å·¥å…·<code>spy-debugger</code></p>
</blockquote>
<ol>
<li>æ‰‹æœºå’Œç”µè„‘è¿åŒ-ä¸€ä¸ªå±€åŸŸç½‘</li>
<li>å°†æ‰‹æœºä»£ç†åˆ°ç”µè„‘ä¸Š</li>
<li>æ‰‹æœºæµè§ˆç½‘é¡µ,å³å¯æŠ“åŒ…</li>
</ol>
<p>å…·ä½“ä½¿ç”¨æ–¹æ³•å¤§å®¶å¯ä»¥å»çœ‹çœ‹å…¶ä»–å¤§ä½¬çš„å¸–å­ï¼Œä»–ä»¬è®²çš„éå¸¸çš„å¥½</p>
<p>æ¨èä½¿ç”¨ <code>spy-debugger</code> æ”¯æŒ<code>HTTP/HTTPS</code>ï¼Œæ— éœ€USBè¿æ¥è®¾å¤‡</p>
<h2 id="3-Webpack-å’Œ-babel-ç®€å•ä½¿ç”¨"><a href="#3-Webpack-å’Œ-babel-ç®€å•ä½¿ç”¨" class="headerlink" title="3.Webpack å’Œ babel ç®€å•ä½¿ç”¨"></a>3.Webpack å’Œ babel ç®€å•ä½¿ç”¨</h2><h3 id="ä¸ºå•¥ä½¿ç”¨Webpack"><a href="#ä¸ºå•¥ä½¿ç”¨Webpack" class="headerlink" title="ä¸ºå•¥ä½¿ç”¨Webpack"></a>ä¸ºå•¥ä½¿ç”¨Webpack</h3><ul>
<li><p>ES6æ¨¡å—åŒ–,æµè§ˆå™¨æš‚ä¸æ”¯æŒ</p>
</li>
<li><p>ES6è¯­æ³•,æµè§ˆå™¨å¹¶ä¸å®Œå…¨æ”¯æŒ</p>
</li>
<li><p>å‹ç¼©ä»£ç ,æ•´åˆä»£ç ,ä»¥è®©ç½‘é¡µåŠ è½½æ›´å¿«</p>
</li>
</ul>
<h3 id="å®‰è£…é…ç½®Webpack"><a href="#å®‰è£…é…ç½®Webpack" class="headerlink" title="å®‰è£…é…ç½®Webpack"></a>å®‰è£…é…ç½®Webpack</h3><blockquote>
<p>å®‰è£… <code>npm i -D webpack webpack-cli</code></p>
<p>å®‰è£…æœ¬åœ°é¡¹ç›®æ¨¡å— <code>npm install webpack webpack-cli -D</code></p>
<p>é…ç½®<code>webpack.config.js</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">  <span class="attr">entry</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;/src&#x27;</span>,<span class="string">&#x27;index.js&#x27;</span>),</span><br><span class="line"></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;/dist&#x27;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>é…ç½®<code>package.json</code>ä¸­<code>script</code> ä¹‹åå°±å¯ä»¥ä½¿ç”¨<code>npm run build</code>æ¥è¿è¡Œè¯¥è„šæœ¬å‘½ä»¤</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;scripts&quot;</span> : &#123;</span><br><span class="line">		<span class="string">&quot;build&quot;</span>: <span class="string">&quot;webpack&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®æœ¬åœ°æœåŠ¡å™¨"><a href="#é…ç½®æœ¬åœ°æœåŠ¡å™¨" class="headerlink" title="é…ç½®æœ¬åœ°æœåŠ¡å™¨"></a>é…ç½®æœ¬åœ°æœåŠ¡å™¨</h3><p>å®‰è£…æœ¬åœ°æœåŠ¡å™¨ <code>npm install webpack-dev-server -D</code></p>
<blockquote>
<p>é…ç½®<code>webpack.config.js</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">  <span class="attr">entry</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;/src&#x27;</span>,<span class="string">&#x27;index.js&#x27;</span>),</span><br><span class="line"></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;/dist&#x27;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">contentBase</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">    <span class="attr">hot</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="string">&#x27;8080&#x27;</span>,</span><br><span class="line">    <span class="attr">inline</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">overlay</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">compress</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>inline</strong>ï¼šæ–‡ä»¶æ”¹å˜æ—¶ä¼šè‡ªåŠ¨åˆ·æ–°</li>
<li><strong>open</strong>ï¼šç¬¬ä¸€æ¬¡è‡ªåŠ¨æ‰“å¼€ç½‘é¡µã€‚</li>
<li><strong>compress</strong>ï¼šå¯ç”¨ gzip å‹ç¼©ï¼Œboolean ç±»å‹ï¼Œé»˜è®¤ä¸º false</li>
<li><strong>overlay</strong>ï¼šé¡µé¢ä¸ŠæŠ¥é”™ä¿¡æ¯æ˜¯å¦æ˜¾ç¤ºï¼Œé»˜è®¤ä¸ºfalse</li>
<li><strong>port</strong>: ç«¯å£</li>
</ul>
<h3 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h3><blockquote>
<p>é…ç½®<code>package.json</code>ä¸­<code>script</code> ç»ˆç«¯è¾“å…¥<code>npm run dev</code> è¿è¡ŒæœåŠ¡å™¨</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;scripts&quot;</span> : &#123;</span><br><span class="line">		<span class="string">&quot;build&quot;</span>: <span class="string">&quot;webpack&quot;</span></span><br><span class="line">                <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;webpack-dev-server&quot;</span></span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ·»åŠ ä¸ªhtmlçš„å‹ç¼© å®‰è£… <code>npm install html-webpack-plugin -D</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">  <span class="attr">entry</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;/src&#x27;</span>,<span class="string">&#x27;index.js&#x27;</span>),</span><br><span class="line"></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;/dist&#x27;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">contentBase</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">    <span class="attr">hot</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="string">&#x27;8080&#x27;</span>,</span><br><span class="line">    <span class="attr">inline</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">overlay</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">compress</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">plugin</span>: &#123;</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line"></span><br><span class="line">      	<span class="attr">template</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&quot;src&quot;</span>,<span class="string">&quot;index.html&quot;</span>),</span><br><span class="line"></span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;index.html&#x27;</span></span><br><span class="line">  	  &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±èƒ½æ‰“åŒ…htmläº†</p>
<h3 id="åŠ è½½å™¨"><a href="#åŠ è½½å™¨" class="headerlink" title="åŠ è½½å™¨"></a>åŠ è½½å™¨</h3><p><code>loaders</code> é…ç½®<code>css-loader</code></p>
<blockquote>
<p>å®‰è£… <code>npm install style-loader css-loader -D</code></p>
<p>å†å» <code>webpack.config.js</code> è®¾ç½® è¿™æ ·å°±èƒ½æ‰“åŒ…<code>css</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: \[</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: \[<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>\]</span><br><span class="line">      &#125;</span><br><span class="line">    \]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="babel"><a href="#babel" class="headerlink" title="babel"></a>babel</h3><p>å®‰è£…ï¼š<code>npm install @babel/core @babel/preset -env babel -loader -D</code></p>
<p>é¡¹ç›®çš„ç›®å½•æ·»åŠ ä¸€ä¸ª.babeircæ–‡ä»¶</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;presets&quot;</span><span class="punctuation">:</span> \<span class="punctuation">[</span><span class="string">&quot;@babel/preset-env&quot;</span>\<span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>å†å» <code>webpack.config.js</code> è®¾ç½®</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: \[</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\\.js$/</span>,</span><br><span class="line">            <span class="attr">use</span>: \[<span class="string">&#x27;babel-loader&#x27;</span>\],</span><br><span class="line">            <span class="attr">include</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;src&#x27;</span>),</span><br><span class="line"></span><br><span class="line">            <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span></span><br><span class="line">          &#125;</span><br><span class="line">        \]</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®ç”Ÿäº§ç¯å¢ƒ"><a href="#é…ç½®ç”Ÿäº§ç¯å¢ƒ" class="headerlink" title="é…ç½®ç”Ÿäº§ç¯å¢ƒ"></a>é…ç½®ç”Ÿäº§ç¯å¢ƒ</h3><p>é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª <code>webpack.prod.js</code></p>
<p>æŠŠå¼€å‘ç¯å¢ƒçš„å†…å®¹å¤åˆ¶è¿‡æ¥æ”¹æ”¹</p>
<p>æ›´æ”¹<code>mode</code>ä¸º<code>production</code></p>
<p>è¾“å‡ºæ–‡ä»¶åŠ ä¸Š<code>bundle.\[contenthash\].js</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;production&#x27;</span>,</span><br><span class="line">  <span class="attr">entry</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;/src&#x27;</span>,<span class="string">&#x27;index.js&#x27;</span>),</span><br><span class="line"></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;/dist&#x27;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.\[contenthash\].js&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">plugin</span>: &#123;</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line"></span><br><span class="line">      	<span class="attr">template</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&quot;src&quot;</span>,<span class="string">&quot;index.html&quot;</span>),</span><br><span class="line"></span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;index.html&#x27;</span></span><br><span class="line">  	  &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ›´æ”¹<code>package.json</code>ä¸­<code>script</code> ä¸­çš„<code>build</code> ä¸ºåˆšæ‰æ–°å»ºçš„ç”Ÿäº§ç¯å¢ƒ <code>webpack.prod.js</code></p>
<p>ä½¿ç”¨<code>npm run build</code>è¿è¡Œæ‰“åŒ…</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;scripts&quot;</span> : &#123;</span><br><span class="line">		<span class="string">&quot;build&quot;</span>: <span class="string">&quot;webpack&quot;</span></span><br><span class="line">        <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;webpack-dev-server&quot;</span></span><br><span class="line">        <span class="string">&quot;build&quot;</span>: <span class="string">&quot;webpack --config webpack.prod.js&quot;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-ES6æ¨¡å—åŒ–è§„èŒƒ"><a href="#4-ES6æ¨¡å—åŒ–è§„èŒƒ" class="headerlink" title="4.ES6æ¨¡å—åŒ–è§„èŒƒ"></a>4.ES6æ¨¡å—åŒ–è§„èŒƒ</h2><p>ES6çš„æ¨¡å—åŒ–ä¹‹å‰æœ‰ä¸‰ç§è§„èŒƒï¼šCommonJSã€AMDã€CMD è¿™å‡ ä¸ªå…¶ä»–å¤§ä½¬éƒ½æœ‰è¯¦ç»†ä»‹ç»</p>
<blockquote>
<p>ES6 æ¨¡å—çš„è®¾è®¡æ€æƒ³æ˜¯å°½é‡çš„é™æ€åŒ–ï¼Œä½¿å¾—<strong>ç¼–è¯‘æ—¶</strong>å°±èƒ½ç¡®å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠè¾“å…¥å’Œè¾“å‡ºçš„å˜é‡ã€‚CommonJS å’Œ AMD æ¨¡å—ï¼Œéƒ½åªèƒ½åœ¨<strong>è¿è¡Œæ—¶</strong>ç¡®å®šè¿™äº›ä¸œè¥¿ã€‚</p>
<p>æˆ‘è¿™é‡Œå°±æ˜¯ç®€å•çš„ç®€è¿°ä¸‹ES6ä¸­çš„æ¨¡å—åŒ–è§„èŒƒ</p>
<p>ES6ä¸­çš„æ¨¡å—è‡ªåŠ¨é‡‡ç”¨<strong>ä¸¥æ ¼æ¨¡å¼</strong></p>
<p>ES6æ¨¡å—ä¸­çš„é¡¶å±‚<code>this</code>æŒ‡å‘<code>undefined</code></p>
</blockquote>
<h3 id="export"><a href="#export" class="headerlink" title="export"></a>export</h3><p><code>exprot</code>ä¸€å®šè¦å†™åœ¨<strong>æœ€é¡¶å±‚</strong> å¯¼å‡ºçš„å€¼æ˜¯åŠ¨æ€ç»‘å®šçš„ï¼Œä¸æ˜¯ç¼“å­˜</p>
<p>ä¸‹é¢æ¼”ç¤ºçš„å¯¼å‡ºçš†åœ¨ <code>index.js</code>ä¸­</p>
<blockquote>
<p>åˆ†åˆ«å¯¼å‡ºï¼š</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> a = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> b = <span class="string">&#x27;b&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">c</span> = (<span class="params"></span>)=&gt;&#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>) &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸€æ¬¡å…¨éƒ¨å¯¼å‡º</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> b = <span class="string">&#x27;b&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">c</span> = (<span class="params"></span>)=&gt;&#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>) &#125;</span><br><span class="line"><span class="keyword">export</span> &#123; a, b, c &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨å¯¼å‡ºçš„æ—¶å€™é€šè¿‡ as å–åˆ«å</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> b = <span class="string">&#x27;b&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">c</span> = (<span class="params"></span>)=&gt;&#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>) &#125;</span><br><span class="line"><span class="keyword">export</span> &#123; a <span class="keyword">as</span> lang1, b <span class="keyword">as</span> lang2, c <span class="keyword">as</span> lang3 &#125;</span><br></pre></td></tr></table></figure>
<h3 id="import"><a href="#import" class="headerlink" title="import"></a>import</h3><blockquote>
<p>é€šè¿‡ç»“æ„èµ‹å€¼ è·å– å¯¼å‡ºçš„å…ƒç´ </p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; a, b, c&#125; <span class="keyword">from</span> <span class="string">&#x27;./index.js&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å½“ç„¶å¯¼å…¥çš„æ—¶å€™ä¹Ÿå¯ä»¥å–åˆ«å</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; a <span class="keyword">as</span> lang &#125; <span class="keyword">from</span> <span class="string">&#x27;./index.js&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(lang)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¯¼å…¥æ‰€æœ‰çš„å…ƒç´ </p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> lang <span class="keyword">from</span> <span class="string">&#x27;./index.js&#x27;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(lang.<span class="property">a</span>)</span><br></pre></td></tr></table></figure>
<h3 id="export-default"><a href="#export-default" class="headerlink" title="export default"></a>export default</h3><p>å¯ä»¥æŒ‡å®šæ¨¡å—é»˜è®¤è¾“å‡º</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;123&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>importå¯¼å…¥çš„å…ƒç´ å¯ä»¥ä¸ºä»»æ„åç§°</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> lang <span class="keyword">from</span> <span class="string">&#x27;./index.js&#x27;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ€»ç»“</p>
</blockquote>
<ul>
<li>è¾“å‡ºå•ä¸ªå€¼ï¼Œä½¿ç”¨<code>export default</code></li>
<li>è¾“å‡ºå¤šä¸ªå€¼ï¼Œä½¿ç”¨<code>export</code></li>
<li><code>export default</code>ä¸æ™®é€šçš„<code>export</code>ä¸è¦åŒæ—¶ä½¿ç”¨</li>
</ul>
<h2 id="5-Linuxå‘½ä»¤"><a href="#5-Linuxå‘½ä»¤" class="headerlink" title="5.Linuxå‘½ä»¤"></a>5.Linuxå‘½ä»¤</h2><p>è¿™é‡Œæˆ‘å°±æ‘†å‡ ä¸ªå¸¸ç”¨çš„ï¼Œå› ä¸ºè¿™ä¸ªæ˜¯æˆ‘çš„æ€»ç»“ï¼Œè‡ªå·±ç¿»å‡ºæ¥çœ‹çœ‹ï¼Œæ‰€ä»¥æ›´å…¨Linuxè¯·åˆ°å…¶ä»–å¤§ä½¬é‚£é‡ŒæŸ¥çœ‹</p>
<p><code>cp</code> æ‹·è´æ–‡ä»¶ ï¼š<code>cp -rvf a/ /tmp/</code></p>
<p><code>mkdir</code> åˆ›å»ºç›®å½•ï¼š<code>mkdir dir</code></p>
<p><code>ls</code> å½“å‰ç›®å½•çš„æ‰€æœ‰å†…å®¹ã€‚</p>
<p><code>ls -l</code>ç›®å½•ä¸‹è¯¦ç»†ä¿¡æ¯</p>
<p><code>pwd</code> å½“å‰æ‰€åœ¨çš„ç›®å½•</p>
<p><code>cd</code> æ‰“å¼€ç›®å½•</p>
<p><code>find</code> æŸ¥æ‰¾æ–‡ä»¶</p>
<p><code>cat</code> æŸ¥çœ‹æ–‡ä»¶å†…å®¹</p>
<p><code>grep</code>å¯¹å†…å®¹è¿›è¡Œè¿‡æ»¤</p>
<p><code>diff</code>å‘½ä»¤ç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶æ˜¯å¦çš„å·®å¼‚</p>
<p><code>.tar``gz</code> ä½¿ç”¨tar ,gzipå‘½ä»¤æ“ä½œ</p>
<p><code>ps</code>å‘½ä»¤èƒ½å¤Ÿçœ‹åˆ°è¿›ç¨‹/çº¿ç¨‹çŠ¶æ€</p>
<p><code>ifconfig</code>æŸ¥çœ‹ipåœ°å€</p>
<p><code>ping</code>æµ‹è¯•ç½‘ç»œ</p>
<h1 id="å…³äºè¿è¡Œç¯å¢ƒ"><a href="#å…³äºè¿è¡Œç¯å¢ƒ" class="headerlink" title="å…³äºè¿è¡Œç¯å¢ƒ"></a>å…³äºè¿è¡Œç¯å¢ƒ</h1><blockquote>
<p>è¿è¡Œç¯å¢ƒå³æµè§ˆå™¨( <code>server</code>ç«¯æœ‰<code>node.js</code> )</p>
<p>ä¸‹è½½ç½‘é¡µä»£ç ,æ¸²æŸ“å‡ºé¡µé¢,æœŸé—´ä¼šæ‰§è¡Œè‹¥å¹²JS</p>
<p>è¦ä¿è¯ä»£ç åœ¨æµè§ˆå™¨ä¸­: <strong>ç¨³å®š</strong>ä¸”<strong>é«˜æ•ˆ</strong></p>
</blockquote>
<h2 id="1-é¡µé¢åŠ è½½çš„è¿‡ç¨‹"><a href="#1-é¡µé¢åŠ è½½çš„è¿‡ç¨‹" class="headerlink" title="1.é¡µé¢åŠ è½½çš„è¿‡ç¨‹"></a>1.é¡µé¢åŠ è½½çš„è¿‡ç¨‹</h2><h3 id="1-ä»è¾“å…¥urlåˆ°æ¸²æŸ“å‡ºé¡µé¢çš„æ•´ä¸ªè¿‡ç¨‹"><a href="#1-ä»è¾“å…¥urlåˆ°æ¸²æŸ“å‡ºé¡µé¢çš„æ•´ä¸ªè¿‡ç¨‹" class="headerlink" title="1.ä»è¾“å…¥urlåˆ°æ¸²æŸ“å‡ºé¡µé¢çš„æ•´ä¸ªè¿‡ç¨‹"></a>1.ä»è¾“å…¥urlåˆ°æ¸²æŸ“å‡ºé¡µé¢çš„æ•´ä¸ªè¿‡ç¨‹</h3><blockquote>
<p>å¤§è‡´çš„æµç¨‹</p>
</blockquote>
<ol>
<li><code>DNS</code>è§£æ:åŸŸå-&gt;<code>IP</code>åœ°å€</li>
<li>æµè§ˆå™¨æ ¹æ®<code>IP</code>åœ°å€å‘æœåŠ¡å™¨å‘èµ·<code>http</code>è¯·æ±‚</li>
<li>æœåŠ¡å™¨å¤„ç†<code>http</code>è¯·æ±‚,å¹¶è¿”å›ç»™æµè§ˆå™¨</li>
<li>æµè§ˆå™¨è§£ææ¸²æŸ“é¡µé¢</li>
<li>è¿æ¥ç»“æŸ</li>
</ol>
<blockquote>
<p>â€‹ æ¸²æŸ“è¿‡ç¨‹</p>
</blockquote>
<ul>
<li>æ ¹æ®<code>HTML</code>ä»£ç ç”Ÿæˆ<code>DOM Tree</code></li>
<li>æ ¹æ®<code>CSS</code>ä»£ç ç”Ÿæˆ<code>CSSOM</code></li>
<li>å°†<code>DOM Tree</code>å’Œ<code>CSSOM</code>æ•´åˆè¡Œç¨‹<code>Render Tree</code></li>
<li>æ ¹æ®<code>Render Tree</code>æ¸²æŸ“é¡µé¢</li>
<li>é‡åˆ°<code>&lt;script&gt;</code>åˆ™æš‚åœæ¸²æŸ“,ä¼˜å…ˆåŠ è½½å¹¶æ‰§è¡Œ<code>JS</code>ä»£ç ï¼Œå®Œæˆå†ç»§ç»­</li>
<li>ç›´è‡³æŠŠ<code>Render Tree</code>æ¸²æŸ“å®Œæˆ</li>
</ul>
<h3 id="2-window-onloadå’ŒDOMContentLoadedçš„åŒºåˆ«"><a href="#2-window-onloadå’ŒDOMContentLoadedçš„åŒºåˆ«" class="headerlink" title="2.window.onloadå’ŒDOMContentLoadedçš„åŒºåˆ«"></a>2.window.onloadå’ŒDOMContentLoadedçš„åŒºåˆ«</h3><ul>
<li><code>window.onload</code>èµ„æºå…¨éƒ¨åŠ è½½å®Œæ‰èƒ½æ‰§è¡Œï¼ŒåŒ…æ‹¬å›¾ç‰‡</li>
<li><code>DOMContentLoaded``DOM</code>æ¸²æŸ“å®Œæˆå³å¯,å›¾ç‰‡å¯èƒ½å°šæœªä¸‹è½½</li>
</ul>
<h2 id="2-æ€§èƒ½ä¼˜åŒ–"><a href="#2-æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="2.æ€§èƒ½ä¼˜åŒ–"></a>2.æ€§èƒ½ä¼˜åŒ–</h2><blockquote>
<p>æ˜¯ä¸€ä¸ªç»¼åˆæ€§é—®é¢˜ï¼Œæ²¡æœ‰æ ‡å‡†ç­”æ¡ˆ,ä½†è¦æ±‚å°½é‡å…¨é¢</p>
<p>æŸäº›ç»†èŠ‚é—®é¢˜å¯èƒ½ä¼šå•ç‹¬æé—®:æ‰‹å†™é˜²æŠ–ã€èŠ‚æµ</p>
<p>åªå…³æ³¨æ ¸å¿ƒç‚¹,é’ˆå¯¹é¢è¯•</p>
</blockquote>
<h3 id="æ€§èƒ½ä¼˜åŒ–åŸåˆ™"><a href="#æ€§èƒ½ä¼˜åŒ–åŸåˆ™" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–åŸåˆ™"></a>æ€§èƒ½ä¼˜åŒ–åŸåˆ™</h3><ul>
<li>å¤šä½¿ç”¨å†…å­˜ã€ç¼“å­˜æˆ–å…¶ä»–æ–¹æ³•</li>
<li>å‡å°‘<code>CPU</code>è®¡ç®—é‡ï¼Œå‡å°‘ç½‘ç»œåŠ è½½è€—æ—¶</li>
<li>(é€‚ç”¨äºæ‰€æœ‰ç¼–ç¨‹çš„æ€§èƒ½ä¼˜åŒ–ä¸€ç©ºé—´æ¢æ—¶é—´ )</li>
</ul>
<h3 id="è®©åŠ è½½æ›´å¿«"><a href="#è®©åŠ è½½æ›´å¿«" class="headerlink" title="è®©åŠ è½½æ›´å¿«"></a>è®©åŠ è½½æ›´å¿«</h3><ul>
<li>å‡å°‘èµ„æºä½“ç§¯:å‹ç¼©ä»£ç </li>
<li>å‡å°‘è®¿é—®æ¬¡æ•°:åˆå¹¶ä»£ç (å¤šä¸ªjsæ–‡ä»¶åˆå¹¶åˆ°ä¸€ä¸ªæ–‡ä»¶ç„¶ååŠ è½½), <code>SSR</code>æœåŠ¡å™¨ç«¯æ¸²æŸ“,ç¼“å­˜</li>
<li>ä½¿ç”¨æ›´å¿«çš„ç½‘ç»œ: <code>CDN</code></li>
<li><code>CSS</code>æ”¾åœ¨<code>head</code>ï¼Œ<code>JS</code>æ”¾åœ¨<code>body</code>æœ€ä¸‹é¢</li>
<li>å°½æ—©å¼€å§‹æ‰§è¡Œ<code>JS</code>ï¼Œç”¨<code>DOMContentLoaded</code>è§¦å‘</li>
<li>æ‡’åŠ è½½(å›¾ç‰‡æ‡’åŠ è½½,ä¸Šæ»‘åŠ è½½æ›´å¤š)</li>
</ul>
<h3 id="è®©æ¸²æŸ“æ›´å¿«"><a href="#è®©æ¸²æŸ“æ›´å¿«" class="headerlink" title="è®©æ¸²æŸ“æ›´å¿«"></a>è®©æ¸²æŸ“æ›´å¿«</h3><ul>
<li>å¯¹DOMæŸ¥è¯¢è¿›è¡Œç¼“å­˜</li>
<li>å‡å°‘é¢‘ç¹DOMæ“ä½œï¼Œåˆå¹¶åˆ°ä¸€èµ·æ’å…¥DOMç»“æ„</li>
<li>èŠ‚æµ<code>throttle</code>é˜²æŠ–<code>debounce</code></li>
</ul>
<h3 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h3><ul>
<li>é™æ€èµ„æºåŠ <code>hash</code>åç¼€ï¼Œæ ¹æ®æ–‡ä»¶å†…å®¹è®¡ç®—<code>hash</code></li>
<li>æ–‡ä»¶å†…å®¹ä¸å˜,åˆ™<code>hash</code>ä¸å˜ï¼Œåˆ™<code>url</code>ä¸å˜</li>
<li><code>url</code>å’Œæ–‡ä»¶ä¸å˜,åˆ™ä¼šè‡ªåŠ¨è§¦å‘<code>http</code>ç¼“å­˜æœºåˆ¶ï¼Œè¿”å›<code>304</code></li>
</ul>
<h3 id="SSR"><a href="#SSR" class="headerlink" title="SSR"></a>SSR</h3><ul>
<li>æœåŠ¡å™¨ç«¯æ¸²æŸ“:å°†ç½‘é¡µå’Œæ•°æ®ä¸€èµ·åŠ è½½ï¼Œä¸€èµ·æ¸²æŸ“</li>
<li>é<code>SSR</code> (å‰åç«¯åˆ†ç¦») :å…ˆåŠ è½½ç½‘é¡µï¼Œå†åŠ è½½æ•°æ®,å†æ¸²æŸ“æ•°æ®</li>
<li>æ—©å…ˆçš„<code>JSP ASP PHP</code>ï¼Œç°åœ¨çš„vue React SSR</li>
</ul>
<h3 id="é˜²æŠ–"><a href="#é˜²æŠ–" class="headerlink" title="é˜²æŠ–"></a>é˜²æŠ–</h3><blockquote>
<p>ç›‘å¬ä¸€ä¸ªè¾“å…¥æ¡†çš„ï¼Œæ–‡å­—å˜åŒ–åè§¦å‘changeäº‹ä»¶</p>
<p>ç›´æ¥ç”¨keyupäº‹ä»¶,åˆ™ä¼šé¢‘å‘è§¦å‘changeäº‹ä»¶</p>
<p>é˜²æŠ–:ç”¨æˆ·è¾“å…¥ç»“æŸæˆ–æš‚åœæ—¶,æ‰ä¼šè§¦å‘changeäº‹ä»¶</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, delay = <span class="number">500</span></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(timer)&#123;</span><br><span class="line">        <span class="title function_">cleartTimout</span>(timer)</span><br><span class="line">    &#125;</span><br><span class="line">    timer = <span class="title function_">seTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>,<span class="variable language_">arguments</span>)</span><br><span class="line">        timer = <span class="literal">null</span></span><br><span class="line">    &#125;,delay)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> input = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;input&#x27;</span>)</span><br><span class="line">input.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keyup&#x27;</span>,<span class="title function_">debounce</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(input.<span class="property">value</span>)</span><br><span class="line">&#125;,<span class="number">600</span>),<span class="literal">false</span>)</span><br></pre></td></tr></table></figure>
<h3 id="èŠ‚æµ"><a href="#èŠ‚æµ" class="headerlink" title="èŠ‚æµ"></a>èŠ‚æµ</h3><blockquote>
<p>æ‹–æ‹½ä¸€ä¸ªå…ƒç´ æ—¶,è¦éšæ—¶æ‹¿åˆ°è¯¥å…ƒç´ è¢«æ‹–æ‹½çš„ä½ç½®</p>
<p>ç›´æ¥ç”¨<code>drag</code>äº‹ä»¶ï¼Œåˆ™ä¼šé¢‘å‘è§¦å‘ï¼Œå¾ˆå®¹æ˜“å¯¼è‡´å¡é¡¿</p>
<p>èŠ‚æµ:æ— è®ºæ‹–æ‹½é€Ÿåº¦å¤šå¿«ï¼Œéƒ½ä¼šæ¯éš”<code>100ms</code>è§¦å‘ä¸€æ¬¡</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">fn, delay = <span class="number">500</span></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(timer)&#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    timer = <span class="title function_">seTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>,<span class="variable language_">arguments</span>)</span><br><span class="line">        timer = <span class="literal">null</span></span><br><span class="line">    &#125;,delay)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> img = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;img&#x27;</span>)</span><br><span class="line">img.<span class="title function_">addEventListener</span>(<span class="string">&#x27;drag&#x27;</span>,<span class="title function_">throttle</span>( <span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">offsetX</span>,e.<span class="property">offsetY</span>)</span><br><span class="line">&#125;,<span class="number">600</span>),<span class="literal">false</span>)</span><br></pre></td></tr></table></figure>
<h2 id="3-å®‰å…¨"><a href="#3-å®‰å…¨" class="headerlink" title="3.å®‰å…¨"></a>3.å®‰å…¨</h2><blockquote>
<p><code>XSRF</code>æ”»å‡» è¿™é‡Œç®€å•çš„ ä»‹ç»ä¸‹</p>
</blockquote>
<ul>
<li>ä½ æ­£åœ¨è´­ç‰©,çœ‹ä¸­äº†æŸä¸ªå•†å“ï¼Œå•†å“idæ˜¯100</li>
<li>ä»˜è´¹æ¥å£æ˜¯xxx.com/pay?id=100 , ä½†æ²¡æœ‰ä»»ä½•éªŒè¯</li>
<li>æˆ‘æ˜¯æ”»å‡»è€…,æˆ‘çœ‹ä¸­äº†ä¸€ä¸€ä¸ªå•†å“ï¼Œidæ˜¯200</li>
<li>æˆ‘å‘ä½ å‘é€ä¸€å°ç”µå­é‚®ä»¶ ,é‚®ä»¶æ ‡é¢˜å¾ˆå¸å¼•äºº</li>
<li>ä½†é‚®ä»¶æ­£æ–‡éšè—ç€<img src=xxx.com/pay?id=200 /></li>
<li>ä½ ä¸€æŸ¥çœ‹é‚®ä»¶,å°±å¸®æˆ‘è´­ä¹°äº†idæ˜¯200çš„å•†å“</li>
</ul>
<blockquote>
<p><code>XSRF</code>é¢„é˜²</p>
</blockquote>
<ul>
<li>ä½¿ç”¨postæ¥å£</li>
<li>å¢åŠ éªŒè¯ï¼Œä¾‹å¦‚å¯†ç ã€çŸ­ä¿¡éªŒè¯ç ã€æŒ‡çº¹ç­‰</li>
</ul>
<h1 id="å…³äºä¸€äº›çœŸé¢˜"><a href="#å…³äºä¸€äº›çœŸé¢˜" class="headerlink" title="å…³äºä¸€äº›çœŸé¢˜"></a>å…³äºä¸€äº›çœŸé¢˜</h1><h2 id="å·"><a href="#å·" class="headerlink" title="+ å·"></a>+ å·</h2><ul>
<li>ä¸¤ä¸ªæ“ä½œæ•°å¦‚æœæ˜¯<code>number</code> åˆ™ç›´æ¥ç›¸åŠ å‡ºç»“æœ</li>
<li>å¦‚æœå…¶ä¸­æœ‰ä¸€ä¸ªæ“ä½œæ•°ä¸º<code>string</code>ï¼Œ åˆ™å°†å¦ä¸€ä¸ªæ“ä½œæ•°éšå¼çš„è½¬æ¢ä¸º<code>string</code>,ç„¶åè¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥å¾—å‡ºç»“æœ</li>
<li>å¦‚æœæ“ä½œæ•°ä¸ºå¯¹è±¡æˆ–è€…æ˜¯æ•°ç»„è¿™ç§å¤æ‚çš„æ•°æ®ç±»å‹ï¼Œé‚£ä¹ˆå°±å°†ä¸¤ä¸ªæ“ä½œæ•°éƒ½è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œè¿›è¡Œæ‹¼æ¥</li>
<li>å¦‚æœæ“ä½œæ•°æ˜¯åƒ<code>boolean</code>è¿™ç§çš„ç®€å•æ•°æ®ç±»å‹ï¼Œé‚£ä¹ˆå°±å°†æ“ä½œæ•°è½¬æ¢ä¸º<code>number</code>ç›¸åŠ å¾—å‡ºç»“æœ</li>
<li><code>\[\]+&#123;&#125;</code> å› ä¸ºä¼šè¢«å¼ºåˆ¶è½¬æ¢ä¸ºâ€,ç„¶å+è¿ç®—ç¬¦é“¾æ¥- ä¸ª<code>&#123;&#125;</code>, <code>&#123; &#125;</code>å¼ºåˆ¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²å°±æ˜¯<code>&quot;\[Object Object\]&quot;</code></li>
<li><code>&#123;&#125;</code>å½“ä½œä¸€ä¸ªç©ºä»£ç å—ï¼Œ<code>+0</code>æ˜¯å¼ºåˆ¶å°†[]è½¬æ¢ä¸º<code>number</code>,è½¬æ¢çš„è¿‡ç¨‹æ˜¯<code>+\[0\] =&gt; +&quot;&quot; =&gt;0</code>æœ€ç»ˆçš„ç»“æœå°±æ˜¯<code>0</code></li>
</ul>
<h2 id="varå’Œlet-constçš„åŒºåˆ«"><a href="#varå’Œlet-constçš„åŒºåˆ«" class="headerlink" title="varå’Œlet constçš„åŒºåˆ«"></a>varå’Œlet constçš„åŒºåˆ«</h2><ul>
<li><code>var</code>æ˜¯<strong>ES5</strong>è¯­æ³•,<code>let``const</code>æ˜¯<strong>ES6</strong>è¯­æ³•;<code>var</code>æœ‰å˜é‡æå‡</li>
<li><code>var</code>å’Œ<code>let</code>æ˜¯å˜é‡ï¼Œå¯ä¿®æ”¹;constæ˜¯å¸¸é‡,ä¸å¯ä¿®æ”¹;</li>
<li><code>let``const</code>æœ‰å—çº§ä½œç”¨åŸŸ,<code>var</code>æ²¡æœ‰</li>
</ul>
<h2 id="typeofè¿”å›å“ªäº›ç±»å‹"><a href="#typeofè¿”å›å“ªäº›ç±»å‹" class="headerlink" title="typeofè¿”å›å“ªäº›ç±»å‹"></a>typeofè¿”å›å“ªäº›ç±»å‹</h2><blockquote>
<p>ä¸€å…±æ˜¯7ç§ å€¼å¾—æ³¨æ„çš„ä¸€ç‚¹å°±æ˜¯ typeof <strong>null</strong> //<strong>object</strong> å‰é¢JSåŸºç¡€æœ‰æåˆ°</p>
</blockquote>
<ul>
<li>string</li>
<li>number</li>
<li>boolean</li>
<li>object</li>
<li>function</li>
<li>undefined</li>
<li>symbol(ES6)</li>
</ul>
<h2 id="åˆ—ä¸¾å¼ºåˆ¶ç±»å‹è½¬æ¢å’Œéšå¼ç±»å‹è½¬æ¢"><a href="#åˆ—ä¸¾å¼ºåˆ¶ç±»å‹è½¬æ¢å’Œéšå¼ç±»å‹è½¬æ¢" class="headerlink" title="åˆ—ä¸¾å¼ºåˆ¶ç±»å‹è½¬æ¢å’Œéšå¼ç±»å‹è½¬æ¢"></a>åˆ—ä¸¾å¼ºåˆ¶ç±»å‹è½¬æ¢å’Œéšå¼ç±»å‹è½¬æ¢</h2><ul>
<li>å¼ºåˆ¶: <code>parseInt``parseFloat``toString</code>ç­‰</li>
<li>éšå¼:<code>if</code>ã€<code>é€»è¾‘è¿ç®—</code>ã€<code>==</code>ã€<code>+æ‹¼æ¥å­—ç¬¦ä¸²</code></li>
</ul>
<h2 id="æ‰‹å†™æ·±åº¦æ¯”è¾ƒ-æ¨¡æ‹Ÿlodash-isEqual"><a href="#æ‰‹å†™æ·±åº¦æ¯”è¾ƒ-æ¨¡æ‹Ÿlodash-isEqual" class="headerlink" title="æ‰‹å†™æ·±åº¦æ¯”è¾ƒ,æ¨¡æ‹Ÿlodash isEqual"></a>æ‰‹å†™æ·±åº¦æ¯”è¾ƒ,æ¨¡æ‹Ÿlodash isEqual</h2><blockquote>
<p>è¿™é‡Œæ²¡è€ƒè™‘<code>function</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isObject</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> obj === <span class="string">&#x27;object&#x27;</span> &amp;&amp; obj !== <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isEqual</span>(<span class="params">obj1, obj2</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!<span class="title function_">isObject</span>(obj1) || !<span class="title function_">isObject</span>(obj2)) &#123;</span><br><span class="line">    <span class="keyword">return</span> obj1 === obj2</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (obj1 === obj2) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> obj1Keys = <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj1)</span><br><span class="line">  <span class="keyword">const</span> obj2Keys = <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj2)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (obj1Keys.<span class="property">length</span> !== obj2Keys.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj1) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="title function_">isEqual</span>(obj1\[key\], obj2\[key\])</span><br><span class="line">    <span class="keyword">if</span> (!result) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isEqual</span>(<span class="string">&#x27;123&#x27;</span>, <span class="string">&#x27;123&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isEqual</span>(obj1, obj1))</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj1 = &#123;</span><br><span class="line">  <span class="attr">x</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">y</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">s</span>: &#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">2</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj2 = &#123;</span><br><span class="line">  <span class="attr">x</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">y</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">s</span>: &#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">2</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isEqual</span>(obj1, obj2))</span><br></pre></td></tr></table></figure>
<h2 id="split-å’Œjoin-çš„åŒºåˆ«"><a href="#split-å’Œjoin-çš„åŒºåˆ«" class="headerlink" title="split()å’Œjoin()çš„åŒºåˆ«"></a>split()å’Œjoin()çš„åŒºåˆ«</h2><blockquote>
<p>ä»–ä»¬æ˜¯ä¸€ä¸ªç›¸åçš„æ“åš</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">\[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>\].<span class="title function_">join</span>(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;1-2-3&#x27;</span>.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="æ•°ç»„çš„pop-push-unshift-shiftåˆ†åˆ«åšä»€ä¹ˆ"><a href="#æ•°ç»„çš„pop-push-unshift-shiftåˆ†åˆ«åšä»€ä¹ˆ" class="headerlink" title="æ•°ç»„çš„pop push unshift shiftåˆ†åˆ«åšä»€ä¹ˆ"></a>æ•°ç»„çš„pop push unshift shiftåˆ†åˆ«åšä»€ä¹ˆ</h2><h3 id="ä¸€èˆ¬ä»è¿™ä¸‰ä¸ªè§’åº¦å›ç­”"><a href="#ä¸€èˆ¬ä»è¿™ä¸‰ä¸ªè§’åº¦å›ç­”" class="headerlink" title="ä¸€èˆ¬ä»è¿™ä¸‰ä¸ªè§’åº¦å›ç­”"></a>ä¸€èˆ¬ä»è¿™ä¸‰ä¸ªè§’åº¦å›ç­”</h3><blockquote>
<p>åŠŸèƒ½æ˜¯ä»€ä¹ˆ?</p>
<p>è¿”å›å€¼æ˜¯ä»€ä¹ˆ?</p>
<p>æ˜¯å¦ä¼šå¯¹åŸæ•°ç»„é€ æˆå½±å“?</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = \[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>\]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> popRes = arr.<span class="title function_">pop</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(popRes, arr)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pushRes = arr.<span class="title function_">push</span>(<span class="number">50</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(pushRes, arr)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> unshiftRes = arr.<span class="title function_">unshift</span>(<span class="number">5</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(unshiftRes, arr)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> shiftRes = arr.<span class="title function_">shift</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(shiftRes, arr)</span><br></pre></td></tr></table></figure>
<h3 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h3><blockquote>
<p>çº¯å‡½æ•°</p>
<ol>
<li>ä¸æ”¹å˜æºæ•°ç»„( æ²¡æœ‰å‰¯ä½œç”¨)</li>
<li>è¿”å›ä¸€ä¸ªæ•°ç»„</li>
</ol>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = \[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>\]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr1 = arr.<span class="title function_">concat</span>(\[<span class="number">50</span>, <span class="number">60</span>, <span class="number">70</span>\])</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr, arr1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr2 = arr.<span class="title function_">map</span>(<span class="function"><span class="params">num</span> =&gt;</span> num * <span class="number">10</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr, arr2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr3 = arr.<span class="title function_">filter</span>(<span class="function"><span class="params">num</span> =&gt;</span> num &gt; <span class="number">25</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr, arr3)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr4 = arr.<span class="title function_">slice</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr, arr4)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>éçº¯å‡½æ•°</p>
<p><code>push``pop``shift``unshift</code></p>
<p><code>forEach</code></p>
<p><code>some``every</code></p>
<p><code>reduce</code></p>
</blockquote>
<h2 id="æ•°ç»„sliceå’Œspliceçš„åŒºåˆ«"><a href="#æ•°ç»„sliceå’Œspliceçš„åŒºåˆ«" class="headerlink" title="æ•°ç»„sliceå’Œspliceçš„åŒºåˆ«"></a>æ•°ç»„sliceå’Œspliceçš„åŒºåˆ«</h2><ul>
<li>åŠŸèƒ½åŒºåˆ«( <code>slice</code>-åˆ‡ç‰‡, <code>splice</code>-å‰ªæ¥)</li>
<li>å‚æ•°å’Œè¿”å›å€¼</li>
<li>æ˜¯å¦çº¯å‡½æ•°?</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = \[<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>\]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr1 = arr.<span class="title function_">slice</span>()</span><br><span class="line"><span class="keyword">const</span> arr2 = arr.<span class="title function_">slice</span>(<span class="number">1</span>, <span class="number">4</span>)</span><br><span class="line"><span class="keyword">const</span> arr3 = arr.<span class="title function_">slice</span>(<span class="number">2</span>)</span><br><span class="line"><span class="keyword">const</span> arr4 = arr.<span class="title function_">slice</span>(-<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> spliceRes = arr.<span class="title function_">splice</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(spliceRes, arr)</span><br></pre></td></tr></table></figure>
<h2 id="10-20-30-map-parseInt-è¿”å›ç»“æœæ˜¯ä»€ä¹ˆ"><a href="#10-20-30-map-parseInt-è¿”å›ç»“æœæ˜¯ä»€ä¹ˆ" class="headerlink" title="[10, 20, 30].map(parseInt)è¿”å›ç»“æœæ˜¯ä»€ä¹ˆ?"></a>[10, 20, 30].map(parseInt)è¿”å›ç»“æœæ˜¯ä»€ä¹ˆ?</h2><ul>
<li><code>map</code>çš„å‚æ•°å’Œè¿”å›å€¼</li>
<li><code>parseInt</code>å‚æ•°å’Œè¿”å›å€¼</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> res = \[<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>\].<span class="title function_">map</span>(<span class="built_in">parseInt</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">\[<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>\].<span class="title function_">map</span>(<span class="function">(<span class="params">item,index</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">parseInt</span>(item,index)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="ajaxè¯·æ±‚getå’Œpostçš„åŒºåˆ«"><a href="#ajaxè¯·æ±‚getå’Œpostçš„åŒºåˆ«" class="headerlink" title="ajaxè¯·æ±‚getå’Œpostçš„åŒºåˆ«?"></a>ajaxè¯·æ±‚getå’Œpostçš„åŒºåˆ«?</h2><ul>
<li><code>get</code>ä¸€èˆ¬ç”¨äºæŸ¥è¯¢æ“ä½œ, <code>post</code>ä¸€èˆ¬ç”¨æˆ·æäº¤æ“ä½œ</li>
<li><code>get</code>å‚æ•°æ‹¼æ¥åœ¨urlä¸Š, <code>post</code>æ”¾åœ¨è¯·æ±‚ä½“å†…(æ•°æ®ä½“ç§¯å¯æ›´å¤§)</li>
<li>å®‰å…¨æ€§: <code>post</code>æ˜“äºé˜²æ­¢<code>CSRF</code></li>
</ul>
<h2 id="å‡½æ•°bind-callå’Œapplyçš„åŒºåˆ«"><a href="#å‡½æ•°bind-callå’Œapplyçš„åŒºåˆ«" class="headerlink" title="å‡½æ•°bind,callå’Œapplyçš„åŒºåˆ«"></a>å‡½æ•°bind,callå’Œapplyçš„åŒºåˆ«</h2><p><code>bind</code>åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°, å½“è¢«è°ƒç”¨æ—¶ ,ç¬¬ä¸€å‚æ•°thiså€¼ï¼Œåœ¨è°ƒç”¨æ–°å‡½æ•°æ—¶ï¼Œæ¥å—çš„æ˜¯è‹¥å¹²ä¸ªå‚æ•°åˆ—è¡¨</p>
<p><code>call</code>æ–¹æ³•è°ƒç”¨ä¸€ä¸ªå‡½æ•°, ç¬¬ä¸€å‚æ•°thiså€¼ï¼Œæ¥å—çš„æ˜¯è‹¥å¹²ä¸ªå‚æ•°åˆ—è¡¨</p>
<p><code>apply</code>æ–¹æ³•è°ƒç”¨ä¸€ä¸ªå‡½æ•°, ç¬¬ä¸€å‚æ•°thiså€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼‰</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> newFn = fn.<span class="title function_">bind</span>(<span class="variable language_">this</span>,p1,p2,p3)</span><br><span class="line"><span class="title function_">newFn</span>()</span><br><span class="line"></span><br><span class="line">fn.<span class="title function_">call</span>(<span class="variable language_">this</span>,p1,p2,p3)</span><br><span class="line"></span><br><span class="line">fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>,<span class="variable language_">arguments</span>)</span><br></pre></td></tr></table></figure>
<h2 id="äº‹ä»¶ä»£ç†-å§”æ‰˜-æ˜¯ä»€ä¹ˆ"><a href="#äº‹ä»¶ä»£ç†-å§”æ‰˜-æ˜¯ä»€ä¹ˆ" class="headerlink" title="äº‹ä»¶ä»£ç†(å§”æ‰˜)æ˜¯ä»€ä¹ˆ?"></a>äº‹ä»¶ä»£ç†(å§”æ‰˜)æ˜¯ä»€ä¹ˆ?</h2><blockquote>
<p>äº‹ä»¶ä»£ç†å°±æ˜¯åˆ©ç”¨äº‹ä»¶å†’æ³¡æˆ–äº‹ä»¶æ•è·çš„æœºåˆ¶æŠŠä¸€ç³»åˆ—çš„å†…å±‚å…ƒç´ äº‹ä»¶ç»‘å®šåˆ°å¤–å±‚å…ƒç´ ã€‚</p>
<p>åœ¨ä¸Šé¢JSåŸºç¡€24æœ‰å†™</p>
</blockquote>
<h2 id="é—­åŒ…æ˜¯ä»€ä¹ˆ-æœ‰ä»€ä¹ˆç‰¹æ€§-æœ‰ä»€ä¹ˆè´Ÿé¢å½±å“"><a href="#é—­åŒ…æ˜¯ä»€ä¹ˆ-æœ‰ä»€ä¹ˆç‰¹æ€§-æœ‰ä»€ä¹ˆè´Ÿé¢å½±å“" class="headerlink" title="é—­åŒ…æ˜¯ä»€ä¹ˆ,æœ‰ä»€ä¹ˆç‰¹æ€§?æœ‰ä»€ä¹ˆè´Ÿé¢å½±å“?"></a>é—­åŒ…æ˜¯ä»€ä¹ˆ,æœ‰ä»€ä¹ˆç‰¹æ€§?æœ‰ä»€ä¹ˆè´Ÿé¢å½±å“?</h2><ul>
<li>èƒ½å¤Ÿè®¿é—®å…¶ä»–å‡½æ•°å†…éƒ¨å˜é‡çš„å‡½æ•°ï¼Œè¢«ç§°ä¸º <strong>é—­åŒ…</strong></li>
<li>å›é¡¾ä½œç”¨åŸŸå’Œè‡ªç”±å˜é‡</li>
<li>å›é¡¾é—­åŒ…åº”ç”¨åœºæ™¯:ä½œä¸ºå‚æ•°è¢«ä¼ å…¥,ä½œä¸ºè¿”å›å€¼è¢«è¿”å›</li>
<li>å›é¡¾:è‡ªç”±å˜é‡çš„æŸ¥æ‰¾,è¦åœ¨å‡½æ•°<strong>å®šä¹‰</strong>çš„åœ°æ–¹(è€Œéæ‰§è¡Œçš„åœ°æ–¹)</li>
<li>å½±å“:å˜é‡ä¼šå¸¸é©»å†…å­˜,å¾—ä¸åˆ°é‡Šæ”¾ã€‚é—­åŒ…ä¸è¦ä¹±ç”¨</li>
</ul>
<h2 id="å¦‚ä½•é˜»æ­¢äº‹ä»¶å†’æ³¡å’Œé»˜è®¤è¡Œä¸º"><a href="#å¦‚ä½•é˜»æ­¢äº‹ä»¶å†’æ³¡å’Œé»˜è®¤è¡Œä¸º" class="headerlink" title="å¦‚ä½•é˜»æ­¢äº‹ä»¶å†’æ³¡å’Œé»˜è®¤è¡Œä¸º?"></a>å¦‚ä½•é˜»æ­¢äº‹ä»¶å†’æ³¡å’Œé»˜è®¤è¡Œä¸º?</h2><ul>
<li>event.stopPropagation()</li>
<li>event.preventDefault(ï¼‰</li>
</ul>
<h2 id="æŸ¥æ‰¾ã€æ·»åŠ ã€åˆ é™¤ã€ç§»åŠ¨DOMèŠ‚ç‚¹çš„æ–¹æ³•"><a href="#æŸ¥æ‰¾ã€æ·»åŠ ã€åˆ é™¤ã€ç§»åŠ¨DOMèŠ‚ç‚¹çš„æ–¹æ³•" class="headerlink" title="æŸ¥æ‰¾ã€æ·»åŠ ã€åˆ é™¤ã€ç§»åŠ¨DOMèŠ‚ç‚¹çš„æ–¹æ³•?"></a>æŸ¥æ‰¾ã€æ·»åŠ ã€åˆ é™¤ã€ç§»åŠ¨DOMèŠ‚ç‚¹çš„æ–¹æ³•?</h2><blockquote>
<p>åœ¨ä¸Šé¢ JSåŸºç¡€ 20.DOMèŠ‚ç‚¹ 21.DOMèŠ‚ç‚¹æ“ä½œ æœ‰ä»‹ç»</p>
</blockquote>
<h2 id="å¦‚ä½•å‡å°‘DOMæ“ä½œ"><a href="#å¦‚ä½•å‡å°‘DOMæ“ä½œ" class="headerlink" title="å¦‚ä½•å‡å°‘DOMæ“ä½œ?"></a>å¦‚ä½•å‡å°‘DOMæ“ä½œ?</h2><ul>
<li>ç¼“å­˜<code>DOM</code>æŸ¥è¯¢ç»“æœ</li>
<li>å¤šæ¬¡<code>DOM</code>æ“ä½œ,åˆå¹¶åˆ°ä¸€-æ¬¡æ’å…¥</li>
</ul>
<h2 id="è§£é‡Šjsonpçš„åŸç†-ä¸ºä½•å®ƒä¸æ˜¯çœŸæ­£çš„ajax"><a href="#è§£é‡Šjsonpçš„åŸç†-ä¸ºä½•å®ƒä¸æ˜¯çœŸæ­£çš„ajax" class="headerlink" title="è§£é‡Šjsonpçš„åŸç†,ä¸ºä½•å®ƒä¸æ˜¯çœŸæ­£çš„ajax ?"></a>è§£é‡Šjsonpçš„åŸç†,ä¸ºä½•å®ƒä¸æ˜¯çœŸæ­£çš„ajax ?</h2><ul>
<li><code>jsonp</code>ä¸æ˜¯å®˜æ–¹çš„ï¼Œ<code>script</code>æ ‡ç­¾å®ç°çš„è¯·æ±‚ã€‚</li>
<li><code>jsonp</code>æ˜¯ä¸€ä¸ªåŒæ­¥è¯·æ±‚ï¼Œåªæ”¯æŒ<code>get</code>è¯·æ±‚</li>
<li><code>ajax</code>é€šè¿‡<code>xhr</code>å¯¹è±¡å»å®ç°ï¼Œæ”¯æŒ<code>get post</code> ,è·¨åŸŸè¯·æ±‚éœ€è¦åç«¯é…åˆè§£å†³è·¨åŸŸå“åº”å¤´</li>
</ul>
<h2 id="document-loadå’Œreadyçš„åŒºåˆ«"><a href="#document-loadå’Œreadyçš„åŒºåˆ«" class="headerlink" title="document loadå’Œreadyçš„åŒºåˆ«"></a>document loadå’Œreadyçš„åŒºåˆ«</h2><ul>
<li><code>ready</code>ï¼Œè¡¨ç¤ºæ–‡æ¡£ç»“æ„å·²ç»åŠ è½½å®Œæˆï¼ˆä¸åŒ…å«å›¾ç‰‡ç­‰éæ–‡å­—åª’ä½“æ–‡ä»¶ï¼‰</li>
<li><code>onload</code>ï¼ŒæŒ‡ç¤ºé¡µé¢åŒ…å«å›¾ç‰‡ç­‰æ–‡ä»¶åœ¨å†…çš„æ‰€æœ‰å…ƒç´ éƒ½åŠ è½½å®Œæˆ</li>
</ul>
<h2 id="å’Œ-çš„ä¸åŒ"><a href="#å’Œ-çš„ä¸åŒ" class="headerlink" title="==å’Œ===çš„ä¸åŒ"></a><code>==</code>å’Œ<code>===</code>çš„ä¸åŒ</h2><ul>
<li>åŒç­‰ï¼šåˆ¤æ–­å€¼ç›¸ç­‰ï¼Œä¼šè‡ªåŠ¨è½¬æ¢æ•°æ®ç±»å‹</li>
<li>ä¸‰ç­‰ï¼šä¸ä¼šè‡ªåŠ¨è½¬æ¢æ•°æ®ç±»å‹ï¼›å…¨ç­‰æ˜¯å…ˆåˆ¤æ–­å·¦å³ä¸¤è¾¹çš„æ•°æ®ç±»å‹ï¼Œå¦‚æœæ•°æ®ç±»å‹ä¸ä¸€è‡´ï¼Œåˆ™ç›´æ¥è¿”å›falseï¼Œä¹‹åæ‰ä¼šè¿›è¡Œä¸¤è¾¹å€¼çš„åˆ¤æ–­</li>
</ul>
<h2 id="å‡½æ•°å£°æ˜å’Œå‡½æ•°è¡¨è¾¾å¼çš„åŒºåˆ«"><a href="#å‡½æ•°å£°æ˜å’Œå‡½æ•°è¡¨è¾¾å¼çš„åŒºåˆ«" class="headerlink" title="å‡½æ•°å£°æ˜å’Œå‡½æ•°è¡¨è¾¾å¼çš„åŒºåˆ«"></a>å‡½æ•°å£°æ˜å’Œå‡½æ•°è¡¨è¾¾å¼çš„åŒºåˆ«</h2><ul>
<li>å‡½æ•°å£°æ˜<code>function fn() &#123;...&#125;</code></li>
<li>å‡½æ•°è¡¨è¾¾å¼<code>const fn = function() &#123;..&#125;</code></li>
<li>å‡½æ•°å£°æ˜ä¼šåœ¨ä»£ç æ‰§è¡Œå‰é¢„åŠ è½½,è€Œå‡½æ•°è¡¨è¾¾å¼ä¸ä¼š</li>
</ul>
<h2 id="new-Object-å’ŒObject-create-çš„åŒºåˆ«"><a href="#new-Object-å’ŒObject-create-çš„åŒºåˆ«" class="headerlink" title="new Object(å’ŒObject.create()çš„åŒºåˆ«"></a>new Object(å’ŒObject.create()çš„åŒºåˆ«</h2><ul>
<li><code>&#123;&#125;</code>ç­‰åŒäº<code>new Object()</code>ï¼Œ åŸå‹Object.prototype</li>
<li><code>Object.create(nul)</code>æ²¡æœ‰åŸå‹</li>
<li><code>Object.create(..)</code>å¯æŒ‡å®šåŸå‹</li>
</ul>
<h2 id="å…³äºthisçš„åœºæ™¯é¢˜"><a href="#å…³äºthisçš„åœºæ™¯é¢˜" class="headerlink" title="å…³äºthisçš„åœºæ™¯é¢˜"></a>å…³äºthisçš„åœºæ™¯é¢˜</h2><blockquote>
<p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ this æ˜¯åœ¨æ‰§è¡Œçš„æ—¶å€™ç¡®å®šçš„</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">User</span> = &#123;</span><br><span class="line">    count : <span class="number">1</span>,</span><br><span class="line">    <span class="attr">getCount</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">count</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">User</span>.<span class="title function_">getCount</span>())</span><br><span class="line"><span class="keyword">const</span> func = <span class="title class_">User</span>.<span class="property">getCount</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( <span class="title function_">func</span>() )</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªæ‰“å°çš„æ˜¯ <code>1</code></p>
<p>ç¬¬äºŒä¸ªæ‰“å°çš„æ˜¯ <code>undefined</code> å› ä¸ºè¿™ä¸ªæ—¶å€™ <code>this</code> æŒ‡å‘æ˜¯<code>window</code></p>
<h2 id="å…³äºä½œç”¨åŸŸå’Œè‡ªç”±å˜é‡çš„åœºæ™¯é¢˜"><a href="#å…³äºä½œç”¨åŸŸå’Œè‡ªç”±å˜é‡çš„åœºæ™¯é¢˜" class="headerlink" title="å…³äºä½œç”¨åŸŸå’Œè‡ªç”±å˜é‡çš„åœºæ™¯é¢˜"></a>å…³äºä½œç”¨åŸŸå’Œè‡ªç”±å˜é‡çš„åœºæ™¯é¢˜</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> i</span><br><span class="line"><span class="keyword">for</span>(i = <span class="number">1</span>; i &lt;= <span class="number">3</span>; i++) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">    &#125;,<span class="number">0</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæ‰“å°çš„æ˜¯ 4 4 4</p>
<h2 id="åˆ¤æ–­å­—ç¬¦ä¸²ä»¥å­—æ¯å¼€å¤´-åé¢å­—æ¯æ•°å­—ä¸‹åˆ’çº¿-é•¿åº¦6-30"><a href="#åˆ¤æ–­å­—ç¬¦ä¸²ä»¥å­—æ¯å¼€å¤´-åé¢å­—æ¯æ•°å­—ä¸‹åˆ’çº¿-é•¿åº¦6-30" class="headerlink" title="åˆ¤æ–­å­—ç¬¦ä¸²ä»¥å­—æ¯å¼€å¤´,åé¢å­—æ¯æ•°å­—ä¸‹åˆ’çº¿,é•¿åº¦6-30"></a>åˆ¤æ–­å­—ç¬¦ä¸²ä»¥å­—æ¯å¼€å¤´,åé¢å­—æ¯æ•°å­—ä¸‹åˆ’çº¿,é•¿åº¦6-30</h2><p>è¿™é‡Œæ˜¯è€ƒå¯Ÿæ­£åˆ™</p>
<p><code>var reg=/^\[a-zA-Z\]\\w&#123;5,29&#125;$/</code></p>
<p><code>str.test(reg)</code></p>
<h2 id="æ‰‹å†™å­—ç¬¦ä¸²trimæ–¹æ³•-ä¿è¯æµè§ˆå™¨å…¼å®¹æ€§"><a href="#æ‰‹å†™å­—ç¬¦ä¸²trimæ–¹æ³•-ä¿è¯æµè§ˆå™¨å…¼å®¹æ€§" class="headerlink" title="æ‰‹å†™å­—ç¬¦ä¸²trimæ–¹æ³•,ä¿è¯æµè§ˆå™¨å…¼å®¹æ€§"></a>æ‰‹å†™å­—ç¬¦ä¸²trimæ–¹æ³•,ä¿è¯æµè§ˆå™¨å…¼å®¹æ€§</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">String</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">trim</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">replace</span>(<span class="regexp">/^\\s+/</span>,<span class="string">&#x27;&#x27;</span>).<span class="title function_">replace</span>(<span class="regexp">/\\s+$/</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åŸå‹, this, æ­£åˆ™è¡¨è¾¾å¼ æŠŠç©ºç™½å˜ä¸ºç©ºå­—ç¬¦ä¸²</p>
</blockquote>
<h2 id="å¦‚ä½•è·å–å¤šä¸ªæ•°å­—ä¸­çš„æœ€å¤§å€¼"><a href="#å¦‚ä½•è·å–å¤šä¸ªæ•°å­—ä¸­çš„æœ€å¤§å€¼" class="headerlink" title="å¦‚ä½•è·å–å¤šä¸ªæ•°å­—ä¸­çš„æœ€å¤§å€¼"></a>å¦‚ä½•è·å–å¤šä¸ªæ•°å­—ä¸­çš„æœ€å¤§å€¼</h2><blockquote>
<p>è‡ªå·±å°è£…max</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">max</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> nums = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>)</span><br><span class="line">    <span class="keyword">let</span> max = <span class="number">0</span></span><br><span class="line">    nums.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(item &gt; max) &#123;</span><br><span class="line">            max = item</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> max</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">max</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>))</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½¿ç”¨Math.max</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>))</span><br></pre></td></tr></table></figure>
<h2 id="å¦‚ä½•ç”¨JSå®ç°ç»§æ‰¿"><a href="#å¦‚ä½•ç”¨JSå®ç°ç»§æ‰¿" class="headerlink" title="å¦‚ä½•ç”¨JSå®ç°ç»§æ‰¿?"></a>å¦‚ä½•ç”¨JSå®ç°ç»§æ‰¿?</h2><h3 id="åŸå‹é“¾ç»§æ‰¿"><a href="#åŸå‹é“¾ç»§æ‰¿" class="headerlink" title="åŸå‹é“¾ç»§æ‰¿"></a>åŸå‹é“¾ç»§æ‰¿</h3><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3a849f76b6cc45c3968a2f674f003081~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210710155504269"></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">People</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;lang&#x27;</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">age</span> = <span class="number">21</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">People</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">eat</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;åƒé¥­&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Student</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Student</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">People</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> lang = <span class="keyword">new</span> <span class="title class_">Student</span>()</span><br><span class="line">lang.<span class="title function_">eat</span>()</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç¼ºç‚¹ï¼š</p>
</blockquote>
<p>å¤šä¸ªå®ä¾‹å¯¹å¼•ç”¨ç±»å‹çš„æ“ä½œä¼šè¢«ç¯¡æ”¹</p>
<h3 id="å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿"><a href="#å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿" class="headerlink" title="å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿"></a>å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿</h3><blockquote>
<p>ä½¿ç”¨callç›´æ¥ æŠŠå­ç±»çš„this ä¼ åˆ°çˆ¶ç±»</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">People</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">dd</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;æ‰“è½¦&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">People</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">eat</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;åƒé¥­&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Student</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="title class_">People</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, name, age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> lang = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&#x27;lang&#x27;</span>, <span class="number">21</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(lang.<span class="property">name</span>,lang.<span class="property">age</span>)</span><br><span class="line">lang.<span class="title function_">eat</span>()</span><br><span class="line">lang.<span class="title function_">dd</span>()</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¼˜ç‚¹</p>
</blockquote>
<ul>
<li>å¯ä»¥ä¼ é€’å‚æ•°</li>
<li>nameï¼Œageçš„è¿™äº›å±æ€§æ˜¯æ·»åŠ åœ¨ å®ä¾‹è‡ªèº«ä¸Šçš„ä¸æ˜¯å…±äº«</li>
</ul>
<blockquote>
<p>ç¼ºç‚¹</p>
</blockquote>
<ul>
<li>ä½¿ç”¨ä¸äº† çˆ¶ç±»å¼•ç”¨çš„å˜é‡ æ¯”å¦‚ä¸Šé¢çš„<code>dd</code></li>
<li>ä½¿ç”¨ä¸äº†<code>prototype</code>é‡Œé¢çš„ å˜é‡æ¯”å¦‚<code>eat</code></li>
</ul>
<h3 id="ç»„åˆç»§æ‰¿"><a href="#ç»„åˆç»§æ‰¿" class="headerlink" title="ç»„åˆç»§æ‰¿"></a>ç»„åˆç»§æ‰¿</h3><blockquote>
<p>æŠŠ åŸå‹é“¾ç»§æ‰¿ + å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿ ç»„åˆèµ·æ¥</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">People</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">dd</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;æ‰“è½¦&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">People</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">eat</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;åƒé¥­&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Student</span>(<span class="params">name, age, sex</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="title class_">People</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, name, age)</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">sex</span> = sex</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Student</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">People</span>()</span><br><span class="line"></span><br><span class="line"><span class="title class_">Student</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">see</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;èƒ½çœ‹è§åƒé‡Œä¹‹å¤–çš„æ™¯ç‰©&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> lang = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&#x27;lang&#x27;</span>, <span class="number">21</span>, <span class="string">&#x27;ç”·&#x27;</span>)</span><br><span class="line">lang.<span class="title function_">eat</span>()</span><br><span class="line">lang.<span class="title function_">dd</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(lang.<span class="property">sex</span>, lang.<span class="property">name</span>, lang.<span class="property">age</span>)</span><br><span class="line">lang.<span class="property">dd</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ›´æ”¹è¿‡äº†&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">lang.<span class="title function_">dd</span>()</span><br><span class="line"><span class="keyword">let</span> jie = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&#x27;jie&#x27;</span>, <span class="number">21</span>, <span class="string">&#x27;ç”·&#x27;</span>)</span><br><span class="line">jie.<span class="title function_">dd</span>()</span><br><span class="line">jie.<span class="title function_">see</span>()</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¼˜ç‚¹</p>
</blockquote>
<ul>
<li>å¯ä»¥ä¼ é€’å‚æ•°</li>
<li>çˆ¶ç±»å¼•ç”¨çš„å±æ€§ä¸è¢«å…±äº«</li>
<li>å¯ä»¥ä½¿ç”¨çˆ¶ç±» <code>prototype</code>çš„å±æ€§</li>
</ul>
<blockquote>
<p>ç¼ºç‚¹</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/68f6063fcab344eaa4a49160bfcf6e57~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210710161425100.png"></p>
<ul>
<li>ç¬¬ä¸€æ¬¡çš„ç»§æ‰¿åŸå‹é“¾çš„æ—¶å€™æ·»åŠ äº† <code>name</code> å’Œ <code>age</code> å±æ€§</li>
<li>ç¬¬äºŒæ¬¡new å­ç±»çš„å®ä¾‹çš„æ—¶å€™åˆæ·»åŠ  <code>name</code> å’Œ <code>age</code> å±æ€§</li>
<li>æ ¹æ®åŸå‹é“¾çš„æŸ¥æ‰¾è§„åˆ™ ç¬¬äºŒæ¬¡ä¼šæŠŠç¬¬ä¸€æ¬¡çš„è¦†ç›–</li>
</ul>
<h3 id="åŸå‹å¼ç»§æ‰¿"><a href="#åŸå‹å¼ç»§æ‰¿" class="headerlink" title="åŸå‹å¼ç»§æ‰¿"></a>åŸå‹å¼ç»§æ‰¿</h3><blockquote>
<p>è¿™ä¸ªæ˜¯çœŸçš„ç”¨çš„å°‘ <strong>ES5</strong>ä¸­çš„ <code>Object.create()</code>å¯ä»¥å®ç°ä¸‹é¢çš„ <code>object</code>å‡½æ•°</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">object</span>(<span class="params">obj</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">Fun</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="title class_">Fun</span>.<span class="property"><span class="keyword">prototype</span></span> = obj</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Fun</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> people = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;lang&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">  <span class="attr">hobbys</span>: \[<span class="string">&#x27;book&#x27;</span>, <span class="string">&#x27;music&#x27;</span>, <span class="string">&#x27;learn&#x27;</span>\],</span><br><span class="line">  <span class="attr">eat</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;åƒé¥­&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> lang = <span class="title function_">object</span>(people)</span><br><span class="line">lang.<span class="property">name</span> = <span class="string">&#x27;lang&#x27;</span></span><br><span class="line">lang.<span class="property">hobbys</span>.<span class="title function_">push</span>(<span class="string">&#x27;sing&#x27;</span>)</span><br><span class="line">lang.<span class="title function_">eat</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> jie = <span class="title function_">object</span>(people)</span><br><span class="line">jie.<span class="property">name</span> = <span class="string">&#x27;jie&#x27;</span></span><br><span class="line">jie.<span class="property">hobbys</span>.<span class="title function_">push</span>(<span class="string">&#x27;play&#x27;</span>)</span><br><span class="line">jie.<span class="title function_">eat</span>()</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(lang.<span class="property">hobbys</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç¼ºç‚¹</p>
</blockquote>
<ul>
<li>ä¸èƒ½ä¼ å‚</li>
<li>å› ä¸ºæ˜¯æµ…å¤åˆ¶ï¼Œå¼•ç”¨å˜é‡è¢«å…±äº«äº†</li>
</ul>
<h3 id="å¯„ç”Ÿå¼ç»§æ‰¿"><a href="#å¯„ç”Ÿå¼ç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿå¼ç»§æ‰¿"></a>å¯„ç”Ÿå¼ç»§æ‰¿</h3><blockquote>
<p>åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œåœ¨å†…éƒ¨åšäº†ä¸€äº›åŠ å¼ºæµ…å¤åˆ¶å°±æ˜¯ æ–°å¢å±æ€§å’Œæ–¹æ³•ï¼Œä»¥<strong>å¢å¼ºå‡½æ•°</strong>ï¼Œæœ€åè¿”å›æ„é€ </p>
<p>è¿™é‡Œç›´æ¥ç”¨ Object.create() æ¥å®ç°äº†</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createObj</span> (<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> clone = <span class="title class_">Object</span>.<span class="title function_">create</span>(obj);</span><br><span class="line"></span><br><span class="line">    clone.<span class="property">see</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;see&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    clone.<span class="property">haha</span> = <span class="string">&#x27;haha&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> clone;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> people = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;lang&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">  <span class="attr">hobbys</span>: \[<span class="string">&#x27;book&#x27;</span>, <span class="string">&#x27;music&#x27;</span>, <span class="string">&#x27;learn&#x27;</span>\],</span><br><span class="line">  <span class="attr">eat</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;åƒé¥­&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> lang = <span class="title function_">createObj</span>(people)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç¼ºç‚¹ï¼ˆåŒåŸå‹å¼ç»§æ‰¿ï¼‰</p>
</blockquote>
<ul>
<li>ä¸èƒ½ä¼ å‚</li>
<li>å› ä¸ºæ˜¯æµ…å¤åˆ¶ï¼Œå¼•ç”¨å˜é‡è¢«å…±äº«äº†</li>
</ul>
<h3 id="å¯„ç”Ÿç»„åˆç»§æ‰¿"><a href="#å¯„ç”Ÿç»„åˆç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿç»„åˆç»§æ‰¿"></a>å¯„ç”Ÿç»„åˆç»§æ‰¿</h3><blockquote>
<p>ä¹‹å‰ç»„åˆç»§æ‰¿ è°ƒç”¨äº†ä¸¤æ¬¡ æ„é€ å‚æ•°</p>
<p><code>Student.prototype = new People();</code></p>
<p><code>let lang = new Student(&#39;lang&#39;, 21, &#39;ç”·&#39;)</code></p>
</blockquote>
<ul>
<li>ç¬¬ä¸€æ¬¡çš„ç»§æ‰¿åŸå‹é“¾çš„æ—¶å€™<code>Student.prototype</code> æ·»åŠ äº† <code>name</code> å’Œ <code>age</code> å±æ€§</li>
<li>ç¬¬äºŒæ¬¡new å­ç±»çš„å®ä¾‹çš„æ—¶å€™åˆæ·»åŠ  <code>name</code> å’Œ <code>age</code> å±æ€§</li>
</ul>
<p>é¿å…é‡å¤æ·»åŠ ï¼Œ æˆ‘ä»¬è®© <code>Student.prototype</code> è®¿é—® <code>People.prototype</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">inheritPrototype</span>(<span class="params">child, parent</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> prototype = <span class="title class_">Object</span>.<span class="title function_">create</span>(parent.<span class="property"><span class="keyword">prototype</span></span>)</span><br><span class="line"></span><br><span class="line">  prototype.<span class="property">constructor</span> = child</span><br><span class="line"></span><br><span class="line">  child.<span class="property"><span class="keyword">prototype</span></span> = prototype</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">People</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">dd</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;æ‰“è½¦&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">People</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">eat</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;åƒé¥­&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Student</span>(<span class="params">name, age, sex</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="title class_">People</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, name, age)</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">sex</span> = sex</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">inheritPrototype</span>(<span class="title class_">Student</span>, <span class="title class_">People</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">Student</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">see</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;èƒ½çœ‹è§åƒé‡Œä¹‹å¤–çš„æ™¯ç‰©&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> lang = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&#x27;lang&#x27;</span>, <span class="number">21</span>, <span class="string">&#x27;ç”·&#x27;</span>)</span><br><span class="line">lang.<span class="title function_">eat</span>()</span><br><span class="line">lang.<span class="title function_">dd</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(lang.<span class="property">sex</span>, lang.<span class="property">name</span>, lang.<span class="property">age</span>)</span><br><span class="line">lang.<span class="property">dd</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ›´æ”¹è¿‡äº†&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">lang.<span class="title function_">dd</span>()</span><br><span class="line"><span class="keyword">let</span> jie = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&#x27;jie&#x27;</span>, <span class="number">21</span>, <span class="string">&#x27;ç”·&#x27;</span>)</span><br><span class="line">jie.<span class="title function_">dd</span>()</span><br><span class="line">jie.<span class="title function_">see</span>()</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¼˜ç‚¹</p>
</blockquote>
<ul>
<li>çˆ¶ç±»æ–¹æ³•å¯ä»¥å¤ç”¨</li>
<li>å¯ä»¥ä¼ é€’å‚æ•°åˆ°çˆ¶ç±»</li>
<li>çˆ¶ç±»çš„å¼•ç”¨å±æ€§ä¸ä¼šè¢«å…±äº«</li>
<li>åªè°ƒç”¨ä¸€æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°</li>
</ul>
<h3 id="extends-ç»§æ‰¿"><a href="#extends-ç»§æ‰¿" class="headerlink" title="extends ç»§æ‰¿"></a>extends ç»§æ‰¿</h3><blockquote>
<p><strong>ES6</strong>æä¾›äº†<code>calss``extends``super</code>æ¥å®ç°ç»§æ‰¿</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">dd</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;æ‰“è½¦&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">People</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">eat</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;åƒé¥­&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_ inherited__">People</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name, age, sex</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(name, age)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sex</span> = sex</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title class_">Student</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">see</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;èƒ½çœ‹è§åƒé‡Œä¹‹å¤–çš„æ™¯ç‰©&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> lang = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&#x27;lang&#x27;</span>, <span class="number">21</span>, <span class="string">&#x27;ç”·&#x27;</span>)</span><br><span class="line">lang.<span class="title function_">eat</span>()</span><br><span class="line">lang.<span class="title function_">dd</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(lang.<span class="property">sex</span>, lang.<span class="property">name</span>, lang.<span class="property">age</span>)</span><br><span class="line">lang.<span class="property">dd</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ›´æ”¹è¿‡äº†&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">lang.<span class="title function_">dd</span>()</span><br><span class="line"><span class="keyword">let</span> jie = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&#x27;jie&#x27;</span>, <span class="number">21</span>, <span class="string">&#x27;ç”·&#x27;</span>)</span><br><span class="line">jie.<span class="title function_">dd</span>()</span><br><span class="line">jie.<span class="title function_">see</span>()</span><br></pre></td></tr></table></figure>
<h2 id="å¦‚ä½•æ•è·JSç¨‹åºä¸­çš„å¼‚å¸¸"><a href="#å¦‚ä½•æ•è·JSç¨‹åºä¸­çš„å¼‚å¸¸" class="headerlink" title="å¦‚ä½•æ•è·JSç¨‹åºä¸­çš„å¼‚å¸¸?"></a>å¦‚ä½•æ•è·JSç¨‹åºä¸­çš„å¼‚å¸¸?</h2><blockquote>
<p>é€šè¿‡<code>try...catch...</code>æ•è·</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (ex) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;error&quot;</span>, ex.<span class="property">message</span>);</span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>window.onerror</code> è‡ªåŠ¨æ•è·</p>
<p>ç¬¬ä¸€ï¼Œå¯¹è·¨åŸŸçš„js,å¦‚CDNçš„ï¼Œä¸ä¼šæœ‰è¯¦ç»†çš„æŠ¥é”™ä¿¡æ¯ ç¬¬äºŒï¼Œå¯¹äºå‹ç¼©çš„js,è¿˜è¦é…åˆsourceMap åæŸ¥åˆ°æœªå‹ç¼©ä»£ç çš„è¡Œã€åˆ—</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onerror</span> = <span class="keyword">function</span>(<span class="params">message, source, linenom, colnom, error</span>) &#123; ... &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>message</code>ï¼šé”™è¯¯ä¿¡æ¯ï¼ˆå­—ç¬¦ä¸²ï¼‰</li>
<li><code>source</code>ï¼šå‘ç”Ÿé”™è¯¯çš„è„šæœ¬URLï¼ˆå­—ç¬¦ä¸²ï¼‰</li>
<li><code>linenom</code>ï¼šå‘ç”Ÿé”™è¯¯çš„è¡Œå·ï¼ˆæ•°å­—ï¼‰</li>
<li><code>colno</code>mï¼šå‘ç”Ÿé”™è¯¯çš„åˆ—å·ï¼ˆæ•°å­—ï¼‰</li>
<li><code>error</code>ï¼šErrorå¯¹è±¡ï¼ˆå¯¹è±¡ï¼‰</li>
</ul>
<blockquote>
<p><code>window.addEventListener(&#39;error&#39;)</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;error&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123; ... &#125;)</span><br></pre></td></tr></table></figure>
<h2 id="ä»€ä¹ˆæ˜¯JSON"><a href="#ä»€ä¹ˆæ˜¯JSON" class="headerlink" title="ä»€ä¹ˆæ˜¯JSON ?"></a>ä»€ä¹ˆæ˜¯JSON ?</h2><ul>
<li><code>json</code>æ˜¯ä¸€ç§æ•°æ®æ ¼å¼,æœ¬è´¨æ˜¯ä¸€-æ®µå­—ç¬¦ä¸²</li>
<li><code>json</code>æ ¼å¼å’Œ<code>JS</code>å¯¹è±¡ç»“æ„ä¸€è‡´,å¯¹<code>JS</code>è¯­è¨€æ›´å‹å¥½</li>
</ul>
<h2 id="è·å–å½“å‰é¡µé¢urlå‚æ•°"><a href="#è·å–å½“å‰é¡µé¢urlå‚æ•°" class="headerlink" title="è·å–å½“å‰é¡µé¢urlå‚æ•°"></a>è·å–å½“å‰é¡µé¢urlå‚æ•°</h2><p>ä¼ ç»Ÿæ–¹å¼,æŸ¥æ‰¾<code>location.search</code></p>
<p>æ–°<code>API``URL SearchParams</code></p>
<blockquote>
<p>ä¼ ç»Ÿæ–¹å¼</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">query</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> search = location.<span class="property">search</span>.<span class="title function_">substr</span>(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">const</span> reg = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">`(^|&amp;)<span class="subst">$&#123;name&#125;</span>=(\[^&amp;\]*)(&amp;|$)`</span>, <span class="string">&#x27;i&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> res = search.<span class="title function_">match</span>(reg)</span><br><span class="line">  <span class="keyword">if</span> (res === <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res\[<span class="number">2</span>\]</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">query</span>(<span class="string">&#x27;d&#x27;</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>URL SearchParams</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">query</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> search = location.<span class="property">search</span></span><br><span class="line">  <span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">URLSearchParams</span>(search)</span><br><span class="line">  <span class="keyword">return</span> p.<span class="title function_">get</span>(name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">query</span>(<span class="string">&#x27;b&#x27;</span>))</span><br></pre></td></tr></table></figure>
<h2 id="å°†urlå‚æ•°è§£æä¸ºJSå¯¹è±¡"><a href="#å°†urlå‚æ•°è§£æä¸ºJSå¯¹è±¡" class="headerlink" title="å°†urlå‚æ•°è§£æä¸ºJSå¯¹è±¡"></a>å°†<code>url</code>å‚æ•°è§£æä¸º<code>JS</code>å¯¹è±¡</h2><blockquote>
<p>ä¼ ç»Ÿæ–¹å¼ï¼Œ åˆ†æ srarch</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">queyrToObj</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> res = &#123;&#125;</span><br><span class="line">    <span class="keyword">const</span> search = location.<span class="property">search</span>.<span class="title function_">substr</span>(<span class="number">1</span>)</span><br><span class="line">    search.<span class="title function_">split</span>(<span class="string">&#x27;&amp;&#x27;</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">paramStr</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> arr = paramStr.<span class="title function_">split</span>(<span class="string">&#x27;=&#x27;</span>)</span><br><span class="line">        <span class="keyword">const</span> key = arr\[<span class="number">0</span>\]</span><br><span class="line">        <span class="keyword">const</span> val = arr\[<span class="number">1</span>\]</span><br><span class="line">        res\[key\] = val</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½¿ç”¨ URLSearchParams</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">queryToObj</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> res = &#123;&#125;</span><br><span class="line">    <span class="keyword">const</span> pList = <span class="keyword">new</span> <span class="title class_">URLSearchParams</span>(location.<span class="property">search</span>)</span><br><span class="line">    pList.<span class="title function_">forEach</span>(<span class="function">(<span class="params">val,key</span>) =&gt;</span> &#123;</span><br><span class="line">        res\[key\] = val</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ‰å¹³åŒ–æ•°ç»„å’Œæ‰‹å†™æ•°ç»„flaternè€ƒè™‘å¤šå±‚çº§"><a href="#æ‰å¹³åŒ–æ•°ç»„å’Œæ‰‹å†™æ•°ç»„flaternè€ƒè™‘å¤šå±‚çº§" class="headerlink" title="æ‰å¹³åŒ–æ•°ç»„å’Œæ‰‹å†™æ•°ç»„flaternè€ƒè™‘å¤šå±‚çº§"></a>æ‰å¹³åŒ–æ•°ç»„å’Œæ‰‹å†™æ•°ç»„<code>flatern</code>è€ƒè™‘å¤šå±‚çº§</h2><p>æ¯”å¦‚ æœ‰è¿™ä¹ˆä¸€ä¸ªæ•°ç»„ <code>\[1, 2, \[3, 4, \[10, 20, \[100, 200\]\]\], 5\]</code></p>
<p>è¾“å‡ºï¼š<code>\[1, 2, 3, 4, 10, 20, 100, 200, 5\]</code></p>
<blockquote>
<p>ä½¿ç”¨ concat</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = \[<span class="number">1</span>, <span class="number">2</span>, \[<span class="number">3</span>, <span class="number">4</span>, \[<span class="number">10</span>, <span class="number">20</span>, \[<span class="number">100</span>, <span class="number">200</span>\]\]\], <span class="number">5</span>\]</span><br><span class="line"><span class="keyword">while</span>(arr.<span class="title function_">some</span>( <span class="function"><span class="params">item</span> =&gt;</span> <span class="title class_">Array</span>.<span class="title function_">isArray</span>(item)))&#123;</span><br><span class="line">    arr = \[\].<span class="title function_">concat</span>(...arr)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½¿ç”¨<code>stringify</code> æŠŠæ•°ç»„å˜æˆå­—ç¬¦ä¸² ç„¶åæ­£åˆ™å»é™¤ æ‰€æœ‰<code>\[``\]</code>ï¼Œæ ¹æ®<code>,</code>åˆ†å‰²ä¸ºæ•°ç»„ï¼Œç„¶åæŠŠæ¯ä¸€é¡¹è½¬ä¸º<code>number</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = \[<span class="number">1</span>, <span class="number">2</span>, \[<span class="number">3</span>, <span class="number">4</span>, \[<span class="number">10</span>, <span class="number">20</span>, \[<span class="number">100</span>, <span class="number">200</span>\]\]\], <span class="number">5</span>\]</span><br><span class="line"><span class="keyword">let</span> res = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(arr).<span class="title function_">replace</span>(<span class="string">&#x27;/\\\[|\\\]/&#x27;</span>,<span class="string">&#x27;&#x27;</span>).<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>).<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> <span class="title class_">Number</span>(item))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½¿ç”¨toString å’Œ ä¸Šé¢å·®ä¸å¤š</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = \[<span class="number">1</span>, <span class="number">2</span>, \[<span class="number">3</span>, <span class="number">4</span>, \[<span class="number">10</span>, <span class="number">20</span>, \[<span class="number">100</span>, <span class="number">200</span>\]\]\], <span class="number">5</span>\]</span><br><span class="line"><span class="keyword">let</span> res = arr.<span class="title function_">toString</span>().<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>).<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> <span class="title class_">Number</span>(item))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½¿ç”¨ES6 ä¸­flatå°±è¡Œ</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = \[<span class="number">1</span>, <span class="number">2</span>, \[<span class="number">3</span>, <span class="number">4</span>, \[<span class="number">10</span>, <span class="number">20</span>, \[<span class="number">100</span>, <span class="number">200</span>\]\]\], <span class="number">5</span>\]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">flat</span>(<span class="title class_">Infinity</span>))</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è‡ªå·±æ‰‹å†™<code>flatern</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myFlat</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">flat</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> isDeep = arr.<span class="title function_">some</span>(<span class="function"><span class="params">item</span> =&gt;</span> item <span class="keyword">instanceof</span> <span class="title class_">Array</span>)</span><br><span class="line">        <span class="keyword">if</span> (!isDeep) &#123;</span><br><span class="line">            <span class="keyword">return</span> arr</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> res = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">concat</span>.<span class="title function_">apply</span>(\[\], arr)</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">flat</span>(res)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res = \[<span class="number">1</span>, <span class="number">2</span>, \[<span class="number">3</span>, <span class="number">4</span>, \[<span class="number">10</span>, <span class="number">20</span>, \[<span class="number">100</span>, <span class="number">200</span>\]\]\], <span class="number">5</span>\].<span class="title function_">myFlat</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br></pre></td></tr></table></figure>
<h2 id="æ•°ç»„å»é‡"><a href="#æ•°ç»„å»é‡" class="headerlink" title="æ•°ç»„å»é‡"></a>æ•°ç»„å»é‡</h2><ul>
<li>ä¼ ç»Ÿæ–¹å¼,éå†å…ƒç´ æŒ¨ä¸ªæ¯”è¾ƒã€å»é‡</li>
<li>ä½¿ç”¨<code>Set</code></li>
<li>è€ƒè™‘è®¡ç®—æ•ˆç‡</li>
</ul>
<blockquote>
<p>ä¼ ç»Ÿæ–¹å¼</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> res = \[\]</span><br><span class="line">    arr.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (res.<span class="title function_">indexOf</span>(item) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            res.<span class="title function_">push</span>(item)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½¿ç”¨<code>Set</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">unique</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>(arr)</span><br><span class="line">    <span class="keyword">return</span> \[...set\]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ‰‹å†™æ·±æ‹·è´"><a href="#æ‰‹å†™æ·±æ‹·è´" class="headerlink" title="æ‰‹å†™æ·±æ‹·è´"></a>æ‰‹å†™æ·±æ‹·è´</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">deepCopy</span>(<span class="params">newObj, obj</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> item = obj\[key\];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (item <span class="keyword">instanceof</span> <span class="title class_">Object</span>) &#123;</span><br><span class="line">            newObj\[key\] = &#123;&#125;;</span><br><span class="line">            <span class="title function_">deepCopy</span>(newObj\[key\], item);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (item <span class="keyword">instanceof</span> <span class="title class_">Array</span>) &#123;</span><br><span class="line">            newObj\[key\] = \[\];</span><br><span class="line">            <span class="title function_">deepCopy</span>(newObj\[key\], item);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            newObj\[key\] = item;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newObj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å®ç°ä¸€ä¸ªä¸å¯æ”¹å˜çš„å¯¹è±¡"><a href="#å®ç°ä¸€ä¸ªä¸å¯æ”¹å˜çš„å¯¹è±¡" class="headerlink" title="å®ç°ä¸€ä¸ªä¸å¯æ”¹å˜çš„å¯¹è±¡"></a>å®ç°ä¸€ä¸ªä¸å¯æ”¹å˜çš„å¯¹è±¡</h2><ul>
<li><p>Object.isExtensible()æ–¹æ³•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯å¯æ‰©å±•çš„(æ˜¯å¦å¯ä»¥åœ¨å®ƒä¸Šé¢æ·»åŠ æ–°çš„å±æ€§)ã€‚</p>
</li>
<li><p>Object.preventExtensions()æ–¹æ³•è®©ä¸€ä¸ªå¯¹è±¡å˜çš„ä¸å¯æ‰©å±•ï¼Œä¹Ÿå°±æ˜¯æ°¸è¿œä¸èƒ½å†æ·»åŠ æ–°çš„å±æ€§ï¼Œå¹¶ä¸”è¿”å›åŸå¯¹è±¡ã€‚</p>
</li>
<li><p>Object.isSealed()æ–¹æ³•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯å¯†å°çš„ã€‚</p>
</li>
<li><p>Object.seal()æ–¹æ³•å¯ä»¥è®©ä¸€ä¸ªå¯¹è±¡å¯†å°ï¼Œå¹¶è¿”å›è¢«å¯†å°åçš„å¯¹è±¡ã€‚</p>
</li>
<li><p>Object.isFrozen()æ–¹æ³•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦è¢«å†»ç»“ã€‚</p>
</li>
<li><p>Object.freeze()æ–¹æ³•å¯ä»¥å†»ç»“ä¸€ä¸ªå¯¹è±¡ã€‚</p>
</li>
</ul>
<blockquote>
<p>1.ä¸å¯æ‰©å±•ï¼š ä¸å¯ä»¥å¢åŠ æ–°çš„å±æ€§ï¼Œè€çš„å±æ€§å¯ä»¥åˆ é™¤ï¼Œä¹Ÿå¯ä»¥æ”¹å€¼ 2.å¯†å°ï¼š ä¸å¯ä»¥å¢åŠ æ–°çš„å±æ€§ï¼Œè€çš„å±æ€§ä¸å¯ä»¥åˆ é™¤ï¼Œä½†å¯ä»¥æ”¹å€¼ 3.å†»ç»“ï¼šä¸å¯ä»¥å¢åŠ æ–°çš„å±æ€§ï¼Œè€çš„å±æ€§ä¸å¯ä»¥åˆ é™¤ï¼Œä¸å¯ä»¥æ”¹å€¼</p>
</blockquote>
<h2 id="ä»‹ç»ä¸€ä¸‹RAF-requestAnimateFrame"><a href="#ä»‹ç»ä¸€ä¸‹RAF-requestAnimateFrame" class="headerlink" title="ä»‹ç»ä¸€ä¸‹RAF requestAnimateFrame"></a>ä»‹ç»ä¸€ä¸‹<code>RAF requestAnimateFrame</code></h2><ul>
<li>è¦æƒ³åŠ¨ç”»æµç•…,æ›´æ–°é¢‘ç‡è¦60å¸§/s , å³<code>16.67ms</code>æ›´æ–°- -æ¬¡è§†å›¾</li>
<li><code>setTimeout</code>è¦æ‰‹åŠ¨æ§åˆ¶é¢‘ç‡ï¼Œè€ŒRAFæµè§ˆå™¨ä¼šè‡ªåŠ¨æ§åˆ¶</li>
<li>åå°æ ‡ç­¾æˆ–éšè—<code>iframe</code>ä¸­, <code>RAF</code>ä¼šæš‚åœ,è€Œ<code>setTimeout</code>ä¾ç„¶æ‰§è¡Œ</li>
<li><p>è¿™é‡Œä½¿ç”¨äº†<code>jQuery</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> $div1 = $(<span class="string">&#x27;#div1&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> curWidth = <span class="number">100</span></span><br><span class="line"><span class="keyword">const</span> maxWidth = <span class="number">640</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">animate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    curWidth = curWidth + <span class="number">3</span></span><br><span class="line">    $div1.<span class="title function_">css</span>(<span class="string">&#x27;width&#x27;</span>, curWidth)</span><br><span class="line">    <span class="keyword">if</span> (curWidth &lt; maxWidth) &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(animate, <span class="number">16.7</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">animate</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">animate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    curWidth = curWidth + <span class="number">3</span></span><br><span class="line">    $div1.<span class="title function_">css</span>(<span class="string">&#x27;width&#x27;</span>, curWidth)</span><br><span class="line">    <span class="keyword">if</span> (curWidth &lt; maxWidth) &#123;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(animate)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">animate</span>()</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="å‰ç«¯æ€§èƒ½å¦‚ä½•ä¼˜åŒ–-ä¸€èˆ¬ä»å“ªå‡ ä¸ªæ–¹é¢è€ƒè™‘"><a href="#å‰ç«¯æ€§èƒ½å¦‚ä½•ä¼˜åŒ–-ä¸€èˆ¬ä»å“ªå‡ ä¸ªæ–¹é¢è€ƒè™‘" class="headerlink" title="å‰ç«¯æ€§èƒ½å¦‚ä½•ä¼˜åŒ–? ä¸€èˆ¬ä»å“ªå‡ ä¸ªæ–¹é¢è€ƒè™‘?"></a>å‰ç«¯æ€§èƒ½å¦‚ä½•ä¼˜åŒ–? ä¸€èˆ¬ä»å“ªå‡ ä¸ªæ–¹é¢è€ƒè™‘?</h2><ul>
<li>åŸåˆ™:å¤šä½¿ç”¨å†…å­˜ã€ç¼“å­˜ï¼Œå‡å°‘è®¡ç®—ã€å‡å°‘ç½‘è·¯è¯·æ±‚</li>
<li>æ–¹å‘:åŠ è½½é¡µé¢,é¡µé¢æ¸²æŸ“ï¼Œé¡µé¢æ“ä½œæµç•…åº¦</li>
</ul>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‰‹å†™ä¸€ä¸ªç®€æ˜“vueå“åº”å¼å¸¦ä½ äº†è§£å“åº”å¼åŸç†</title>
    <url>/xiaolangwiki/2021/07/26/24/</url>
    <content><![CDATA[<h2 id="æ‰‹å†™ä¸€ä¸ªç®€æ˜“vueå“åº”å¼å¸¦ä½ äº†è§£å“åº”å¼åŸç†"><a href="#æ‰‹å†™ä¸€ä¸ªç®€æ˜“vueå“åº”å¼å¸¦ä½ äº†è§£å“åº”å¼åŸç†" class="headerlink" title="æ‰‹å†™ä¸€ä¸ªç®€æ˜“vueå“åº”å¼å¸¦ä½ äº†è§£å“åº”å¼åŸç†"></a>æ‰‹å†™ä¸€ä¸ªç®€æ˜“vueå“åº”å¼å¸¦ä½ äº†è§£å“åº”å¼åŸç†</h2><p>åŸæ–‡ï¼š<a href="https://juejin.cn/post/6989106100582744072">https://juejin.cn/post/6989106100582744072</a></p>
<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><blockquote>
<p>è¿™æ˜¯å°æµªåœ¨å­¦ä¹ <strong>Vue</strong>æ€»ç»“çš„ä¸€ç¯‡æ–‡ç« ï¼Œåœ¨è¿™ç¯‡æ–‡ç« æˆ‘ä»¬æ¥äº†è§£ <strong>Vue2.X</strong> å“åº”å¼åŸç†ï¼Œç„¶åæˆ‘ä»¬æ¥å®ç°ä¸€ä¸ª <strong>vue</strong> å“åº”å¼åŸç†ï¼ˆå†™çš„å†…å®¹ç®€å•ï¼‰å®ç°æ­¥éª¤å’Œæ³¨é‡Šå†™çš„å¾ˆæ¸…æ™°ï¼Œå¤§å®¶æœ‰å…´è¶£å¯ä»¥è€å¿ƒè§‚çœ‹ï¼Œå¤§å®¶å¯ä»¥åœ¨è¯„è®ºå¤šå¤šäº¤æµï¼Œä¹Ÿå¸Œæœ›å¤§å®¶èƒ½ç»™ å°æµªä¸€ä¸ª <strong>èµ</strong></p>
</blockquote>
<h1 id="Vue2-Xå“åº”å¼åŸç†"><a href="#Vue2-Xå“åº”å¼åŸç†" class="headerlink" title="Vue2.Xå“åº”å¼åŸç†"></a>Vue2.Xå“åº”å¼åŸç†</h1><h2 id="1-defineProperty-çš„åº”ç”¨"><a href="#1-defineProperty-çš„åº”ç”¨" class="headerlink" title="1.defineProperty çš„åº”ç”¨"></a>1.defineProperty çš„åº”ç”¨</h2><p>åœ¨<strong>Vue2.X</strong> å“åº”å¼ä¸­ä½¿ç”¨åˆ°äº† <strong>defineProperty</strong> è¿›è¡Œæ•°æ®åŠ«æŒï¼Œæ‰€ä»¥æˆ‘ä»¬å¯¹å®ƒå¿…é¡»æœ‰ä¸€å®šçš„äº†è§£ï¼Œé‚£ä¹ˆæˆ‘ä»¬å…ˆæ¥äº†è§£å®ƒçš„ä½¿ç”¨æ–¹æ³•æŠŠï¼Œ è¿™é‡Œæˆ‘ä»¬æ¥ä½¿ç”¨ <strong>defineProperty</strong>æ¥æ¨¡æ‹Ÿ <strong>Vue</strong> ä¸­çš„ <strong>data</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> data = &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">msg</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> vm = &#123;&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(vm, <span class="string">&#x27;msg&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">get</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> data.<span class="property">msg</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">set</span>(<span class="params">newValue</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (newValue === data.<span class="property">msg</span>) <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                data.<span class="property">msg</span> = newValue</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#app&#x27;</span>).<span class="property">textContent</span> = data.<span class="property">msg</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        vm.<span class="property">msg</span> = <span class="string">&#x27;1234&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1ad4d2fcc15f47d9a3df0db8878ffba5~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="7"></p>
<p>å¯ä»¥çœ‹è§ ä¸Šé¢ <strong>vm.msg</strong> æ•°æ®æ˜¯<strong>å“åº”å¼</strong>çš„</p>
<h2 id="2-definePropertyä¿®æ”¹å¤šä¸ªå‚æ•°ä¸ºå“åº”å¼"><a href="#2-definePropertyä¿®æ”¹å¤šä¸ªå‚æ•°ä¸ºå“åº”å¼" class="headerlink" title="2.definePropertyä¿®æ”¹å¤šä¸ªå‚æ•°ä¸ºå“åº”å¼"></a>2.definePropertyä¿®æ”¹å¤šä¸ªå‚æ•°ä¸ºå“åº”å¼</h2><blockquote>
<p>ä¿®æ”¹å¤šä¸ªå‚æ•°</p>
</blockquote>
<p>çœ‹äº†ä¸Šé¢çš„æ–¹æ³•åªèƒ½ä¿®æ”¹ä¸€ä¸ªå±æ€§ï¼Œå®é™…ä¸Šæˆ‘ä»¬ <strong>data</strong> ä¸­æ•°æ®ä¸å¯èƒ½åªæœ‰ä¸€ä¸ª,æˆ‘ä»¬ä½•ä¸å®šä¹‰ä¸€ä¸ªæ–¹æ³•æŠŠ<strong>data</strong>ä¸­çš„æ•°æ®è¿›è¡Œéå†éƒ½ä¿®æ”¹æˆå“åº”å¼å‘¢</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> data = &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">msg</span>: <span class="string">&#x27;å“ˆå“ˆ&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">age</span>: <span class="string">&#x27;18&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> vm = &#123;&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">proxyData</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title class_">Object</span>.<span class="title function_">keys</span>(data).<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(vm, key, &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">enumerable</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">configurable</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">get</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">return</span> data\[key\]</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">set</span>(<span class="params">newValue</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (newValue === data\[key\]) <span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                        data\[key\] = newValue</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#app&#x27;</span>).<span class="property">textContent</span> = data\[key\]</span></span><br><span class="line"><span class="language-javascript">                    &#125;,</span></span><br><span class="line"><span class="language-javascript">                &#125;)</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">proxyData</span>(data)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="3-Proxy"><a href="#3-Proxy" class="headerlink" title="3.Proxy"></a>3.Proxy</h2><blockquote>
<p>åœ¨<strong>Vue3</strong> ä¸­ä½¿ç”¨ <strong>Proxy</strong> æ¥è®¾ç½®å“åº”å¼çš„å±æ€§</p>
</blockquote>
<p>å…ˆæ¥äº†è§£ä¸‹ <strong>Proxy</strong> çš„ä¸¤ä¸ªå‚æ•°</p>
<p><code>new Proxy(target,handler)</code></p>
<ul>
<li><code>target</code> ï¼šè¦ä½¿ç”¨ <code>Proxy</code> åŒ…è£…çš„ç›®æ ‡å¯¹è±¡ï¼ˆå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬åŸç”Ÿæ•°ç»„ï¼Œå‡½æ•°ï¼Œç”šè‡³å¦ä¸€ä¸ªä»£ç†ï¼‰</li>
<li><code>handler</code>ï¼šä¸€ä¸ªé€šå¸¸ä»¥å‡½æ•°ä½œä¸ºå±æ€§çš„å¯¹è±¡ï¼Œå„å±æ€§ä¸­çš„å‡½æ•°åˆ†åˆ«å®šä¹‰äº†åœ¨æ‰§è¡Œå„ç§æ“ä½œæ—¶ä»£ç† <code>p</code> çš„è¡Œä¸º</li>
</ul>
<p>å…¶å® å’Œ Vue2.Xå®ç°çš„é€»è¾‘å·®ä¸å¤šï¼Œä¸è¿‡å®ç°çš„æ–¹æ³•ä¸ä¸€æ ·</p>
<p>é‚£ä¹ˆå°±æ”¾ä¸Šä»£ç äº†</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">let</span> data = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">msg</span>: <span class="string">&#x27;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="attr">age</span>: <span class="string">&#x27;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">let</span> vm = <span class="keyword">new</span> <span class="title class_">Proxy</span>(data, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="title function_">get</span>(<span class="params">target, key</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="keyword">return</span> target\[key\]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="title function_">set</span>(<span class="params">target, key, newValue</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="keyword">if</span> (target\[key\] === newValue) <span class="keyword">return</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    target\[key\] = newValue</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#app&#x27;</span>).<span class="property">textContent</span> = target\[key\]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>
<p>è§¦å‘<strong>set</strong> å’Œ <strong>get</strong> çš„æ–¹æ³•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">vm.<span class="property">msg</span> = <span class="string">&#x27;haha&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(vm.<span class="property">msg</span>)</span><br></pre></td></tr></table></figure>
<h2 id="4-å‘å¸ƒè®¢é˜…æ¨¡å¼"><a href="#4-å‘å¸ƒè®¢é˜…æ¨¡å¼" class="headerlink" title="4.å‘å¸ƒè®¢é˜…æ¨¡å¼"></a>4.å‘å¸ƒè®¢é˜…æ¨¡å¼</h2><blockquote>
<p>åœ¨Vue å“åº”å¼ä¸­åº”ç”¨åˆ°äº† å‘å¸ƒè®¢é˜…æ¨¡å¼ æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸‹</p>
</blockquote>
<p>é¦–å…ˆæ¥è¯´ç®€å•ä»‹ç»ä¸‹ ä¸€å…±æœ‰ä¸‰ä¸ªè§’è‰²</p>
<p><strong>å‘å¸ƒè€…</strong>ã€ <strong>è®¢é˜…è€…</strong>ã€ <strong>ä¿¡å·ä¸­å¿ƒ</strong> ä¸¾ä¸ªç°å®ä¸­ä¾‹å­ ä½œè€…(å‘å¸ƒè€…)å†™ä¸€ç¯‡æ–‡ç«  å‘åˆ°äº†æ˜é‡‘(ä¿¡å·ä¸­å¿ƒ) ,æ˜é‡‘å¯ä»¥å¤„ç†æ–‡ç« ç„¶åæ¨é€åˆ°äº†é¦–é¡µï¼Œç„¶åå„è‡ªå¤§ä½¬(è®¢é˜…è€…)å°±å¯ä»¥è®¢é˜…æ–‡ç« </p>
<p>åœ¨Vue ä¸­çš„ä¾‹å­ å°±æ˜¯<strong>EventBus</strong><code>$on``$emit</code></p>
<blockquote>
<p>é‚£ä¹ˆæˆ‘ä»¬å°±ç®€å•æ¨¡ä»¿ä¸€ä¸‹ Vue çš„äº‹ä»¶æ€»çº¿å§</p>
</blockquote>
<p>ä¹‹å‰ä»£ç ç¼©è¿›4ä¸ªå•ä½æœ‰ç‚¹å®½ï¼Œè¿™é‡Œæ”¹æˆ2ä¸ª</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">class</span> <span class="title class_">Vue</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">subs</span> = &#123;&#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      $on(type, fn) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">subs</span>\[type\]) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">subs</span>\[type\] = \[\]</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">subs</span>\[type\].<span class="title function_">push</span>(fn)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      $emit(type) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">subs</span>\[type\]) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> args = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>, <span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">subs</span>\[type\].<span class="title function_">forEach</span>(<span class="function">(<span class="params">fn</span>) =&gt;</span> <span class="title function_">fn</span>(...args))</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> eventHub = <span class="keyword">new</span> <span class="title class_">Vue</span>()</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    eventHub.$on(<span class="string">&#x27;sum&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> count = \[...<span class="variable language_">arguments</span>\].<span class="title function_">reduce</span>(<span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y)</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(count)</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    eventHub.$emit(<span class="string">&#x27;sum&#x27;</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>)</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="5-è§‚å¯Ÿè€…æ¨¡å¼"><a href="#5-è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="5.è§‚å¯Ÿè€…æ¨¡å¼"></a>5.è§‚å¯Ÿè€…æ¨¡å¼</h2><blockquote>
<p>ä¸ å‘å¸ƒè®¢é˜… çš„å·®å¼‚</p>
</blockquote>
<p>ä¸å‘å¸ƒè®¢é˜…è€…ä¸åŒ è§‚å¯Ÿè€…ä¸­ å‘å¸ƒè€…å’Œè®¢é˜…è€…(è§‚å¯Ÿè€…)æ˜¯ç›¸äº’ä¾èµ–çš„ å¿…é¡»è¦æ±‚è§‚å¯Ÿè€…è®¢é˜…å†…å®¹æ”¹å˜äº‹ä»¶ ï¼Œè€Œå‘å¸ƒè®¢é˜…è€…æ˜¯ç”±è°ƒåº¦ä¸­å¿ƒè¿›è¡Œè°ƒåº¦ï¼Œé‚£ä¹ˆçœ‹çœ‹è§‚å¯Ÿè€…æ¨¡å¼ æ˜¯å¦‚ä½•ç›¸äº’ä¾èµ–ï¼Œä¸‹é¢å°±ä¸¾ä¸ªç®€å•ä¾‹å­</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">class</span> <span class="title class_">Subject</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">observerLists</span> = \[\]</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">addObs</span>(<span class="params">obs</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (obs &amp;&amp; obs.<span class="property">update</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">observerLists</span>.<span class="title function_">push</span>(obs)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">notify</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">observerLists</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">obs</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">          obs.<span class="title function_">update</span>()</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">empty</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">observerLists</span> = \[\]</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">class</span> <span class="title class_">Observer</span> &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">update</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç›®æ ‡æ›´æ–°äº†&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> sub = <span class="keyword">new</span> <span class="title class_">Subject</span>()</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> obs1 = <span class="keyword">new</span> <span class="title class_">Observer</span>()</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> obs2 = <span class="keyword">new</span> <span class="title class_">Observer</span>()</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    sub.<span class="title function_">addObs</span>(obs1)</span></span><br><span class="line"><span class="language-javascript">    sub.<span class="title function_">addObs</span>(obs2)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    sub.<span class="title function_">notify</span>()</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="6-æ¨¡æ‹ŸVueçš„å“åº”å¼åŸç†"><a href="#6-æ¨¡æ‹ŸVueçš„å“åº”å¼åŸç†" class="headerlink" title="6.æ¨¡æ‹ŸVueçš„å“åº”å¼åŸç†"></a>6.æ¨¡æ‹ŸVueçš„å“åº”å¼åŸç†</h2><blockquote>
<p>è¿™é‡Œæ¥å®ç°ä¸€ä¸ªå°å‹ç®€å•çš„ <strong>Vue</strong> ä¸»è¦å®ç°ä»¥ä¸‹çš„åŠŸèƒ½</p>
</blockquote>
<ul>
<li>æ¥æ”¶åˆå§‹åŒ–çš„å‚æ•°ï¼Œè¿™é‡Œåªä¸¾å‡ ä¸ªç®€å•çš„ä¾‹å­ <strong>el**</strong>data<strong>**options</strong></li>
<li>é€šè¿‡ç§æœ‰æ–¹æ³• <strong>_proxyData</strong> æŠŠ<strong>data</strong> æ³¨å†Œåˆ° <strong>Vue</strong> ä¸­ è½¬æˆ<strong>getter**</strong>setter**</li>
<li>ä½¿ç”¨ <strong>observer</strong> æŠŠ <strong>data</strong> ä¸­çš„å±æ€§è½¬ä¸º å“åº”å¼ æ·»åŠ åˆ° è‡ªèº«èº«ä¸Š</li>
<li>ä½¿ç”¨ <strong>observer</strong> æ–¹æ³•ç›‘å¬ <strong>data</strong> çš„æ‰€æœ‰å±æ€§å˜åŒ–æ¥ é€šè¿‡è§‚å¯Ÿè€…æ¨¡å¼ æ›´æ–°è§†å›¾</li>
<li>ä½¿ç”¨ <strong>compiler</strong> ç¼–è¯‘å…ƒç´ èŠ‚ç‚¹ä¸Šé¢æŒ‡ä»¤ å’Œ æ–‡æœ¬èŠ‚ç‚¹å·®å€¼è¡¨è¾¾å¼</li>
</ul>
<h3 id="1-vue-js"><a href="#1-vue-js" class="headerlink" title="1.vue.js"></a>1.vue.js</h3><p>åœ¨è¿™é‡Œè·å–åˆ° <code>el``data</code></p>
<p>é€šè¿‡ <strong>_proxyData</strong> æŠŠ <strong>data</strong>çš„å±æ€§ æ³¨å†Œåˆ°<strong>Vue</strong> å¹¶è½¬æˆ <strong>getter**</strong>setter**</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Vue</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$options</span> = options || &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$el</span> =</span><br><span class="line">      <span class="keyword">typeof</span> options.<span class="property">el</span> === <span class="string">&#x27;string&#x27;</span></span><br><span class="line">        ? <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(options.<span class="property">el</span>)</span><br><span class="line">        : options.<span class="property">el</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$data</span> = options.<span class="property">data</span> || &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">_proxyData</span>(<span class="variable language_">this</span>.<span class="property">$data</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">_proxyData</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">keys</span>(data).<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="variable language_">this</span>, key, &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">        <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">        <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> data\[key\]</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="title function_">set</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (newValue === data\[key\]) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">          data\[key\] = newValue</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-observer-js"><a href="#2-observer-js" class="headerlink" title="2.observer.js"></a>2.observer.js</h3><p>åœ¨è¿™é‡ŒæŠŠ <strong>data</strong> ä¸­çš„ å±æ€§å˜ä¸ºå“åº”å¼åŠ åœ¨è‡ªèº«çš„èº«ä¸Šï¼Œè¿˜æœ‰ä¸€ä¸ªä¸»è¦åŠŸèƒ½å°±æ˜¯ è§‚å¯Ÿè€…æ¨¡å¼åœ¨ ç¬¬ <code>4.dep.js</code> ä¼šæœ‰è¯¦ç»†çš„ä½¿ç”¨</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">data</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">walk</span>(data)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">walk</span>(<span class="params">data</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!data || <span class="keyword">typeof</span> data !== <span class="string">&#x27;object&#x27;</span>) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">keys</span>(data).<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">defineReactive</span>(data, key, data\[key\])</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="title function_">defineReactive</span>(<span class="params">obj, key, value</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">walk</span>(value)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> self = <span class="variable language_">this</span></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, key, &#123;</span><br><span class="line"></span><br><span class="line">      <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">      <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">      <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> value</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="title function_">set</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (newValue === value) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        value = newValue</span><br><span class="line"></span><br><span class="line">        self.<span class="title function_">walk</span>(newValue)</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨htmlä¸­å¼•å…¥çš„è¯æ³¨æ„é¡ºåº</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/observer.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨<strong>vue.js</strong> ä¸­ä½¿ç”¨ <strong>Observer</strong></p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Vue</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options</span>) &#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Observer</span>(<span class="variable language_">this</span>.<span class="property">$data</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">_proxyData</span>(<span class="params">data</span>) &#123;</span><br><span class="line">   ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>çœ‹åˆ°è¿™é‡Œä¸ºä»€ä¹ˆåšäº†ä¸¤ä¸ªé‡å¤æ€§çš„æ“ä½œå‘¢ï¼Ÿé‡å¤æ€§ä¸¤æ¬¡æŠŠ <strong>data</strong>çš„å±æ€§è½¬ä¸ºå“åº”å¼</p>
<p>åœ¨<strong>obsever.js</strong> ä¸­æ˜¯æŠŠ <strong>data</strong> çš„æ‰€æœ‰å±æ€§ åŠ åˆ° <strong>data</strong> è‡ªèº« å˜ä¸ºå“åº”å¼ è½¬æˆ <strong>getter**</strong>setter**æ–¹å¼</p>
<p>åœ¨<strong>vue.js</strong> ä¸­ ä¹ŸæŠŠ <strong>data</strong>çš„ çš„æ‰€æœ‰å±æ€§ åŠ åˆ° <strong>Vue</strong> ä¸Š,æ˜¯ä¸ºäº†ä»¥åæ–¹é¢æ“ä½œå¯ä»¥ç”¨ <strong>Vue</strong> çš„å®ä¾‹ç›´æ¥è®¿é—®åˆ° æˆ–è€…åœ¨ <strong>Vue</strong> ä¸­ä½¿ç”¨ <strong>this</strong> è®¿é—®</p>
<blockquote>
<p>ä½¿ç”¨ä¾‹å­</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/observer.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">msg</span>: <span class="string">&#x27;123&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">age</span>: <span class="number">21</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/792a2a311f044c3a8d153c4fad2f0c46~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210725162744305"></p>
<p>è¿™æ ·åœ¨<code>Vue</code> å’Œ <code>$data</code> ä¸­éƒ½å­˜åœ¨äº† æ‰€æœ‰çš„<strong>data</strong> å±æ€§äº† å¹¶ä¸”æ˜¯å“åº”å¼çš„</p>
<h3 id="3-compiler-js"><a href="#3-compiler-js" class="headerlink" title="3.compiler.js"></a>3.compiler.js</h3><p><strong>comilper.js</strong>åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œå®ç°å¯¹æ–‡æœ¬èŠ‚ç‚¹ å’Œ å…ƒç´ èŠ‚ç‚¹æŒ‡ä»¤ç¼–è¯‘ ä¸»è¦æ˜¯ä¸ºäº†ä¸¾ä¾‹å­ å½“ç„¶è¿™ä¸ªå†™çš„å¾ˆç®€å• æŒ‡ä»¤ä¸»è¦å®ç° <strong>v-text**</strong>v-model**</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Compiler</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">vm</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vm</span> = vm</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">el</span> = vm.<span class="property">$el</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">compile</span>(<span class="variable language_">this</span>.<span class="property">el</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">compile</span>(<span class="params">el</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> childNodes = \[...el.<span class="property">childNodes</span>\]</span><br><span class="line">    childNodes.<span class="title function_">forEach</span>(<span class="function">(<span class="params">node</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">isTextNode</span>(node)) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">compileText</span>(node)</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">isElementNode</span>(node)) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">compileElement</span>(node)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (node.<span class="property">childNodes</span> &amp;&amp; node.<span class="property">childNodes</span>.<span class="property">length</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">compile</span>(node)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">compileText</span>(<span class="params">node</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> reg = <span class="regexp">/\\&#123;\\&#123;(.+?)\\&#125;\\&#125;/</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> val = node.<span class="property">textContent</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (reg.<span class="title function_">test</span>(val)) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> key = <span class="title class_">RegExp</span>.<span class="property">$1</span>.<span class="title function_">trim</span>()</span><br><span class="line"></span><br><span class="line">      node.<span class="property">textContent</span> = val.<span class="title function_">replace</span>(reg, <span class="variable language_">this</span>.<span class="property">vm</span>\[key\])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">compileElement</span>(<span class="params">node</span>) &#123;</span><br><span class="line"></span><br><span class="line">    !\[...node.<span class="property">attributes</span>\].<span class="title function_">forEach</span>(<span class="function">(<span class="params">attr</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> attrName = attr.<span class="property">name</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">isDirective</span>(attrName)) &#123;</span><br><span class="line"></span><br><span class="line">        attrName = attrName.<span class="title function_">substr</span>(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> key = attr.<span class="property">value</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">update</span>(node, key, attrName)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">update</span>(<span class="params">node, key, attrName</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> updateFn = <span class="variable language_">this</span>\[attrName + <span class="string">&#x27;Updater&#x27;</span>\]</span><br><span class="line"></span><br><span class="line">    updateFn &amp;&amp; <span class="title function_">updateFn</span>(node, key, <span class="variable language_">this</span>.<span class="property">vm</span>\[key\])</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="title function_">textUpdater</span>(<span class="params">node, key, value</span>) &#123;</span><br><span class="line">    node.<span class="property">textContent</span> = value</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="title function_">modelUpdater</span>(<span class="params">node, key, value</span>) &#123;</span><br><span class="line">    node.<span class="property">value</span> = value</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="title function_">isDirective</span>(<span class="params">attr</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> attr.<span class="title function_">startsWith</span>(<span class="string">&#x27;v-&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">isElementNode</span>(<span class="params">node</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> node.<span class="property">nodeType</span> === <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">isTextNode</span>(<span class="params">node</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> node.<span class="property">nodeType</span> === <span class="number">3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-dep-js"><a href="#4-dep-js" class="headerlink" title="4.dep.js"></a>4.dep.js</h3><p>å†™ä¸€ä¸ª<strong>Dep</strong>ç±» å®ƒç›¸å½“äº è§‚å¯Ÿè€…ä¸­çš„å‘å¸ƒè€… æ¯ä¸ªå“åº”å¼å±æ€§éƒ½ä¼šåˆ›å»ºè¿™ä¹ˆä¸€ä¸ª <strong>Dep</strong> å¯¹è±¡ ï¼Œè´Ÿè´£æ”¶é›†è¯¥ä¾èµ–å±æ€§çš„<strong>Watcher</strong>å¯¹è±¡ ï¼ˆæ˜¯åœ¨ä½¿ç”¨å“åº”å¼æ•°æ®çš„æ—¶å€™åšçš„æ“ä½œï¼‰</p>
<p>å½“æˆ‘ä»¬å¯¹å“åº”å¼å±æ€§åœ¨ <strong>setter</strong> ä¸­è¿›è¡Œæ›´æ–°çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨ <strong>Dep</strong> ä¸­ <strong>notify</strong> æ–¹æ³•å‘é€æ›´æ–°é€šçŸ¥</p>
<p>ç„¶åå»è°ƒç”¨ <strong>Watcher</strong> ä¸­çš„ <strong>update</strong> å®ç°è§†å›¾çš„æ›´æ–°æ“ä½œï¼ˆæ˜¯å½“æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™å»é€šçŸ¥è§‚å¯Ÿè€…è°ƒç”¨è§‚å¯Ÿè€…çš„updateæ›´æ–°è§†å›¾ï¼‰</p>
<p>æ€»çš„æ¥è¯´ åœ¨<strong>Dep</strong>(è¿™é‡ŒæŒ‡å‘å¸ƒè€…) ä¸­è´Ÿè´£æ”¶é›†ä¾èµ– æ·»åŠ è§‚å¯Ÿè€…(è¿™é‡ŒæŒ‡<strong>Wathcer</strong>)ï¼Œç„¶ååœ¨ <strong>setter</strong> æ•°æ®æ›´æ–°çš„æ—¶å€™é€šçŸ¥è§‚å¯Ÿè€…</p>
<p>è¯´çš„è¿™ä¹ˆå¤šé‡å¤çš„è¯ï¼Œå¤§å®¶åº”è¯¥çŸ¥é“æ˜¯åœ¨å“ªä¸ªé˜¶æ®µ æ”¶é›†ä¾èµ– å“ªä¸ªé˜¶æ®µ é€šçŸ¥è§‚å¯Ÿè€…äº†å§ï¼Œä¸‹é¢å°±æ¥å®ç°ä¸€ä¸‹å§</p>
<blockquote>
<p>å…ˆå†™<strong>Dep</strong>ç±»</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Dep</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">subs</span> = \[\]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">addSub</span>(<span class="params">sub</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (sub &amp;&amp; sub.<span class="property">update</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">subs</span>.<span class="title function_">push</span>(sub)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">notify</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">subs</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">sub</span>) =&gt;</span> &#123;</span><br><span class="line">      sub.<span class="title function_">update</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨ <strong>obsever.js</strong> ä¸­ä½¿ç”¨<strong>Dep</strong></p>
</blockquote>
<p>åœ¨ <strong>get</strong> ä¸­æ·»åŠ  <strong>Dep.target</strong> (è§‚å¯Ÿè€…)</p>
<p>åœ¨ <strong>set</strong> ä¸­ è§¦å‘ <strong>notify</strong> (é€šçŸ¥)</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">walk</span>(<span class="params">data</span>) &#123;</span><br><span class="line">   ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">defineReactive</span>(<span class="params">obj, key, value</span>) &#123;</span><br><span class="line">	...</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> dep = <span class="keyword">new</span> <span class="title class_">Dep</span>()</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, key, &#123;</span><br><span class="line">	  ...</span><br><span class="line"></span><br><span class="line">      <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Dep</span>.<span class="property">target</span> &amp;&amp; dep.<span class="title function_">addSub</span>(<span class="title class_">Dep</span>.<span class="property">target</span>)</span><br><span class="line">        <span class="keyword">return</span> value</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="title function_">set</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (newValue === value) <span class="keyword">return</span></span><br><span class="line">        value = newValue</span><br><span class="line">        self.<span class="title function_">walk</span>(newValue)</span><br><span class="line"></span><br><span class="line">        dep.<span class="title function_">notify</span>()</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-watcher-js"><a href="#5-watcher-js" class="headerlink" title="5.watcher.js"></a>5.watcher.js</h3><p>**watcher **çš„ä½œç”¨ æ•°æ®æ›´æ–°å æ”¶åˆ°é€šçŸ¥ä¹‹å è°ƒç”¨ <strong>update</strong> è¿›è¡Œæ›´æ–°</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Watcher</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">vm, key, cb</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vm</span> = vm</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">key</span> = key</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cb</span> = cb</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Dep</span>.<span class="property">target</span> = <span class="variable language_">this</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">oldValue</span> = vm\[key\]</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Dep</span>.<span class="property">target</span> = <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">update</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> newValue = <span class="variable language_">this</span>.<span class="property">vm</span>\[<span class="variable language_">this</span>.<span class="property">key</span>\]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (newValue === <span class="variable language_">this</span>.<span class="property">oldValue</span>) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">cb</span>(newValue)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆå»å“ªé‡Œåˆ›å»º <strong>Watcher</strong> å‘¢ï¼Ÿè¿˜è®°å¾—åœ¨ <strong>compiler.js</strong>ä¸­ å¯¹æ–‡æœ¬èŠ‚ç‚¹çš„ç¼–è¯‘æ“ä½œå—</p>
<p>åœ¨ç¼–è¯‘å®Œæ–‡æœ¬èŠ‚ç‚¹å åœ¨è¿™é‡Œæ·»åŠ ä¸€ä¸ª <strong>Watcher</strong></p>
<p>è¿˜æœ‰ <strong>v-text**</strong>v-model<strong> æŒ‡ä»¤ å½“ç¼–è¯‘çš„æ˜¯å…ƒç´ èŠ‚ç‚¹ å°±æ·»åŠ ä¸€ä¸ª </strong>Watcher**</p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Compiler</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">vm</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vm</span> = vm</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">el</span> = vm.<span class="property">$el</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">compile</span>(<span class="variable language_">this</span>.<span class="property">el</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">compile</span>(<span class="params">el</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> childNodes = \[...el.<span class="property">childNodes</span>\]</span><br><span class="line">    childNodes.<span class="title function_">forEach</span>(<span class="function">(<span class="params">node</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">isTextNode</span>(node)) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">compileText</span>(node)</span><br><span class="line">      &#125;</span><br><span class="line">       ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">compileText</span>(<span class="params">node</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> reg = <span class="regexp">/\\&#123;\\&#123;(.+)\\&#125;\\&#125;/</span></span><br><span class="line">    <span class="keyword">let</span> val = node.<span class="property">textContent</span></span><br><span class="line">    <span class="keyword">if</span> (reg.<span class="title function_">test</span>(val)) &#123;</span><br><span class="line">      <span class="keyword">let</span> key = <span class="title class_">RegExp</span>.<span class="property">$1</span>.<span class="title function_">trim</span>()</span><br><span class="line">      node.<span class="property">textContent</span> = val.<span class="title function_">replace</span>(reg, <span class="variable language_">this</span>.<span class="property">vm</span>\[key\])</span><br><span class="line"></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Watcher</span>(<span class="variable language_">this</span>.<span class="property">vm</span>, key, <span class="function"><span class="params">newValue</span> =&gt;</span> &#123;</span><br><span class="line">        node.<span class="property">textContent</span> = newValue</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="title function_">textUpdater</span>(<span class="params">node, key, value</span>) &#123;</span><br><span class="line">    node.<span class="property">textContent</span> = value</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Watcher</span>(<span class="variable language_">this</span>.<span class="property">vm</span>, key, <span class="function">(<span class="params">newValue</span>) =&gt;</span> &#123;</span><br><span class="line">      node.<span class="property">textContent</span> = newValue</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">modelUpdater</span>(<span class="params">node, key, value</span>) &#123;</span><br><span class="line">    node.<span class="property">value</span> = value</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Watcher</span>(<span class="variable language_">this</span>.<span class="property">vm</span>, key, <span class="function">(<span class="params">newValue</span>) =&gt;</span> &#123;</span><br><span class="line">      node.<span class="property">value</span> = newValue</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    node.<span class="title function_">addEventListener</span>(<span class="string">&#x27;input&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">vm</span>\[key\] = node.<span class="property">value</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“ æˆ‘ä»¬æ”¹å˜ å“åº”å¼å±æ€§çš„æ—¶å€™ è§¦å‘äº† <strong>set()</strong> æ–¹æ³• ï¼Œç„¶åé‡Œé¢ å‘å¸ƒè€… <strong>dep.notify</strong> æ–¹æ³•å¯åŠ¨äº†ï¼Œæ‹¿åˆ°äº† æ‰€æœ‰çš„ è§‚å¯Ÿè€… <strong>watcher</strong> å®ä¾‹å»æ‰§è¡Œ <strong>update</strong> æ–¹æ³•è°ƒç”¨äº†å›è°ƒå‡½æ•° <strong>cb(newValue)</strong> æ–¹æ³•å¹¶æŠŠ æ–°å€¼ä¼ é€’åˆ°äº† <strong>cb()</strong> å½“ä¸­ <strong>cb</strong>æ–¹æ³•æ˜¯çš„å…·ä½“æ›´æ–°è§†å›¾çš„æ–¹æ³• å»æ›´æ–°è§†å›¾</p>
<p>æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­é‡Œçš„ç¬¬ä¸‰ä¸ªå‚æ•° <strong>cb</strong>æ–¹æ³•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Watcher</span>(<span class="variable language_">this</span>.<span class="property">vm</span>, key, <span class="function"><span class="params">newValue</span> =&gt;</span> &#123;</span><br><span class="line">    node.<span class="property">textContent</span> = newValue</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>è¿˜æœ‰ä¸€ç‚¹è¦å®ç°<strong>v-model</strong>çš„åŒå‘ç»‘å®š</p>
<p>ä¸ä»…è¦é€šè¿‡ä¿®æ”¹æ•°æ®æ¥è§¦å‘æ›´æ–°è§†å›¾ï¼Œè¿˜å¾—ä¸º<strong>node</strong>æ·»åŠ  <strong>input</strong> äº‹ä»¶ æ”¹å˜ <strong>data</strong>æ•°æ®ä¸­çš„å±æ€§</p>
<p>æ¥è¾¾åˆ°åŒå‘ç»‘å®šçš„æ•ˆæœ</p>
<h2 id="7-æµ‹è¯•ä¸‹è‡ªå·±å†™çš„"><a href="#7-æµ‹è¯•ä¸‹è‡ªå·±å†™çš„" class="headerlink" title="7.æµ‹è¯•ä¸‹è‡ªå·±å†™çš„"></a>7.æµ‹è¯•ä¸‹è‡ªå·±å†™çš„</h2><blockquote>
<p>åˆ°äº†ç›®å‰ä¸ºæ­¢ å“åº”å¼ å’Œ åŒå‘ç»‘å®š éƒ½åŸºæœ¬å®ç°äº† é‚£ä¹ˆæ¥å†™ä¸ªä¾‹å­æµ‹è¯•ä¸‹</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;msg&#125;&#125; <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    &#123;&#123;age&#125;&#125; <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-text</span>=<span class="string">&quot;msg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;msg&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/dep.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/watcher.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/compiler.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/observer.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">msg</span>: <span class="string">&#x27;123&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">age</span>: <span class="number">21</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a1e875a85d8845f7b6a92e98ba7d1f3a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="8"></p>
<p>OK åŸºæœ¬å®ç°äº† é€šè¿‡ è§‚å¯Ÿè€…æ¨¡å¼ æ¥ å®ç° å“åº”å¼åŸç†</p>
<h2 id="8-äº”ä¸ªæ–‡ä»¶ä»£ç "><a href="#8-äº”ä¸ªæ–‡ä»¶ä»£ç " class="headerlink" title="8.äº”ä¸ªæ–‡ä»¶ä»£ç "></a>8.äº”ä¸ªæ–‡ä»¶ä»£ç </h2><p>è¿™é‡Œç›´æ¥æŠŠ5ä¸ªæ–‡ä»¶ä¸ªä»£ç è´´å‡ºæ¥ ä¸Šé¢æœ‰çš„åœ°æ–¹çœç•¥äº†,ä¸‹é¢æ˜¯å®Œæ•´çš„æ–¹ä¾¿å¤§å®¶é˜…è¯»</p>
<blockquote>
<p>vue.js</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Vue</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">options</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$options</span> = options || &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$el</span> =</span><br><span class="line">      <span class="keyword">typeof</span> options.<span class="property">el</span> === <span class="string">&#x27;string&#x27;</span></span><br><span class="line">        ? <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(options.<span class="property">el</span>)</span><br><span class="line">        : options.<span class="property">el</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$data</span> = options.<span class="property">data</span> || &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">_proxyData</span>(<span class="variable language_">this</span>.<span class="property">$data</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Observer</span>(<span class="variable language_">this</span>.<span class="property">$data</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Compiler</span>(<span class="variable language_">this</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">_proxyData</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">keys</span>(data).<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="variable language_">this</span>, key, &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">        <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">        <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> data\[key\]</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="title function_">set</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (newValue === data\[key\]) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">          data\[key\] = newValue</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>obsever.js</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">data</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">walk</span>(data)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">walk</span>(<span class="params">data</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!data || <span class="keyword">typeof</span> data !== <span class="string">&#x27;object&#x27;</span>) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">keys</span>(data).<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">defineReactive</span>(data, key, data\[key\])</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="title function_">defineReactive</span>(<span class="params">obj, key, value</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">walk</span>(value)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> self = <span class="variable language_">this</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> dep = <span class="keyword">new</span> <span class="title class_">Dep</span>()</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, key, &#123;</span><br><span class="line"></span><br><span class="line">      <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">      <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Dep</span>.<span class="property">target</span> &amp;&amp; dep.<span class="title function_">addSub</span>(<span class="title class_">Dep</span>.<span class="property">target</span>)</span><br><span class="line">        <span class="keyword">return</span> value</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="title function_">set</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (newValue === value) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        value = newValue</span><br><span class="line"></span><br><span class="line">        self.<span class="title function_">walk</span>(newValue)</span><br><span class="line"></span><br><span class="line">        dep.<span class="title function_">notify</span>()</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>compiler.js</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Compiler</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">vm</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vm</span> = vm</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">el</span> = vm.<span class="property">$el</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">compile</span>(<span class="variable language_">this</span>.<span class="property">el</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">compile</span>(<span class="params">el</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> childNodes = \[...el.<span class="property">childNodes</span>\]</span><br><span class="line">    childNodes.<span class="title function_">forEach</span>(<span class="function">(<span class="params">node</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">isTextNode</span>(node)) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">compileText</span>(node)</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">isElementNode</span>(node)) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">compileElement</span>(node)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (node.<span class="property">childNodes</span> &amp;&amp; node.<span class="property">childNodes</span>.<span class="property">length</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">compile</span>(node)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">compileText</span>(<span class="params">node</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> reg = <span class="regexp">/\\&#123;\\&#123;(.+?)\\&#125;\\&#125;/</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> val = node.<span class="property">textContent</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (reg.<span class="title function_">test</span>(val)) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> key = <span class="title class_">RegExp</span>.<span class="property">$1</span>.<span class="title function_">trim</span>()</span><br><span class="line"></span><br><span class="line">      node.<span class="property">textContent</span> = val.<span class="title function_">replace</span>(reg, <span class="variable language_">this</span>.<span class="property">vm</span>\[key\])</span><br><span class="line"></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Watcher</span>(<span class="variable language_">this</span>.<span class="property">vm</span>, key, <span class="function">(<span class="params">newValue</span>) =&gt;</span> &#123;</span><br><span class="line">        node.<span class="property">textContent</span> = newValue</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">compileElement</span>(<span class="params">node</span>) &#123;</span><br><span class="line"></span><br><span class="line">    !\[...node.<span class="property">attributes</span>\].<span class="title function_">forEach</span>(<span class="function">(<span class="params">attr</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> attrName = attr.<span class="property">name</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">isDirective</span>(attrName)) &#123;</span><br><span class="line"></span><br><span class="line">        attrName = attrName.<span class="title function_">substr</span>(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> key = attr.<span class="property">value</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">update</span>(node, key, attrName)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">update</span>(<span class="params">node, key, attrName</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> updateFn = <span class="variable language_">this</span>\[attrName + <span class="string">&#x27;Updater&#x27;</span>\]</span><br><span class="line"></span><br><span class="line">    updateFn &amp;&amp; updateFn.<span class="title function_">call</span>(<span class="variable language_">this</span>, node, key, <span class="variable language_">this</span>.<span class="property">vm</span>\[key\])</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="title function_">textUpdater</span>(<span class="params">node, key, value</span>) &#123;</span><br><span class="line">    node.<span class="property">textContent</span> = value</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Watcher</span>(<span class="variable language_">this</span>.<span class="property">vm</span>, key, <span class="function">(<span class="params">newValue</span>) =&gt;</span> &#123;</span><br><span class="line">      node.<span class="property">textContent</span> = newValue</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">modelUpdater</span>(<span class="params">node, key, value</span>) &#123;</span><br><span class="line">    node.<span class="property">value</span> = value</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Watcher</span>(<span class="variable language_">this</span>.<span class="property">vm</span>, key, <span class="function">(<span class="params">newValue</span>) =&gt;</span> &#123;</span><br><span class="line">      node.<span class="property">value</span> = newValue</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    node.<span class="title function_">addEventListener</span>(<span class="string">&#x27;input&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">vm</span>\[key\] = node.<span class="property">value</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="title function_">isDirective</span>(<span class="params">attr</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> attr.<span class="title function_">startsWith</span>(<span class="string">&#x27;v-&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">isElementNode</span>(<span class="params">node</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> node.<span class="property">nodeType</span> === <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">isTextNode</span>(<span class="params">node</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> node.<span class="property">nodeType</span> === <span class="number">3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>dep.js</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Dep</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">subs</span> = \[\]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">addSub</span>(<span class="params">sub</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (sub &amp;&amp; sub.<span class="property">update</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">subs</span>.<span class="title function_">push</span>(sub)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">notify</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">subs</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">sub</span>) =&gt;</span> &#123;</span><br><span class="line">      sub.<span class="title function_">update</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>watcher.js</p>
</blockquote>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Watcher</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">vm, key, cb</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">vm</span> = vm</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">key</span> = key</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cb</span> = cb</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Dep</span>.<span class="property">target</span> = <span class="variable language_">this</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">oldValue</span> = vm\[key\]</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Dep</span>.<span class="property">target</span> = <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">update</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> newValue = <span class="variable language_">this</span>.<span class="property">vm</span>\[<span class="variable language_">this</span>.<span class="property">key</span>\]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (newValue === <span class="variable language_">this</span>.<span class="property">oldValue</span>) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">cb</span>(newValue)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>å“åº”å¼åŸç†</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‰‹å†™ç®€å•vue3å“åº”å¼åŸç†</title>
    <url>/xiaolangwiki/2022/08/21/24/</url>
    <content><![CDATA[<h2 id="æ‰‹å†™ç®€å•-vue3-å“åº”å¼åŸç†"><a href="#æ‰‹å†™ç®€å•-vue3-å“åº”å¼åŸç†" class="headerlink" title="æ‰‹å†™ç®€å• vue3 å“åº”å¼åŸç†"></a>æ‰‹å†™ç®€å• vue3 å“åº”å¼åŸç†</h2><p>åŸæ–‡ï¼š<a href="https://juejin.cn/post/7134281691295645732">https://juejin.cn/post/7134281691295645732</a></p>
<blockquote>
<p>åœ¨ä¹‹å‰çš„æ–‡ç« é‡Œå°æµªä»‹ç»è¿‡<a href="https://juejin.cn/post/6989106100582744072" title="https://juejin.cn/post/6989106100582744072">Vue2 çš„å“åº”å¼åŸç†</a>ï¼Œè¯„è®ºä¸­æœ‰æ˜å‹è¯„è®ºæƒ³è®©æˆ‘ä»‹ç» Vue3 çš„å“åº”å¼åŸç†ï¼Œé‚£ä¹ˆåœ¨è¿™ç¯‡æ–‡ç« ä¸­å°æµªæ¥å¸¦å¤§å®¶æ¥ç®€å•æ‰‹å†™ä¸€ä¸‹ Vue3 ä¸­çš„å‡ ä¸ªå“åº”å¼ api</p>
</blockquote>
<h2 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h2><blockquote>
<p>é¦–å…ˆå¾—å…ˆæ¥ä»‹ç»ä¸€ä¸‹ Proxy è¿™ä¸ªå¼ºå¤§çš„ APIï¼š</p>
<p>åœ¨ Vue3 ä¸­ä½¿ç”¨ Proxy å¯¹è±¡æ¥ä»£æ›¿ Vue 2 ä¸­åŸºäº Object.definePropertyï¼Œæ¶ˆé™¤äº† Vue 2 ä¸­åŸºäº Object.defineProperty æ‰€å­˜åœ¨çš„ä¸€äº›å±€é™ï¼Œæ¯”å¦‚æ— æ³•ç›‘å¬æ•°ç»„ç´¢å¼•ï¼Œlength å±æ€§ç­‰ç­‰</p>
<p>åœ¨ Proxy ä¸­é»˜è®¤ç›‘å¬åŠ¨æ€æ·»åŠ å±æ€§å’Œå±æ€§çš„åˆ é™¤æ“ä½œï¼Œå°±å¾ˆæ–¹ä¾¿</p>
</blockquote>
<p><strong>Proxy</strong>é…åˆ<strong>Reflect</strong>ä½¿ç”¨ï¼Œ<strong>Reflect</strong>æ˜¯<strong>ES6</strong>å‡ºç°çš„æ–°ç‰¹æ€§ï¼Œä»£ç è¿è¡ŒæœŸé—´ç”¨æ¥è®¾ç½®æˆ–è·å–å¯¹è±¡æˆå‘˜ï¼ˆæ“ä½œå¯¹è±¡æˆå‘˜ï¼‰ï¼Œ<strong>Reflect</strong>æ²¡æœ‰å‡ºç°å‰ä½¿ç”¨<strong>Object</strong>çš„ä¸€äº›æ–¹æ³•æ¯”å¦‚ <code>Object.getPrototypeOf,</code><strong>Reflect</strong>ä¹Ÿæœ‰å¯¹åº”çš„æ–¹æ³• <code>Reflect.getPrototypeOf</code>,ä¸¤è€…éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¸è¿‡<strong>Reflect</strong>æ›´æœ‰è¯­ä¹‰ã€‚</p>
<p>ä¸‹é¢æ¥çœ‹ä¸€ä¸‹åŸºæœ¬çš„ä½¿ç”¨</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> target = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;å°æµª&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">22</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> handler = &#123;</span><br><span class="line">  <span class="title function_">get</span>(<span class="params">target, key, receiver</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`è·å–å¯¹è±¡å±æ€§<span class="subst">$&#123;key&#125;</span>å€¼`</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, key, receiver);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">set</span>(<span class="params">target, key, value, receiver</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`è®¾ç½®å¯¹è±¡å±æ€§<span class="subst">$&#123;key&#125;</span>å€¼`</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, key, value, receiver);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">deleteProperty</span>(<span class="params">target, key</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`åˆ é™¤å¯¹è±¡å±æ€§<span class="subst">$&#123;key&#125;</span>å€¼`</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">deleteProperty</span>(target, key);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> proxy = <span class="keyword">new</span> <span class="title class_">Proxy</span>(target, handler);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(proxy.<span class="property">age</span>);</span><br><span class="line">proxy.<span class="property">age</span> = <span class="number">21</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">delete</span> proxy.<span class="property">age</span>);</span><br></pre></td></tr></table></figure>
<p>è¾“å‡º</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">è·å–å¯¹è±¡å±æ€§ageå€¼</span><br><span class="line">22</span><br><span class="line">è®¾ç½®å¯¹è±¡å±æ€§ageå€¼</span><br><span class="line">åˆ é™¤å¯¹è±¡å±æ€§ageå€¼</span><br><span class="line"><span class="literal">true</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>targetï¼šå‚æ•°è¡¨ç¤ºæ‰€è¦æ‹¦æˆªçš„ç›®æ ‡å¯¹è±¡</p>
<p>handlerï¼šå‚æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥å®šåˆ¶æ‹¦æˆªè¡Œä¸º</p>
</blockquote>
<p>æ³¨æ„ï¼š</p>
<ul>
<li><strong>this</strong> å…³é”®å­—è¡¨ç¤ºçš„æ˜¯ä»£ç†çš„ handler å¯¹è±¡ï¼Œ<strong>æ‰€ä»¥ä¸èƒ½ä½¿ç”¨ this è€Œæ˜¯è¦ç”¨ receiver ä¼ é€’</strong>ï¼Œ<code>receiver</code>ä»£è¡¨å½“å‰ proxy å¯¹è±¡ æˆ–è€… ç»§æ‰¿ proxy çš„å¯¹è±¡ï¼Œå®ƒä¿è¯ä¼ é€’æ­£ç¡®çš„ this ç»™ getterï¼Œsetter</li>
<li><code>set</code> å’Œ <code>deleteProperty</code> ä¹Ÿéœ€è¦è¿”å›ï¼ˆæ·»åŠ <code>return</code> ï¼‰ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè®¾ç½®/åˆ é™¤æˆåŠŸè¿”å› trueï¼Œåä¹‹è¿”å› false</li>
</ul>
<h2 id="reactive"><a href="#reactive" class="headerlink" title="reactive"></a>reactive</h2><p>äº†è§£äº†ä¸Šé¢çš„ Proxy å’Œ Reflectï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ reactive çš„å®ç°ï¼Œreactiveï¼Œè¿”å› proxy å¯¹è±¡ï¼Œè¿™ä¸ª reactive å¯ä»¥æ·±å±‚æ¬¡é€’å½’ï¼Œå¦‚æœå‘ç°å­å…ƒç´ å­˜åœ¨å¼•ç”¨ç±»å‹ï¼Œé€’å½’å¤„ç†ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">isObject</span> = (<span class="params">val</span>) =&gt; val !== <span class="literal">null</span> &amp;&amp; <span class="keyword">typeof</span> val === <span class="string">&quot;object&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">hasOwn</span> = (<span class="params">target, key</span>) =&gt;</span><br><span class="line">  <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span>.<span class="title function_">call</span>(target, key);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">reactive</span>(<span class="params">target</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="title function_">isObject</span>(target)) <span class="keyword">return</span> target;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handler = &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params">target, key, receiver</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`è·å–å¯¹è±¡å±æ€§<span class="subst">$&#123;key&#125;</span>å€¼`</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> result = <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, key, receiver);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="title function_">isObject</span>(result)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">reactive</span>(result);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="title function_">set</span>(<span class="params">target, key, value, receiver</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`è®¾ç½®å¯¹è±¡å±æ€§<span class="subst">$&#123;key&#125;</span>å€¼`</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> oldValue = <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, key, reactive);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> result = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (oldValue !== value) &#123;</span><br><span class="line">        result = <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, key, value, receiver);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="title function_">deleteProperty</span>(<span class="params">target, key</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`åˆ é™¤å¯¹è±¡å±æ€§<span class="subst">$&#123;key&#125;</span>å€¼`</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> hadKey = <span class="title function_">hasOwn</span>(target, key);</span><br><span class="line">      <span class="keyword">const</span> result = <span class="title class_">Reflect</span>.<span class="title function_">deleteProperty</span>(target, key);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (hadKey &amp;&amp; result) &#123;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Proxy</span>(target, handler);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&quot;../src/reactive.js&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> obj = &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&quot;å°æµª&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">age</span>: <span class="number">22</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">test</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">test1</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">test2</span>: <span class="number">21</span>,</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> proxy = <span class="title function_">reactive</span>(obj);</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(proxy.<span class="property">age</span>);</span></span><br><span class="line"><span class="language-javascript">      proxy.<span class="property">test</span>.<span class="property">test1</span>.<span class="property">test2</span> = <span class="number">22</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">delete</span> proxy.<span class="property">age</span>);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/55627152ac1843feb5bec13dc3641bb0~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="image.png"></p>
<h2 id="æ”¶é›†ä¾èµ–-è§¦å‘æ›´æ–°"><a href="#æ”¶é›†ä¾èµ–-è§¦å‘æ›´æ–°" class="headerlink" title="æ”¶é›†ä¾èµ–/è§¦å‘æ›´æ–°"></a>æ”¶é›†ä¾èµ–/è§¦å‘æ›´æ–°</h2><p>ä¸Šé¢æˆ‘ä»¬è¿˜æœ‰ get ä¸­æ”¶é›†ä¾èµ–æ²¡æœ‰å®Œæˆï¼Œæ”¶é›†ä¾èµ–æ¶‰åŠé“ track , effect è¿˜æœ‰ä¾èµ–åœ°å›¾ï¼Œä¸‹é¢æˆ‘ç»™å‡ºä¸€å¼ å›¾å…ˆä»‹ç»ä¸€ä¸‹ effect å’Œ track æ˜¯å¦‚ä½•æ”¶é›†ä¾èµ–çš„</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/faf059ee41664a69a4fcd89f471c20f8~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="image.png"></p>
<p>å“åº”å¼é¡ºåºï¼šeffect &gt; track &gt; trigger &gt; effect</p>
<p>åœ¨ç»„ä»¶æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ª effect ä¼šä¼šè§¦å‘ getï¼Œä»è€Œå¯¹å€¼è¿›è¡Œ trackï¼Œå½“å€¼å‘ç”Ÿæ”¹å˜ï¼Œå°±ä¼šè¿›è¡Œ triggeï¼Œæ‰§è¡Œ effect æ¥å®Œæˆä¸€ä¸ªå“åº”</p>
<p>é‚£ä¹ˆå…ˆæ¥å®ç° effect</p>
<h3 id="effect"><a href="#effect" class="headerlink" title="effect"></a>effect</h3><blockquote>
<p>effect çš„å®ç°å¾ˆç®€å•</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> activeEffect = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">effect</span>(<span class="params">callback</span>) &#123;</span><br><span class="line">  activeEffect = callback;</span><br><span class="line">  <span class="title function_">callback</span>();</span><br><span class="line">  activeEffect = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="track"><a href="#track" class="headerlink" title="track"></a>track</h3><blockquote>
<p>ç„¶åå°±æ˜¯å¯¹ track çš„å®ç°</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> targetMap = <span class="keyword">new</span> <span class="title class_">WeakMap</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">track</span>(<span class="params">target, key</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!activeEffect) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> depsMap = targetMap.<span class="title function_">get</span>(target);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!depsMap) &#123;</span><br><span class="line">    targetMap.<span class="title function_">set</span>(target, (depsMap = <span class="keyword">new</span> <span class="title class_">Map</span>()));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> dep = depsMap.<span class="title function_">get</span>(key);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!dep) &#123;</span><br><span class="line">    depsMap.<span class="title function_">set</span>(key, (dep = <span class="keyword">new</span> <span class="title class_">Set</span>()));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!dep.<span class="title function_">has</span>(activeEffect)) &#123;</span><br><span class="line">    dep.<span class="title function_">add</span>(activeEffect);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æœ€åæ·»åŠ åˆ° hander é‡Œ get ä¸­</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">get</span>(<span class="params">target, key, receiver</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="title function_">track</span>(target, key)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h3 id="è§¦å‘æ›´æ–°"><a href="#è§¦å‘æ›´æ–°" class="headerlink" title="è§¦å‘æ›´æ–°"></a>è§¦å‘æ›´æ–°</h3><p>é€šè¿‡ä¸Šé¢çš„å›¾ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨ set ä¸­ä½¿ç”¨ trigger å‡½æ•°æ¥è§¦å‘æ›´æ–°ï¼Œæˆ‘ä»¬æ¥å®ç°ä¸€ä¸‹å§</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">trigger</span>(<span class="params">target, key</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> depsMap = targetMap.<span class="title function_">get</span>(target);</span><br><span class="line">  <span class="keyword">if</span> (!depsMap) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> dep = depsMap.<span class="title function_">get</span>(key);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (dep) &#123;</span><br><span class="line">    dep.<span class="title function_">forEach</span>(<span class="function">(<span class="params">effect</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">effect</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æœ€åæ·»åŠ åˆ° hander çš„ set å’Œ deleteProperty ä¸­</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">set</span>(<span class="params">target, key, value, receiver</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (oldValue !== value) &#123;</span><br><span class="line">        result = <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, key, value, receiver)</span><br><span class="line">        <span class="title function_">trigger</span>(target, key)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="title function_">deleteProperty</span>(<span class="params">target, key</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (hadKey &amp;&amp; result) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="title function_">trigger</span>(target, key)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h2><p>æŠŠä¸€ä¸ªåŸºç¡€ç±»å‹åŒ…è£…æˆä¸€ä¸ªæœ‰ value å“åº”å¼å¯¹è±¡ï¼ˆè¿™é‡Œæ˜¯ä½¿ç”¨<code>get/set</code> å­˜å–å™¨ï¼Œæ¥è¿›è¡Œè¿½è¸ªå’Œè§¦å‘ï¼‰ï¼Œå¦‚æœæ˜¯æ™®é€šå¯¹è±¡å°±è°ƒç”¨ reactive æ¥åˆ›å»ºå“åº”å¼å¯¹è±¡</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">convert</span> = val =&gt; (<span class="title function_">isObject</span>(val) ? <span class="title function_">reactive</span>(val) : val)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RefImpl</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">_rawValue</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.\_rawValue = \_rawValue</span><br><span class="line">        <span class="variable language_">this</span>.\_\_v\_isRef = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.\_value = <span class="title function_">convert</span>(\_rawValue)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">value</span>() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="title function_">track</span>(<span class="variable language_">this</span>, <span class="string">&#x27;value&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_value</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">value</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (newValue !== <span class="variable language_">this</span>.<span class="property">_value</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">_rawValue</span> = newValue</span><br><span class="line"></span><br><span class="line">            <span class="variable language_">this</span>.\_value = <span class="title function_">convert</span>(<span class="variable language_">this</span>.\_rawValue)</span><br><span class="line"></span><br><span class="line">            <span class="title function_">trigger</span>(<span class="variable language_">this</span>, <span class="string">&#x27;value&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">ref</span>(<span class="params">rawValue</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">isObject</span>(rawValue) &amp;&amp; rawValue.\_\_v\_isRef) <span class="keyword">return</span> rawValue</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RefImpl</span>(rawValue)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="toRef"><a href="#toRef" class="headerlink" title="toRef"></a>toRef</h2><blockquote>
<p><code>toRef</code>ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œ<strong>ç›®æ ‡å¯¹è±¡</strong>ï¼Œ<strong>å¯¹è±¡å½“ä¸­çš„å±æ€§å</strong>ï¼Œå®ƒçš„è¿”å›ç»“æœå°±æ˜¯<strong>å±æ€§å</strong>çš„å¯å“åº”å¼æ•°æ®ï¼Œå°±æ˜¯å°†å¯¹è±¡ä¸­çš„æŸä¸ªå€¼è½¬åŒ–ä¸ºå“åº”å¼æ•°æ® toRef(obj,key)</p>
<p>é‚£ä¹ˆç®€å•æ¥å®ç°ä¸€ä¸‹</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ObjectRefImpl</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">proxy, _key</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_proxy</span> = proxy</span><br><span class="line">        <span class="variable language_">this</span>.\_key = \_key</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.\_\_v\_isRef = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">value</span>() &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.\_proxy\[<span class="variable language_">this</span>.\_key\]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">value</span>(<span class="params">newVal</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.\_proxy\[<span class="variable language_">this</span>.\_key\] = newVal</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">toRef</span>(<span class="params">proxy, key</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ObjectRefImpl</span>(proxy, key)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æµ‹è¯•</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, effect, toRef, reactive &#125; <span class="keyword">from</span> <span class="string">&quot;../src/reactive.js&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> obj = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;å°æµª&quot;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> age = <span class="title function_">toRef</span>(obj, <span class="string">&quot;age&quot;</span>);</span><br><span class="line">age.<span class="property">value</span> = <span class="number">21</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br><span class="line"><span class="title function_">effect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  age.<span class="property">value</span> = <span class="number">22</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åŸæ¥çš„ obj å¯¹è±¡æ²¡æœ‰ age å±æ€§ï¼Œä½¿ç”¨ toRef æ·»åŠ äº† ageï¼Œ å¹¶ä¸”æ˜¯å“åº”å¼çš„</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ee07b1e766e64986b287d07acffb96e3~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="image.png"></p>
<blockquote>
<p><strong>åŒºåˆ«äº ref:</strong></p>
</blockquote>
<p>ref æ˜¯å¯¹åŸå§‹æ•°æ®çš„æ‹·è´ï¼Œå½“ä¿®æ”¹ ref æ•°æ®æ—¶ï¼Œæ¨¡æ¿ä¸­çš„è§†å›¾ä¼šå‘ç”Ÿæ”¹å˜ï¼Œä½†æ˜¯åŸå§‹æ•°æ®å¹¶ä¸ä¼šæ”¹å˜ã€‚ toRef æ˜¯å¯¹åŸå§‹æ•°æ®çš„å¼•ç”¨ï¼Œä¿®æ”¹ toRef æ•°æ®æ—¶ï¼ŒåŸå§‹æ•°æ®ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ï¼Œä½†æ˜¯è§†å›¾å¹¶ä¸ä¼šæ›´æ–°ã€‚</p>
<h2 id="toRefs"><a href="#toRefs" class="headerlink" title="toRefs"></a>toRefs</h2><blockquote>
<p>æƒ³å¿…è¿™ä¸ªå¤§å®¶ç»å¸¸ä½¿ç”¨å§ï¼Œå¹³æ—¶å¦‚æœä½¿ç”¨ reactive åˆ›å»ºå¯¹è±¡ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥è¿›è¡Œè§£æ„ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ toRefs å¸®åŠ©æˆ‘ä»¬è¿›è¡Œè§£æ„ï¼Œ æŠŠæ•´ä¸ª reactive åˆ›å»ºçš„å¯¹è±¡å˜æˆ æ™®é€šå¯¹è±¡ï¼Œ ç„¶åæŠŠæ¯ä¸ªå±æ€§å˜æˆ ref å“åº”å¼å¯¹è±¡ã€‚é‚£ä¹ˆç›´æ¥ä¸Šæ‰‹å†™ä¸€ä¸‹å§ï¼Œ å…¶å®å®ƒçš„æ ¸å¿ƒè¿˜æ˜¯ä½¿ç”¨äº† toRef</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">toRefs</span>(<span class="params">proxy</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> ret = proxy <span class="keyword">instanceof</span> <span class="title class_">Array</span> ? <span class="keyword">new</span> <span class="title class_">Array</span>(proxy.<span class="property">length</span>) : &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> proxy) &#123;</span><br><span class="line"></span><br><span class="line">        ret\[key\] = <span class="title function_">toRef</span>(proxy, key)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æµ‹è¯•</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, toRefs &#125; <span class="keyword">from</span> <span class="string">&quot;../src/reactive.js&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> obj = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;å°æµª&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">22</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; name, age &#125; = <span class="title function_">toRefs</span>(obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br><span class="line">name.<span class="property">value</span> = <span class="string">&quot;å°äº‘&quot;</span>;</span><br><span class="line">age.<span class="property">value</span> = <span class="number">21</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æµ‹è¯•æˆåŠŸï¼ŒtoRefs è§£æ„åçš„å±æ€§ä¹Ÿæ˜¯å“åº”å¼</p>
</blockquote>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bd0857b0aa1341b590f7632cdeed8e64~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="image.png"></p>
<h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FLianTianNo1%2Fvue3_reactive_demo" title="https://github.com/LianTianNo1/vue3_reactive_demo">github</a></p>
<blockquote>
<p>ç»“è¯­: èº«è¾¹çš„å°ä¼™ä¼´ä»¬éƒ½åœ¨å‡†å¤‡ç§‹æ‹›ï¼Œè¿™æ®µæ—¶é—´é™¤äº†å®ä¹ ä¹‹å¤–çš„æ—¶é—´æˆ‘ä¹Ÿåœ¨æ…¢æ…¢å‡†å¤‡ï¼Œå¥½ä¹…æ²¡æ›´æ–‡äº†ï¼Œæ„Ÿè°¢å¤§å®¶ä¸€ç›´ä»¥æ¥å¯¹å°æµªçš„æ”¯æŒï¼Œç»§ç»­åŠ æ²¹åŠªåŠ›å­¦ä¹ ï¼ï¼ï¼</p>
</blockquote>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>å“åº”å¼åŸç†</tag>
        <tag>vue3</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‰‹æŠŠæ‰‹æ•™ä½ åœ¨Webpackå†™ä¸€ä¸ªLoader</title>
    <url>/xiaolangwiki/2022/05/22/26/</url>
    <content><![CDATA[<h2 id="æ‰‹æŠŠæ‰‹æ•™ä½ åœ¨-Webpack-å†™ä¸€ä¸ª-Loader"><a href="#æ‰‹æŠŠæ‰‹æ•™ä½ åœ¨-Webpack-å†™ä¸€ä¸ª-Loader" class="headerlink" title="æ‰‹æŠŠæ‰‹æ•™ä½ åœ¨ Webpack å†™ä¸€ä¸ª Loader"></a>æ‰‹æŠŠæ‰‹æ•™ä½ åœ¨ Webpack å†™ä¸€ä¸ª Loader</h2><p>åŸæ–‡ï¼š<a href="https://juejin.cn/post/7100534685134454815">https://juejin.cn/post/7100534685134454815</a></p>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ‰çš„æ—¶å€™ï¼Œä½ å¯èƒ½åœ¨ä»é›¶æ­å»º <code>Webpack</code> é¡¹ç›®å¾ˆç†Ÿæ‚‰ï¼Œé…ç½®è¿‡å„ç§ <code>loader</code> ,é¢è¯•å®˜åœ¨ <code>Webpack</code> æ–¹é¢é—®ä½ ï¼Œæ˜¯å¦è‡ªå·±å®ç°è¿‡ä¸€ä¸ª<code>loader</code>?å¦‚æœæ²¡æœ‰å»äº†è§£è¿‡å¦‚æœå»å®ç°ï¼Œç¡®å®æœ‰ç‚¹å°´å°¬ï¼Œå…¶å®å‘¢ï¼Œ<code>loader</code>å®ç°å…¶å®å¾ˆç®€å•çš„ã€‚ä¸‹é¢è¯´ä¸‹<code>loader</code>æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<h3 id="ä¸ºä»€ä¹ˆéœ€è¦-Loader"><a href="#ä¸ºä»€ä¹ˆéœ€è¦-Loader" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦ Loader?"></a>ä¸ºä»€ä¹ˆéœ€è¦ Loader?</h3><blockquote>
<p><code>Webpack</code> å®ƒåªèƒ½å¤„ç† <code>js</code> å’Œ <code>JSON</code> æ–‡ä»¶ã€‚é¢å¯¹ <code>css</code> æ–‡ä»¶è¿˜æœ‰ä¸€äº›å›¾ç‰‡ç­‰ç­‰ï¼Œ<code>Webpack</code> å®ƒè‡ªå·±æ˜¯ä¸èƒ½å¤Ÿå¤„ç†çš„ï¼Œå®ƒéœ€è¦<code>loader</code> å¤„ç†å…¶ä»–ç±»å‹çš„æ–‡ä»¶å¹¶å°†å®ƒä»¬è½¬æ¢ä¸ºæœ‰æ•ˆçš„æ¨¡å—ä»¥ä¾›åº”ç”¨ç¨‹åºä½¿ç”¨å¹¶æ·»åŠ åˆ°ä¾èµ–å…³ç³»å›¾ä¸­ï¼Œ</p>
</blockquote>
<h3 id="Loader-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Loader-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Loader æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Loader æ˜¯ä»€ä¹ˆï¼Ÿ</h3><blockquote>
<p><code>loader</code>æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª<code>node</code>æ¨¡å—ï¼Œç¬¦åˆ<code>Webpack</code>ä¸­ä¸€åˆ‡çš†æ¨¡å—çš„æ€æƒ³ã€‚ç”±äºå®ƒæ˜¯ä¸€ä¸ª <code>node</code> æ¨¡å—ï¼Œå®ƒå¿…é¡»å¯¼å‡ºä¸€äº›ä¸œè¥¿ã€‚<code>loader</code>æœ¬èº«å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¯¥å‡½æ•°ä¸­å¯¹æ¥æ”¶åˆ°çš„å†…å®¹è¿›è¡Œè½¬æ¢ï¼Œç„¶åè¿”å›è½¬æ¢åçš„ç»“æœ</p>
</blockquote>
<p>ä¸‹é¢å°æµªä¸ºä½ ç®€å•ä»‹ç»ä¸‹<code>webpack</code>ä¸­çš„<code>loader</code></p>
<h2 id="å¸¸è§çš„-loader"><a href="#å¸¸è§çš„-loader" class="headerlink" title="å¸¸è§çš„ loader"></a>å¸¸è§çš„ loader</h2><p>æˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸‹å¸¸è§çš„ <code>Loader</code> åŸºç¡€çš„é…ç½®å’Œä½¿ç”¨å§ï¼ˆä»…ä»…åªæ˜¯å¸¸è§çš„ï¼Œ<code>npm</code>ä¸Šé¢å¼€å‘è€…å¤§ä½¬ä»¬å‘å¸ƒçš„å¤ªå¤šäº†ï¼‰</p>
<p>é‚£ä¹ˆå¼€å§‹å§ï¼Œé¦–å…ˆå…ˆä»‹ç» å¤„ç† <code>CSS</code> ç›¸å…³çš„ <code>Loader</code></p>
<h3 id="css-loader-å’Œ-style-loader"><a href="#css-loader-å’Œ-style-loader" class="headerlink" title="css-loader å’Œ style-loader"></a>css-loader å’Œ style-loader</h3><blockquote>
<p>å®‰è£…ä¾èµ–</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install css-loader style-loader</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½¿ç”¨åŠ è½½å™¨</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: \[&#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\\.css$/</span>,</span><br><span class="line">            <span class="attr">use</span>: \[<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>\],</span><br><span class="line">        &#125;\],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;ï¼›</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­<code>module.rules</code>ä»£è¡¨æ¨¡å—çš„å¤„ç†è§„åˆ™ã€‚ æ¯ä¸ªè§„åˆ™å¯ä»¥åŒ…å«å¾ˆå¤šé…ç½®é¡¹</p>
<p><code>test</code> å¯ä»¥æ¥æ”¶æ­£åˆ™è¡¨è¾¾å¼æˆ–å…ƒç´ ä¸ºæ­£åˆ™è¡¨è¾¾å¼çš„æ•°ç»„ã€‚ åªæœ‰ä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„æ¨¡å—æ‰ä¼šä½¿ç”¨æ­¤è§„åˆ™ã€‚ åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œ<code>/\\.css$/</code> åŒ¹é…æ‰€æœ‰ä»¥ <code>.css</code> ç»“å°¾çš„æ–‡ä»¶ã€‚</p>
<p><code>use</code> å¯ä»¥æ¥æ”¶ä¸€ä¸ªåŒ…å«è§„åˆ™ä½¿ç”¨çš„åŠ è½½å™¨çš„æ•°ç»„ã€‚ å¦‚æœåªé…ç½®äº†ä¸€ä¸ª<code>css-loader</code>ï¼Œå½“åªæœ‰ä¸€ä¸ª<code>loader</code>æ—¶ä¹Ÿå¯ä»¥ä¸ºå­—ç¬¦ä¸²</p>
<p><code>css-loader</code> çš„ä½œç”¨åªæ˜¯å¤„ç† <code>CSS</code> çš„å„ç§åŠ è½½è¯­æ³•ï¼ˆ<code>@import</code> å’Œ <code>url()</code> å‡½æ•°ç­‰ï¼‰ï¼Œå¦‚æœæ ·å¼è¦å·¥ä½œï¼Œåˆ™éœ€è¦ <code>style-loader</code> å°†æ ·å¼æ’å…¥é¡µé¢</p>
<p><code>style-loader</code>åŠ åˆ°äº†<code>css-loader</code>å‰é¢ï¼Œè¿™æ˜¯å› ä¸ºåœ¨<code>Webpack</code>æ‰“åŒ…æ—¶æ˜¯æŒ‰ç…§æ•°ç»„ä»åå¾€å‰çš„é¡ºåºå°†èµ„æºäº¤ç»™<code>loader</code>å¤„ç†çš„ï¼Œå› æ­¤è¦æŠŠæœ€åç”Ÿæ•ˆçš„æ”¾åœ¨å‰é¢</p>
<blockquote>
<p>è¿˜å¯ä»¥è¿™æ ·å†™æˆå¯¹è±¡çš„å½¢å¼ï¼Œé‡Œé¢<code>options</code>ä¼ å…¥é…ç½®</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: \[&#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\\.css$/</span>,</span><br><span class="line">            <span class="attr">use</span>: \[</span><br><span class="line">                <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">                  &#123;</span><br><span class="line">                    <span class="attr">loader</span>: <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">                    <span class="attr">options</span>: &#123;</span><br><span class="line"></span><br><span class="line">                	&#125;,</span><br><span class="line">            	  &#125;</span><br><span class="line">            \],</span><br><span class="line">        &#125;\],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;ï¼›</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>exclude</code>ä¸<code>include</code></p>
<p><code>include</code>ä»£è¡¨è¯¥è§„åˆ™åªå¯¹æ­£åˆ™åŒ¹é…åˆ°çš„æ¨¡å—ç”Ÿæ•ˆ</p>
<p><code>exclude</code>çš„å«ä¹‰æ˜¯ï¼Œæ‰€æœ‰è¢«æ­£åˆ™åŒ¹é…åˆ°çš„æ¨¡å—éƒ½æ’é™¤åœ¨è¯¥è§„åˆ™ä¹‹å¤–</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">rules</span>: \[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\\.css$/</span>,</span><br><span class="line">        <span class="attr">use</span>: \[<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>\],</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">        <span class="attr">include</span>: <span class="regexp">/src/</span>,</span><br><span class="line">    &#125;</span><br><span class="line">\],</span><br></pre></td></tr></table></figure>
<p>æ˜¯å¦éƒ½è¿˜è®°å¾—å‘¢ï¼Œç°åœ¨æœ‰ç°æˆçš„è„šæ‰‹æ¶ï¼Œå¾ˆå¤šäººéƒ½å¾ˆå°‘è‡ªå·±å»é…ç½®è¿™äº›äº†ï¼Œæ¬¸~å½“ç„¶è¿˜æœ‰ç›¸å…³çš„ <code>sass/less</code>ç­‰ç­‰é¢„å¤„ç†å™¨<code>loader</code>è¿™é‡Œå°±ä¸ä¸€ä¸€ä»‹ç»äº†ã€‚</p>
<h3 id="babel-loader"><a href="#babel-loader" class="headerlink" title="babel-loader"></a>babel-loader</h3><p><code>babel-loader</code> è¿™ä¸ª<code>loader</code>ååˆ†çš„é‡è¦ï¼ŒæŠŠé«˜çº§è¯­æ³•è½¬ä¸º<code>ES5</code>ï¼Œå¸¸ç”¨äºå¤„ç† <code>ES6+</code> å¹¶å°†å…¶ç¼–è¯‘ä¸º <code>ES5</code>ã€‚ å®ƒå…è®¸æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä½¿ç”¨æœ€æ–°çš„è¯­è¨€ç‰¹æ€§ï¼ˆç”šè‡³åœ¨ææ¡ˆä¸­ï¼‰ï¼Œè€Œæ— éœ€ç‰¹åˆ«æ³¨æ„è¿™äº›ç‰¹æ€§åœ¨ä¸åŒå¹³å°ä¸Šçš„å…¼å®¹æ€§ã€‚</p>
<blockquote>
<p>ä»‹ç»ä¸‹ä¸»è¦çš„ä¸‰ä¸ªæ¨¡å—</p>
</blockquote>
<ul>
<li>babel-loaderï¼šä½¿ <code>Babel</code> ä¸ <code>Webpack</code> ä¸€èµ·å·¥ä½œçš„æ¨¡å—</li>
<li>@babel/coreï¼š<code>Babel</code>æ ¸å¿ƒæ¨¡å—ã€‚</li>
<li>@babel/preset-envï¼šæ˜¯<code>Babel</code>å®˜æ–¹æ¨èçš„<code>preseter</code>ï¼Œå¯ä»¥æ ¹æ®ç”¨æˆ·è®¾ç½®çš„ç›®æ ‡ç¯å¢ƒï¼Œè‡ªåŠ¨æ·»åŠ ç¼–è¯‘<code>ES6+</code>ä»£ç æ‰€éœ€çš„æ’ä»¶å’Œè¡¥ä¸</li>
</ul>
<blockquote>
<p>å®‰è£…</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install babel-loader @babel/core @babel/preset-env</span><br></pre></td></tr></table></figure>
<blockquote>
<p>é…ç½®</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">rules</span>: \[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\\.js$/</span>,</span><br><span class="line">    <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span>,</span><br><span class="line">    <span class="attr">use</span>: &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">cacheDirectory</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">presets</span>: \[\[</span><br><span class="line">          <span class="string">&#x27;env&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">modules</span>: <span class="literal">false</span>,</span><br><span class="line">          &#125;</span><br><span class="line">        \]\],</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">\],</span><br></pre></td></tr></table></figure>
<h3 id="html-loader"><a href="#html-loader" class="headerlink" title="html-loader"></a>html-loader</h3><p><code>Webpack</code> å¯ä¸è®¤è¯† <code>html</code>ï¼Œç›´æ¥æŠ¥é”™ï¼Œéœ€è¦<code>loader</code>è½¬åŒ–</p>
<p><code>html-loader</code> ç”¨äºå°† <code>HTML</code> æ–‡ä»¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²å¹¶è¿›è¡Œæ ¼å¼åŒ–ï¼Œå®ƒå…è®¸æˆ‘ä»¬é€šè¿‡ <code>JS</code> åŠ è½½ä¸€ä¸ª <code>HTML</code> ç‰‡æ®µã€‚</p>
<blockquote>
<p>å®‰è£…</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install html-loader</span><br></pre></td></tr></table></figure>
<blockquote>
<p>é…ç½®</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">rules</span>: \[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\\.html$/</span>,</span><br><span class="line">        <span class="attr">use</span>: <span class="string">&#x27;html-loader&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">\],</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> otherHtml <span class="keyword">from</span> <span class="string">&quot;./other.html&quot;</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>(otherHtml);</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä½ å¯ä»¥åœ¨ js ä¸­åŠ è½½å¦ä¸€ä¸ªé¡µé¢ï¼Œå†™åˆ€å½“å‰ index.html é‡Œé¢</p>
<h3 id="file-loader"><a href="#file-loader" class="headerlink" title="file-loader"></a>file-loader</h3><p>ç”¨äºæ‰“åŒ…æ–‡ä»¶ç±»å‹çš„èµ„æºï¼Œæ¯”å¦‚å¯¹<code>png</code>ã€<code>jpg</code>ã€<code>gif</code>ç­‰å›¾ç‰‡èµ„æºä½¿ç”¨<code>file-loader</code>ï¼Œç„¶åå°±å¯ä»¥åœ¨<code>JS</code>ä¸­åŠ è½½å›¾ç‰‡äº†</p>
<blockquote>
<p>å®‰è£…</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install file-loader</span><br></pre></td></tr></table></figure>
<blockquote>
<p>é…ç½®</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&#x27;./index.js&#x27;</span>,</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: \[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\\.(png|jpg|gif)$/</span>,</span><br><span class="line">                <span class="attr">use</span>: <span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        \],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;ï¼›</span><br></pre></td></tr></table></figure>
<h3 id="url-loader"><a href="#url-loader" class="headerlink" title="url-loader"></a>url-loader</h3><p>æ—¢ç„¶ä»‹ç»äº† <code>file-loader</code> å°±ä¸å¾—ä¸ä»‹ç» <code>url-loader</code>ï¼Œå®ƒä»¬å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯å”¯ä¸€çš„åŒºåˆ«æ˜¯ç”¨æˆ·å¯ä»¥è®¾ç½®æ–‡ä»¶å¤§å°é˜ˆå€¼ã€‚ å¤§äºé˜ˆå€¼æ—¶è¿”å›ä¸<code>file-loader</code>ç›¸åŒçš„<code>publicPath</code>ï¼Œå°äºé˜ˆå€¼æ—¶è¿”å›æ–‡ä»¶<code>base64</code>ç¼–ç ã€‚</p>
<blockquote>
<p>å®‰è£…</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install url-loader</span><br></pre></td></tr></table></figure>
<blockquote>
<p>é…ç½®</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">rules</span>: \[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\\.(png|jpg|gif)$/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">                <span class="attr">limit</span>: <span class="number">1024</span>,</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;\[name\].\[ext\]&#x27;</span>,</span><br><span class="line">                <span class="attr">publicPath</span>: <span class="string">&#x27;./assets/&#x27;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">\],</span><br></pre></td></tr></table></figure>
<h3 id="ts-loader"><a href="#ts-loader" class="headerlink" title="ts-loader"></a>ts-loader</h3><p><code>TypeScript</code>ä½¿ç”¨å¾—è¶Šæ¥è¶Šå¤šï¼Œå¯¹äºæˆ‘ä»¬å¹³æ—¶å†™ä»£ç æœ‰äº†æ›´å¥½çš„è§„èŒƒï¼Œé¡¹ç›®æ›´åŠ åˆ©äºç»´æŠ¤â€¦ç­‰ç­‰å¥½å¤„ï¼Œæˆ‘ä»¬ä¹Ÿåœ¨<code>Webpack</code>ä¸­æ¥é…ç½® loader,æœ¬è´¨ä¸Šç±»ä¼¼äº <code>babel-loader</code>ï¼Œæ˜¯ä¸€ä¸ªè¿æ¥ <code>Webpack</code> å’Œ <code>Typescript</code> çš„æ¨¡å—</p>
<blockquote>
<p>å®‰è£…</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install ts-loader typescript</span><br></pre></td></tr></table></figure>
<blockquote>
<p>loader é…ç½®ï¼Œä¸»è¦çš„é…ç½®è¿˜æ˜¯åœ¨ <code>tsconfig.json</code> ä¸­</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">rules</span>: \[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\\.ts$/</span>,</span><br><span class="line">        <span class="attr">use</span>: <span class="string">&#x27;ts-loader&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">\],</span><br></pre></td></tr></table></figure>
<h3 id="vue-loader"><a href="#vue-loader" class="headerlink" title="vue-loader"></a>vue-loader</h3><p>ç”¨æ¥å¤„ç†<code>vue</code>ç»„ä»¶,è¿˜è¦å®‰è£…<code>vue-template-compiler</code>æ¥ç¼–è¯‘<code>Vue</code>æ¨¡æ¿ï¼Œä¼°è®¡å¤§å®¶å¤§éƒ¨åˆ†éƒ½ç”¨è„šæ‰‹æ¶äº†</p>
<blockquote>
<p>å®‰è£…</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install vue-loader  vue-template-compiler</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">rules</span>: \[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\\.vue$/</span>,</span><br><span class="line">        <span class="attr">use</span>: <span class="string">&#x27;vue-loader&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">\],</span><br></pre></td></tr></table></figure>
<h2 id="å†™ä¸€ä¸ªç®€å•çš„-Loader"><a href="#å†™ä¸€ä¸ªç®€å•çš„-Loader" class="headerlink" title="å†™ä¸€ä¸ªç®€å•çš„ Loader"></a>å†™ä¸€ä¸ªç®€å•çš„ Loader</h2><p>ä»‹ç»äº†å‡ ä¸ªå¸¸è§çš„ loader çš„å®‰è£…é…ç½®ï¼Œæˆ‘ä»¬åœ¨å…·ä½“çš„ä¸šåŠ¡çš„å®ç°çš„æ—¶å€™ï¼Œå¯èƒ½é‡åˆ°å„ç§éœ€æ±‚ï¼Œä¸Šé¢ä»‹ç»çš„æˆ–è€… npm ä¸Šéƒ½æ²¡æœ‰çš„åŠ è½½å™¨éƒ½ä¸é€‚åˆå½“å‰çš„ä¸šåŠ¡åœºæ™¯ï¼Œé‚£æˆ‘ä»¬å¯ä»¥è‡ªå·±å»å®ç°ä¸€ä¸ªè‡ªå·±çš„<code>loader</code>æ¥æ»¡è¶³è‡ªå·±çš„éœ€æ±‚ï¼Œå°æµªä¸‹é¢ä»‹ç»ä¸€ä¸‹å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ª<code>loader</code></p>
<h3 id="1-åˆå§‹åŒ–é¡¹ç›®"><a href="#1-åˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="1.åˆå§‹åŒ–é¡¹ç›®"></a>1.åˆå§‹åŒ–é¡¹ç›®</h3><blockquote>
<p>åˆå§‹åŒ–é¡¹ç›®</p>
</blockquote>
<p>å…ˆåˆ›å»ºä¸€ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹ï¼ˆåå­—å¯ä»¥éšæ„ï¼Œå½“ç„¶è‚¯å®šæ˜¯è‹±æ–‡åï¼‰åè¿›è¡Œåˆå§‹åŒ–</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å®‰è£…ä¾èµ–</p>
</blockquote>
<p>å®‰è£…ä¾èµ–ï¼š <code>Webpack</code> å’Œ <code>Webpack</code>è„šæ‰‹æ¶ å’Œ çƒ­æ›´æ–°æœåŠ¡å™¨</p>
<p>ä¸åŒçš„ç‰ˆæœ¬ <code>Webpack</code> å¯èƒ½æœ‰äº›å·®å¼‚ï¼Œå¦‚æœä½ è·Ÿç€æˆ‘çš„è¿™ä¸ªä¾‹å­å†™çš„è¯ï¼Œå°æµªå»ºè®®å’Œæˆ‘è£…ä¸€æ ·çš„ç‰ˆæœ¬</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install webpack@4.39.2 webpack-cli@3.3.6 webpack-dev-server@3.11.0 -D</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ–°å»ºä¸€ä¸ª<code>index.html</code>æ–‡ä»¶</p>
</blockquote>
<p><code>dist/index.html</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ–°å»ºä¸€ä¸ªå…¥å£æ–‡ä»¶ <code>index.js</code> æ–‡ä»¶</p>
</blockquote>
<p><code>src/index.js</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&quot;hello world&quot;</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åˆ›å»º <code>webpack.config.js</code> é…ç½®æ–‡ä»¶</p>
</blockquote>
<p>é…ç½®å‡ºå£å’Œå…¥å£æ–‡ä»¶</p>
<p>é…ç½®<code>devServer</code>æœåŠ¡</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/index.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;bundle.js&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">contentBase</span>: <span class="string">&quot;./dist&quot;</span>,</span><br><span class="line">    <span class="attr">overlay</span>: &#123;</span><br><span class="line">      <span class="attr">warnings</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">errors</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨ <code>package.json</code> ä¸­é…ç½®å¯åŠ¨å‘½ä»¤</p>
</blockquote>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Webpack-dev-server&quot;</span></span><br><span class="line"> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¯åŠ¨ <code>npm run dev</code></p>
</blockquote>
<p><code>devServer</code>å¸®æˆ‘ä»¬å¯åŠ¨ä¸€ä¸ªæœåŠ¡å™¨ï¼Œæ¯æ¬¡ä¿®æ”¹<code>index.jsä¸</code>éœ€è¦è‡ªå·±åœ¨å»æ‰“åŒ…ï¼Œè€Œæ˜¯è‡ªåŠ¨å¸®æˆ‘ä»¬å®Œæˆè¿™é¡¹ä»»åŠ¡</p>
<p>é¡µé¢å†…å®¹å°±æ˜¯æˆ‘ä»¬<code>index.js</code>ç¼–å†™çš„å†…å®¹è¢«æ‰“åŒ…æˆåœ¨<code>dist/bundle.js</code>å¼•å…¥åˆ°<code>index.html</code>äº†</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/da2abd89712944d6a81877f7af8a6d54~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?" alt="image.png"></p>
<blockquote>
<p>å½“å‰çš„æ–‡ä»¶ç›®å½•</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Webpack-demo</span><br><span class="line"> â”œâ”€â”€ dist</span><br><span class="line"> â”‚   â””â”€â”€ index.html</span><br><span class="line"> â”œâ”€â”€ package-lock.json</span><br><span class="line"> â”œâ”€â”€ package.json</span><br><span class="line"> â”œâ”€â”€ src</span><br><span class="line"> â”‚   â””â”€â”€ index.js</span><br><span class="line"> â””â”€â”€ Webpack.config.js</span><br></pre></td></tr></table></figure>
<h3 id="2-å®ç°ä¸€ä¸ªç®€å•çš„-loader"><a href="#2-å®ç°ä¸€ä¸ªç®€å•çš„-loader" class="headerlink" title="2.å®ç°ä¸€ä¸ªç®€å•çš„ loader"></a>2.å®ç°ä¸€ä¸ªç®€å•çš„ loader</h3><blockquote>
<p>åœ¨ <code>src/MyLoader/my-loader.js</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">source</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> source.<span class="title function_">replace</span>(<span class="string">&quot;world&quot;</span>, <span class="string">&quot;, I am Xiaolang&quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>è¿”å›å…¶å®ƒç»“æœ <code>this.callback</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">callback</span>(</span><br><span class="line"></span><br><span class="line">    <span class="attr">err</span>: <span class="title class_">Error</span> | <span class="literal">null</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">content</span>: string | <span class="title class_">Buffer</span>,</span><br><span class="line"></span><br><span class="line">    sourceMap?: <span class="title class_">SourceMap</span>,</span><br><span class="line"></span><br><span class="line">    abstractSyntaxTree?: <span class="variable constant_">AST</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>æ‰“å¼€ä»£ç å¯¹åº”çš„<code>source-map</code>ï¼Œæ–¹ä¾¿è°ƒè¯•æºä»£ç ã€‚<code>source-map</code> å¯ä»¥æ–¹ä¾¿å®é™…å¼€å‘è€…åœ¨æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹æºä»£ç ã€‚ å¦‚æœä¸å¤„ç†<code>source-map</code>ï¼Œæœ€ç»ˆå°†æ— æ³•ç”Ÿæˆæ­£ç¡®çš„<code>map</code>æ–‡ä»¶ï¼Œåœ¨æµè§ˆå™¨çš„å¼€å‘å·¥å…·ä¸­å¯èƒ½ä¼šçœ‹åˆ°æ··ä¹±çš„æºä»£ç ã€‚</p>
<p>ä¸ºäº†åœ¨ä½¿ç”¨ <code>this.callback</code> è¿”å›å†…å®¹æ—¶å°† <code>source-map</code> è¿”å›ç»™ <code>Webpack</code></p>
<p><code>loader</code> å¿…é¡»è¿”å› <code>undefined</code> è®© <code>Webpack</code> çŸ¥é“ <code>loader</code> è¿”å›çš„ç»“æœåœ¨ <code>this.callback</code> ä¸­ï¼Œè€Œä¸æ˜¯åœ¨ <code>return</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">source, sourceMaps</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">callback</span>(<span class="literal">null</span>, source.<span class="title function_">replace</span>(<span class="string">&quot;world&quot;</span>, <span class="string">&quot;, I am Xiaolang&quot;</span>), sourceMaps);</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¸¸ç”¨åŠ è½½æœ¬åœ° <code>loader</code> ä¸¤ç§æ–¹å¼</p>
</blockquote>
<p>1.<code>path.resolve</code></p>
<p>ä½¿ç”¨ <code>path.resolve</code> æŒ‡å‘è¿™ä¸ªæœ¬åœ°æ–‡ä»¶</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: \[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\\.js$/</span>,</span><br><span class="line">                <span class="attr">use</span>: path.<span class="title function_">resolve</span>(<span class="string">&#x27;./src/myLoader/my-loader.js&#x27;</span>),</span><br><span class="line">            &#125;,</span><br><span class="line">        \],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.<code>ResolveLoader</code></p>
<p>å…ˆå» <code>node_modules</code> é¡¹ç›®ä¸‹å¯»æ‰¾ <code>my-loader</code>ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œä¼šå†å» <code>./src/myLoader/</code> ç›®å½•ä¸‹å¯»æ‰¾ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: \[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\\.js$/</span>,</span><br><span class="line">                <span class="attr">use</span>: \[<span class="string">&#x27;my-loader&#x27;</span>\],</span><br><span class="line">            &#125;,</span><br><span class="line">        \],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">resolveLoader</span>: &#123;</span><br><span class="line">        <span class="attr">modules</span>: \[<span class="string">&#x27;node_modules&#x27;</span>, <span class="string">&#x27;./src/myLoader&#x27;</span>\],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ª <code>loader</code>çš„èŒè´£æ˜¯å•ä¸€çš„ï¼Œä½¿æ¯ä¸ª<code>loader</code>æ˜“ç»´æŠ¤ã€‚</p>
<p>å¦‚æœæºæ–‡ä»¶éœ€è¦åˆ†å¤šæ­¥è½¬æ¢æ‰èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œé€šè¿‡å¤šä¸ª Loader è¿›è¡Œè½¬æ¢ã€‚å½“è°ƒç”¨å¤šä¸ª<code>loader</code>è¿›è¡Œæ–‡ä»¶è½¬æ¢æ—¶ï¼Œæ¯ä¸ª<code>loader</code>éƒ½ä¼šé“¾å¼æ‰§è¡Œã€‚</p>
<p>ç¬¬ä¸€ä¸ª<code>loader</code>ä¼šå¾—åˆ°è¦å¤„ç†çš„åŸå§‹å†…å®¹ï¼Œå°†å‰ä¸€ä¸ª loader å¤„ç†çš„ç»“æœä¼ é€’ç»™ä¸‹ä¸€ä¸ªã€‚ å¤„ç†å®Œæ¯•ï¼Œæœ€ç»ˆçš„ Loader ä¼šå°†å¤„ç†åçš„æœ€ç»ˆç»“æœè¿”å›ç»™ <code>Webpack</code></p>
<p>æ‰€ä»¥ï¼Œå½“ä½ å†™<code>loader</code>è®°å¾—ä¿æŒå®ƒçš„èŒè´£å•ä¸€ï¼Œä½ åªå…³å¿ƒè¾“å…¥å’Œè¾“å‡ºã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/96657df8c0484e4b9c915bbbb58fed5c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20220522142823507"></p>
<h3 id="3-optionå‚æ•°"><a href="#3-optionå‚æ•°" class="headerlink" title="3.optionå‚æ•°"></a>3.<code>option</code>å‚æ•°</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: \[</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\\.js$/</span>,</span><br><span class="line">            <span class="attr">use</span>: \[</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">loader</span>: <span class="string">&#x27;my-loader&#x27;</span>,</span><br><span class="line">                    <span class="attr">options</span>: &#123;</span><br><span class="line">                        <span class="attr">flag</span>: <span class="literal">true</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">            \],</span><br><span class="line">        &#125;,</span><br><span class="line">    \],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•åœ¨ loader ä¸­è·å–è¿™ä¸ªå†™å…¥é…ç½®ä¿¡æ¯å‘¢ï¼Ÿ</p>
<p><code>Webpack</code> æä¾›äº†<code>loader-utils</code>å·¥å…·</p>
<blockquote>
<p>åœ¨ä¹‹å‰å†™çš„ loader ä¿®æ”¹</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> loaderUtils = <span class="built_in">require</span>(<span class="string">&quot;loader-utils&quot;</span>);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">source</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> options = loaderUtils.<span class="title function_">getOptions</span>(<span class="variable language_">this</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;options--&gt;&quot;</span>, options);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> source.<span class="title function_">replace</span>(<span class="string">&quot;world&quot;</span>, <span class="string">&quot;, I am Xiaolang&quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>æ§åˆ¶å°ä¹Ÿæ‰“å°äº†å‡ºæ¥</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ff214671bba483da8487233a4c70357~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20220522143828316"></p>
<h3 id="4-ç¼“å­˜"><a href="#4-ç¼“å­˜" class="headerlink" title="4.ç¼“å­˜"></a>4.ç¼“å­˜</h3><p>å¦‚æœä¸ºæ¯ä¸ªæ„å»ºé‡æ–°æ‰§è¡Œé‡å¤çš„è½¬æ¢æ“ä½œï¼Œè¿™æ ·<code>Webpack</code>æ„å»ºå¯èƒ½ä¼šå˜å¾—éå¸¸æ…¢ã€‚</p>
<p><code>Webpack</code> é»˜è®¤ä¼šç¼“å­˜æ‰€æœ‰<code>loader</code>çš„å¤„ç†ç»“æœï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å¾…å¤„ç†çš„æ–‡ä»¶æˆ–è€…ä¾èµ–çš„æ–‡ä»¶æ²¡æœ‰å˜åŒ–æ—¶ï¼Œä¸ä¼šå†æ¬¡è°ƒç”¨å¯¹åº”çš„<code>loader</code>è¿›è¡Œè½¬æ¢æ“ä½œ</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">source</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">cacheable</span> &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">cacheable</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> source.<span class="title function_">replace</span>(<span class="string">&quot;world&quot;</span>, <span class="string">&quot;, I am Xiaolang&quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>ä¸€èˆ¬é»˜è®¤å¼€å¯ç¼“å­˜ï¼Œå¦‚æœä¸æƒ³<code>Webpack</code>è¿™ä¸ª<code>loader</code>è¿›è¡Œç¼“å­˜ï¼Œä¹Ÿå¯ä»¥å…³é—­ç¼“å­˜</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">source</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">cacheable</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> source.<span class="title function_">replace</span>(<span class="string">&quot;world&quot;</span>, <span class="string">&quot;, I am Xiaolang&quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="5-åŒæ­¥ä¸å¼‚æ­¥"><a href="#5-åŒæ­¥ä¸å¼‚æ­¥" class="headerlink" title="5.åŒæ­¥ä¸å¼‚æ­¥"></a>5.åŒæ­¥ä¸å¼‚æ­¥</h3><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè½¬æ¢æ­¥éª¤åªèƒ½å¼‚æ­¥å®Œæˆã€‚</p>
<p>ä¾‹å¦‚ï¼Œæ‚¨éœ€è¦å‘å‡ºç½‘ç»œè¯·æ±‚ä»¥è·å–ç»“æœã€‚ å¦‚æœä½¿ç”¨åŒæ­¥æ–¹å¼ï¼Œç½‘ç»œè¯·æ±‚ä¼šé˜»å¡æ•´ä¸ªæ„å»ºï¼Œå¯¼è‡´æ„å»ºéå¸¸ç¼“æ…¢ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">source</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> callback = <span class="variable language_">this</span>.<span class="title function_">async</span>();</span><br><span class="line"></span><br><span class="line">  <span class="title function_">someAsyncOperation</span>(source, <span class="keyword">function</span> (<span class="params">err, result, sourceMaps, ast</span>) &#123;</span><br><span class="line">    <span class="title function_">callback</span>(err, result, sourceMaps, ast);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="6-å¤„ç†äºŒè¿›åˆ¶æ•°æ®"><a href="#6-å¤„ç†äºŒè¿›åˆ¶æ•°æ®" class="headerlink" title="6.å¤„ç†äºŒè¿›åˆ¶æ•°æ®"></a>6.å¤„ç†äºŒè¿›åˆ¶æ•°æ®</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>Webpack</code> ä¼ é€’ç»™ <code>Loader</code> çš„åŸå§‹å†…å®¹æ˜¯ä¸€ä¸ª <code>UTF-8</code> æ ¼å¼ç¼–ç çš„å­—ç¬¦ä¸²ã€‚ ä½†æ˜¯åœ¨æŸäº›åœºæ™¯ä¸‹ï¼ŒåŠ è½½å™¨å¤„ç†çš„ä¸æ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œè€Œæ˜¯äºŒè¿›åˆ¶æ–‡ä»¶</p>
<p>å®˜ç½‘ä¾‹å­ é€šè¿‡ <code>exports.raw</code> å±æ€§å‘Šè¯‰ <code>Webpack</code> è¯¥ <code>Loader</code> æ˜¯å¦éœ€è¦äºŒè¿›åˆ¶æ•°æ®</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">source</span>) &#123;</span><br><span class="line">  source <span class="keyword">instanceof</span> <span class="title class_">Buffer</span> === <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> source;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>.<span class="property">raw</span> = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>
<h3 id="7-å®ç°ä¸€ä¸ªæ¸²æŸ“-markdown-æ–‡æ¡£-loader"><a href="#7-å®ç°ä¸€ä¸ªæ¸²æŸ“-markdown-æ–‡æ¡£-loader" class="headerlink" title="7.å®ç°ä¸€ä¸ªæ¸²æŸ“ markdown æ–‡æ¡£ loader"></a>7.å®ç°ä¸€ä¸ªæ¸²æŸ“ markdown æ–‡æ¡£ loader</h3><blockquote>
<p>å®‰è£…ä¾èµ– <code>md</code> è½¬ <code>html</code> çš„ä¾èµ–ï¼Œå½“ç„¶å¯ä»¥é€‰æ‹©å¦å¤–ä¸€ä¸ªæ¨¡å— <code>marked</code></p>
<p>æˆ‘è¿™é‡Œä½¿ç”¨çš„ <code>markdown-it</code></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install markdown-it@12.0.6 -D</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¾…åŠ©å·¥å…· ç”¨æ¥æ·»åŠ  <code>div</code> å’Œ <code>class</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> <span class="title function_">ModifyStructure</span>(<span class="params">html</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> htmlList = html</span><br><span class="line">    .<span class="title function_">replace</span>(<span class="regexp">/&lt;h3/g</span>, <span class="string">&quot;$*(&lt;h3&quot;</span>)</span><br><span class="line">    .<span class="title function_">replace</span>(<span class="regexp">/&lt;h2/g</span>, <span class="string">&quot;$*(&lt;h2&quot;</span>)</span><br><span class="line">    .<span class="title function_">split</span>(<span class="string">&quot;$*(&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> htmlList</span><br><span class="line">    .<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (item.<span class="title function_">indexOf</span>(<span class="string">&quot;&lt;h3&quot;</span>) !== -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`&lt;div class=&quot;card card-3&quot;&gt;<span class="subst">$&#123;item&#125;</span>&lt;/div&gt;`</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (item.<span class="title function_">indexOf</span>(<span class="string">&quot;&lt;h2&quot;</span>) !== -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`&lt;div class=&quot;card card-2&quot;&gt;<span class="subst">$&#123;item&#125;</span>&lt;/div&gt;`</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> item;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ–°å»ºä¸€ä¸ª loader</p>
</blockquote>
<p><code>/src/myLoader/md-loader.js</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; getOptions &#125; = <span class="built_in">require</span>(<span class="string">&#x27;loader-utils&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MarkdownIt</span> = <span class="built_in">require</span>(<span class="string">&#x27;markdown-it&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> beautify = <span class="built_in">require</span>(<span class="string">&#x27;./beautify&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">source</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> options = <span class="title function_">getOptions</span>(<span class="variable language_">this</span>) || &#123;&#125;</span><br><span class="line">    <span class="keyword">const</span> md = <span class="keyword">new</span> <span class="title class_">MarkdownIt</span>(&#123;</span><br><span class="line">        <span class="attr">html</span>: <span class="literal">true</span>,</span><br><span class="line">        ...options,</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">let</span> html = <span class="title function_">beautify</span>(md.<span class="title function_">render</span>(source))</span><br><span class="line">    html = \<span class="string">`module.exports = <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(html)&#125;</span>\`</span></span><br><span class="line"><span class="string">    this.callback(null, html)</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·<code>loader</code>ä¹Ÿå†™å®Œäº†ï¼Œ<code>this.callback(null, html)</code> å’Œ <code>return</code> åœ¨è¿™é‡Œå·®ä¸å¤šå“ˆã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">html = \<span class="string">`module.exports = <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(html)&#125;</span>\`</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œè§£æçš„ç»“æœæ˜¯ä¸€ä¸ª <code>HTML</code> å­—ç¬¦ä¸²ã€‚ å¦‚æœç›´æ¥è¿”å›ï¼Œä¹Ÿä¼šé¢ä¸´<code>Webpack</code>æ— æ³•è§£ææ¨¡å—çš„é—®é¢˜ã€‚ æ­£ç¡®çš„åšæ³•æ˜¯æŠŠè¿™ä¸ª<code>HTML</code>å­—ç¬¦ä¸²æ‹¼æ¥æˆä¸€æ®µ<code>JS</code>ä»£ç ã€‚</p>
<p>è¿™æ—¶å€™æˆ‘ä»¬è¦è¿”å›çš„ä»£ç å°±æ˜¯é€šè¿‡<code>module.exports</code>å¯¼å‡ºè¿™ä¸ª<code>HTML</code>å­—ç¬¦ä¸²ï¼Œè¿™æ ·å¤–ç•Œåœ¨å¯¼å…¥æ¨¡å—çš„æ—¶å€™å°±å¯ä»¥æ¥æ”¶åˆ°è¿™ä¸ª<code>HTML</code>å­—ç¬¦ä¸²ã€‚</p>
<blockquote>
<p>ç„¶ååœ¨<code>webpack.config.js</code>ä½¿ç”¨è¿™ä¸ªåŠ è½½å™¨</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">path</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: \[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\\.js$/</span>,</span><br><span class="line">                <span class="attr">use</span>: \[</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">loader</span>: <span class="string">&#x27;my-loader&#x27;</span>,</span><br><span class="line">                        <span class="attr">options</span>: &#123;</span><br><span class="line">                            <span class="attr">flag</span>: <span class="literal">true</span>,</span><br><span class="line">                        &#125;,</span><br><span class="line">                    &#125;,</span><br><span class="line">                \],</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\\.md$/</span>,</span><br><span class="line">                <span class="attr">use</span>: \[</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">loader</span>: <span class="string">&#x27;md-loader&#x27;</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                \],</span><br><span class="line">            &#125;,</span><br><span class="line">        \],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">resolveLoader</span>: &#123;</span><br><span class="line">        <span class="attr">modules</span>: \[<span class="string">&#x27;node_modules&#x27;</span>, <span class="string">&#x27;./src/myLoader&#x27;</span>\],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">devServer</span>: &#123;</span><br><span class="line">        <span class="attr">contentBase</span>: <span class="string">&#x27;./dist&#x27;</span>,</span><br><span class="line">        <span class="attr">overlay</span>: &#123;</span><br><span class="line">            <span class="attr">warnings</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">errors</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½¿ç”¨</p>
<p>æœ€ååœ¨<code>index.js</code>ä¸­åŠ è½½ä¸€ä¸ª<code>md</code>æ–‡ä»¶ï¼Œæˆ‘è¿™é‡Œéšä¾¿æ•´ä¸ªï¼Œæ–°å»º<code>github</code>çš„<code>readme.md</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> mdHtml <span class="keyword">from</span> <span class="string">&quot;./test.md&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> content = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">content.<span class="property">className</span> = <span class="string">&quot;content&quot;</span>;</span><br><span class="line">content.<span class="property">innerHTML</span> = mdHtml;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(content);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç»“æœå›¾</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9a4ced26d90c4fb0b91e484856af5019~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20220522165928553"></p>
<blockquote>
<p>ç›®å½•ç»“æ„</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Webpack-demo</span><br><span class="line"> â”œâ”€â”€ dist</span><br><span class="line"> â”‚   â””â”€â”€ index.html</span><br><span class="line"> â”œâ”€â”€ package-lock.json</span><br><span class="line"> â”œâ”€â”€ package.json</span><br><span class="line"> â”œâ”€â”€ src</span><br><span class="line"> â”‚   â”œâ”€â”€ index.js</span><br><span class="line"> â”‚   â”œâ”€â”€ myLoader</span><br><span class="line"> â”‚   â”‚   â”œâ”€â”€ beautify.js</span><br><span class="line"> â”‚   â”‚   â”œâ”€â”€ md-loader.js</span><br><span class="line"> â”‚   â”‚   â””â”€â”€ my-loader.js</span><br><span class="line"> â”‚   â””â”€â”€ test.md</span><br><span class="line"> â””â”€â”€ webpack.config.js</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FLianTianNo1%2Fwebpack-loader-demo" title="https://github.com/LianTianNo1/webpack-loader-demo">github ä»“åº“åœ°å€</a></p>
</blockquote>
<h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>æ„Ÿè°¢å¤§å®¶èƒ½çœ‹åˆ°è¿™é‡Œå“ˆ~ ï¼Œç°åœ¨æ‰“åŒ…æ„å»ºå·¥å…·ä¹Ÿæ…¢æ…¢å¢å¤šäº†<code>vue-cli</code>ï¼Œ<code>vite</code>ç­‰ç­‰ï¼Œä½†æ˜¯ <code>webpack</code> ä»ç„¶æœ‰ä¸€å¸­ä¹‹åœ°ï¼Œå¾ˆå¤šå€¼å¾—å­¦ä¹ çš„åœ°æ–¹ï¼Œç»§ç»­åŠªåŠ›å­¦ä¹ ~~</p>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>webpack</tag>
        <tag>loader</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‰“å°æ’ç‰ˆå°æŠ€å·§ï¼šptã€pxã€mm ä¹‹é—´çš„ç¥ç§˜è½¬æ¢ ğŸª„</title>
    <url>/xiaolangwiki/2024/07/23/26/</url>
    <content><![CDATA[<h2 id="æ‰“å°æ’ç‰ˆå°æŠ€å·§ï¼šptã€pxã€mm-ä¹‹é—´çš„ç¥ç§˜è½¬æ¢-ğŸª„"><a href="#æ‰“å°æ’ç‰ˆå°æŠ€å·§ï¼šptã€pxã€mm-ä¹‹é—´çš„ç¥ç§˜è½¬æ¢-ğŸª„" class="headerlink" title="æ‰“å°æ’ç‰ˆå°æŠ€å·§ï¼šptã€pxã€mm ä¹‹é—´çš„ç¥ç§˜è½¬æ¢ ğŸª„"></a>æ‰“å°æ’ç‰ˆå°æŠ€å·§ï¼šptã€pxã€mm ä¹‹é—´çš„ç¥ç§˜è½¬æ¢ ğŸª„</h2><p>åŸæ–‡ï¼š<a href="https://juejin.cn/post/7394652965908693043">https://juejin.cn/post/7394652965908693043</a></p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°æµªï¼Œå‰å‡ å¤©åœ¨ä¿®æ”¹ä¸€ä¸ªæ‰“å°åŠŸèƒ½çš„ bug çš„æ—¶å€™ï¼Œçªç„¶å‘ç°äº†ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜ï¼šæ‰“å°å‡ºæ¥çš„æ–‡å­—å®½åº¦å’Œé¢„æœŸä¸ç¬¦ï¼Œå¯¼è‡´æ’ç‰ˆé”™ä¹±ï¼Œéœ€è¦é‡æ–°æ¢è¡Œã€‚</p>
<p>ä»”ç»†æŸ¥çœ‹ä»£ç ï¼Œå‘ç°ä¹‹å‰åŒäº‹ä»¬æ˜¯æ ¹æ®æ¯ä¸ªå­—ç¬¦çš„ç±»å‹æ‰‹åŠ¨è®¾ç½®äº†ä¸€ä¸ªå¤§æ¦‚çš„å®½åº¦ï¼Œè¿™æ˜¾ç„¶ä¸å¤Ÿç²¾ç¡®ï¼Œå°¤å…¶æ˜¯åœ¨æ¶‰åŠåˆ°ä¸åŒå­—ä½“ã€ä¸åŒå­—å·çš„æ—¶å€™ï¼Œè¿™ç§æ–¹æ³•å¾ˆå®¹æ˜“å‡ºç°é—®é¢˜ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å†³å®šæ·±å…¥ç ”ç©¶ä¸€ä¸‹æ‰“å°æ’ç‰ˆä¸­å¸¸ç”¨çš„å•ä½ï¼š<strong>ptã€px å’Œ mm</strong>ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„è½¬æ¢å…³ç³»ã€‚</p>
<h3 id="ptã€pxã€mm-æ˜¯ä»€ä¹ˆï¼Ÿ-ğŸ¤”"><a href="#ptã€pxã€mm-æ˜¯ä»€ä¹ˆï¼Ÿ-ğŸ¤”" class="headerlink" title="ptã€pxã€mm æ˜¯ä»€ä¹ˆï¼Ÿ ğŸ¤”"></a>ptã€pxã€mm æ˜¯ä»€ä¹ˆï¼Ÿ ğŸ¤”</h3><ul>
<li><strong>pt (point)</strong>ï¼šç‚¹ï¼Œæ˜¯å°åˆ·æœ¯è¯­ä¸­å¸¸ç”¨çš„å•ä½ï¼Œ1pt ç­‰äº 1/72 è‹±å¯¸ã€‚åœ¨ç½‘é¡µè®¾è®¡ä¸­ï¼Œpt ä¸»è¦ç”¨äºè®¾ç½®å­—ä½“å¤§å°ã€‚</li>
<li><strong>px (pixel)</strong>ï¼šåƒç´ ï¼Œæ˜¯å±å¹•ä¸Šæœ€å°çš„æ˜¾ç¤ºå•å…ƒã€‚åœ¨ç½‘é¡µè®¾è®¡ä¸­ï¼Œpx æ˜¯æœ€å¸¸ç”¨çš„é•¿åº¦å•ä½ï¼Œç”¨äºè®¾ç½®å…ƒç´ çš„å®½åº¦ã€é«˜åº¦ã€è¾¹è·ç­‰ã€‚</li>
<li><strong>mm (millimeter)</strong>ï¼šæ¯«ç±³ï¼Œæ˜¯å›½é™…é€šç”¨çš„é•¿åº¦å•ä½ã€‚åœ¨æ‰“å°è®¾è®¡ä¸­ï¼Œmm æ˜¯å¸¸ç”¨çš„å•ä½ï¼Œç”¨äºè®¾ç½®çº¸å¼ å¤§å°ã€è¾¹è·ç­‰ã€‚</li>
</ul>
<h3 id="å¦‚ä½•è½¬æ¢å®ƒä»¬ï¼Ÿ-ğŸ”„"><a href="#å¦‚ä½•è½¬æ¢å®ƒä»¬ï¼Ÿ-ğŸ”„" class="headerlink" title="å¦‚ä½•è½¬æ¢å®ƒä»¬ï¼Ÿ ğŸ”„"></a>å¦‚ä½•è½¬æ¢å®ƒä»¬ï¼Ÿ ğŸ”„</h3><p>åœ¨è¿‡å»ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“è®¾å¤‡çš„ <strong>dpi (dots per inch)</strong>ï¼Œä¹Ÿå°±æ˜¯æ¯è‹±å¯¸çš„åƒç´ å¯†åº¦ï¼Œæ‰èƒ½å‡†ç¡®åœ°å°† ptã€px å’Œ mm ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¦‚æœè®¾å¤‡çš„ dpi æ˜¯ 300ï¼Œé‚£ä¹ˆ 1pt å°±ç­‰äº 300 / 72 = 4.17 pxã€‚</p>
<p>ä½†æ˜¯ï¼Œè¿™ç§æ–¹æ³•æ¯”è¾ƒéº»çƒ¦ï¼Œè€Œä¸”éœ€è¦æ ¹æ®ä¸åŒçš„è®¾å¤‡è¿›è¡Œè°ƒæ•´ã€‚</p>
<p>å¥½åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨æµè§ˆå™¨æä¾›çš„ API æ¥ç›´æ¥è·å– ptã€px å’Œ mm ä¹‹é—´çš„è½¬æ¢å…³ç³»ï¼Œçœå»äº†å¾ˆå¤šéº»çƒ¦ã€‚</p>
<h3 id="åˆ©ç”¨æµè§ˆå™¨-API-å®ç°è½¬æ¢-ğŸ’»"><a href="#åˆ©ç”¨æµè§ˆå™¨-API-å®ç°è½¬æ¢-ğŸ’»" class="headerlink" title="åˆ©ç”¨æµè§ˆå™¨ API å®ç°è½¬æ¢ ğŸ’»"></a>åˆ©ç”¨æµè§ˆå™¨ API å®ç°è½¬æ¢ ğŸ’»</h3><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ JavaScript å’Œ DOM API æ¥å®ç° ptã€px å’Œ mm ä¹‹é—´çš„è½¬æ¢ã€‚</p>
<p><strong>1. è·å–æ¯æ¯«ç±³çš„åƒç´ å€¼</strong></p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è·å–å½“å‰è®¾å¤‡æ¯æ¯«ç±³çš„åƒç´ å€¼ã€‚æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª 1mm å®½çš„ div å…ƒç´ ï¼Œæ’å…¥åˆ°é¡µé¢ä¸­ï¼Œç„¶åè·å–å®ƒçš„å®½åº¦ï¼Œå°±å¯ä»¥å¾—åˆ°æ¯æ¯«ç±³çš„åƒç´ å€¼ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> cachedMmPx = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getOneMmsPx</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (cachedMmPx !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> cachedMmPx;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> div = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">  div.<span class="property">style</span>.<span class="property">width</span> = <span class="string">&quot;1mm&quot;</span>;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(div);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; width &#125; = div.<span class="title function_">getBoundingClientRect</span>();</span><br><span class="line">  <span class="keyword">const</span> mm1 = <span class="title class_">Math</span>.<span class="title function_">floor</span>(width * <span class="number">100</span>) / <span class="number">100</span>;</span><br><span class="line">  div.<span class="title function_">remove</span>();</span><br><span class="line"></span><br><span class="line">  cachedMmPx = mm1;</span><br><span class="line">  <span class="keyword">return</span> mm1;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>2. å°† px è½¬æ¢ä¸º mm</strong></p>
<p>æœ‰äº†æ¯æ¯«ç±³çš„åƒç´ å€¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°† px è½¬æ¢ä¸º mm äº†ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">pxToMm</span> = (<span class="params">px</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> mmPerPx = <span class="number">1</span> / <span class="title function_">getOneMmsPx</span>();</span><br><span class="line">  <span class="keyword">return</span> px * mmPerPx;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>3. è·å–æ¯ pt çš„åƒç´ å€¼</strong></p>
<p>ç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª 1pt å®½çš„ div å…ƒç´ ï¼Œè·å–å®ƒçš„å®½åº¦ï¼Œå°±å¯ä»¥å¾—åˆ°æ¯ pt çš„åƒç´ å€¼ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> cachedPtPx = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getOnePtPx</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (cachedPtPx !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> cachedPtPx;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> div = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">  div.<span class="property">style</span>.<span class="property">width</span> = <span class="string">&quot;1pt&quot;</span>;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(div);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; width &#125; = div.<span class="title function_">getBoundingClientRect</span>();</span><br><span class="line">  <span class="keyword">const</span> pt1 = <span class="title class_">Math</span>.<span class="title function_">floor</span>(width * <span class="number">100</span>) / <span class="number">100</span>;</span><br><span class="line">  div.<span class="title function_">remove</span>();</span><br><span class="line"></span><br><span class="line">  cachedPtPx = pt1;</span><br><span class="line">  <span class="keyword">return</span> pt1;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>4. å°† pt è½¬æ¢ä¸º px</strong></p>
<p>æœ‰äº†æ¯ pt çš„åƒç´ å€¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°† pt è½¬æ¢ä¸º px äº†ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">ptToPx</span> = (<span class="params">pt</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> pxPerPt = <span class="title function_">getOnePtPx</span>();</span><br><span class="line">  <span class="keyword">return</span> pt * pxPerPt;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>5. æˆ‘å®é™…ç”¨åˆ°çš„ä»£ç è·å–æŒ‡å®šå­—ç¬¦çš„ mm å®½åº¦</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getCharWidthInMm</span> = (<span class="params">char, ptSize = <span class="number">10.5</span>, fontFamily = <span class="string">&quot;å®‹ä½“&quot;</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;canvas&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span> (!ctx) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ctx.<span class="property">font</span> = <span class="string">`<span class="subst">$&#123;ptToPx(ptSize)&#125;</span>px <span class="subst">$&#123;fontFamily&#125;</span>`</span>;</span><br><span class="line">  <span class="keyword">const</span> &#123; width &#125; = ctx.<span class="title function_">measureText</span>(char);</span><br><span class="line">  <span class="keyword">const</span> mmWidth = <span class="title function_">pxToMm</span>(width);</span><br><span class="line"></span><br><span class="line">  canvas.<span class="title function_">remove</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">floor</span>(mmWidth * <span class="number">10000</span>) / <span class="number">10000</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="è§£å†³æ‰“å°æ’ç‰ˆé—®é¢˜-ğŸš€"><a href="#è§£å†³æ‰“å°æ’ç‰ˆé—®é¢˜-ğŸš€" class="headerlink" title="è§£å†³æ‰“å°æ’ç‰ˆé—®é¢˜ ğŸš€"></a>è§£å†³æ‰“å°æ’ç‰ˆé—®é¢˜ ğŸš€</h3><p>æœ‰äº†è¿™äº›ä»£ç ï¼Œæˆ‘å°±å¯ä»¥è½»æ¾åœ°å°†æ¨¡æ¿ä¸Šçš„ pt å€¼è½¬æ¢ä¸º mmï¼Œä»è€Œåˆ¤æ–­å­—ç¬¦æ˜¯å¦è¶…å‡ºé¢„è®¾çš„èŒƒå›´ï¼Œè§£å†³æ‰“å°æ’ç‰ˆé”™ä¹±çš„é—®é¢˜ã€‚</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>åœ¨è§£å†³æ‰“å°æ’ç‰ˆé—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘åœ¨ç½‘ä¸ŠæŸ¥è¯¢äº† ptã€px å’Œ mm ä¹‹é—´çš„è½¬æ¢å…³ç³»ï¼Œæ¶‰åŠåˆ°æ¯”å€¼è®¡ç®—ã€DPI ç­‰ï¼Œè®¤ä¸ºæ— æ³•å¯¹æ¯ä¸ªè®¾å¤‡éƒ½é€‚é…ï¼Œäºæ˜¯åˆ©ç”¨æµè§ˆå™¨ API å®ç°äº†ä¸€å¥—è½¬æ¢å·¥å…·ã€‚</p>
<p>å·¥ä½œä¸­ç»å¸¸ä¼šé‡åˆ°ä¸€äº›çœ‹ä¼¼å¤æ‚çš„é—®é¢˜ï¼Œä½†é€šè¿‡æ·±å…¥ç ”ç©¶å’Œæ¢ç´¢ï¼Œå¾€å¾€å¯ä»¥æ‰¾åˆ°ç®€å•æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚å¸Œæœ›æˆ‘çš„ç»éªŒèƒ½å¤Ÿå¸®åŠ©åˆ°å¤§å®¶ï¼Œä¹Ÿå¸Œæœ›å¤§å®¶åœ¨å·¥ä½œä¸­é‡åˆ°æœ‰è¶£çš„é—®é¢˜æ—¶ï¼Œå¯ä»¥åƒæˆ‘ä¸€æ ·è®°å½•ä¸‹æ¥ï¼Œå¹¶ä¸å¤§å®¶åˆ†äº«ï¼</p>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>æ‰“å°æ’ç‰ˆ</tag>
        <tag>å•ä½è½¬æ¢</tag>
      </tags>
  </entry>
  <entry>
    <title>è¿˜ä¸ä¼šTSï¼Ÿå¸¦ä½ TypeScriptå¿«é€Ÿå…¥é—¨TS</title>
    <url>/xiaolangwiki/2021/08/23/10/</url>
    <content><![CDATA[<h2 id="è¿˜ä¸ä¼šTSï¼Ÿ-å¸¦ä½ -TypeScript-å¿«é€Ÿå…¥é—¨TS"><a href="#è¿˜ä¸ä¼šTSï¼Ÿ-å¸¦ä½ -TypeScript-å¿«é€Ÿå…¥é—¨TS" class="headerlink" title="è¿˜ä¸ä¼šTSï¼Ÿ å¸¦ä½  TypeScript å¿«é€Ÿå…¥é—¨TS"></a>è¿˜ä¸ä¼šTSï¼Ÿ å¸¦ä½  TypeScript å¿«é€Ÿå…¥é—¨TS</h2><p>åŸæ–‡ï¼š<a href="https://juejin.cn/post/6999440503712251935">https://juejin.cn/post/6999440503712251935</a></p>
<blockquote>
<p>å‰è¨€</p>
</blockquote>
<p>TS ç°åœ¨ä½¿ç”¨åœ°è¶Šæ¥è¶Šå¤šï¼Œå­¦è®¡ç®—æœºçš„å°±å¾—ä¸æ–­çš„å­¦ä¹ ï¼Œæ‰èƒ½æ›´å¥½çš„è¿½é€è¿™ä¸ªæ—¶ä»£ï¼Œè¿™æ˜¯å°æµªä»¥å‰å­¦ä¹ TSæ—¶å€™çš„æ€»ç»“ï¼Œèƒ½å¿«é€Ÿçš„å¸®åŠ©å¤§å®¶å…¥é—¨ TSï¼Œè¿™é‡Œåˆ—ä¸¾ä¸æ˜¯å¾ˆå…¨åˆ—ä¸¾ä¸€äº›å¸¸ç”¨çš„ï¼Œä½†æ˜¯èƒ½æ»¡è¶³å¹³æ—¶çš„éœ€æ±‚ï¼Œå…·ä½“çš„å¯ä»¥çœ‹å®˜æ–¹çš„æ–‡æ¡£å“ˆï¼Œè¿™é‡Œåªæ˜¯ç®€å•çš„å…¥é—¨ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©åˆ°å¤§å®¶</p>
<blockquote>
<p>å¾€æœŸç²¾å½©ï¼š</p>
<p><a href="https://juejin.cn/post/6994337441314242590" title="https://juejin.cn/post/6994337441314242590">å¿«é€Ÿä¸Šæ‰‹Vuex åˆ° æ‰‹å†™ç®€æ˜“ Vuex</a></p>
<p><a href="https://juejin.cn/post/6990582632270528525" title="https://juejin.cn/post/6990582632270528525">ä»äº†è§£åˆ°æ·±å…¥è™šæ‹ŸDOMå’Œå®ç°diffç®—æ³•</a></p>
<p><a href="https://juejin.cn/post/6989106100582744072" title="https://juejin.cn/post/6989106100582744072">æ‰‹å†™ä¸€ä¸ªç®€æ˜“vueå“åº”å¼å¸¦ä½ äº†è§£å“åº”å¼åŸç†</a></p>
<p><a href="https://juejin.cn/post/6988316779818778631" title="https://juejin.cn/post/6988316779818778631">ä»ä½¿ç”¨åˆ°è‡ªå·±å®ç°ç®€å•Vue Routerçœ‹è¿™ä¸ªå°±è¡Œäº†</a></p>
<p><a href="https://juejin.cn/post/6983934602196811789" title="https://juejin.cn/post/6983934602196811789">å‰ç«¯é¢è¯•å¿…ä¸å¯å°‘çš„åŸºç¡€çŸ¥è¯†ï¼Œè™½ç„¶å°‘ä½†æ˜¯ä½ ä¸èƒ½ä¸çŸ¥é“</a></p>
</blockquote>
<h2 id="1-å®‰è£…"><a href="#1-å®‰è£…" class="headerlink" title="1.å®‰è£…"></a>1.å®‰è£…</h2><p><code>TS</code> çš„ä¼˜ç‚¹å’Œç¼ºç‚¹å°±ä¸ä¸€ä¸€èµ˜è¿°äº†ï¼Œä¸‹é¢ç›´æ¥è¿›å…¥æ­£é¢˜</p>
<blockquote>
<p>è¿›è¡Œå…¨å±€å®‰è£…</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g typescript</span><br></pre></td></tr></table></figure>
<h2 id="2-åŸå§‹æ•°æ®ç±»å‹"><a href="#2-åŸå§‹æ•°æ®ç±»å‹" class="headerlink" title="2.åŸå§‹æ•°æ®ç±»å‹"></a>2.åŸå§‹æ•°æ®ç±»å‹</h2><p>æ˜é‡‘ä»£ç é«˜äº®æˆ‘è§‰å¾—å’Œä¸»é¢˜æœ‰å†²çªï¼Œè¿™é‡Œä»£ç ä»£ç éƒ½æ˜¯æ¯”è¾ƒç®€å•ï¼Œæˆ‘å°±ç›´æ¥æˆªå›¾äº†å“ˆ</p>
<blockquote>
<p>æˆ‘ä»¬åœ¨å˜é‡åé¢æ·»åŠ  <code>: ç±»å‹</code> å°±å¯ä»¥è§„å®šæ•°æ®çš„ç±»å‹ï¼Œè®¾ç½®å…¶ä»–ç±»å‹å°±ä¼šæŠ¥é”™</p>
<p>æˆ‘ä»¬è¿™é‡Œå…ˆæ¥äº†è§£ä¸‹åŸºç¡€çš„ç±»å‹</p>
</blockquote>
<h3 id="1-å­—ç¬¦ä¸²-string"><a href="#1-å­—ç¬¦ä¸²-string" class="headerlink" title="1.å­—ç¬¦ä¸² string"></a>1.å­—ç¬¦ä¸² <code>string</code></h3><blockquote>
<p>åŒå¼•å·ï¼ˆ<code>&quot;</code>ï¼‰æˆ–å•å¼•å·ï¼ˆ<code>&#39;</code>ï¼‰è¡¨ç¤ºå­—ç¬¦ä¸²</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/41ea8b9ef5f1447a8a247fb03764c170~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809093951818"></p>
<h3 id="2-æ•°å­—-number"><a href="#2-æ•°å­—-number" class="headerlink" title="2.æ•°å­— number"></a>2.æ•°å­— <code>number</code></h3><blockquote>
<p>æ”¯æŒ å/åå…­/äºŒ/å…« è¿›åˆ¶</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/55a20a97c3b6463ca7e278c7330620da~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809094238590"></p>
<h3 id="3-å¸ƒå°”-boolean"><a href="#3-å¸ƒå°”-boolean" class="headerlink" title="3.å¸ƒå°” boolean"></a>3.å¸ƒå°” <code>boolean</code></h3><blockquote>
<p>åªèƒ½æ˜¯ <code>true</code>/<code>false</code></p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/68898b41d2a248aa9c6b6afa39fe8bad~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809094357439"></p>
<h3 id="4-undefined"><a href="#4-undefined" class="headerlink" title="4.undefined"></a>4.<code>undefined</code></h3><blockquote>
<p>ç”¨å¤„ä¸æ˜¯å¾ˆå¤§</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b4adbd43b75849fc9d01b4a6008e9da7~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809094430315"></p>
<h3 id="5-null"><a href="#5-null" class="headerlink" title="5.null"></a>5.<code>null</code></h3><blockquote>
<p>ç”¨å¤„ä¸æ˜¯å¾ˆå¤§</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/16172c44cf944880b314d28b20470663~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809094458172"></p>
<h3 id="6-ç©º-void"><a href="#6-ç©º-void" class="headerlink" title="6.ç©º void"></a>6.ç©º <code>void</code></h3><blockquote>
<p>æ²¡æœ‰ä»»ä½•ç±»å‹ï¼Œå‡½æ•°çš„æ²¡ç”¨è¿”å›å€¼çš„ä½¿ç”¨ <code>void</code> ,è¿”å›å€¼ä¸ºç©ºï¼ˆ <code>undefined</code> ï¼‰</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/534b91390cb1492bbc462b152d5682d7~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210810194819203"></p>
<h3 id="7-ä»»æ„ç±»å‹-any"><a href="#7-ä»»æ„ç±»å‹-any" class="headerlink" title="7.ä»»æ„ç±»å‹ any"></a>7.ä»»æ„ç±»å‹ <code>any</code></h3><blockquote>
<p>è¿™é‡Œå½“ç±»å‹ä¸ç¡®å®šçš„æ—¶å€™ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>any</code> ä»»æ„ç±»å‹ï¼Œä¸åˆ°ä¸‡ä¸å¾—å·²ä¸ä½¿ç”¨</p>
<p><code>Unknow</code> ç±»å‹å’Œ <code>any</code> ä¸€æ ·å¯ä»¥å®¹çº³ä»»æ„ç±»å‹æ¯” <code>any</code> å®‰å…¨</p>
<p>å¹³æ—¶ç”¨çš„ä¸å¤šï¼Œå°±ä¸ä»‹ç»äº†</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bdbd6793bacc4e9da6c199f3a312469f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809094624551"></p>
<h3 id="7-å­—é¢é‡"><a href="#7-å­—é¢é‡" class="headerlink" title="7.å­—é¢é‡"></a>7.å­—é¢é‡</h3><blockquote>
<p>å®šä¹‰ä»€ä¹ˆå°±åªèƒ½èµ‹å€¼ä»€ä¹ˆ</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/678078f02de34b5fb5c56bd9eb06ca9c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809154738126"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d1d0fb316f0248bf872054508e89de4f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809154921672"></p>
<h2 id="3-å¤æ‚ç±»å‹"><a href="#3-å¤æ‚ç±»å‹" class="headerlink" title="3.å¤æ‚ç±»å‹"></a>3.å¤æ‚ç±»å‹</h2><h3 id="1-æ•°ç»„-array"><a href="#1-æ•°ç»„-array" class="headerlink" title="1.æ•°ç»„ array"></a>1.æ•°ç»„ <code>array</code></h3><blockquote>
<p>è®¾ç½®æ•°ç»„çš„ç±»å‹ æ¯”å¦‚è¿™ä¸ªä¾‹å­ <code>true</code> è¿™ä¸ªå°±ä¼šæŠ¥é”™ï¼Œä¸å±äº<code>number</code>ï¼Œæ•°ç»„çš„å…ƒç´ å¿…é¡»æ˜¯è§„å®šå¥½çš„ç±»å‹ å…¶ä»–ç±»å‹åŒç†</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/689ff60c586342f9b8789a4e67eabf73~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210808213454745"></p>
<h3 id="2-å…ƒç»„-tuple"><a href="#2-å…ƒç»„-tuple" class="headerlink" title="2.å…ƒç»„ tuple"></a>2.å…ƒç»„ <code>tuple</code></h3><blockquote>
<p>å­¦ä¹ è¿‡ <code>Python</code> çš„åŒå­¦åº”è¯¥ä¸å¤ªé™Œç”Ÿï¼Œå…¶å®å¯ä»¥æŠŠå®ƒçœ‹åšä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥å£°æ˜å¤šä¸ªç±»å‹çš„æ•°ç»„ï¼Œè¿™æ ·å°±èƒ½æ’å…¥å¤šä¸ªæ•°æ®ç±»å‹çš„æ•°æ®ï¼Œå°±æ˜¯é•¿åº¦å›ºå®šçš„æ•°ç»„</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0cc91183e9954989b20f51d3a94d01f3~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210808214401857"></p>
<h3 id="3-æ¥å£-interface"><a href="#3-æ¥å£-interface" class="headerlink" title="3.æ¥å£ interface"></a>3.æ¥å£ <code>interface</code></h3><blockquote>
<p>å®ƒèƒ½å¾ˆæ–¹ä¾¿çš„å¸®æˆ‘ä»¬å®šä¹‰ <code>Ojbect</code> ç±»å‹ï¼Œå®ƒæ˜¯éå¸¸çš„çµæ´»å¯ä»¥æè¿°å¯¹è±¡çš„å„ç§ç±»å‹</p>
</blockquote>
<p>ä¸ <code>java</code> çš„ <code>interface</code> æœ‰äº›åŒºåˆ«ï¼Œä¸‹é¢ç®€å•äº†çœ‹ä¸‹ï¼Œå…·ä½“çš„ä¸‹é¢æœ‰ä»‹ç»</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/af7ba1b2e9a2457ca6838804c421dd97~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210808215444817"></p>
<blockquote>
<p>åœ¨ <code>interface</code> å±æ€§ä¸­æ·»åŠ  <code>ï¼Ÿ</code>å¯ä»¥<strong>çœç•¥</strong></p>
</blockquote>
<p>ä¸‹é¢æˆ‘ä»¬ç»™ <code>height</code> æ·»åŠ  <code>?</code></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c096e986c2ad491280a6679cecadb753~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210808215805574"></p>
<blockquote>
<p><code>readonly</code> ä¸å¯æ”¹å˜çš„ï¼Œå®šä¹‰å®Œåå°±ä¸èƒ½ä¿®æ”¹ï¼Œæ˜¯ä¸æ˜¯å’Œ <code>const</code> æœ‰ç‚¹åƒï¼Œä¸è¿‡ <code>const</code> æ˜¯é’ˆå¯¹å˜é‡ï¼Œ <code>readonly</code> æ˜¯é’ˆå¯¹å±æ€§</p>
</blockquote>
<p>ä¸‹é¢æˆ‘ä»¬æŠŠ <code>id</code> æ·»åŠ ä¸Š <code>readonly</code></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/25cd6d6c64b14e21996955f12f45b33c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210808220259826"></p>
<h3 id="4-å‡½æ•°-funtion"><a href="#4-å‡½æ•°-funtion" class="headerlink" title="4.å‡½æ•° funtion"></a>4.å‡½æ•° <code>funtion</code></h3><blockquote>
<p>æˆ‘ä»¬è¦è§„å®šå‡½æ•°çš„ <strong>è¾“å…¥ç±»å‹</strong> å’Œ <strong>è¿”å›ç±»å‹</strong></p>
<p>åœ¨<strong>å½¢å‚åé¢</strong>æ¥å†’å·å£°æ˜ å½¢å‚çš„ç±»å‹ï¼Œåœ¨ <code>()åé¢</code>å†’å·å£°æ˜ è¿”å›å€¼ç±»å‹</p>
</blockquote>
<p>ä¼ å…¥å¤šä½™çš„å‚æ•°ä¼šæŠ¥é”™</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/63e8e40c28bc46bc9921e922820f1126~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210808221913660"></p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ºå‡½æ•°æ·»åŠ <strong>å¯é€‰å‚æ•°</strong> è¿™é‡Œç”¨ <code>?</code> å³å¯ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨ä¸¤ä¸ªå‚æ•°æˆ–è€…ä¸‰ä¸ªå‚æ•°ä¸æŠ¥é”™</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/faa3922132a24f9fba068c2c82019387~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210808221628843"></p>
<p>å¯é€‰å‚æ•°ä¹‹åä¸èƒ½å†åŠ è§„å®šç±»å‹çš„å½¢å‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cabe6ec6e988433ebb31d567865ef40b~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210808222057869"></p>
<p>æˆ‘ä»¬å¯ä»¥æŠŠå®ƒæ·»åŠ ä¸ª <code>ï¼Ÿ</code>å˜ä¸ºå¯é€‰å‚æ•°</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f52ec760d2e1416daa2fdd2fad66866d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210808222200172"></p>
<p>é™¤äº†ä¸Šé¢è¿™ç§å£°æ˜å¼å†™æ³•è¿˜æœ‰ä¸€ç§è¡¨è¾¾å¼å†™æ³•</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1083fbd7400e4e12a755bc472050e818~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210808222347710"></p>
<blockquote>
<p>æœ‰äº†ä¸Šé¢çš„äº†è§£åæˆ‘ä»¬æ¥è¯´ä¸‹ <strong>å®šä¹‰å‡½æ•°ç±»å‹</strong> çš„å˜é‡</p>
</blockquote>
<p>è¿™é‡Œè¿™ä¸ªå‡½æ•°è¿˜æ˜¯ä¸Šé¢é‚£ä¸ª</p>
<p>æˆ‘ä»¬å®šä¹‰<code>mysum</code> æŒ‡å®šå®ƒ çš„ç±»å‹ æ¥æ¥æ”¶ æˆ‘ä»¬ä¸Šé¢å®šä¹‰çš„å‡½æ•°</p>
<p><code>()</code> é‡Œé¢æ˜¯è¾“å…¥çš„å½¢å‚çš„ ç±»å‹</p>
<p><code>=&gt;</code> ä»£è¡¨æ˜¯ <strong>è¿”å›å€¼</strong> çš„ç±»å‹</p>
<p><code>:</code> åé¢çš„éƒ½æ˜¯å£°æ˜ç±»å‹ï¼Œå’Œä»£ç é€»è¾‘æ²¡æœ‰ä»€ä¹ˆå…³ç³»</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d6c6a8e940be4b32af49d561abf47f4c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210808223036183"></p>
<blockquote>
<p>æˆ‘ä»¬åˆšæ‰è¯´äº† <code>interface</code> å¯ä»¥æè¿°å„ç§ç±»å‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç”¨ <code>interface</code> æ¥æè¿°ä¸‹å‡½æ•°ç±»å‹</p>
</blockquote>
<p>æ³¨æ„ä¸€ç‚¹ ä¹‹å‰ç”¨çš„ <code>=&gt;</code> æ¥è¡¨ç¤ºè¿”å›å€¼ç±»å‹</p>
<p>è¿™é‡Œæ˜¯åœ¨ <code>()</code>å <code>: è¿”å›å€¼ç±»å‹</code></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/43b0ca286db34783b0d0609b8083fbbd~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210808223626451"></p>
<h3 id="5-è”åˆç±»å‹-union-types"><a href="#5-è”åˆç±»å‹-union-types" class="headerlink" title="5.è”åˆç±»å‹ union types"></a>5.è”åˆç±»å‹ <code>union types</code></h3><blockquote>
<p>ä½†å¯¹äºä¸€ä¸ªå˜é‡çš„ç±»å‹å¯èƒ½æ˜¯å‡ ç§ç±»å‹çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>any</code> ï¼Œä½†æ˜¯ <code>any</code> çš„èŒƒå›´æ˜¯ä¸æ˜¯æœ‰ç‚¹å¤§äº†ï¼Œä¸åˆ°<strong>ä¸‡ä¸å¾—å·²</strong>ä¸ä½¿ç”¨ï¼Œ</p>
<p>æˆ‘ä»¬å¦‚æœçŸ¥é“æ˜¯å…¶ä¸­çš„å“ªå‡ ç§ç±»å‹çš„è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ <strong>è”åˆç±»å‹</strong> ç”¨ <code>|</code> åˆ†éš”</p>
</blockquote>
<p>æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼Œ<code>haha</code> å¯èƒ½æ˜¯ <code>number</code> æˆ–è€… <code>string</code></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b0c6c42d49bf415290f1e4bf5be2263b~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809090557218"></p>
<p><strong>æ³¨æ„</strong>ï¼šåœ¨æ²¡æœ‰èµ‹å€¼ä¹‹å‰ï¼Œåªèƒ½è®¿é—®<strong>å…±åŒçš„æ–¹æ³•ã€å±æ€§</strong>ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­,<code>number</code> æ²¡æœ‰<code>length</code> å±æ€§</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/200ea90d1743410c9234f98644aa7238~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809091710353"></p>
<h3 id="6-å¯¹è±¡-object"><a href="#6-å¯¹è±¡-object" class="headerlink" title="6.å¯¹è±¡ object"></a>6.å¯¹è±¡ <code>object</code></h3><blockquote>
<p>æˆ‘ä»¬ ç›´æ¥ <code>let a: object;</code> æ˜¯ä¸æ˜¯æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œå› ä¸º <code>js</code> ä¸­å¯¹è±¡å¤ªå¤šäº†ã€‚ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥ç”¨</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8656e57cf2984664a4de36aa97e764f8~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809113126137"></p>
<p>å±æ€§å¿…é¡»åœ¨ç±»å‹ <code>&#123; name: string; age: number; &#125;</code> ä¸­</p>
<h2 id="4-æ–­è¨€-type-inference"><a href="#4-æ–­è¨€-type-inference" class="headerlink" title="4.æ–­è¨€ type inference"></a>4.æ–­è¨€ <code>type inference</code></h2><blockquote>
<p>å½“åœ¨ä¸Šé¢è”åˆç±»å‹çš„å˜é‡ä¼ å…¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬å£°æ˜äº†è¿™ä¸ªç±»å‹ä¸º <code>number | string</code> å®ƒä¸èƒ½ä¸èƒ½è°ƒç”¨ <code>length</code> æ–¹æ³•</p>
<p>æœºå™¨æ²¡æ³•åˆ¤æ–­è¿™ä¸ªç±»å‹ï¼Œä½†æ˜¯æˆ‘ä»¬æ¯”æœºå™¨æ›´äº†è§£è¿™ä¸ªç±»å‹ï¼Œæˆ‘ä»¬äººä¸ºå¯ä»¥æŒ‡å®šç±»å‹ <code>string</code> è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥ç”¨åˆ° <strong>ç±»å‹æ–­è¨€</strong></p>
</blockquote>
<h3 id="1-æˆ‘ä»¬å°±ç”¨-as-æ¥è¿›è¡Œæ–­è¨€"><a href="#1-æˆ‘ä»¬å°±ç”¨-as-æ¥è¿›è¡Œæ–­è¨€" class="headerlink" title="1.æˆ‘ä»¬å°±ç”¨ as æ¥è¿›è¡Œæ–­è¨€"></a>1.æˆ‘ä»¬å°±ç”¨ <code>as</code> æ¥è¿›è¡Œæ–­è¨€</h3><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/763c3ce74ada44f98a4fd99b12e2ce02~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809093348502"></p>
<h3 id="2-è¿˜æœ‰ä¸€ç§å†™æ³•-lt-ç±»å‹-gt-ä¸¤è€…çš„åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„"><a href="#2-è¿˜æœ‰ä¸€ç§å†™æ³•-lt-ç±»å‹-gt-ä¸¤è€…çš„åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„" class="headerlink" title="2.è¿˜æœ‰ä¸€ç§å†™æ³• &lt;ç±»å‹&gt; ä¸¤è€…çš„åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„"></a>2.è¿˜æœ‰ä¸€ç§å†™æ³• <code>&lt;ç±»å‹&gt;</code> ä¸¤è€…çš„åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„</h3><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9f334abbe81545dd8830b65ad21a7bb0~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809093854727"></p>
<h2 id="5-ç±»å‹å®ˆå«-type-guard"><a href="#5-ç±»å‹å®ˆå«-type-guard" class="headerlink" title="5.ç±»å‹å®ˆå« type guard"></a>5.ç±»å‹å®ˆå« <code>type guard</code></h2><blockquote>
<p>é‡åˆ°è”åˆç±»å‹çš„æ—¶å€™ï¼Œä½¿ç”¨ ç±»å‹å®ˆå«å¯ä»¥ ç¼©å°èŒƒå›´</p>
</blockquote>
<p>å®ç°ä»¥ä¸‹å’Œä¸Šé¢ä¸€æ ·çš„æ–¹æ³•</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4682cf9bc4ae407abd342a06a211bda4~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809101137657"></p>
<p>ç±»å‹å®ˆå« é™¤äº† <code>typeof</code> ä¹‹å¤– ï¼Œè¿˜æœ‰ <code>instanceof</code>ã€ <code>in</code></p>
<h2 id="6-ç±»-class"><a href="#6-ç±»-class" class="headerlink" title="6.ç±» class"></a>6.ç±» <code>class</code></h2><p>åœ¨ <code>ES6</code> ä¸­å°±æœ‰ ç±»çš„æ¦‚å¿µäº†ï¼Œåœ¨ <code>TS</code> ä¸­å¯¹ç±»æ·»åŠ ä¸€äº›åŠŸèƒ½ï¼Œè¿™é‡Œåªè¯´ä¸‹å‡ ä¸ªå¸¸ç”¨çš„</p>
<blockquote>
<p>å…ˆå†™ä¸ªåŸºç¡€çš„ ç±»</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c4b2d90218ed46cbad97df2377f99170~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809115531683"></p>
<blockquote>
<p>æˆ‘ä»¬å…ˆæ¥è¯´ä¸‹ 3ä¸ªè®¿é—®ä¿®é¥°ç¬¦</p>
</blockquote>
<p><code>Public</code>:ä¿®é¥°çš„å±æ€§æˆ–æ–¹æ³•æ˜¯å…±æœ‰çš„ åœ¨ <strong>ä»»ä½•åœ°æ–¹</strong> éƒ½èƒ½è®¿é—®</p>
<p><code>Private</code>:ä¿®é¥°çš„å±æ€§æˆ–æ–¹æ³•æ˜¯ç§æœ‰çš„ åªæœ‰ <strong>æœ¬ç±»</strong> ä¸­è®¿é—®</p>
<p><code>Protected</code>:ä¿®é¥°çš„å±æ€§æˆ–æ–¹æ³•æ˜¯å—ä¿æŠ¤çš„ åœ¨ <strong>æœ¬ç±»</strong> å’Œ <strong>å­ç±»ä¸­</strong> èƒ½å¤Ÿè®¿é—®</p>
<p>æ¯”å¦‚æŒ‡å®šçˆ¶ç±»ä¸­ <code>money</code> è®¿é—®æƒé™ä¸º <code>private</code> ,åªèƒ½åœ¨ <code>Parent</code> è®¿é—®ï¼Œå­ç±»è®¿é—®ä¼šå‡ºé”™</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f2c9b4551ad74c868d8f0ac0207bc4b2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809121311868"></p>
<p>æˆ‘ä»¬å¯ä»¥è®¾ç½®è®¿é—®æƒé™ä¸º <code>protected</code> ï¼Œè¿™æ ·å­ç±»å°±èƒ½è®¿é—®</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2fbf27f0252a40dc996c6d9c7d6c4bf9~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809121140659"></p>
<blockquote>
<p>é™æ€å±æ€§ <code>static</code></p>
</blockquote>
<p>ä¸Šé¢çš„ <code>name``money</code> è¿™ä¸¤ä¸ªå±æ€§éƒ½æ˜¯é€šè¿‡ å®ä¾‹ å»è®¿é—®çš„</p>
<p>ä½¿ç”¨ <code>static</code> ä¿®é¥°çš„å±æ€§æ˜¯é€šè¿‡ ç±» å»è®¿é—®ï¼Œæ˜¯æ¯ä¸ªå®ä¾‹å…±æœ‰çš„</p>
<p>åŒæ · <code>static</code> å¯ä»¥ä¿®é¥° æ–¹æ³•ï¼Œç”¨ <code>static</code> ä¿®é¥°çš„æ–¹æ³•ç§°ä¸º ç±»æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨ç±»ç›´æ¥è°ƒç”¨</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e1b4ced0010547dd8f6e1aa9218a001e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809121921373"></p>
<blockquote>
<p>åªè¯» <code>readonly</code></p>
</blockquote>
<p>æˆ‘ä»¬ç»™å±æ€§æ·»åŠ ä¸Š <code>readonly</code> å°±èƒ½ä¿è¯è¯¥å±æ€§<strong>åªè¯»</strong>ï¼Œ<strong>ä¸èƒ½ä¿®æ”¹</strong>ï¼Œå¦‚æœå­˜åœ¨ <code>static</code> ä¿®é¥°ç¬¦ï¼Œå†™åœ¨å…¶å</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/262d1bbd34a24c2cb01a7b94e39450b6~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809122359082"></p>
<blockquote>
<p>æŠ½è±¡ç±» <code>abstract</code></p>
</blockquote>
<p><code>TS</code> æ–°å¢çš„æŠ½è±¡ç±»ï¼Œè¿˜æ˜¯ç®€å•è¯´ä¸‹æ¦‚å¿µå§ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œä¸å¸Œæœ›ç›´æ¥ä½¿ç”¨è¯¥ç±»åˆ›å»ºå®ä¾‹<strong>ï¼ˆä¸èƒ½è¢«newï¼‰</strong>é‚£ä¹ˆæˆ‘ä»¬æŠŠå®ƒè®¾ç½®ä¸ºæŠ½è±¡ç±»ï¼Œè®©å®ƒä¸èƒ½è¢«å®ä¾‹åŒ–</p>
<p>åªèƒ½è¢«ç»§æ‰¿</p>
<p>åœ¨ <code>class</code> å‰é¢ æ·»åŠ  <code>abstract</code> ä¿®é¥°ç¬¦ï¼Œ</p>
<p>åœ¨æŠ½è±¡ç±»ä¸­ å¯ä»¥å†™ <strong>æŠ½è±¡æ–¹æ³•</strong> ï¼ŒæŠ½è±¡ç±»æ²¡æœ‰æ–¹æ³•ä½“</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šä¸€ä¸ªåŠ¨ç‰©çš„æŠ½è±¡ç±»ï¼Œæœ‰ä¸ªå«çš„æ–¹æ³•ï¼Œä¸å¯èƒ½ æ¯ä¸ªåŠ¨ç‰©çš„å«å£°ä¸€æ ·å§ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒè®¾ç½®ä¸ºæŠ½è±¡æ–¹æ³•ï¼Œå…·ä½“åŠŸèƒ½å­ç±»è¿›è¡Œå®ç°ï¼ˆè¯¥æ€ä¹ˆå«å°±ç”±å­ç±»æ¥å†™ï¼‰</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/88c739a6e6854eab9ac07c5ec02bb356~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809124627979"></p>
<p>å±æ€§çš„å°è£…å’Œ <code>java</code> ä¸€æ ·ï¼Œè¿™é‡Œå°±ä¸è¯´äº†â€¦</p>
<h2 id="7-æ¥å£-interface"><a href="#7-æ¥å£-interface" class="headerlink" title="7.æ¥å£ interface"></a>7.æ¥å£ <code>interface</code></h2><blockquote>
<p>ä¸ºä»€ä¹ˆä¼šå‡ºç°æ¥å£</p>
</blockquote>
<p>ä¸ºäº†è§£å†³ ç»§æ‰¿ çš„å›°å¢ƒ(ä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿å¦ä¸€ä¸ªç±»ä¸èƒ½å®ç°å¤šç»§æ‰¿)</p>
<p>è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œ<strong>äºº</strong>èƒ½å¤Ÿæ´—è¡£æœï¼Œ<strong>æ´—è¡£æœº</strong>ä¹Ÿèƒ½æ´—è¡£æœï¼Œæ´—è¡£æœºå’Œäººæ‰¾ä¸åˆ°ä¸€ä¸ªå…±åŒçš„çˆ¶ç±»ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ´—è¡£æœè¿™ä¸ªåŠŸèƒ½æŠ½ç¦»å‡ºæ¥å†™æˆæ¥å£ï¼Œ<strong>äºº</strong> å’Œ <strong>æ´—è¡£æœº</strong> å»å®ç°è¿™ä¸ªæ¥å£å°±è¡Œ</p>
<blockquote>
<p>æˆ‘ä»¬å¯ä»¥ç”¨ <code>implements</code> æ¥å®ç°æ¥å£</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/78fa2ff70b50464b94b89b08797eae53~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809130103041"></p>
<blockquote>
<p>æ¥å£å¯ä»¥å¤šå®ç°</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5cd58b7a85bd4d1a9b6bc26ff7e188a9~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809130403175"></p>
<blockquote>
<p>æ¥å£ä¹‹å‰å¯ä»¥ç»§æ‰¿</p>
</blockquote>
<p>ä¸‹é¢è¿™ä¸ªä¾‹å­æ¥å£ç»§æ‰¿äº†å¦ä¸€ä¸ªæ¥å£ï¼Œè¿™æ ·äººç±»åªéœ€å®ç°ä¸€ä¸ªæ¥å£å°±è¡Œ</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/44f273eeece14d24be94b6131b84d977~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809130537563"></p>
<h2 id="8-æšä¸¾-enum"><a href="#8-æšä¸¾-enum" class="headerlink" title="8.æšä¸¾ enum"></a>8.æšä¸¾ <code>enum</code></h2><blockquote>
<p>å¸¸é‡æ˜¯åœ¨é¡¹ç›®ä¸­ç»å¸¸ä½¿ç”¨ï¼Œè™½ç„¶ <code>const</code> å¯ä»¥å£°æ˜å¸¸é‡ï¼Œä½†æ˜¯æœ‰çš„å¸¸é‡å–å€¼æ˜¯åœ¨ä¸€ä¸ªèŒƒå›´é‡Œçš„ï¼Œè¿™é‡Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ <code>enum</code> æ¥è¿›è¡Œå¤„ç†</p>
</blockquote>
<h3 id="1-æ•°å­—æšä¸¾"><a href="#1-æ•°å­—æšä¸¾" class="headerlink" title="1.æ•°å­—æšä¸¾"></a>1.æ•°å­—æšä¸¾</h3><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/63548257df9d4b21bae08e82b5799450~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809132958670"></p>
<blockquote>
<p>å¯ä»¥ä¿®æ”¹æšä¸¾ä¸­çš„åˆå§‹å€¼</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/38e0a36b9d8145deba2e99edbe329911~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809133132496"></p>
<h3 id="2-å­—ç¬¦ä¸²æšä¸¾"><a href="#2-å­—ç¬¦ä¸²æšä¸¾" class="headerlink" title="2.å­—ç¬¦ä¸²æšä¸¾"></a>2.å­—ç¬¦ä¸²æšä¸¾</h3><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/be606dacb6ad4cbd8c6f72421222dfb6~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809133851968"></p>
<h3 id="3-å¸¸é‡æšä¸¾"><a href="#3-å¸¸é‡æšä¸¾" class="headerlink" title="3.å¸¸é‡æšä¸¾"></a>3.å¸¸é‡æšä¸¾</h3><p>åœ¨ <code>enum</code> å‰é¢æ·»åŠ ä¸€ä¸ª <code>const</code> å³å¯ï¼Œå®ƒæé«˜äº†æ€§èƒ½</p>
<p>ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Œæˆ‘å°±æŠŠä¸Šé¢å­—ç¬¦ä¸²æšä¸¾ç¼–è¯‘æˆ <code>js</code> ä¾‹å­ï¼Œå’Œ å¸¸é‡æšä¸¾ç¼–è¯‘ è´´å‡ºæ¥å¯¹æ¯”ä¸€ä¸‹</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/26a0909e7ab940ae9dc280e3407d96ac~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809135017124"></p>
<p>å¸¸é‡æšä¸¾ç›´æ¥æ‰¾å‡º <code>Week.Tuesday</code> ä¸Šé¢ä¸€æˆªéƒ½æ²¡äº†</p>
<h2 id="9-æ³›å‹"><a href="#9-æ³›å‹" class="headerlink" title="9.æ³›å‹"></a>9.æ³›å‹</h2><blockquote>
<p>æ³›å‹å°±åƒä¸€ä¸ªå ä½ç¬¦ä¸€ä¸ªå˜é‡ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥å°†å®šä¹‰å¥½çš„ç±»å‹åƒå‚æ•°ä¸€æ ·ä¼ å…¥ï¼ŒåŸå°ä¸åŠ¨çš„è¾“å‡º</p>
</blockquote>
<p>æ¯”å¦‚è¿™ä¸ªä¾‹å­æˆ‘ä»¬å°±æƒ³è¿”å›ä¸€ä¸ªå€¼ï¼Œåœ¨è¿™é‡Œæˆ‘å†™æ­»æ˜¯ <code>number</code></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5b1314d6d7704533bc7faa49c1a81fba~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809140308402"></p>
<p>åœ¨å®é™…ä¸­ï¼Œæœªå¿…å°±æ˜¯ <code>number</code>ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ³›å‹æ¥è§£å†³ï¼Œå®šä¹‰å¥½çš„ç±»å‹ä¼ å…¥è¿›å»ï¼Œè¿”å›ä»€ä¹ˆç±»å‹å‡ºæ¥</p>
<blockquote>
<p>æ³›å‹ç®€å•ä»‹ç»</p>
</blockquote>
<p>è¿™é‡Œ <code>T</code> æ˜¯ç›¸å½“äºä¸€ä¸ªå ä½ç¬¦,åœ¨æ–¹æ³•(å˜é‡ï¼Œæ¥å£â€¦.ç­‰ç­‰)åé¢æ·»åŠ  <code>&lt;T&gt;</code></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2d74cce6b3334748a7fac4123d5682ac~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809140625111"></p>
<p>æ˜¯ä¸æ˜¯çœ‹èµ·æ¥è¿™ä¹ˆç®€å•ï¼Œå…¶å®è¿˜çœŸæ˜¯</p>
<p>ç„¶åæˆ‘åœ¨ä½¿ç”¨ getValueè¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ åªéœ€è¦åœ¨ <strong>å®å‚</strong> è§„å®šå¥½ç±»å‹ï¼Œç¼–è¯‘å™¨å®ƒä¹Ÿä¸ç¬¨ï¼Œèƒ½å¤ŸçŸ¥é“æˆ‘ä»¬çš„å‚æ•°ç±»å‹ï¼Œå¹¶å°†å®ƒä»¬èµ‹å€¼ç»™ <code>T</code></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f32f6b469fbf42888e7161cd3831df05~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809141357325"></p>
<blockquote>
<p>å¤šä¸ªå‚æ•°</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d526a01bd72840b99b9563aa289a972f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809141619617"></p>
<p>åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œèªæ˜çš„å°±åˆ¤æ–­å‡º ä¼ å…¥çš„ç±»å‹ï¼Œå¹¶ä¿®æ”¹äº† <code>T</code>,<code>U</code>ï¼ŒçœŸçš„å¾ˆæ–¹ä¾¿</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e322ee42d054492db39710761cda5f57~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809141716507"></p>
<blockquote>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>interface</code> æ¥çº¦æŸ æ³›å‹</p>
</blockquote>
<p>åœ¨ <code>T</code> åé¢ <code>extends Ilen</code> ï¼Œå®šä¹‰ <code>Ilen</code> é‡Œé¢ä»£ç è¡¨ç¤ºï¼Œ<code>T</code> å¿…é¡»è¦æœ‰ <code>length</code> å±æ€§</p>
<p>è¿™æ ·åœ¨ æ–¹æ³•é‡Œé¢è°ƒç”¨ <code>params.length</code> å°±ä¸ä¼šæŠ¥é”™</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ffcaa4d26f164af690b0a3ec35687bd2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809151050324"></p>
<blockquote>
<p>åœ¨ <strong>ç±»</strong>ä½¿ç”¨æ³›å‹</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b956da6a7f504af2baaafa45be79a88c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809152239297"></p>
<blockquote>
<p>åœ¨ <strong>æ¥å£</strong> ä½¿ç”¨æ³›å‹</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8ba740d5d0d144f3b97581d308271fae~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809152813026"></p>
<blockquote>
<p>åœ¨ <strong>æ•°ç»„</strong> ä½¿ç”¨æ³›å‹</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf14ea4ef16b42d3bf21186fb1245119~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809153225159"></p>
<p>å…¶å®æ³›å‹è¿˜æœ‰å¾ˆå¤šå¾ˆå¤šä½¿ç”¨æ–¹æ³•ï¼Œè¿™é‡Œå°±ç®€å•åœ°å…¥é—¨ä¸‹</p>
<h2 id="10-ç±»å‹åˆ«å"><a href="#10-ç±»å‹åˆ«å" class="headerlink" title="10.ç±»å‹åˆ«å"></a>10.ç±»å‹åˆ«å</h2><blockquote>
<p>ä½¿ç”¨ <code>type</code> ç»™ç±»å‹å–åˆ«å</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/023c42358ecb40e995422df4febe9067~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809154354725"></p>
<h2 id="11-äº¤å‰ç±»å‹"><a href="#11-äº¤å‰ç±»å‹" class="headerlink" title="11.äº¤å‰ç±»å‹"></a>11.äº¤å‰ç±»å‹</h2><blockquote>
<p>ç”¨ <code>&amp;</code> è¿›è¡Œè¿æ¥</p>
</blockquote>
<p>æŠŠç±»å‹éƒ½ç»„åˆèµ·æ¥ï¼Œå˜é‡èµ‹å€¼å¿…é¡»æ»¡è¶³ äº¤å‰ç±»å‹</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d117a98220c64842b191bfd52bc87b0a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210809155259634"></p>
<h2 id="ç»“è¯­ï¼š"><a href="#ç»“è¯­ï¼š" class="headerlink" title="ç»“è¯­ï¼š"></a>ç»“è¯­ï¼š</h2><blockquote>
<p>è¿™ç¯‡æ–‡ç« æ˜¯å°æµª3æœˆå¤šå­¦TSæ—¶åšçš„æ€»ç»“ï¼Œå†™çš„ä¸å…¨é¢å†™çš„éƒ½æ˜¯ä¸€äº›ç»å¸¸ç”¨åˆ°çš„ï¼Œå…¨é¢çš„è¯è¿˜å¾—å†™å¾ˆå¤šå¾ˆå¤šã€‚ã€‚ã€‚å®˜æ–¹çš„æ–‡æ¡£ yyds ï¼Œä¸è¿‡å¤§å®¶å¯ä»¥é€šè¿‡è¿™ç¯‡æ–‡ç« è¿›è¡Œå¿«é€Ÿå…¥é—¨ï¼Œï¼Œå…¶å®å°æµªç”¨äº†TSä¸€æ®µæ—¶é—´äº†ï¼Œæ„Ÿè§‰å°±æ˜¯æœ‰äº›æ³›å‹å†™çš„å¾ˆå¤æ‚ï¼Œè§„èŒƒæ€§å¾ˆå¼ºï¼Œå¾ˆå¤šç¬¬ä¸‰æ–¹åº“éšè—çš„ç±»å‹æä¸æ¸…æ¥šï¼Œåˆšå†™çš„å®Œå…¨çœ‹ä¸æ‡‚ï¼Œæ¯æ¬¡å†™ä¸€ä¸ªä¸œè¥¿éƒ½è¦æƒ³ç€å»å®šä¹‰ç±»å‹ï¼Œæ¨ä¸å¾—æŠŠç”µè„‘ç ¸äº†â€¦å¼€ç©ç¬‘çš„ï¼Œè¿˜æ˜¯å¾—è€å¿ƒ</p>
</blockquote>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a31f26491f7948689a2919d10e902e4a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="img"></p>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.tslang.cn%2Fdocs%2Fhandbook%2Fbasic-types.html" title="https://www.tslang.cn/docs/handbook/basic-types.html">TSå®˜æ–¹æ–‡æ¡£</a></p>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>è¿˜ä¸ä¼šVue3ï¼Ÿä¸€ç¯‡ç¬”è®°å¸¦ä½ å¿«é€Ÿå…¥é—¨</title>
    <url>/xiaolangwiki/2021/09/11/12/</url>
    <content><![CDATA[<h2 id="è¿˜ä¸ä¼šVue3ï¼Ÿä¸€ç¯‡ç¬”è®°å¸¦ä½ å¿«é€Ÿå…¥é—¨"><a href="#è¿˜ä¸ä¼šVue3ï¼Ÿä¸€ç¯‡ç¬”è®°å¸¦ä½ å¿«é€Ÿå…¥é—¨" class="headerlink" title="è¿˜ä¸ä¼šVue3ï¼Ÿä¸€ç¯‡ç¬”è®°å¸¦ä½ å¿«é€Ÿå…¥é—¨"></a>è¿˜ä¸ä¼šVue3ï¼Ÿä¸€ç¯‡ç¬”è®°å¸¦ä½ å¿«é€Ÿå…¥é—¨</h2><p>åŸæ–‡ï¼š<a href="https://juejin.cn/post/7006518993385160711">https://juejin.cn/post/7006518993385160711</a></p>
<blockquote>
<p>å‰è¨€ï¼š</p>
</blockquote>
<p>ä¸€ç›´éƒ½æ²¡æœ‰å»æ¥è§¦ Vue3ï¼Œåœ¨ä¹‹å‰æš‘å‡çš„æ—¶é—´ï¼Œå°±è¶è¿™ä¸ªæœºä¼šå»å¥½å¥½çš„å­¦ä¹ ä¸€ä¸‹ï¼Œè¿™ç¯‡æ–‡ç« å°±æ˜¯æˆ‘ä¹‹å‰å­¦ä¹  Vue3 åšçš„ç¬”è®°ï¼Œåšç¬”è®°ä¸€æ–¹é¢è®©è‡ªå·±æ›´åŠ ç†è§£å’ŒæŒæ¡æ–°çš„ç‰¹æ€§è¿™äº›çŸ¥è¯†ç‚¹ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå¸Œæœ›èƒ½è®©å¤§å®¶å…¥é—¨Vue3ï¼Œè‡ªå·±å­¦åˆ°äº†æ‰æ˜¯èµšåˆ°äº†ï¼Œç»“è¯­æ³¨æ˜å‚è€ƒèµ„æ–™</p>
<h2 id="Vue3ç®€ä»‹"><a href="#Vue3ç®€ä»‹" class="headerlink" title="Vue3ç®€ä»‹"></a>Vue3ç®€ä»‹</h2><p><strong>é¢ä¸´çš„é—®é¢˜</strong>ï¼šéšç€åŠŸèƒ½çš„å¢é•¿ï¼Œå¤æ‚ç»„ä»¶çš„ä»£ç å˜å¾—éš¾ä»¥ç»´æŠ¤ï¼Œ<code>Vue3</code> å°±éšä¹‹è€Œæ¥ï¼Œ<code>TypeScript</code> ä½¿ç”¨çš„è¶Šæ¥è¶Šå¤šï¼Œ<code>Vue3</code>å°±æ˜¯ <code>TS</code> å†™çš„æ‰€ä»¥èƒ½å¤Ÿæ›´å¥½çš„æ”¯æŒ <code>TypeScript</code></p>
<p>åœ¨è¿™é‡Œä»‹ç»å°±è¿™ä¹ˆç®€å•</p>
<p><code>vue2</code> çš„ç»å¤§å¤šæ•°çš„ç‰¹æ€§ åœ¨ <code>Vue3</code> éƒ½èƒ½ä½¿ç”¨ï¼Œæ¯•ç«Ÿ <code>Vue</code> æ˜¯æ¸è¿›å¼çš„</p>
<p>å“åº”å¼åŸç†è¿›è¡Œä½¿ç”¨ <code>Proxy</code> å®ç°ï¼Œ<code>v-model</code> å¯ä»¥ä¼ å‚äº†ç­‰ç­‰æ–°ç‰¹æ€§</p>
<h2 id="åŸºç¡€å·¥ä½œ"><a href="#åŸºç¡€å·¥ä½œ" class="headerlink" title="åŸºç¡€å·¥ä½œ"></a>åŸºç¡€å·¥ä½œ</h2><p>ä½¿ç”¨<code>Vue3</code>çš„è¯ï¼Œé‚£ä¹ˆå¿…é¡»é€šè¿‡ä½¿ç”¨æ„å»ºå·¥å…·åˆ›å»ºä¸€ä¸ª <code>Vue3</code> é¡¹ç›®</p>
<h3 id="å®‰è£…-vue-cli"><a href="#å®‰è£…-vue-cli" class="headerlink" title="å®‰è£… vue-cli"></a>å®‰è£… vue-cli</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g @vue/cli</span><br><span class="line"></span><br><span class="line">yarn global add @vue/cli</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºä¸€ä¸ªé¡¹ç›®"><a href="#åˆ›å»ºä¸€ä¸ªé¡¹ç›®" class="headerlink" title="åˆ›å»ºä¸€ä¸ªé¡¹ç›®"></a>åˆ›å»ºä¸€ä¸ªé¡¹ç›®</h3><p>ä½¿ç”¨ <code>create</code> å‘½ä»¤è¡Œåˆ›å»º æˆ–è€… ç”¨ <code>ui</code> å¯è§†åŒ–åˆ›å»º</p>
<p>å¤§å®¶ç”¨ <code>Vue</code> éƒ½ç”¨äº†è¿™ä¹ˆä¹…ï¼Œæˆ‘å°±ä¸ä¸€ä¸€è¯´æ€ä¹ˆå»åˆ›å»ºäº†</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vue create é¡¹ç›®å</span><br><span class="line"></span><br><span class="line">vue ui</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ä¹Ÿå¯ä»¥é€‰æ‹© <code>vite</code> ï¼Œ<code>vite</code> åˆ›å»ºçš„é€Ÿåº¦æ¯” ä¸Šé¢çš„æ–¹æ³•å¿«äº†ä¸€äº›</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm init vite-app é¡¹ç›®å</span><br><span class="line"><span class="built_in">cd</span> é¡¹ç›®å</span><br><span class="line">npm install</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<h2 id="Vue3å…¥é—¨"><a href="#Vue3å…¥é—¨" class="headerlink" title="Vue3å…¥é—¨"></a>Vue3å…¥é—¨</h2><h3 id="Composition-API"><a href="#Composition-API" class="headerlink" title="Composition API"></a><code>Composition API</code></h3><blockquote>
<p><code>Vue3</code> æå‡ºäº† <code>Composition API</code></p>
</blockquote>
<p>åœ¨ <strong>Vue2.X</strong> æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ <strong>OptionAPI</strong> é‡Œé¢æœ‰æˆ‘ä»¬ç†Ÿæ‚‰çš„ <code>data</code>ã€<code>computed</code>ã€<code>methods</code>ã€<code>watch</code>â€¦</p>
<p>åœ¨ <code>Vue3</code> ä¸­ï¼Œæˆ‘ä»¬ä¾æ—§å¯ä»¥ä½¿ç”¨ <strong>OptionAPI</strong>å½“ç„¶ä¸å»ºè®® å’Œ <code>Vue3</code> æ··ç”¨</p>
<p>åœ¨ <code>Vue2</code> ä¸­ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªåŠŸèƒ½å¾—åˆ†åˆ°ä¸åŒçš„åœ°æ–¹ï¼ŒæŠŠæ•°æ®æ”¾åœ¨ <code>data</code> ,<code>computed</code> æ–¹æ³•æ”¾åœ¨ <code>methods</code> é‡Œé¢ï¼Œåˆ†å¼€çš„å¤ªæ•£ä¹±äº†ï¼Œå‡ ä¸ªåŠŸèƒ½è¿˜å¥½ï¼Œå‡ åä¸ªä¸Šç™¾ä¸ªï¼Œé‚£å°±æœ‰ç‚¹â€¦</p>
<p>æ‰€ä»¥ <code>Vue3</code> æå‡ºäº† <strong>Composition API</strong> ï¼Œå®ƒå¯ä»¥æŠŠ <code>ä¸€ä¸ªé€»è¾‘çš„ä»£ç éƒ½æ”¶é›†åœ¨ä¸€èµ·</code> å•ç‹¬å†™ä¸ª<code>hook</code>,ç„¶åå†å¼•å…¥ï¼Œè¿™æ ·å°±ä¸åˆ°å¤„åˆ†å¸ƒï¼Œæ˜¾å¾—å¾ˆä¹±äº†</p>
<h3 id="Fragment"><a href="#Fragment" class="headerlink" title="Fragment"></a><code>Fragment</code></h3><blockquote>
<p>åœ¨ <code>template</code> ä¸­ä¸å†éœ€è¦ä¸€ä¸ªæ ¹å…ƒç´ åŒ…è£¹</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">&quot;Vue logo&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./assets/logo.png&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">HelloWorld</span> <span class="attr">msg</span>=<span class="string">&quot;Welcome to Your Vue.js + TypeScript App&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å®é™…ä¸Šå†…éƒ¨ä¼šå°†å¤šä¸ªæ ‡ç­¾åŒ…å«åœ¨ä¸€ä¸ª<code>Fragment</code>è™šæ‹Ÿå…ƒç´ ä¸­</p>
<p>å¥½å¤„: å‡å°‘æ ‡ç­¾å±‚çº§, å‡å°å†…å­˜å ç”¨</p>
<h3 id="script-å·®å¼‚"><a href="#script-å·®å¼‚" class="headerlink" title="script å·®å¼‚"></a><code>script</code> å·®å¼‚</h3><blockquote>
<p>æ¥çœ‹çœ‹ <code>script</code> å’Œ <code>Vue2</code> çš„åŒºåˆ«</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script lang=<span class="string">&quot;ts&quot;</span>&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; defineComponent&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>å¯ä»¥å† <code>script</code> ä½¿ç”¨ <code>ts</code> åªéœ€ è®¾ç½® <code>lang</code> å³å¯</li>
<li><code>defineComponent</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ªç»„ä»¶</li>
<li><code>export default</code> ç›´æ¥å¯¼å‡ºä¸€ä¸ªç»„ä»¶</li>
</ul>
<h3 id="setup"><a href="#setup" class="headerlink" title="setup"></a><code>setup</code></h3><blockquote>
<p><code>setup</code> æ˜¯ <code>Composition API</code>çš„å…¥å£</p>
</blockquote>
<h4 id="setup-æ‰§è¡Œé¡ºåº"><a href="#setup-æ‰§è¡Œé¡ºåº" class="headerlink" title="setup æ‰§è¡Œé¡ºåº"></a><code>setup</code> æ‰§è¡Œé¡ºåº</h4><p>å®ƒåœ¨<code>beforeCreate</code><strong>ä¹‹å‰æ‰§è¡Œä¸€æ¬¡</strong>ï¼Œ<code>beforeCreate</code>è¿™ä¸ªé’©å­ çš„ä»»åŠ¡å°±æ˜¯åˆå§‹åŒ–ï¼Œåœ¨å®ƒä¹‹å‰æ‰§è¡Œï¼Œé‚£ä¹ˆ <code>this</code> å°±æ²¡æœ‰è¢«åˆå§‹åŒ– <code>this = undefined</code> è¿™æ ·å°±ä¸èƒ½é€šè¿‡ <code>this</code> æ¥è°ƒç”¨æ–¹æ³• å’Œ è·å–å±æ€§</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b06890efbd304516b23df723ad9352dd~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210811132514039"></p>
<h4 id="setup-è¿”å›å€¼"><a href="#setup-è¿”å›å€¼" class="headerlink" title="setup è¿”å›å€¼"></a><code>setup</code> è¿”å›å€¼</h4><p><code>setup</code> è¿”å›çš„æ˜¯ä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼Œè¿™ä¸ªå¯¹è±¡çš„å±æ€§ä¼šä¸ç»„ä»¶ä¸­ <code>data</code> å‡½æ•°è¿”å›çš„å¯¹è±¡è¿›è¡Œ<strong>åˆå¹¶</strong>ï¼Œè¿”å›çš„æ–¹æ³•å’Œ <code>methods</code> åˆå¹¶ï¼Œåˆå¹¶ä¹‹åç›´æ¥å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ï¼Œå¦‚æœæœ‰é‡åçš„æƒ…å†µï¼Œä¼šä½¿ç”¨ <code>setup</code> è¿”å›çš„<strong>å±æ€§</strong>å’Œ<strong>æ–¹æ³•</strong>ï¼Œ<code>methods</code> å’Œ <code>data</code> èƒ½å¤Ÿæ‹¿åˆ° <code>setup</code> ä¸­çš„æ–¹æ³•åº”è¯¥è¿›è¡Œäº†åˆå¹¶ï¼Œåä¹‹ <code>setup</code> ä¸èƒ½æ‹¿åˆ°å®ƒä»¬çš„å±æ€§å’Œæ–¹æ³•ï¼Œå› ä¸ºè¿™ä¸ªæ—¶å€™ <code>this</code> = <code>undefined</code></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8635a4c729ac41d281020edc5c9569e9~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210811134028917"></p>
<h4 id="Suspense-ç»„ä»¶"><a href="#Suspense-ç»„ä»¶" class="headerlink" title="Suspense ç»„ä»¶"></a><code>Suspense</code> ç»„ä»¶</h4><blockquote>
<p><code>setup</code> ä½¿ç”¨ <code>async</code>/<code>await</code></p>
</blockquote>
<p>æˆ‘ä»¬éœ€è¦ <code>setup</code> è¿”å›æ•°æ®é‚£ä¹ˆå®ƒè‚¯å®šå°±ä¸èƒ½ä½¿ç”¨ <code>async</code> ä¿®é¥°ï¼Œè¿™æ ·è¿”å› <code>promise</code> æ˜¯æˆ‘ä»¬ä¸æƒ³çœ‹è§æƒ…å†µï¼Œå¦‚æœæˆ‘ä»¬ç¡¬è¦ç”¨ <code>async</code> ä¿®é¥°ï¼Œæˆ‘ä»¬å°±å¾—ç”¨çš„åœ¨å®ƒçš„çˆ¶ç»„ä»¶å¤–å±‚éœ€è¦åµŒå¥—ä¸€ä¸ª<code>suspense</code>(ä¸ç¡®å®š)å†…ç½®ç»„ä»¶ï¼Œé‡Œé¢æ”¾ç½®ä¸€äº›ä¸ç¡®å®šçš„æ“ä½œï¼Œæ¯”å¦‚æˆ‘ä»¬å°±å¯ä»¥æŠŠå¼‚æ­¥ç»„ä»¶æ”¾å…¥è¿›å»</p>
<h5 id="1-å­ç»„ä»¶"><a href="#1-å­ç»„ä»¶" class="headerlink" title="1.å­ç»„ä»¶"></a>1.å­ç»„ä»¶</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  &#123;&#123; res &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; defineComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;Son&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">async</span> <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> res = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;åœ°å€&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      res,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="2-çˆ¶ç»„ä»¶"><a href="#2-çˆ¶ç»„ä»¶" class="headerlink" title="2.çˆ¶ç»„ä»¶"></a>2.çˆ¶ç»„ä»¶</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Suspense</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">Son</span>&gt;</span><span class="tag">&lt;/<span class="name">Son</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="setup-å‚æ•°"><a href="#setup-å‚æ•°" class="headerlink" title="setup å‚æ•°"></a><code>setup</code> å‚æ•°</h4><blockquote>
<p><code>setup</code>(<code>props</code>, <code>context</code>)</p>
</blockquote>
<p><code>setup</code> å‡½æ•°ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>props</code>ã€‚å®ƒæ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’çš„å€¼ï¼Œæ˜¯çš„å°±æ˜¯çˆ¶å­ç»„ä»¶ä¿¡æ¯ä¼ é€’çš„ <code>props</code></p>
<p>ç¬¬äºŒä¸ªå‚æ•°æ˜¯ <code>context</code> é‡Œé¢åŒ…å«3ä¸ªå±æ€§ <code>&#123; attrs, slots, emit &#125;</code>ï¼Œè¿™ä¸‰ä¸ªå±æ€§å¤§å®¶çœ‹åå­—å°±åº”è¯¥çŸ¥é“æ˜¯ä»€ä¹ˆå§ åˆ†åˆ«å¯¹åº” <code>this.$attrs</code>ï¼Œ<code>this.$slots</code>ï¼Œ<code>this.$emit</code></p>
<ul>
<li><code>attrs</code>: é™¤äº† <code>props</code> ä¸­çš„å…¶ä»–å±æ€§</li>
<li><code>slots</code>: çˆ¶ç»„ä»¶ä¼ å…¥æ’æ§½å†…å®¹çš„å¯¹è±¡</li>
<li><code>emit</code>: å’Œç”¨äºçˆ¶å­ç»„ä»¶é€šä¿¡</li>
</ul>
<h3 id="ref"><a href="#ref" class="headerlink" title="ref"></a><code>ref</code></h3><blockquote>
<p>å®šä¹‰/è½¬ä¸º å“åº”å¼</p>
</blockquote>
<p>åœ¨ä¸Šé¢ <code>setup</code> å†™çš„æ•°æ®éƒ½<strong>ä¸æ˜¯å“åº”å¼çš„</strong>ï¼Œä¿®æ”¹äº†æ•°æ®ï¼Œè§†å›¾å¹¶ä¸ä¼šæ›´æ–°</p>
<p>åœ¨ <code>Vue3</code> ä¸­æä¾›äº†ä¸¤ç§æ–¹å¼å®šä¹‰å“åº”å¼æ•°æ®ï¼Œå…ˆæ¥ä»‹ç»ä¸‹ <code>ref</code></p>
<p>å¯¼å…¥ <code>ref</code> æ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineComponent, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>ä½ å¯ä»¥å…ˆå£°æ˜ä¸€ä¸ª<strong>åŸºæœ¬ç±»å‹</strong>å˜é‡åå†å½“åš <code>ref</code> çš„å½¢å‚ç©¿è¿›å»</li>
<li><p>æˆ–è€…ç›´æ¥åœ¨ <code>ref</code> ä¸­ä¼ å…¥</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> number1 = <span class="title function_">ref</span>(<span class="number">10</span>)</span><br><span class="line">    <span class="keyword">let</span> num = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> number2 = <span class="title function_">ref</span>(num)</span><br><span class="line">    <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>æ¥æŸ¥çœ‹ä¸€ä¸‹ <code>number1</code> æ˜¯ä»€ä¹ˆå§</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6225b7f5b79d4f4cb1431c64518be657~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210811183344632"></p>
<p>å¯ä»¥çœ‹è§çš„æ˜¯ <code>number1</code> æ˜¯ä¸€ä¸ª <code>Ref</code> å¯¹è±¡ï¼Œæˆ‘ä»¬è®¾ç½®çš„ <code>10</code> è¿™ä¸ªå€¼åœ¨è¿™ä¸ªå¯¹è±¡çš„ <code>value</code> å±æ€§ä¸Š</p>
<p>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¿®æ”¹çš„æ—¶å€™å¿…é¡»è¦ä¿®æ”¹çš„æ˜¯ <code>number1.value</code></p>
<p>é€šè¿‡ç»™<code>value</code>å±æ€§æ·»åŠ  <code>getter</code>/<code>setter</code> æ¥å®ç°å¯¹æ•°æ®çš„åŠ«æŒ</p>
<p>ä½†æ˜¯åœ¨æ¨¡æ¿ä¸Šä½¿ç”¨çš„æ—¶å€™ ä¸ç”¨å†™ <code>number1.value</code> ç›´æ¥å†™ <code>number1</code> å³å¯</p>
<p>åœ¨æ¨¡æ¿ç¼–è¯‘çš„æ—¶å€™å›è‡ªåŠ¨åŠ ä¸Š <code>value</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  &#123;&#123; number1 &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;updateNum&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; defineComponent, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineComponent</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;Son&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> number1 = <span class="title function_">ref</span>(<span class="number">10</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">updateNum</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      number1.<span class="property">value</span>++</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      number1,</span></span><br><span class="line"><span class="language-javascript">      updateNum,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a5b9e88c52c84261aa28e6cc5cd74bf5~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="35"></p>
<p>ä½¿ç”¨èµ·æ¥å®Œå…¨æ²¡æœ‰é—®é¢˜</p>
<p>åˆšæ‰å¼ºè°ƒäº†è¯´ <code>ref</code> æ¥æ”¶ åŸºæœ¬ç±»å‹çš„æ•°æ®ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥æ¥æ”¶ å¤æ‚ç±»å‹å—ï¼Œ<code>object</code> ç±»å‹ç­‰ï¼Œå½“ç„¶å¯ä»¥</p>
<p>ç»™ <code>ref</code> ä¼ å…¥å¤æ‚ç±»å‹ï¼Œå…¶å®å®ƒæ˜¯è°ƒç”¨ <code>reactive</code> æ¥å®ç°çš„</p>
<p><code>reactive</code> ä¸‹é¢ä¼šæåˆ°</p>
<h3 id="ref-è·å–å…ƒç´ "><a href="#ref-è·å–å…ƒç´ " class="headerlink" title="ref è·å–å…ƒç´ "></a><code>ref</code> è·å–å…ƒç´ </h3><p>åŒæ ·çš„ <code>ref</code> è¿˜å¯ä»¥ç”¨äº†è·å–å…ƒç´ </p>
<p>å¤§å®¶åœ¨ <code>Vue2.X</code> ä¸­æ˜¯æ€ä¹ˆè·å–çš„å‘¢ï¼Œå…ˆåœ¨ æ ‡ç­¾ä¸Šå®šä¹‰ <code>:ref=&#39;XXX&#39;</code> ç„¶å <code>this.$refs.XXX</code> æ¥è·å–</p>
<p>åœ¨ <code>Vue3</code> ä¸Šè·å–å…ƒç´ å°±æœ‰äº›è®¸ä¸åŒäº†</p>
<blockquote>
<p>1.é¦–å…ˆåœ¨ æ¨¡æ¿å…ƒç´ ä¸Š <code>ref=&#39;XXX&#39;</code> è¿™é‡Œä¸ç”¨ <code>v-bind</code></p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;haha&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;haha&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>2.åœ¨ <code>setup</code> ä¸­</p>
</blockquote>
<p>å¾—ç»™ <code>ref</code> æŒ‡å®šç±»å‹ <code>HTMLElement</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> haha = ref&lt;<span class="title class_">HTMLElement</span>|<span class="literal">null</span>&gt;(<span class="literal">null</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(haha)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    haha,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>å¦‚æœåœ¨ç»„ä»¶ä¸­éœ€è¦ä½¿ç”¨åˆ° <code>haha</code> ï¼Œå°±å¿…é¡»æŠŠ <code>haha``return</code> å‡ºå»åˆå¹¶ <code>data</code></p>
<p>æˆ‘ä»¬æ¥çœ‹çœ‹æ‰“å°çš„æ˜¯ä»€ä¹ˆ</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6c17d2e13f4941d7a37281eef673cfcf~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210811230220185"></p>
<p>å¯ä»¥çœ‹è§çš„æ˜¯ <code>haha</code> æ˜¯ä¸ª <code>Ref</code> å¯¹è±¡ï¼Œ<code>value</code> å€¼å°±æ˜¯æˆ‘ä»¬æƒ³è¦è·å–åˆ°çš„å…ƒç´ </p>
<p>ç„¶åæˆ‘ä»¬å¯ä»¥å¯¹ <code>haha</code> è¿™ä¸ª <code>DOM</code> å…ƒç´ è¿›è¡Œæ“ä½œï¼Œæ¯”å¦‚è¿™ä¸ª</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">haha.<span class="property">style</span>.<span class="property">fontSize</span> = <span class="string">&#x27;20px&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="reactive"><a href="#reactive" class="headerlink" title="reactive"></a><code>reactive</code></h3><p><code>reactive</code> æ¥æ”¶ä¸€ä¸ªæ™®é€šå¯¹è±¡ç„¶åè¿”å›è¯¥æ™®é€šå¯¹è±¡çš„å“åº”å¼<code>ä»£ç†å¯¹è±¡</code></p>
<p>æ²¡é”™ å®ƒçš„åº•å±‚å°±æ˜¯ä½¿ç”¨ <code>Proxy</code> è¿›è¡Œä»£ç†</p>
<blockquote>
<p>ç®€å•å†™ä¸ªVue3å“åº”å¼ä¾‹å­æ¥è¯´ä¸‹ <code>Proxy</code></p>
</blockquote>
<p><code>new Proxy(target, handler)</code></p>
<ul>
<li><code>target</code> ï¼šè¦ä½¿ç”¨ <code>Proxy</code> åŒ…è£…çš„ç›®æ ‡å¯¹è±¡ï¼ˆå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬åŸç”Ÿæ•°ç»„ï¼Œå‡½æ•°ï¼Œç”šè‡³å¦ä¸€ä¸ªä»£ç†ï¼‰</li>
<li><code>handler</code>ï¼šä¸€ä¸ªé€šå¸¸ä»¥å‡½æ•°ä½œä¸ºå±æ€§çš„å¯¹è±¡ï¼Œå„å±æ€§ä¸­çš„å‡½æ•°åˆ†åˆ«å®šä¹‰äº†åœ¨æ‰§è¡Œå„ç§æ“ä½œæ—¶ä»£ç† <code>p</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> data = &#123;</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> <span class="title class_">Proxy</span>(data, &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="title function_">get</span>(<span class="params">target, key</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> target\[key\]</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="title function_">set</span>(<span class="params">target, key, newValue</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (target\[key\] === newValue) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        target\[key\] = newValue</span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#app&#x27;</span>).<span class="property">textContent</span> = target\[key\]</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>reactive</code> åŸºç¡€ç”¨æ³•</p>
</blockquote>
<p>å¯¼å…¥ï¼Œå½“ç„¶å†™çš„æ—¶å€™ï¼Œ<code>vscode</code> ä¼šè‡ªåŠ¨å¸®ä½ å¼•å…¥</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineComponent, reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br></pre></td></tr></table></figure>
<p>ç®€å•ä½¿ç”¨</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> obj = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;å°æµª&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">21</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        obj,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥çœ‹çœ‹è¿”å›çš„ <code>Proxy</code> å¯¹è±¡å§</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/596efb4256c74cc19feb6f6b365bdb90~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210811191209064"></p>
<p>æ•°æ®éƒ½åœ¨ <code>target</code> ä¸­ï¼Œ</p>
<p>åœ¨æ¨¡æ¿ä½¿ç”¨ç›´æ¥ <code>&#123;&#123;obj.name&#125;&#125;</code> å³å¯</p>
<p>ä¿®æ”¹ç›´æ¥ä¿®æ”¹ <code>obj\[name\]``=``â€˜xxxâ€™</code></p>
<p>æ“ä½œä»£ç†å¯¹è±¡,objä¸­çš„æ•°æ®ä¹Ÿä¼šéšä¹‹å˜åŒ–ï¼ŒåŒæ—¶å¦‚æœæƒ³è¦åœ¨æ“ä½œæ•°æ®çš„æ—¶å€™,ç•Œé¢ä¹Ÿè¦è·Ÿç€é‡æ–°æ›´æ–°æ¸²æŸ“,é‚£ä¹ˆä¹Ÿæ˜¯æ“ä½œä»£ç†å¯¹è±¡</p>
<blockquote>
<p>å“åº”å¼çš„æ•°æ®æ˜¯æ·±å±‚æ¬¡çš„ï¼ˆé€’å½’æ·±åº¦å“åº”å¼ï¼‰</p>
</blockquote>
<p>å¯¹äºå¤šå±‚åµŒå¥—çš„æ•°æ®ä¹Ÿæ˜¯å“åº”å¼çš„</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> obj = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;å°æµª&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">21</span>,</span><br><span class="line">        <span class="attr">phone</span>: &#123;</span><br><span class="line">            <span class="attr">p_name</span>: <span class="string">&#x27;å°ç±³&#x27;</span>,</span><br><span class="line">            <span class="attr">p_apps</span>: &#123;</span><br><span class="line">                <span class="attr">app_name</span>: <span class="string">&#x27;å°ç±³è¿åŠ¨&#x27;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">upadateName</span>(<span class="params"></span>) &#123;</span><br><span class="line">        obj.<span class="property">phone</span>.<span class="property">p</span>\_apps.<span class="property">app</span>\_name = <span class="string">&#x27;æ˜é‡‘&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(obj)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        obj,</span><br><span class="line">        upadateName,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fa30d692e14e40cf962235006245e4c5~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="36"></p>
<blockquote>
<p><code>shallowReactive</code></p>
</blockquote>
<p>å®ƒæ˜¯ä¸€ä¸ªç®€å•çš„ reactive ï¼ŒåªæŠŠç¬¬ä¸€å±‚çš„å¯¹è±¡æ”¹ä¸ºå“åº”å¼ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†</p>
<blockquote>
<p>ä½¿ç”¨ <code>ref</code> ä¼ å…¥å¯¹è±¡</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> obj = <span class="title function_">ref</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;å°æµª&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">21</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(obj)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        obj,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/782b587ab1384163a505b3694b4eaab8~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210811191739873"></p>
<p>å®é™…ä¸Šæ˜¯ <code>ref</code> ä½¿ç”¨ <code>reactive</code> æ¥è¿›è¡Œæ“ä½œçš„</p>
<h3 id="toRefs"><a href="#toRefs" class="headerlink" title="toRefs"></a><code>toRefs</code></h3><p>è¿™ä¸ªæ–¹æ³•å¯ä»¥æŠŠ <code>reactive</code> å“åº”å¼å¯¹è±¡ï¼Œè½¬åŒ–ä¸º æ™®é€šå¯¹è±¡ï¼Œæ™®é€šå¯¹è±¡çš„æ¯ä¸ªå±æ€§éƒ½æ˜¯ <code>Ref</code> å¯¹è±¡ï¼Œè¿™æ ·çš„è¯ä¿è¯äº† <code>reactive</code> çš„æ¯ä¸ªå±æ€§è¿˜æ˜¯å“åº”å¼çš„ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æŠŠæ¯ä¸ªå±æ€§è¿›è¡Œåˆ†è§£ä½¿ç”¨ï¼Œè¿™æ ·åœ¨ç»„ä»¶å°±ä¸ç”¨ <strong>obj[å±æ€§]</strong>ï¼Œä»£ç é‡å‡è½»äº†ï¼Œyyds</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> user = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;å°æµª&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">21</span>,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> userObj = <span class="title function_">toRefs</span>(user)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(userObj)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d44ff7b5950843c781ead5e0d1d64f2b~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210811223510320"></p>
<p>å¯ä»¥çœ‹è§ <code>name</code> å’Œ <code>age</code> å·²ç»å˜æˆäº† <code>Ref</code> å¯¹è±¡</p>
<p>æˆ‘ä»¬å¯ä»¥è§£æ„ å‡º <code>name</code> å’Œ <code>age</code> å•ç‹¬ä½¿ç”¨</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> user = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;å°æµª&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">21</span>,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> userObj = <span class="title function_">toRefs</span>(user)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ...userObj,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="toRef"><a href="#toRef" class="headerlink" title="toRef"></a><code>toRef</code></h3><p>è¿˜æœ‰ä¸€ä¸ª <code>toRef</code> æ–¹æ³•ï¼Œå®ƒçš„ä½œç”¨å’Œ <code>toRefs</code> å·®ä¸å¤šï¼Œä½†æ˜¯å®ƒåªèƒ½æŠŠå“åº”å¼å¯¹è±¡/æ™®é€šå¯¹è±¡çš„<strong>æŸä¸€ä¸ª</strong>å±æ€§å˜ä¸º <code>Ref</code> å¯¹è±¡</p>
<blockquote>
<p>å¯ä»¥ç”¨æ¥ä¸ºæºå“åº”å¼å¯¹è±¡ä¸Šçš„ <code>property</code> æ€§åˆ›å»ºä¸€ä¸ª <code>ref</code>ã€‚ç„¶åå¯ä»¥å°† <code>ref</code> ä¼ é€’å‡ºå»ï¼Œä»è€Œä¿æŒå¯¹å…¶æº <code>property</code> çš„å“åº”å¼è¿æ¥ã€‚</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="title function_">useSomeFeature</span>(<span class="title function_">toRef</span>(props, <span class="string">&#x27;foo&#x27;</span>))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useSomeFeature</span>(<span class="params">foo: Ref</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ‹·è´äº†ä¸€ä»½æ–°çš„æ•°æ®å€¼å•ç‹¬æ“ä½œ, æ›´æ–°æ—¶ç›¸äº’ä¸å½±å“</p>
<p>å½“æ‚¨è¦å°† <code>prop</code> çš„ <code>ref</code> ä¼ é€’ç»™å¤åˆå‡½æ•°æ—¶ï¼Œ<code>toRef</code> å¾ˆæœ‰ç”¨</p>
<p>å¯ä»¥ä»å®˜æ–¹æ–‡æ¡£çœ‹å‡ºï¼Œç”¨äºåœ¨äºç»„ä»¶ä¹‹å‰çš„ä¼ é€’æ•°æ® ä» <code>props</code> æ‹¿å‡º <code>&#39;foo&#39;</code> å±æ€§ç»™å¤åˆå‡½æ•°ï¼Œå¤åˆå‡½æ•° <code>useSomeFeature</code>ï¼Œæ¥æ”¶çš„å‚æ•° <code>foo</code> ä¸º <code>Ref</code> ç±»å‹ï¼Œåˆšå¥½å¯ä»¥ä½¿ç”¨<code>toRef</code> æ¥è¿›è¡Œè½¬åŒ–</p>
<h3 id="åˆ¤æ–­å“åº”å¼"><a href="#åˆ¤æ–­å“åº”å¼" class="headerlink" title="åˆ¤æ–­å“åº”å¼"></a>åˆ¤æ–­å“åº”å¼</h3><blockquote>
<p>å‡ ä¸ªåˆ¤æ–­æ˜¯å¦å“ªç§å“åº”å¼åˆ›å»ºçš„æ–¹æ³•</p>
</blockquote>
<p>1.<code>isRef</code>: æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä¸€ä¸ª ref å¯¹è±¡</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> ref1 = <span class="title function_">ref</span>(<span class="number">1</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isRef</span>(ref1))</span><br></pre></td></tr></table></figure>
<p>2.<code>isReactive</code>: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>reactive</code> åˆ›å»ºçš„å“åº”å¼ä»£ç†</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> ref2 = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;å°æµª&#x27;</span>&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(ref2))</span><br></pre></td></tr></table></figure>
<p>3.<code>isReadonly</code>: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>readonly</code> åˆ›å»ºçš„åªè¯»ä»£ç†</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> ref3 = <span class="title function_">readonly</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;å°æµª&#x27;</span>&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReadonly</span>(ref3))</span><br></pre></td></tr></table></figure>
<p>4.<code>isProxy</code>: æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ç”± <code>reactive</code> æˆ–è€… <code>readonly</code> æ–¹æ³•åˆ›å»ºçš„ä»£ç†</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> ref2 = <span class="title function_">reactive</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;å°æµª&#x27;</span>&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isProxy</span>(ref2))</span><br><span class="line"><span class="keyword">let</span> ref3 = <span class="title function_">readonly</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;å°æµª&#x27;</span>&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isProxy</span>(ref3))</span><br></pre></td></tr></table></figure>
<h3 id="customRef"><a href="#customRef" class="headerlink" title="customRef"></a><code>customRef</code></h3><p>ä¸Šé¢æåˆ°äº†è¿™ä¹ˆå¤šçš„ <code>Ref</code> éƒ½æ˜¯ Vue å¸®æˆ‘ä»¬å†…ç½®çš„ï¼Œ</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>customRef</code> å®ç°æˆ‘ä»¬è‡ªå·±çš„ <code>Ref</code></p>
<blockquote>
<p>åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ refï¼Œå¹¶å¯¹å…¶ä¾èµ–é¡¹è·Ÿè¸ªå’Œæ›´æ–°è§¦å‘è¿›è¡Œæ˜¾å¼æ§åˆ¶ã€‚å®ƒéœ€è¦ä¸€ä¸ªå·¥å‚å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥æ”¶ <code>track</code> å’Œ <code>trigger</code> å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶åº”è¿”å›ä¸€ä¸ªå¸¦æœ‰ <code>get</code> å’Œ <code>set</code> çš„å¯¹è±¡ã€‚</p>
</blockquote>
<p>å®˜æ–¹æ–‡æ¡£ç»™äº†ä¸€ä¸ªé˜²æŠ–çš„ä¾‹å­ï¼Œæˆ‘ä»¬ä¹Ÿå†™ä¸ªæ¥çœ‹</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>App<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;keyword&quot;</span>/&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;keyword&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  customRef</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">function</span> useDebouncedRef&lt;T&gt;(<span class="attr">value</span>: T, delay = <span class="number">200</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">let</span> <span class="attr">timeout</span>: number</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">return</span> <span class="title function_">customRef</span>(<span class="function">(<span class="params">track, trigger</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">get</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">track</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> value</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">set</span>(<span class="params">newValue: T</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="built_in">clearTimeout</span>(timeout)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        timeout = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          value = newValue</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="title function_">trigger</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;, delay)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">setup</span> () &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> keyword = <span class="title function_">useDebouncedRef</span>(<span class="string">&#x27;&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      keyword</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h3 id="shallowRef-å’Œ-shallowReactive"><a href="#shallowRef-å’Œ-shallowReactive" class="headerlink" title="shallowRef å’Œ shallowReactive"></a><code>shallowRef</code> å’Œ <code>shallowReactive</code></h3><p>æµ…çš„å“åº”å¼ï¼Œä¸€èˆ¬ç”¨çš„ä¸å¤šï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>ref</code> å’Œ <code>reactive</code> æ¯”è¾ƒå¤š</p>
<blockquote>
<p><code>shallowReactive</code></p>
</blockquote>
<p>å¯¹è±¡ç»“æ„å¤šå±‚åµŒå¥—ï¼Œä½†æ˜¯æˆ‘ä»¬çš„éœ€æ±‚åªéœ€è¦ä¿®æ”¹æœ€å¤–å±‚çš„æ•°æ®ï¼Œå°±ä¸ç”¨æŠŠé‡Œé¢çš„åµŒå¥—ç»“æ„éƒ½è½¬ä¸ºå“åº”å¼ï¼Œè¿™æ ·ä½¿ç”¨æµ…çš„å“åº”å¼æé«˜æ€§èƒ½ï¼Œåªæœ‰æœ€å¤–ä¸€å±‚æ˜¯å“åº”å¼</p>
<p>æ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œæˆ‘è¿™å°±é‡Œå°±ä¸ä¸¾ä¾‹å­äº†</p>
<blockquote>
<p><code>shallowRef</code></p>
</blockquote>
<p>æˆ‘ä»¬ä¹‹å‰è¯´è¿‡ <code>ref</code> ä¹Ÿèƒ½ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œå®é™…ä¸Šè¿˜æ˜¯è°ƒç”¨ <code>reactive</code> è¿”å› <code>Proxy</code> ä»£ç†å¯¹è±¡ï¼Œå¦‚æœå†…å±‚è¿˜æœ‰å¯¹è±¡ï¼Œè¿˜æ˜¯ä½¿ç”¨ <code>reactive</code> è¿›è¡Œå¤„ç†</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">ref</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;å°æ˜&#x27;</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">reactive</span>(&#123; <span class="attr">value</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;å°æ˜&#x27;</span> &#125; &#125;)</span><br></pre></td></tr></table></figure>
<p>åŒæ ·çš„ <code>shallowRef</code> å¤„ç† å¯¹è±¡ç±»å‹ï¼Œæ˜¯äº¤ç»™ <code>shallowReactive</code> å»å®Œæˆ</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">shallowRef</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;å°æ˜&#x27;</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">shallowReactive</span>(&#123; <span class="attr">value</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;å°æ˜&#x27;</span> &#125; &#125;)</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å­æˆ‘ä»¬å°±æ˜ç™½äº†ï¼Œä¸ºå•¥ åªå¤„ç†äº† <code>value</code> çš„å“åº”å¼ï¼Œä¸è¿›è¡Œå¯¹è±¡çš„ <code>reactive</code>å¤„ç†ï¼Œé€‚ç”¨äºä¼šè¢«æ›¿æ¢çš„æ•°æ®</p>
<p><code>ã€æ³¨æ„ã€‘</code>ï¼š<code>shallowRef</code> åˆ›å»ºä¸€ä¸ª <code>ref</code> ï¼Œå°†ä¼šè¿½è¸ªå®ƒçš„ <code>value</code> æ›´æ”¹æ“ä½œï¼Œä½†æ˜¯å¹¶ä¸ä¼šå¯¹å˜æ›´åçš„ <code>value</code> åšå“åº”å¼ä»£ç†è½¬æ¢</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> info1 = <span class="title function_">ref</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;å°æµª&#x27;</span>,</span><br><span class="line">    <span class="attr">notebook</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;å°ç±³ç¬”è®°æœ¬&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">let</span> info2 = <span class="title function_">shallowRef</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;å°æ˜&#x27;</span>,</span><br><span class="line">    <span class="attr">notebook</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;å°ç±³ç¬”è®°æœ¬&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(info1, info2)</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    info1,</span><br><span class="line">    info2,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æ¥æ‰“å°ä¸‹ä¸¤ä¸ªå¯¹è±¡</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2d3bce8ea859452dbea0388766f8308c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210812113721281"></p>
<p>å¯ä»¥çœ‹è§çš„æ˜¯ <code>Ref</code> çš„ <code>value</code> å€¼æ˜¯ç”¨ <code>reactive</code> è¿”å›çš„ <code>Proxy</code> å¯¹è±¡ï¼Œ</p>
<p><code>shallowRef</code> çš„ <code>value</code> æ˜¯æ™®é€šå¯¹è±¡</p>
<h3 id="readonly-å’Œ-shallowReadonly"><a href="#readonly-å’Œ-shallowReadonly" class="headerlink" title="readonly å’Œ shallowReadonly"></a><code>readonly</code> å’Œ <code>shallowReadonly</code></h3><blockquote>
<p><code>readonly</code> æ·±åº¦åªè¯»</p>
</blockquote>
<p>è®¾ç½®æ™®é€šå¯¹è±¡æˆ–è€…æ˜¯å“åº”å¼å¯¹è±¡ä¸ºåªè¯»ï¼Œä¸èƒ½è¿›è¡Œä¿®æ”¹ï¼Œçœ‹ä¸Šé¢çš„åå­—å°±çŸ¥é“æ˜¯æ·±åº¦çš„ï¼Œæ·±åº¦æ˜¯ä»€ä¹ˆæ¦‚å¿µå¤§å®¶å·®ä¸å¤šéƒ½æ¸…æ¥šï¼Œé€’å½’æŠŠå†…å±‚çš„æ¯ä¸€ä¸ªå±æ€§éƒ½è®¾ç½®ä¸ºåªè¯»ï¼Œè¿›è¡Œä¿®æ”¹æ“ä½œå°±ä¼šæŠ¥é”™ï¼Œæé«˜äº†å®‰å…¨æ€§</p>
<p>åŸºæœ¬ä½¿ç”¨ï¼š</p>
<p>ç”¨ä»€ä¹ˆå°±å¯¼å…¥ä»€ä¹ˆ</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineComponent, readonly &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br></pre></td></tr></table></figure>
<p>æœç„¶åœ¨ç¼–è¯‘ä¹‹å‰å°±æŠ¥é”™äº† <code>Error</code>: <code>æ— æ³•åˆ†é…åˆ° &quot;name&quot; ï¼Œå› ä¸ºå®ƒæ˜¯åªè¯»å±æ€§</code></p>
<p>æ— è®ºæ˜¯å†…å±‚è¿˜æ˜¯å¤–å±‚éƒ½åªè¯»ï¼Œæ˜¯æ·±åº¦æ£€æµ‹çš„</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/44875ed772764e8c9ccbf2eefc863c0e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210812121429275"></p>
<blockquote>
<p><code>shallowReadonly</code> æµ…åº¦åªè¯»</p>
</blockquote>
<p>æµ…åº¦çš„è¯åªé’ˆå¯¹æœ€å¤–é¢ä¸€å±‚ä¸å…³å¿ƒ å†…å±‚</p>
<p>å¯ä»¥çœ‹ä¸‹é¢çš„ä¾‹å­ åªæœ‰å¤–å±‚çš„ <code>name</code> æŠ¥é”™ï¼Œä¿®æ”¹å†…å±‚æ²¡æœ‰é”™è¯¯</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d6262c6d96b44fcdb7012bd7f8da863e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210812121747662"></p>
<h3 id="toRaw-å’Œ-markRaw"><a href="#toRaw-å’Œ-markRaw" class="headerlink" title="toRaw å’Œ markRaw"></a><code>toRaw</code> å’Œ <code>markRaw</code></h3><blockquote>
<p>è¿™ä¸¤ä¸ªç”¨çš„è¿˜æ˜¯æ¯”è¾ƒå°‘</p>
</blockquote>
<p>æˆ‘è¿™é‡Œå°±ç®€å•çš„è¿‡ä¸€ä¸‹</p>
<blockquote>
<p><code>toRaw</code>: å°†ä¸€ä¸ªå“åº”å¼å¯¹è±¡è½¬ä¸ºæ™®é€šå¯¹è±¡</p>
</blockquote>
<p>ç®€å•ä½¿ç”¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> info1 = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;å°æµª&#x27;</span>,</span><br><span class="line">    <span class="attr">notebook</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;å°ç±³ç¬”è®°æœ¬&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">const</span> rawInfo = <span class="title function_">toRaw</span>(info1)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(info1)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(rawInfo)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0d99a9bfaa684c269495f99a48945ae7~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210812123328497"></p>
<p>ä¸¤ä¸ªæ‰“å°å‡ºæ¥ï¼Œä¸€ä¸ªæ˜¯å“åº”å¼å¯¹è±¡ï¼Œé€šè¿‡ <code>toRaw</code> åå˜æˆäº†æ™®é€šå¯¹è±¡</p>
<blockquote>
<p><code>markRaw</code>: æ ‡è®°ä¸€ä¸ªå¯¹è±¡ï¼Œè®©å®ƒæ°¸è¿œä¸ä¼šè½¬ä¸ºå“åº”å¼å¯¹è±¡ï¼Œè¿”å›å€¼æ˜¯æœ¬èº«</p>
</blockquote>
<p>æ¯”å¦‚ï¼š ä¸€äº›ä¸å˜çš„æ•°æ®æ­»æ•°æ®ï¼Œè¿˜æœ‰ä¸€äº›ç¬¬ä¸‰æ–¹ç±»å®ä¾‹ï¼Œä¸ç”¨è½¬ä¸ºå“åº”å¼å¯¹è±¡ï¼Œæé«˜æ€§èƒ½</p>
<p>ç®€å•ä½¿ç”¨ï¼š</p>
<p>è¿™é‡Œä½¿ç”¨ ä¸¤ä¸ªä¸€æ ·çš„å¯¹è±¡ï¼Œä¸€ä¸ªè¿›è¡Œ <code>markRaw</code> å¤„ç†ï¼Œä¸€ä¸ªä¸è¿›è¡Œ <code>markRaw</code> å¤„ç†</p>
<p>ç„¶ååŒæ ·ä½¿ç”¨ <code>reactive</code> è½¬ä¸º å“åº”å¼</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;å°æµª&#x27;</span>,</span><br><span class="line">    <span class="attr">notebook</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;å°ç±³ç¬”è®°æœ¬&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> markRawObj = <span class="title function_">markRaw</span>(obj)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> reactObj = <span class="title function_">reactive</span>(markRawObj)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> obj2 = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;å°æµª&#x27;</span>,</span><br><span class="line">    <span class="attr">notebook</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;å°ç±³ç¬”è®°æœ¬&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> reactObj2 = <span class="title function_">reactive</span>(obj2)</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(reactObj)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(reactObj2)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹çœ‹æ‰“å°çš„ï¼Œè¢«æ ‡è®°è¿‡çš„ <code>obj</code> å¹¶æ²¡æœ‰è½¬ä¸º <code>Proxy</code> å“åº”å¼ä»£ç†å¯¹è±¡</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/04c6d80e6fb74a4d81b5e3167010ef79~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210812124720404"></p>
<h3 id="computed-è®¡ç®—å±æ€§"><a href="#computed-è®¡ç®—å±æ€§" class="headerlink" title="computed è®¡ç®—å±æ€§"></a><code>computed</code> è®¡ç®—å±æ€§</h3><p>åœ¨<code>Vue3</code>ä¸­ä½¿ç”¨<code>computed</code> å’Œ<code>Vue2.X</code> æœ‰äº›ä¸åŒï¼Œè¿™é‡Œ <code>computed</code>æ˜¯ä¸€ä¸ªæ–¹æ³•</p>
<blockquote>
<p>é¦–å…ˆè¿˜æ˜¯å¾—å¯¼å…¥ <code>computed</code> æ–¹æ³•</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineComponent, computed &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>å‚æ•°ä¸ºä¸€ä¸ªå›è°ƒ é»˜è®¤ä¸º <code>get</code></p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;age&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;getInfo&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;å°æµª&#x27;</span>)</span><br><span class="line">    <span class="keyword">let</span> age = <span class="title function_">ref</span>(<span class="number">21</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> getInfo = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`æˆ‘çš„åå­—ï¼š<span class="subst">$&#123;name.value&#125;</span>,ä»Šå¹´<span class="subst">$&#123;age.value&#125;</span>ï¼Œè¯·å¤šå¤šæŒ‡æ•™`</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        name,</span><br><span class="line">        age,</span><br><span class="line">        getInfo,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/336f33d348ed4e908e016a8c9eacb796~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="37"></p>
<p>è¿™é‡Œæ²¡æœ‰å®ç° <code>set</code> æ–¹æ³•ï¼Œæ‰€ä»¥ä¿®æ”¹ä¸‹é¢æ²¡æœ‰ç”¨</p>
<blockquote>
<p>å‚æ•°ä¸ºä¸€ä¸ª<strong>å¯¹è±¡</strong> åœ¨è¿™é‡Œå†™ <code>get``set</code></p>
</blockquote>
<p>æ¨¡æ¿å’Œä¸Šé¢ä¸€æ ·</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;å°æµª&#x27;</span>)</span><br><span class="line">    <span class="keyword">let</span> age = <span class="title function_">ref</span>(<span class="number">21</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> getInfo = <span class="title function_">computed</span>(&#123;</span><br><span class="line"></span><br><span class="line">        <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;name.value&#125;</span>,<span class="subst">$&#123;age.value&#125;</span>`</span></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="title function_">set</span>(<span class="params">val: string</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> arr = val.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">            name.<span class="property">value</span> = arr\[<span class="number">0</span>\]</span><br><span class="line">            age.<span class="property">value</span> = <span class="built_in">parseInt</span>(arr\[<span class="number">1</span>\])</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        name,</span><br><span class="line">        age,</span><br><span class="line">        getInfo,</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bb1487dddb3f425e9d9aa2460d202b5c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="38"></p>
<h3 id="watch-ä¾¦å¬å™¨"><a href="#watch-ä¾¦å¬å™¨" class="headerlink" title="watch ä¾¦å¬å™¨"></a><code>watch</code> ä¾¦å¬å™¨</h3><p>å’Œ Vue2.X çš„ Watch ä½¿ç”¨æ–¹æ³•å·®ä¸å¤š</p>
<blockquote>
<p>ä»‹ç»</p>
</blockquote>
<p>watch(data,handler,object)</p>
<ol>
<li><code>data</code>ï¼šå¯ä»¥æ˜¯è¿”å›å€¼çš„ <code>getter</code> å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯ <code>ref</code></li>
<li><code>handler</code>ï¼šå›è°ƒå‡½æ•°</li>
<li><code>object</code>ï¼šå¯é€‰é…ç½®é¡¹ <code>&#123; immediate: true &#125;</code></li>
</ol>
<blockquote>
<p>å¼•å…¥</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineComponent, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>data</code> ä¸ºä¸€ä¸ª <code>ref</code></p>
</blockquote>
<p>å›è°ƒå‡½æ•°çš„å‚æ•°æ˜¯ (æ–°å€¼,æ—§å€¼)</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;å°æµª&#x27;</span>)</span><br><span class="line">    <span class="keyword">let</span> age = <span class="title function_">ref</span>(<span class="number">21</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> watchName = <span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="title function_">watch</span>(name, <span class="function">(<span class="params">newName, oldName</span>) =&gt;</span> &#123;</span><br><span class="line">        watchName.<span class="property">value</span> = <span class="string">`æˆ‘æ˜¯æ–°å§“å<span class="subst">$&#123;newName&#125;</span></span></span><br><span class="line"><span class="string">		æˆ‘æ˜¯è€å§“å<span class="subst">$&#123;oldName&#125;</span>`</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        name,</span><br><span class="line">        age,</span><br><span class="line">        watchName,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a7d69bf6172f4f68be61571853880c41~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image-20210811204502523"></p>
<p>å¯ä»¥çœ‹è§é¡µé¢ç¬¬ä¸‰æ æ²¡æœ‰æ˜¾ç¤ºï¼Œå› ä¸º <code>name</code> å€¼æ²¡æœ‰å˜åŒ–ï¼Œæ‰€ä»¥å°±ä¸ç”¨æ”¹å˜ï¼Œ<code>watch</code>çš„ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ é…ç½®å¯¹è±¡ï¼Œæˆ‘ä»¬åœ¨é‡Œé¢å¯ä»¥è®¾ç½® ç«‹å³æ‰§è¡Œ <code>&#123; immediate: true &#125;</code></p>
<p>å°±ä¼šæ‰§è¡Œä¸€æ¬¡ å½“ç„¶è¿™ä¸ªæ—¶å€™ <code>oldName</code> ä¸º <code>undefined</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  name,</span><br><span class="line">  <span class="function">(<span class="params">newName, oldName</span>) =&gt;</span> &#123;</span><br><span class="line">    watchName.<span class="property">value</span> = <span class="string">`æˆ‘æ˜¯æ–°å§“å<span class="subst">$&#123;newName&#125;</span></span></span><br><span class="line"><span class="string">  æˆ‘æ˜¯è€å§“å<span class="subst">$&#123;oldName&#125;</span>`</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">immediate</span>: <span class="literal">true</span> &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3e35c8ce9360449e9edaa4bbaa00336a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="39"></p>
<blockquote>
<p><code>data</code> ä¸ºä¸€ä¸ª <code>getter</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">watch</span>(<span class="function">()=&gt;</span>haha,<span class="function">(<span class="params">newName, oldName</span>)=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>()=\&gt; haha</code> ç›´æ¥è¿”å›ä¸€ä¸ªå€¼ï¼Œç›¸å½“äº <code>getter</code> ç®€å†™,<code>haha</code>å¯ä»¥ä¸æ˜¯å“åº”å¼æ•°æ®</p>
<blockquote>
<p><code>data</code> ä¸ºå¤šä¸ª <code>ref</code></p>
</blockquote>
<p>æ¨¡æ¿è¿˜æ˜¯ä¹‹å‰é‚£ä¸ª</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;age&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;getInfo&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥æŠŠå¤šä¸ª <code>ref</code> æ”¾è¿›ä¸€ä¸ªæ•°ç»„é‡Œé¢</p>
<p><code>newNameAndAge</code>ï¼Œ<code>oldNameAndAge</code>ä¸ºä¸€ä¸ªæ•°ç»„ä¿å­˜ç€ æ–° å’Œ æ—§çš„ [name,age]</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> name = <span class="title function_">ref</span>(<span class="string">&#x27;å°æµª&#x27;</span>)</span><br><span class="line">    <span class="keyword">let</span> age = <span class="title function_">ref</span>(<span class="number">21</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> watchName = <span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="title function_">watch</span>(</span><br><span class="line">      \[name, age\],</span><br><span class="line">      <span class="function">(<span class="params">newNameAndAge, oldNameAndAge</span>) =&gt;</span> &#123;</span><br><span class="line">        watchName.<span class="property">value</span> = <span class="string">`new: <span class="subst">$&#123;newNameAndAge&#125;</span></span></span><br><span class="line"><span class="string">        old: <span class="subst">$&#123;oldNameAndAge&#125;</span>`</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123; <span class="attr">immediate</span>: <span class="literal">true</span> &#125;</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        name,</span><br><span class="line">        age,</span><br><span class="line">        watchName,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/60adfa12c0dc42239985d630a0a9e46d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="40"></p>
<blockquote>
<p><code>data</code> ä¸º <code>reactive</code></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> user = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;å°æµª&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">21</span>,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> watchInfo = <span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="title function_">watch</span>(</span><br><span class="line">    user,</span><br><span class="line">    <span class="function">(<span class="params">newInfo, oldInfo</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(newInfo === oldInfo)</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæ˜¯å¯¹è±¡ ä¼šå‡ºç°é—®é¢˜ï¼Œç«‹å³æ‰§è¡Œåï¼Œ</p>
<p>å¦‚æœåŠ ä¸Š ç«‹å³æ‰§è¡Œ é™¤äº†ç¬¬ä¸€æ¬¡ <code>newInfo</code>ä¸º <code>&#123;name: &#39;å°æµª&#39;,age: 21&#125;</code></p>
<p><code>oldInfo</code> ä¸º <code>undefined</code> ï¼Œä¹‹å<strong>å§‹ç»ˆè¿”å›è¯¥å¯¹è±¡çš„å½“å‰å€¼</strong></p>
<p>æ‰€ä»¥ <code>newInfo</code> = <code>oldInfo</code></p>
<p>å¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¾—åŠ ä¸Šé…ç½®å¯¹è±¡ <code>&#123;deep: true&#125;</code>è¿›è¡Œæ·±åº¦æ£€æµ‹</p>
<p>æ·±åº¦æ£€æµ‹è¿˜å¯ä»¥åˆ¤æ–­å¤šé‡åµŒå¥—</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  user,</span><br><span class="line">  <span class="function">(<span class="params">newInfo, oldInfo</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(newInfo === oldInfo)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">deep</span>: <span class="literal">true</span> &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="watchEffect"><a href="#watchEffect" class="headerlink" title="watchEffect"></a><code>watchEffect</code></h3><p>è¿™ä¸ªä¹Ÿæ˜¯ç”¨æ¥ç›‘å¬æ•°æ®å˜åŒ–ï¼Œé»˜è®¤å°±ä¼šæ‰§è¡Œä¸€æ¬¡æ‰€ä»¥è¿™é‡Œå°±ä¸éœ€è¦é…ç½®ï¼Œè€Œä¸”ä¸ç”¨æŒ‡å®š <code>data</code>,ä½¿ç”¨å“ªäº›å“åº”å¼æ•°æ®å°±ç›‘å¬å“ªäº›</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> user = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;å°æµª&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">21</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">watchEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(user.<span class="property">name</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="provide-inject"><a href="#provide-inject" class="headerlink" title="provide / inject"></a>provide / inject</h3><p>æä¾› å’Œ æ³¨å…¥ æ˜¯å¾ˆç®€å•ç†è§£çš„</p>
<blockquote>
<p>å®ç°è·¨å±‚çº§ç»„ä»¶(ç¥–å­™)é—´é€šä¿¡</p>
</blockquote>
<p>åœ¨å¤šå±‚åµŒå¥—ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œä¸éœ€è¦å°†æ•°æ®ä¸€å±‚ä¸€å±‚åœ°å‘ä¸‹ä¼ é€’</p>
<p>å¯ä»¥å®ç° è·¨å±‚çº§ç»„ä»¶ é€šä¿¡</p>
<p>åœ¨ çˆ¶ç»„ä»¶ä¸­</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> info = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;Vue3å­¦ä¹ &#x27;</span></span><br><span class="line">        <span class="attr">date</span>: <span class="string">&#x27;2021/7/23&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="title function_">provide</span>(<span class="string">&#x27;info&#x27;</span>, info)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        info</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ å­å­™ å±‚çº§ç»„ä»¶ä½¿ç”¨æ³¨å…¥å°±èƒ½å¤Ÿè·å–åˆ°äº†</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> color = <span class="title function_">inject</span>(<span class="string">&#x27;info&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        info</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Teleport-ä¼ é€ç»„ä»¶"><a href="#Teleport-ä¼ é€ç»„ä»¶" class="headerlink" title="Teleport ä¼ é€ç»„ä»¶"></a><code>Teleport</code> ä¼ é€ç»„ä»¶</h3><p>è¿™ä¸ªç»„ä»¶ç‰¹åˆ«æœ‰è¶£ï¼Œå¯ä»¥æŠŠç»„ä»¶è¿›è¡Œä¼ é€</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">teleport</span> <span class="attr">v-if</span>=<span class="string">&quot;flag&quot;</span> <span class="attr">to</span>=<span class="string">&quot;.test&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dog&quot;</span>&gt;</span>ç‹—å­<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">teleport</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>to</code> æ˜¯ç›®æ ‡çš„åœ°å€ <code>body</code> , <code>#XXX</code> , <code>.XXX</code> è¿™äº›éƒ½æ˜¯ <code>css</code> é€‰æ‹©å™¨</p>
<p>ä¸‹é¢å†™ä¸ªä¾‹å­å¤§å®¶çœ‹ä¸‹å°±æ˜ç™½äº†</p>
<blockquote>
<p>æ¨¡æ¿</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;li_1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;li_2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;li_3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">teleport</span> <span class="attr">:to</span>=<span class="string">&quot;target&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://img0.baidu.com/it/u=3077713857,1222307962&amp;fm=26&amp;fmt=auto&amp;gp=0.jpg&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">teleport</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btnGroup&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;target = &#x27;.li_1&#x27;&quot;</span>&gt;</span>ä¼ é€1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;target = &#x27;.li_2&#x27;&quot;</span>&gt;</span>ä¼ é€2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;target = &#x27;.li_3&#x27;&quot;</span>&gt;</span>ä¼ é€3<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>setup</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> target = <span class="title function_">ref</span>(<span class="string">&#x27;.li_1&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    target,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>åˆ©ç”¨ æŒ‰é’® ç‚¹å‡»æ¥æ§åˆ¶ <code>teleport</code> æ˜¯å¦æ˜¾ç¤ºï¼Œ <code>teleport</code> ä¸€æ¸²æŸ“ï¼Œå°±ä¼šè·‘åˆ° <code>li</code> ä¸‹é¢</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/083b7f7bcd8b46179188e4a5cfc31454~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="42"></p>
<h3 id="Vue3-ç”Ÿå‘½å‘¨æœŸ"><a href="#Vue3-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Vue3 ç”Ÿå‘½å‘¨æœŸ"></a><code>Vue3</code> ç”Ÿå‘½å‘¨æœŸ</h3><blockquote>
<p><code>Vue2.X</code> å¯¹åº” <code>Vue3</code>ç»„åˆAPI</p>
</blockquote>
<div class="table-container">
<table>
<thead>
<tr>
<th><code>Vue2.X</code></th>
<th><code>Vue3</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>beforeCreate</td>
<td>â€”-&gt;</td>
<td><code>setup()</code></td>
</tr>
<tr>
<td>created</td>
<td>â€”-&gt;</td>
<td><code>setup()</code></td>
</tr>
<tr>
<td>beforeMount</td>
<td>â€”-&gt;</td>
<td>onBeforeMount</td>
</tr>
<tr>
<td>mounted</td>
<td>â€”-&gt;</td>
<td>onMounted</td>
</tr>
<tr>
<td>beforeUpdate</td>
<td>â€”-&gt;</td>
<td>onBeforeUpdate</td>
</tr>
<tr>
<td>updated</td>
<td>â€”-&gt;</td>
<td>onUpdated</td>
</tr>
<tr>
<td>beforeDestroy</td>
<td>â€”-&gt;</td>
<td><code>onBeforeUnmount</code></td>
</tr>
<tr>
<td>destroyed</td>
<td>â€”-&gt;</td>
<td><code>onUnmounted</code></td>
</tr>
<tr>
<td>activated</td>
<td>â€”-&gt;</td>
<td>onActivated</td>
</tr>
<tr>
<td>deactivated</td>
<td>â€”-&gt;</td>
<td>onDeactivated</td>
</tr>
<tr>
<td>errorCaptured</td>
<td>â€”-&gt;</td>
<td>onErrorCaptured</td>
</tr>
<tr>
<td>onRenderTriggered</td>
</tr>
<tr>
<td>onRenderTracked</td>
</tr>
</tbody>
</table>
</div>
<p>å¯ä»¥çœ‹å‡º</p>
<p><code>beforeCreate</code> å’Œ <code>created</code> åœ¨Vu3è¿˜æ˜¯èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œåœ¨Vue3æˆ‘ä»¬å¯ä»¥ç”¨æ›´å¥½æ›´å¿«çš„ <code>setup</code> ä»£æ›¿</p>
<p><code>on</code>å¼€å¤´çš„ ç”Ÿå‘½å‘¨æœŸéœ€è¦ é€šè¿‡ <code>import</code> å¯¼å…¥ï¼Œåœ¨ <code>setup</code> å‡½æ•°ä¸­ä½¿ç”¨</p>
<p><code>Vue3</code> çš„ç”Ÿå‘½å‘¨æœŸ æ¯” <code>Vue2.X</code> çš„ç”Ÿå‘½å‘¨æœŸå¿«</p>
<p>ä¸¾ä¸ªä¾‹å­: <code>onBeforeMount</code> æ¯” <code>beforeMount</code> å¿« å…¶ä»–åŒç†</p>
<p>è¿˜å¤šä¸ªä¸¤ä¸ªé’©å­:</p>
<ul>
<li><code>onRenderTriggered</code> è·Ÿè¸ªè™šæ‹Ÿ DOM é‡æ–°æ¸²æŸ“æ—¶è°ƒç”¨</li>
<li><code>onRenderTracked</code> å½“è™šæ‹Ÿ DOM é‡æ–°æ¸²æŸ“è¢«è§¦å‘æ—¶è°ƒç”¨</li>
</ul>
<h3 id="å…¨å±€API-è½¬ç§»"><a href="#å…¨å±€API-è½¬ç§»" class="headerlink" title="å…¨å±€API è½¬ç§»"></a>å…¨å±€<code>API</code> è½¬ç§»</h3><p><code>Vue2.X</code> ä¸­ <code>Vue</code> ä¸Šé¢çš„å…¨å±€API ï¼Œæ¯”å¦‚è‡ªå®šä¹‰æŒ‡ä»¤ <code>Vue.directive</code>ï¼Œå…¨å±€ç»„ä»¶ <code>Vue.component</code> åœ¨Vue3éƒ½è¿›è¡Œæ”¹å˜ï¼Œä¸å†æä¾› <code>Vue</code> ï¼Œè€Œæ˜¯æä¾› <code>app</code></p>
<p>å…·ä½“æ”¹å˜å¯ä»¥çœ‹ä¸‹é¢</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Vue2.X</th>
<th>Vue3</th>
</tr>
</thead>
<tbody>
<tr>
<td>Vue.config</td>
<td>app.config</td>
</tr>
<tr>
<td>Vue.config.productionTip</td>
<td>ç§»é™¤</td>
</tr>
<tr>
<td>Vue.config.ignoredElements</td>
<td>app.config.isCustomElement</td>
</tr>
<tr>
<td>Vue.component</td>
<td>app.component</td>
</tr>
<tr>
<td>Vue.directive</td>
<td>app.directive</td>
</tr>
<tr>
<td>Vue.mixin</td>
<td>app.mixin</td>
</tr>
<tr>
<td>Vue.use</td>
<td>app.use</td>
</tr>
<tr>
<td>Vue.prototype</td>
<td>app.config.globalProperties</td>
</tr>
<tr>
<td>new Vue().$mount(â€˜#appâ€™)</td>
<td>createApp(App).mount(â€˜#appâ€™)</td>
</tr>
</tbody>
</table>
</div>
<h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>åˆ°äº†è¿™é‡Œæˆ‘ä»¬åŸºæœ¬éƒ½äº†è§£äº† <code>Vue3</code> çš„ä¸€äº›ç‰¹æ€§</p>
<ul>
<li>æ–°çš„è„šæ‰‹æ¶å·¥å…·<code>vite</code></li>
<li>åœ¨ <code>Vue3</code> ä»ç„¶æ”¯æŒ <code>Vue2</code> ä¸­çš„å¤§å¤šæ•°ç‰¹æ€§</li>
<li><code>Vue</code> ç»„åˆ<code>APi</code>ä»£æ›¿äº†<code>Vue2</code>ä¸­çš„<code>option API</code> ï¼ŒåŒä¸€é€»è¾‘é›†ä¸­èµ·æ¥ï¼Œå¤ç”¨æ€§æ›´å¼ºäº†</li>
<li><code>Vue3</code> ä½¿ç”¨ <code>TS</code> ç¼–å†™æ›´å¥½çš„æ”¯æŒTS</li>
<li><code>Vue3</code> ä½¿ç”¨<code>Proxy</code> ä»£æ›¿äº†<code>Vue2</code>ä¸­<code>Object.defineProperty()</code> å®ç°å“åº”å¼åŸç†</li>
<li>ä»‹ç»äº†æ–°çš„ç»„ä»¶: <code>Fragment``Teleport``Suspense</code></li>
</ul>
<p>è¿™é‡Œè¿˜æ²¡æœ‰æåˆ°çš„ <code>Vue3</code> é‡å†™äº† <strong>è™šæ‹ŸDOM</strong> ï¼Œæé«˜äº†æ€§èƒ½</p>
<p>å¸Œæœ›è¿™ç¯‡ç¬”è®°èƒ½å¤Ÿå¸®åŠ©åˆ°å¤§å®¶ï¼Œå¦‚æœæˆ‘å†™çš„ä¸æ¸…æ¥šï¼Œå…·ä½“çš„è¿˜å¾—çœ‹ <code>å®˜æ–¹æ–‡æ¡£</code> yydsï¼Œæœ€è¿‘å¼€å­¦äº†ï¼Œå­¦æ ¡é‡Œé¢çš„äº‹æƒ…ä¹Ÿå¤šäº†â€¦</p>
<p>(oã‚œâ–½ã‚œ)oâ˜†</p>
<blockquote>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
</blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fvue3js.cn%2Fdocs%2Fzh" title="https://vue3js.cn/docs/zh">Vue3å®˜ç½‘æ–‡æ¡£</a></p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1Zy4y1K7SH%3Fp%3D156" title="https://www.bilibili.com/video/BV1Zy4y1K7SH?p=156">Bç«™èµ„æ–™</a></p>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Vue3</tag>
        <tag>Composition API</tag>
      </tags>
  </entry>
</search>
